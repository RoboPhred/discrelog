(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{1235:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,zN:()=>o,ke:()=>r});const i="@node/interact",o=(e,t)=>({type:i,payload:{circuitNodeIdPath:e,data:t}});function r(e){return e.type===i}},5766:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});const i=4},3667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:[],outputPins:["OUT"],interact:(e,t)=>void 0===t?{transitions:[{tickOffset:1,valuesByPin:{OUT:!0}},{tickOffset:1+Math.round(1.5*i.v),valuesByPin:{OUT:!1}}]}:t?{transitions:{tickOffset:1,valuesByPin:{OUT:!0}}}:{transitions:{tickOffset:1,valuesByPin:{OUT:!1}}}}},2318:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const i={toggleState:!1},o={inputPins:[],outputPins:["OUT"],interact(e=i){const t=!e.toggleState;return{state:Object.assign({},e,{toggleState:t}),transitions:{tickOffset:1,valuesByPin:{OUT:t}}}},evolve:(e=i)=>({state:e,transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},7909:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.A&&t.B}}})}},274:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.IN}}})}},4347:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!(t.A&&t.B)}}})}},8112:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!(t.A||t.B)}}})}},6559:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!t.IN}}})}},2649:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.A||t.B}}})}},8881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},6567:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},4257:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},4420:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:[],outputPins:["OUT"],evolve:()=>({transitions:{tickOffset:1,valuesByPin:{OUT:!0}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{tQ:()=>o,Ds:()=>r,rG:()=>c,NG:()=>s,R9:()=>l,VE:()=>a,Fv:()=>d,Ih:()=>u,bA:()=>p,Qu:()=>m,gQ:()=>y,ZO:()=>f,sj:()=>g,kg:()=>h,PL:()=>I,nF:()=>E,G0:()=>b,kK:()=>v});var i=n(7516);const o=i.Ry().shape({x:i.Rx().required(),y:i.Rx().required()}),r=Object.freeze({x:0,y:0}),c=Object.freeze({p1:r,p2:r});function s(e){return{p1:{x:e[0],y:e[1]},p2:{x:e[2],y:e[3]}}}function l(e,t){return{x:Math.round(e.x/t)*t,y:Math.round(e.y/t)*t}}function a(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function d(e){const t=a(e);return{x:e.x/t,y:e.y/t}}function u(e,t){return e.x*t.x+e.y*t.y}function p(e,t){return{x:e.x*t,y:e.y*t}}function m(...e){let t,n;if(1===e.length){const i=e[0];t=i.p1,n=i.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function y(e,t){return{p1:f(e.p1,t),p2:f(e.p2,t)}}function f(e,t){return{x:e.x+t.x,y:e.y+t.y}}function g(e,t){return{x:e.x-t.x,y:e.y-t.y}}function h(e,t){return e.x===t.x&&e.y===t.y}function I(e,t){return!((t=m(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function E(e){return{width:(e=m(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function b(e,t){return e=m(e),t=m(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function v(e,t){return e=m(e),t=m(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}},6151:(e,t,n)=>{"use strict";var i=n(7294),o=n(3935),r=n(1033),c=n(9242),s=n(6550),l=n(862),a=n(7865);const d=(0,n(9731).q_)(),u=Object.freeze({dragMode:null}),p="root",m="root-editor",y={circucitEditorsById:{[m]:{circuitId:p,circuitNodeIdPath:[]}},activeEditorId:null},f=Object.freeze(y),g={circuitNamesByCircuitId:{[p]:"Root"},nodeIdsByCircuitId:{[p]:[]}},h=Object.freeze(g);var I=n(8370);const E=Object.freeze({clipboardNodes:[],clipboardPasteOrigin:I.Ds}),b=Object.freeze({dialogType:null,data:null}),v=Object.freeze({nodesById:{},connectionsById:{}}),k=Object.freeze({nodePositionsById:{},wireJointIdsByConnectionId:{},wireJointPositionsByJointId:{}}),O=Object.freeze({projectName:"New Project",projectModified:!1}),N=Object.freeze({selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}),C=Object.freeze({initialized:!1,tick:0,lastTickProcessingTimeMs:0,nodeStatesByNodeId:{},nodeOutputValuesByNodeId:{},transitionsById:{},transitionWindows:[]}),j=Object.freeze({mode:"edit",ticksPerSecond:1e3}),x=Object.freeze({activeTutorial:null,annotatedElements:[],preTutorialState:null});var w=n(7361),P=n.n(w);function B(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function M(...e){return S(e[0],e.slice(1,e.length-1).map(String),e[e.length-1])}function S(e,t,n){if(0===t.length)return"function"==typeof n?n(e):n;const i=t.slice(0,t.length-1).map(String),o=t[t.length-1],r=z(e);let c=r;for(const e of i)c[e]=z(c[e]),c=c[e];return c[o]="function"==typeof n?n(c[o]):n,r}function z(e){return Array.isArray(e)?e.slice():Object.assign({},e)}function T(e){return Boolean(e)}const R="fill-parent--3pw6U",L={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"};var D=n(8721),J=n.n(D);function W(e){return"string"==typeof e?{windowId:e}:e}function A(e){return J()(e,"windowId")}function U(e){return J()(e,"first")&&J()(e,"second")&&J()(e,"direction")}function Z(e){return"number"==typeof e?{firstPercent:e}:e}function F(e){return J()(e,"firstPercent")}function H(e){return J()(e,"firstSize")||J()(e,"secondSize")}var K=n(3493),q=n.n(K);function $(e){const t=i.useRef(e);return i.useEffect((()=>{t.current=e})),t}const G={tessel:"tessel--2Q3Xd","tessel-content":"tessel-content--3-kEA","tessel-drop-capture":"tessel-drop-capture--3TbuI","tessel-drop-capture--dragging":"tessel-drop-capture--dragging--Ihwyz","tessel-drop-marker":"tessel-drop-marker--1cqr2","drop-left":"drop-left--wqP1V","drop-right":"drop-right--2MyGz","drop-top":"drop-top--1S0co","drop-bottom":"drop-bottom--2f330","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C","tessel-window":"tessel-window--1qDgp","tessel-window-titlebar":"tessel-window-titlebar--uHBdn","tessel-window-title":"tessel-window-title--2v0hT","tessel-window-controls":"tessel-window-controls--3i3ou","tessel-window-controls-close":"tessel-window-controls-close--2O8Zs","tessel-window-content":"tessel-window-content--sOnG-"},V=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),_=({direction:e,onChangePercentage:t})=>{const n=i.useRef(null),o=i.useRef(null),r=$(e),c=$(t),s=i.useMemo((()=>q()((e=>{var t,i;if(null==o.current||null==n.current)return;const s=null!==(i=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==i?i:V;let l=0,a=0;"row"===r.current?(a=e.pageX-s.left,l=a/s.width,isNaN(l)?(l=0,a=s.left):l>1&&(l=1,a=s.right)):(a=e.pageY-s.top,l=a/s.height,isNaN(l)?(l=0,a=s.top):l>1&&(l=1,a=s.bottom)),c.current(100*l,a)}),1e3/60,{leading:!0})),[r,c]),l=i.useCallback((e=>{e.persist(),s(e)}),[s]),a=i.useCallback((e=>{!e.defaultPrevented&&n.current&&(o.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),o.current=e.pointerId))}),[]),d=i.useCallback((()=>{n.current&&o.current&&(n.current.releasePointerCapture(o.current),o.current=null)}),[]);return i.createElement("div",{ref:n,className:B("tessel-split",G["tessel-split"],G["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:a,onPointerMove:l,onPointerUp:d})},Y=i.createContext([]);function X(){return i.useContext(Y)}const Q=({pathKey:e,children:t})=>{const n=X(),o=i.useMemo((()=>[...n,e]),[n,e]);return i.createElement(Y.Provider,{value:o},t)};function ee(){}const te=i.createContext({moveWindow:ee,closeWindow:ee});function ne(){return i.useContext(te)}const ie=({moveWindow:e,closeWindow:t,children:n})=>{const o=i.useMemo((()=>({moveWindow:e,closeWindow:t})),[e,t]);return i.createElement(te.Provider,{value:o},n)};function oe(e,t,n){return F(e)?{firstPercent:t}:H(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const re=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:o,first:r,second:c,division:s}=e,l="row"===o?"width":"height",a=i.useCallback(((t,i)=>{const o=Z(e.division);n(Object.assign(Object.assign({},e),{division:oe(o,t,i)}))}),[e,n]),d=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),u=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),p=Z(s);let m="50%",y="50%",f=!1,g=!1;if(F(p)){const{firstPercent:e}=p;m=e+"%",y=100-e+"%"}else if(H(p)){const{firstSize:e,secondSize:t}=p;e?(m=e+"px",f=!0,y="100%"):(m="100%",y=t+"px",g=!0)}return i.createElement("div",{className:B(R,L["row"===o?"flex-row":"flex-column"])},i.createElement("div",{className:B(f?L["flexitem-fix"]:L["flexitem-shrink"]),style:{[l]:m}},i.createElement(Q,{pathKey:"first"},i.createElement(ce,{value:r,renderWindow:t,onLayoutChange:d}))),i.createElement(_,{direction:o,onChangePercentage:a}),i.createElement("div",{className:B(g?L["flexitem-fix"]:L["flexitem-shrink"]),style:{[l]:y}},i.createElement(Q,{pathKey:"second"},i.createElement(ce,{value:c,renderWindow:t,onLayoutChange:u}))))},ce=({value:e,renderWindow:t,onLayoutChange:n})=>{const o=W(e);return A(o)?t(o):U(o)?i.createElement(re,{item:o,renderWindow:t,onLayoutChange:n}):null};function se(e){return Array.isArray(e)?e:[e]}function le(e,t){return e===t||e.length===t.length&&e.every(((e,n)=>t[n]===e))}function ae(e,t){const n=e.slice(0,t);for(let i=t+1;i<e.length;i++)n.push(e[i]);return n}function de(e){const[t,n]=i.useState({left:0,top:0,right:0,bottom:0,width:0,height:0});return i.useLayoutEffect((()=>{if(!e.current)return;const t=new r.Z((()=>{const t=e.current;if(!t)return;const i=t.getBoundingClientRect();n({top:i.top,left:i.left,right:i.right,bottom:i.bottom,width:i.width,height:i.height})}));return t.observe(e.current),()=>{t.disconnect()}}),[e]),t}Object.freeze([]);var ue=n(9240);const pe="@tessel/window",me=e=>({type:pe,payload:{path:e}});function ye(e){return e.type===pe}const fe=i.forwardRef((({className:e,id:t,children:n},o)=>{const r=X(),{moveWindow:c}=ne(),s=i.useRef(null),{top:l,left:a,right:d,bottom:u}=de(s),[p,m]=i.useState(null),y=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return void m(null);const n=t.getClientOffset();if(null==e||null==n||!ye(e))return void m(null);if(n.x<a||n.x>d)return void m(null);if(n.y<l||n.y>u)return void m(null);const i=(n.x-a)/(d-a);if(i<=.3)return void m("left");if(i>=.6)return void m("right");const o=(n.y-l)/(u-l);m(o<=.3?"top":o>=.6?"bottom":null)}),[l,a,d,u]),f=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return;if(!ye(e))return;const{path:n}=e.payload;le(n,r)||null!=p&&c(n,r,p)}),[r,p,c]),[{draggingSelf:g},h]=(0,ue.L)({accept:pe,collect:e=>{e.isOver({shallow:!0})||m(null);const t=e.getItem();return t&&ye(t)?{draggingSelf:le(t.payload.path,r)}:{}},hover:y,drop:f},[y,f]);let I=G["tessel-drop-marker"]+" ";if(null!=p&&!g)switch(p){case"bottom":I+=G["drop-bottom"];break;case"top":I+=G["drop-top"];break;case"left":I+=G["drop-left"];break;case"right":I+=G["drop-right"]}return i.createElement("div",{id:t,ref:e=>{s.current=e,h(e),"function"==typeof o?o(e):o&&(o.current=e)},className:B(G["tessel-drop-capture"],g&&G["tessel-drop-capture--dragging"],e)},n,i.createElement("div",{className:I}))}));function ge(e,t){var n;if(!t(e))return null;const i=W(e);if(U(i)){const o=ge(i.first,t),r=ge(i.second,t);return o&&r?e:null!==(n=null!=o?o:r)&&void 0!==n?n:null}return e}function he(e){return"string"==typeof e?e:U(e)?null==e.first?he(e.second):null==e.second?he(e.first):Object.assign(Object.assign({},e),{first:he(e.first),second:he(e.second)}):e}const Ie=({className:e,rootItem:t,renderWindow:n,onLayoutChange:o})=>{const r=i.useCallback(((e,n,i)=>{if(0===e.length)return;let r=t;const c=P()(r,e);r&&"string"!=typeof r&&c&&(n.length>0&&!P()(r,n)||(r=S(r,e,null),r=S(r,n,(e=>{let t;if("left"===i||"right"===i)t={direction:"row",division:50,first:"left"===i?c:e,second:"right"===i?c:e};else{if("top"!==i&&"bottom"!==i)throw new Error("Unknown tessel position: "+i);t={direction:"column",division:50,first:"top"===i?c:e,second:"bottom"===i?c:e}}return t})),r=he(r),o(r)))}),[t,o]),c=i.useCallback((e=>{let n=t;n&&("string"!=typeof n?(n=S(n,e,null),n=he(n),o(n)):0===e.length&&o(null))}),[o,t]);return i.createElement("div",{className:B("tessel",G.tessel,e)},i.createElement(ie,{moveWindow:r,closeWindow:c},i.createElement(fe,null,i.createElement("div",{className:G["tessel-content"]},t&&i.createElement(ce,{value:t,renderWindow:n,onLayoutChange:o})))))},Ee="circuit-field",be=e=>({windowId:Ee,windowProps:{editorId:e}});function ve(e){return"string"!=typeof e&&!!A(e)&&e.windowId===Ee}const ke={layout:{direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"node-tray"},second:be(m)}},Oe=Object.freeze(ke),Ne=Object.freeze({nodeNameMode:"named-only"}),Ce={circuitEditorDrag:u,circuitEditors:f,nodeGraph:v,nodeLayout:k,circuits:h,clipboard:E,dialog:b,project:O,selection:N,simulator:C,simulatorControl:j,tutorial:x,uiLayout:Oe,uiSettings:Ne},je=Object.freeze(Ce),xe=["circuits","nodeGraph","nodeLayout"],we={services:je,undo:Object.freeze({undoStack:[],redoStack:[]})},Pe=Object.freeze(we);var Be=n(4890),Me=(n(2729),n(7172));const Se=new URL(window.location.origin);Se.pathname=n.p;const ze=Se.toString(),Te="@init";var Re=n(4586);const Le="@circuit/add",De=({circuitName:e,circuitId:t,edit:n}={})=>({type:Le,payload:{circuitId:null!=t?t:(0,Re.Z)(),circuitName:e,edit:n}}),Je="@circuit/delete";function We(e){return e.type===Je}const Ae="@circuit/rename",Ue="@node/add",Ze=(e,t,n,i)=>({type:Ue,payload:Object.assign({nodeId:(0,Re.Z)(),nodeType:e,circuitId:t,position:n},i||{})});function Fe(e){return e.type===Ue}const He="@node/delete",Ke=e=>({type:He,payload:{nodeIds:se(e)}});function qe(e){return e.type===He}const $e="@node/rename",Ge="@selection/align-to-grid",Ve=()=>({type:Ge}),_e="@selection/delete",Ye=()=>({type:_e}),Xe="@selection/move",Qe="@wire/attach",et=(e,t,n)=>({type:Qe,payload:{connectionId:(0,Re.Z)(),p1:e,p2:t,joints:(null==n?void 0:n.joints)||[]}});function tt(e){return e.type===Qe}const nt="@wire/detatch";function it(e){return e.type===nt}const ot="@wire/joint/add",rt="@wire/joint/move",ct=(e,t,n={})=>{var i,o;return{type:rt,payload:{jointIds:se(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(o=n.snapMode)&&void 0!==o?o:"none"}}},st="@wire/joint/delete",lt="@clipboard/paste",at=(e={})=>({type:lt,payload:Object.assign({},e)}),dt="@circuit-editor/drag/end",ut="@undo/undo",pt=()=>({type:ut});function mt(e){return e.type===ut}const yt="@undo/redo",ft=()=>({type:yt});function gt(e){return e.type===yt}const ht="@project/new",It=()=>({type:ht});function Et(e){return e.type===ht}const bt="@project/receive",vt=(e,t)=>({type:bt,payload:{fileName:e,saveData:t}}),kt=[Le,Je,Ae,Ue,He,$e,Ge,_e,Xe,Qe,nt,ot,st,rt,ut,yt,lt,dt];function Ot(e){return-1!==kt.indexOf(e.type)}var Nt=n(8718),Ct=n.n(Nt),jt=n(8804),xt=n.n(jt);function wt(e){return t=>(n=Pe,i)=>{const o=t(n.services[e],i,n);return n.services[e]!=o?M(n,"services",e,o):n}}function Pt(e){return t=>{const n=(n,...i)=>t(n.services[e],...i);return n.local=t,n}}const Bt=wt("circuitEditors"),Mt=Pt("circuitEditors"),St=Mt(((e,t)=>e.circucitEditorsById[t])),zt=(e,t)=>{const n=St(e,t);return n?n.circuitId:null},Tt=Mt((e=>{if(e.activeEditorId)return e.activeEditorId;const t=Object.keys(e.circucitEditorsById);return t.length>0?t[0]:null})),Rt=Mt((e=>e.activeEditorId?e.circucitEditorsById[e.activeEditorId]:null)),Lt=Mt((e=>{if(!e.activeEditorId)return null;const t=e.circucitEditorsById[e.activeEditorId];return t?t.circuitId:null})),Dt=Mt(((e,t)=>Object.keys(e.circucitEditorsById).filter((n=>e.circucitEditorsById[n].circuitId===t))));function Jt(e){let t=null;const n=Rt(e);return n&&(t=n.circuitId),{serviceStates:Ct()(e.services,xe),viewCircuitId:t}}var Wt=n(928),At=n.n(Wt),Ut=n(9734),Zt=n.n(Ut);function Ft(...e){return[].concat(...e)}const Ht="@circuit-editor/drag/abort",Kt=()=>({type:Ht}),qt=wt("circuitEditorDrag"),$t=Pt("circuitEditorDrag"),Gt=qt(((e,t)=>function(e){return e.type===Ht}(t)?u:e)),Vt="@circuit-editor/drag/continue",_t=qt(((e,t)=>{if(!function(e){return e.type===Vt}(t))return e;const{dragPos:n,modifierKeys:i,editorId:o}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragEndEditorId:o,dragModifierKeys:i})}));var Yt=n(3386),Xt=n.n(Yt),Qt=n(1966),en=n.n(Qt);function tn(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function nn(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return Xt()(e,t);case"remove":return en()(e,t);case"toggle":return en()(e,t).concat(en()(t,e))}return t}const on="@select/region";var rn=n(2222),cn=n(6604),sn=n.n(cn);const ln=wt("nodeGraph"),an=Pt("nodeGraph"),dn=an((e=>e.nodesById)),un=an((0,rn.P1)(dn.local,(e=>Object.keys(e)))),pn=an((0,rn.P1)(dn.local,(e=>sn()(e,(e=>e.nodeType))))),mn=an(((e,t)=>e.nodesById[t]||null)),yn=an(((e,t)=>{const n=[];for(const i of Object.keys(e.nodesById)){const{nodeType:o}=e.nodesById[i];o===t&&n.push(i)}return n})),fn=an(((e,t)=>{const n=mn.local(e,t);return n?n.nodeType:null})),gn=an((0,rn.P1)((e=>e.nodesById),(e=>sn()(e,(e=>e.nodeName))))),hn=an(((e,t)=>{var n;const i=mn.local(e,t);return i?null!==(n=i.nodeName)&&void 0!==n?n:t.substr(0,4):null})),In=an(((e,t)=>{const n=mn.local(e,t);return n?n.nodeName:null}));var En=n(4654),bn=n.n(En),vn=n(3311),kn=n.n(vn),On=n(669),Nn=n.n(On);const Cn=wt("circuits"),jn=Pt("circuits"),xn=jn((e=>e.nodeIdsByCircuitId)),wn=jn(((e,t)=>e.nodeIdsByCircuitId[t])),Pn=jn(((e,t)=>{for(const n of Object.keys(e.nodeIdsByCircuitId))if(-1!==e.nodeIdsByCircuitId[n].indexOf(t))return n;return null})),Bn=wt("nodeLayout"),Mn=Pt("nodeLayout"),Sn=Mn((e=>e.nodePositionsById)),zn=Mn(((e,t)=>{var n;return null!==(n=e.nodePositionsById[t])&&void 0!==n?n:I.Ds}));function Tn(e){return"ic-"+e}function Rn(e){return e&&e.startsWith("ic-")?e.substr(3):null}function Ln(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}const Dn=jn((e=>Object.keys(e.circuitNamesByCircuitId))),Jn=jn((e=>e.circuitNamesByCircuitId)),Wn=jn(((e,t)=>e.circuitNamesByCircuitId[t])),An=jn(((e,t)=>{const{nodeIdsByCircuitId:n}=e,i=Object.keys(n);for(const e of i)if(-1!==n[e].indexOf(t))return e;return null})),Un=(e,t,n)=>{if(!t)return!1;if(t===n)return!0;const i=Tn(n),{nodesById:o}=e.services.nodeGraph;return Object.keys(o).filter((e=>o[e].nodeType===i)).some((n=>{const i=An(e,n);return!!i&&Un(e,t,i)}))};function Zn(e,t){return{x:"input"===t?0:100,y:50*e+25}}const Fn=[(0,rn.P1)(xn,pn,Sn,Jn,((e,t,n,o)=>Object.keys(e).filter((e=>e!==p)).map((r=>{var c,s;const l=null!==(c=e[r])&&void 0!==c?c:[],a=null!==(s=o[r])&&void 0!==s?s:r.substr(0,5);let d=l.filter((e=>t[e].startsWith("pin-")));d=Zt()(d,(e=>n[e].y),(e=>n[e].x));const u={},p=[],m=[];for(const e of d){const n=t[e];"pin-input"===n?(u[e]=Object.assign({direction:"input"},Zn(p.length,"input")),p.push(e)):"pin-output"===n&&(u[e]=Object.assign({direction:"output"},Zn(m.length,"output")),m.push(e))}const y={circuitId:r,inputPinIds:p,outputPinIds:m};return{type:Tn(r),category:"integrated-circuit",displayName:a,elementProduction:{type:"circuit",circuitId:r},visual:{hitRect:(0,I.NG)(Nn()(Ln(p.length,m.length))),trayComponent:()=>i.createElement("g",{stroke:"black",strokeWidth:1},i.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),i.createElement("line",{x1:10,y1:15,x2:5,y2:15}),i.createElement("line",{x1:40,y1:15,x2:45,y2:15}),i.createElement("line",{x1:10,y1:35,x2:5,y2:35}),i.createElement("line",{x1:40,y1:35,x2:45,y2:35})),component:"integrated-circuit",componentProps:y},pins:u}})))),n(4313).Z,n(9175).Z,n(4646).Z,n(2140).Z,n(6467).Z,n(8476).Z,n(3980).Z,n(9696).Z,n(2201).Z,n(6015).Z,n(5058).Z,n(3158).Z,n(7529).Z,n(4987).Z];let Hn=[];const Kn=e=>{const t=bn()(Fn,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,se(n)}(t,e)));return t.every(((e,t)=>e===Hn[t]))?Hn:(Hn=t,t)},qn=(0,rn.P1)(Kn,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),$n=(e,t)=>{var n;const i=Kn(e);return null!==(n=kn()(i,(e=>e.type===t)))&&void 0!==n?n:null};var Gn=n(7516);const Vn=Gn.Ry().shape({nodeId:Gn.Z_().required().min(1),pinId:Gn.Z_().required().min(1)});function _n(e,t){return e.nodeId===t.nodeId&&e.pinId===t.pinId}const Yn=(0,rn.P1)(qn,Sn,pn,((e,t,n)=>{var i;const o={},r=Object.keys(n);for(const c of r){const r={};o[c]=r;const s=null!==(i=t[c])&&void 0!==i?i:I.Ds,l=n[c];if(!l)continue;const a=e[l];if(!a)continue;const d=Object.keys(a.pins);for(const e of d){const t=a.pins[e],n=(0,I.ZO)(s,t);r[e]=n}}return o}));let Xn=null;const Qn=(e,t,n)=>{var i;const o=Yn(e),r=wn(e,n);if(!r)return null;for(const e of r){const n=null!==(i=o[e])&&void 0!==i?i:I.Ds,r=Object.keys(n);for(const i of r){const o=n[i],r=(0,I.sj)(t,o);if((0,I.VE)(r)>6)continue;const c={nodeId:e,pinId:i};return Xn&&_n(c,Xn)||(Xn=c),Xn}}return null},ei=$t((()=>50)),ti=$t((()=>5)),ni=(e,t)=>{const n=ei(e);return(0,I.R9)(t,n)},ii=(e,t)=>{const n=ti(e);return(0,I.R9)(t,n)},oi="@circuit-editor/drag/start/joint",ri="@select/wire-joints",ci=(e,t="set")=>({type:ri,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}}),si=wt("selection"),li=Pt("selection"),ai=li((e=>e.selectedNodeIds)),di=li(((e,t)=>-1!==e.selectedNodeIds.indexOf(t))),ui=((0,rn.P1)(dn,ai,((e,t)=>Ct()(e,t))),li((e=>e.selectedConnectionIds)),li(((e,t)=>-1!==e.selectedConnectionIds.indexOf(t)))),pi=li((e=>e.selectedJointIds)),mi=li(((e,t)=>-1!==e.selectedJointIds.indexOf(t)));var yi=n(6486);const fi=(0,rn.P1)(((e,t)=>wn(e,t)),(e=>e.services.nodeGraph.connectionsById),((e,t)=>Object.keys(t).filter((n=>{const{inputPin:i,outputPin:o}=t[n];return!!(0,yi.includes)(e,i.nodeId)&&!!(0,yi.includes)(e,o.nodeId)})))),gi=(e,t)=>{const{connectionsById:n}=e.services.nodeGraph,i=n[t];if(!i)return null;const{nodeId:o}=i.inputPin||i.outputPin;return Pn(e,o)},hi="@circuit-editor/drag/start/new-joint",Ii=qt(((e,t,n)=>{if(!function(e){return e.type===hi}(t))return e;const{connectionId:i,addAfterJointId:o,modifierKeys:r,x:c,y:s,editorId:l}=t.payload;return gi(n,i)?Object.assign(Object.assign({},e),{dragMode:"new-joint",dragStart:{x:c,y:s},dragStartEditorId:l,dragEnd:null,dragEndEditorId:null,dragNewJointConnectionId:i,dragNewJointAfterJointId:o,dragModifierKeys:r}):e})),Ei="@field/drag/start/node",bi="@select/nodes",vi=(e,t="set")=>({type:bi,payload:{nodeIds:Array.isArray(e)?e:[e],mode:t}}),ki="@circuit-editor/drag/start/select",Oi=qt(((e,t)=>{if(!function(e){return e.type===ki}(t))return e;const{x:n,y:i,modifierKeys:o,editorId:r}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragStart:{x:n,y:i},dragStartEditorId:r,dragModifierKeys:o,dragEnd:null,dragEndEditorId:null})})),Ni="@circuit-editor/drag/start/wire",Ci=qt(((e,t,n)=>{if(!function(e){return e.type===Ni}(t))return e;const{x:i,y:o,pin:r,editorId:c}=t.payload;return function(e,t){const n=xn(t);for(const t of Object.keys(n))if(-1!==n[t].indexOf(e))return t;return null}(r.nodeId,n)?Object.assign(Object.assign({},e),{dragMode:"wire",dragStart:{x:i,y:o},dragStartEditorId:c,dragWireSource:r,dragEnd:null,dragEndEditorId:null}):e})),ji="@circuit-editor/mouse/leave",xi=Ft(Gt,_t,(function(e=Pe,t){if(!function(e){return e.type===dt}(t))return e;const n=e.services.circuitEditorDrag;if(null===n.dragMode)return e;const{x:i,y:o}=t.payload,{dragStart:r,dragStartEditorId:c,dragEndEditorId:s}=n;if(c!=s)return M(e,"services","circuitEditorDrag",u);switch(n.dragMode){case"select":{const t=zt(e,c);if(t){const{dragModifierKeys:c}=n,s=tn(c),l=(0,I.Qu)(r,{x:i,y:o});e=Kc(e,((e,t,n="set")=>({type:on,payload:{region:e,circuitId:t,mode:n}}))(l,t,s))}break}case"move":{const{dragModifierKeys:t}=n;let c=(0,I.sj)({x:i,y:o},r);const s=e.services.selection.selectedNodeIds.length>0;t.ctrlMetaKey||(c=s?ni(e,c):ii(e,c)),e=Kc(e,((e,t,n={})=>{var i;return{type:Xe,payload:{offsetX:e,offsetY:t,snapMode:null!==(i=n.snapMode)&&void 0!==i?i:"none"}}})(c.x,c.y));break}case"new-joint":{const{dragNewJointConnectionId:t,dragNewJointAfterJointId:r}=n,c=ii(e,{x:i,y:o});e=Kc(e,((e,t,n,i)=>({type:ot,payload:{connectionId:e,jointId:(0,Re.Z)(),addAfterJointId:t,position:n}}))(t,r,c));break}case"wire":{const t=zt(e,c);if(t){const{dragWireSource:r}=n,c=Qn(e,{x:i,y:o},t);r&&c&&(e=Kc(e,et(r,c)))}break}}return M(e,"services","circuitEditorDrag",u)}),(function(e=Pe,t){if(!function(e){return e.type===oi}(t))return e;const{jointId:n,x:i,y:o,modifierKeys:r,editorId:c}=t.payload;if(!((e,t)=>{const{wireJointIdsByConnectionId:n}=e.services.nodeLayout,i=Object.keys(n).find((e=>-1!==n[e].indexOf(t)));return i?gi(e,i):null})(e,n))return e;if(e=M(e,"services","circuitEditorDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:i,y:o},dragStartEditorId:c,dragModifierKeys:r,dragEnd:null,dragEndEditorId:null}))),!mi(e,n)){const t=tn(r);e=Kc(e,ci(n,t))}return e}),Ii,(function(e=Pe,t){if(!function(e){return e.type===Ei}(t))return e;const{nodeId:n,x:i,y:o,modifierKeys:r,editorId:c}=t.payload;if(!Pn(e,n))return e;if(e=M(e,"services","circuitEditorDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:i,y:o},dragStartEditorId:c,dragModifierKeys:r,dragEnd:null,dragEndEditorId:null}))),!di(e,n)){const t=tn(r);e=Kc(e,vi(n,t))}return e}),Oi,Ci,qt(((e,t)=>function(e){return e.type===ji}(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e))),wi=Bt(((e,t)=>{if(!We(t))return e;const{circuitId:n}=t.payload,i=Object.keys(e.circucitEditorsById).filter((t=>e.circucitEditorsById[t].circuitId!==n));let o=e.activeEditorId;return o&&-1!==i.indexOf(o)||(o=null),Object.assign(Object.assign({},e),{circucitEditorsById:Ct()(e.circucitEditorsById,i),activeEditorId:o})})),Pi="@circuit-editor/receive-focus",Bi=Bt(((e,t)=>{if(!function(e){return e.type===Pi}(t))return e;const{editorId:n}=t.payload;return-1===Object.keys(e.circucitEditorsById).indexOf(n)?e:Object.assign(Object.assign({},e),{activeEditorId:n})})),Mi="@view/circuit",Si=(e,t=null,n={})=>({type:Mi,payload:{circuitId:e,circuitNodeIdPath:t,newWindowId:n.newWindow?(0,Re.Z)():null}});function zi(e){return e.type===Mi}const Ti=Ft(wi,Bi,Bt(((e,t,n)=>{if(!zi(t))return e;const{circuitId:i,circuitNodeIdPath:o,newWindowId:r}=t.payload;if(-1===Dn(n).indexOf(i))return e;let c=r;return c||(c=function(e){var t;return e.activeEditorId?e.activeEditorId:null!==(t=xt()(Object.keys(e.circucitEditorsById)))&&void 0!==t?t:null}(e)),c?Object.assign(Object.assign({},e),{circucitEditorsById:Object.assign(Object.assign({},e.circucitEditorsById),{[c]:{circuitId:i,circuitNodeIdPath:null!=o?o:[]}}),activeEditorId:c}):e}))),Ri=Cn(((e,t)=>{if(!function(e){return e.type===Le}(t))return e;const n=t.payload.circuitId;let i=t.payload.circuitName;return i||(i="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:i}),nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[n]:[]})})})),Li="@circuit/import",Di=Gn.Ry().shape({circuitId:Gn.Z_().required().min(1),circuitName:Gn.Z_().required().min(1)}),Ji=Gn.Ry().shape({nodeId:Gn.Z_().required().min(1),nodeType:Gn.Z_().required().min(1),nodeName:Gn.Z_().nullable().min(1),circuitId:Gn.Z_().required().min(1),x:Gn.Rx().required(),y:Gn.Rx().required()}),Wi=Gn.Ry().shape({output:Vn.required(),input:Vn.required(),joints:Gn.IX().of(I.tQ)}),Ai=Gn.Ry().shape({circuits:Gn.IX().of(Di).min(0),nodes:Gn.IX().of(Ji).min(0),wires:Gn.IX().of(Wi).min(0)});var Ui=n(2628),Zi=n.n(Ui),Fi=n(4908),Hi=n.n(Fi);const Ki=an((e=>e.connectionsById)),qi=an((0,rn.P1)((e=>e.connectionsById),(e=>Object.keys(e)))),$i=an(((e,t)=>e.connectionsById[t])),Gi=an((0,rn.P1)((e=>e.connectionsById),(e=>Zi()(e)))),Vi=an(((e,t)=>{const{connectionsById:n}=e,i=Object.keys(n);for(const e of i)if(_n(n[e].inputPin,t))return e;return null})),_i=(an(((e,t)=>{const{connectionsById:n}=e,i=Object.keys(n);for(const e of i)if(_n(n[e].outputPin,t))return e;return null})),an(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].inputPin.nodeId===t))))),Yi=an(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].outputPin.nodeId===t)))),Xi=an(((e,t)=>{const n=_i.local(e,t),i=Yi.local(e,t);return Hi()([...n,...i])})),Qi=(e,t)=>{const n=fn(e,t);return n?$n(e,n):null},eo={},to={},no=(Mn((e=>Object.keys(e.wireJointPositionsByJointId))),Mn((e=>e.wireJointIdsByConnectionId))),io=Mn(((e,t)=>e.wireJointIdsByConnectionId[t])),oo=Mn(((e,t)=>e.wireJointPositionsByJointId[t])),ro=Mn((e=>e.wireJointPositionsByJointId));class co extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function so(e){const t=ro(e);return{circuits:Dn(e).map((t=>({circuitId:t,circuitName:Wn(e,t)}))),nodes:un(e).map((t=>{const n=mn(e,t),i=zn(e,t),o=Pn(e,t);return{nodeId:t,nodeType:n.nodeType,nodeName:n.nodeName,circuitId:null!=o?o:p,x:i.x,y:i.y}})),wires:qi(e).map((n=>{const i=$i(e,n),o=io(e,n);return{input:i.inputPin,output:i.outputPin,joints:o.map((e=>t[e]))}}))}}function lo(e,t){var n,i,o;try{Ai.validateSync(t)}catch(e){throw new co(e.message)}e=Pe;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>Kc(e,De({circuitId:t,circuitName:n}))),e),e=(null!==(i=t.nodes)&&void 0!==i?i:[]).reduce(((e,t)=>{var n;return Kc(e,Ze(t.nodeType,t.circuitId,{x:t.x,y:t.y},{nodeId:t.nodeId,nodeName:null!==(n=t.nodeName)&&void 0!==n?n:void 0}))}),e),e=(null!==(o=t.wires)&&void 0!==o?o:[]).reduce(((e,t)=>Kc(e,et(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new co("Failed to load project.")}return e}const ao=Cn(((e,t)=>{if(!function(e){return e.type===Ae}(t))return e;const{circuitId:n,circuitName:i}=t.payload,o=i.trim();return""===o?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:o})})})),uo=Cn(((e,t)=>{if(!Fe(t))return e;const{nodeId:n,circuitId:i}=t.payload,o=i;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[o]:[...e.nodeIdsByCircuitId[o],n]})})})),po=Cn(((e,t)=>{if(!qe(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:sn()(e.nodeIdsByCircuitId,(e=>e.filter((e=>-1===n.indexOf(e)))))})})),mo=Ft(Ri,((e=Pe,t)=>{if(!We(t))return e;const{circuitId:n}=t.payload,i=e.services.circuits.nodeIdsByCircuitId[n];if(!i)return e;e=[...yn(e,Tn(n)),...i].reduce(((e,t)=>Kc(e,Ke(t))),e);const o=Object.keys(e.services.circuits.nodeIdsByCircuitId).filter((e=>e!==n));return M(e,"services","circuits",(e=>Object.assign(Object.assign({},e),{nodeIdsByCircuitId:Ct()(e.nodeIdsByCircuitId,o),circuitNamesByCircuitId:Ct()(e.circuitNamesByCircuitId,o)})))}),(function(e=Pe,t){if(!function(e){return e.type===Li}(t))return e;const{circuitIds:n,saveData:i}=t.payload;return function(e,t,n){var i,o;try{Ai.validateSync(n)}catch(e){throw new co(e.message)}const r=Object.keys(e.services.circuits.circuitNamesByCircuitId),c=n.circuits.filter((e=>-1!==t.indexOf(e.circuitId)&&-1===r.indexOf(e.circuitId)));if(0===c.length)return e;try{e=c.reduce(((e,{circuitId:t,circuitName:n})=>Kc(e,De({circuitId:t,circuitName:n}))),e);const t=(null!==(i=n.nodes)&&void 0!==i?i:[]).filter((e=>c.some((({circuitId:t})=>t===e.circuitId))));e=t.reduce(((e,t)=>{var n;return Kc(e,Ze(t.nodeType,t.circuitId,{x:t.x,y:t.y},{nodeId:t.nodeId,nodeName:null!==(n=t.nodeName)&&void 0!==n?n:void 0}))}),e),e=(null!==(o=n.wires)&&void 0!==o?o:[]).filter((function(e){return t.some((({nodeId:t})=>e.input.nodeId===t||e.output.nodeId===t))})).reduce(((e,t)=>Kc(e,et(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to import circuit from SaveData:",e),new co("Failed to import circuit.")}return e}(e,n,i)}),ao,uo,po,Cn(((e,t)=>Et(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[p]:"Root"},nodeIdsByCircuitId:{[p]:[]}}):e)));var yo=n(5161),fo=n.n(yo),go=n(998),ho=n.n(go),Io=n(7287),Eo=n.n(Io);const bo="@clipboard/copy",vo=(e,t)=>{const n=fn(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const i=Pn(e,t);if(!i)return[];const o=Tn(i);return yn(e,o).map((e=>({nodeId:e,pinId:t})))},ko=wt("clipboard"),Oo=Pt("clipboard"),No=Ft(ko(((e,t,n)=>{if(!function(e){return e.type===bo}(t))return e;const{nodeIds:i}=t.payload;if(0===i.length)return e;const o=Sn(n),r=Eo()(i,fo()(i,(()=>(0,Re.Z)()))),c=o[i[0]],s=i.map((e=>{const t=mn(n,e),s=((e,t)=>{const n=Gi(e),i=Qi(e,t);if(!i)return{};let o=[];o=Object.keys(i.pins).filter((e=>"output"===i.pins[e].direction));const r=n.filter((e=>e.outputPin.nodeId===t)),c={};for(const e of o)c[e]=[];for(const e of r){const{outputPin:t,inputPin:n}=e;c[t.pinId].push(n)}return c})(n,e);return{id:r[e],nodeType:t.nodeType,offset:(0,I.sj)(o[e],c),outputs:sn()(s,(e=>e.filter((e=>{return t=e.nodeId,-1!==ho()(i,(e=>e===t));var t})).map((e=>{const t=Vi(n,e),i=(t?io(n,t):[]).map((e=>oo(n,e))).map((e=>(0,I.sj)(e,c)));return{pin:{nodeId:r[e.nodeId],pinId:e.pinId},joints:i}}))))}}));return Object.assign(Object.assign({},e),{clipboardNodes:s,clipboardPasteOrigin:c})})),(function(e=Pe,t){if(!function(e){return e.type===lt}(t))return e;const n=Lt(e);if(!n)return e;const{clipboardNodes:i,clipboardPasteOrigin:o}=e.services.clipboard;if(!i.length)return e;let{pastePosition:r}=t.payload;const c=ei(e);r=r?(0,I.R9)(r,c):(0,I.ZO)(o,{x:c,y:c});const s=Eo()(i.map((e=>e.id)),fo()(i,(()=>(0,Re.Z)())));for(const t of i){const{id:i,nodeType:o,offset:c}=t,l=(0,I.ZO)(r,c);e=Kc(e,Ze(o,n,l,{nodeId:s[i]}))}for(const t of i){const{id:n,outputs:i}=t,o=s[n];for(const t of Object.keys(i))for(const n of i[t]){const{pin:{nodeId:i,pinId:c},joints:l}=n,a=s[i];e=Kc(e,et({nodeId:o,pinId:t},{nodeId:a,pinId:c},{joints:l.map((e=>(0,I.ZO)(e,r)))}))}}return e=M(e,"services","clipboard","clipboardPasteOrigin",r),Kc(e,vi(Zi()(s)))})),Co="@dialog/response/accept",jo=e=>({type:Co,payload:{result:e}}),xo=wt("dialog"),wo=Pt("dialog"),Po=xo(((e,t)=>function(e){return e.type===Co}(t)?b:e)),Bo="@dialog/response/cancel",Mo=()=>({type:Bo}),So=xo(((e,t)=>function(e){return e.type===Bo}(t)?b:e)),zo="@dialog/show",To=Ft(Po,So,xo(((e,t)=>{if(!function(e){return e.type===zo}(t))return e;const{dialogType:n,data:i}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:i})})));function Ro(e,t){return t.weight=e,t}function Lo(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}const Do=Ro(-10,ln(((e,t)=>{if(!Fe(t))return e;const{nodeId:n,nodeType:i,nodeName:o}=t.payload;return Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:{nodeType:i,nodeName:null!=o?o:null}})})})));var Jo=n(5937),Wo=n.n(Jo);const Ao=Ro(Lo(po),ln(((e,t,n)=>{if(!qe(t))return e;const{nodeIds:i}=t.payload;return function(e,t,n){const i=en()(Object.keys(e.nodesById),t),o=bn()(t,(e=>vo(n,e)));return Object.assign(Object.assign({},e),{nodesById:Ct()(e.nodesById,i),connectionsById:Wo()(e.connectionsById,(function({inputPin:e,outputPin:n}){return-1===t.indexOf(e.nodeId)&&-1===t.indexOf(n.nodeId)&&!o.some((t=>_n(t,e)||_n(t,n)))}))})}(e,i,n)}))),Uo=ln(((e,t)=>{if(!function(e){return e.type===$e}(t))return e;const{nodeId:n}=t.payload;if(!e.nodesById[n])return e;let i=t.payload.nodeName;return i||""!==i.trim()||(i=null),Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:Object.assign(Object.assign({},e.nodesById[n]),{nodeName:i})})})})),Zo=Ft(Do,ln(((e,t)=>Et(t)?v:e)),Ao,Uo,ln(((e,t,n)=>{if(!tt(t))return e;const{connectionId:i,p1:o,p2:r}=t.payload,c=function(e,t,n,i){const o=e.nodesById[t.nodeId],r=e.nodesById[n.nodeId];if(!o||!r)return null;const c=$n(i,o.nodeType),s=$n(i,r.nodeType);if(!c||!s)return null;const l=c.pins[t.pinId],a=s.pins[n.pinId];if(!l||!a)return null;if(l.direction===a.direction)return null;return{outputPin:"output"===l.direction?t:n,inputPin:"input"===l.direction?t:n}}(e,o,r,n);if(!c)return e;const{inputPin:s}=c;return kn()(e.connectionsById,(e=>_n(e.inputPin,s)))?e:Object.assign(Object.assign({},e),{connectionsById:Object.assign(Object.assign({},e.connectionsById),{[i]:Object.assign({id:i},c)})})})),ln(((e,t)=>{if(!it(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.connectionsById).filter((e=>e!==n));return Object.assign(Object.assign({},e),{connectionsById:Ct()(e.connectionsById,i)})}))),Fo=Bn(((e,t)=>{if(!Fe(t))return e;const{nodeId:n,position:i=I.Ds}=t.payload;return M(e,"nodePositionsById",n,i)})),Ho=Ro(Lo(Ao),Bn(((e,t,n)=>{if(!qe(t))return e;const{nodeIds:i}=t.payload;return function(e,t,n){const i=t.reduce(((e,t)=>{const i=_i(n,t),o=Yi(n,t);return e.push(...i,...o),e}),[]),o=bn()(t,(e=>vo(n,e))),r=Ki(n),c=Object.keys(r).filter((e=>{const{inputPin:t,outputPin:n}=r[e];return o.some((e=>_n(e,t)||_n(e,n)))})),s=[...i,...c].reduce(((t,n)=>(t.push(...e.wireJointIdsByConnectionId[n]),t)),[]),l=en()(Object.keys(e.wireJointIdsByConnectionId),i),a=en()(Object.keys(e.wireJointPositionsByJointId),s),d=en()(Object.keys(e.nodePositionsById),t);return Object.assign(Object.assign({},e),{nodePositionsById:Ct()(e.nodePositionsById,d),wireJointIdsByConnectionId:Ct()(e.wireJointIdsByConnectionId,l),wireJointPositionsByJointId:Ct()(e.wireJointPositionsByJointId,a)})}(e,i,n)}))),Ko="@node/move",qo=(e,t,n={})=>{var i,o;return{type:Ko,payload:{nodeIds:se(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(o=n.snapMode)&&void 0!==o?o:"none"}}},$o=Bn(((e,t,n)=>{if(!function(e){return e.type===Ko}(t))return e;const{nodeIds:i,position:o,relative:r,snapMode:c}=t.payload,s=sn()(Ct()(e.nodePositionsById,i),(e=>{let t={x:r?e.x+o.x:o.x,y:r?e.y+o.y:o.y};return"node"===c&&(t=ni(n,t)),t}));return Object.assign(Object.assign({},e),{nodePositionsById:Object.assign(Object.assign({},e.nodePositionsById),s)})})),Go=Ft(Fo,Bn(((e,t)=>Et(t)?k:e)),Ho,$o,Bn(((e,t)=>{if(!tt(t))return e;const{connectionId:n,joints:i}=t.payload;if(i.length>0){const t=i.map((()=>(0,Re.Z)()));e=M(e,"wireJointIdsByConnectionId",n,t),e=M(e,"wireJointPositionsByJointId",(e=>Object.assign(Object.assign({},e),Eo()(t,i))))}else e=M(e,"wireJointIdsByConnectionId",n,[]);return e})),Bn(((e,t)=>{if(!it(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.wireJointIdsByConnectionId).filter((e=>e!=n)),o=en()(Object.keys(e.wireJointPositionsByJointId),e.wireJointIdsByConnectionId[n]);return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:Ct()(e.wireJointIdsByConnectionId,i),wireJointPositionsByJointId:Ct()(e.wireJointPositionsByJointId,o)})})),Bn(((e,t)=>{if(!function(e){return e.type===ot}(t))return e;const{connectionId:n,addAfterJointId:i,position:o,jointId:r}=t.payload;let c=e.wireJointIdsByConnectionId[n];const s=i?c.indexOf(i)+1:0;return c=[...c.slice(0,s),r,...c.slice(s)],Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:Object.assign(Object.assign({},e.wireJointIdsByConnectionId),{[n]:c}),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),{[r]:o})})})),Bn(((e,t)=>{if(!function(e){return e.type===st}(t))return e;const{jointId:n}=t.payload,i=Object.keys(e.wireJointPositionsByJointId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:sn()(e.wireJointIdsByConnectionId,(e=>e.filter((e=>e!==n)))),wireJointPositionsByJointId:Ct()(e.wireJointPositionsByJointId,i)})})),Bn(((e,t,n)=>{if(!function(e){return e.type===rt}(t))return e;const{jointIds:i,position:o,relative:r,snapMode:c}=t.payload,s=sn()(Ct()(e.wireJointPositionsByJointId,i),(e=>{let t={x:r?e.x+o.x:o.x,y:r?e.y+o.y:o.y};return"node"===c?t=ni(n,t):"joint"===c&&(t=ii(n,t)),t}));return Object.assign(Object.assign({},e),{wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),s)})}))),Vo=wt("tutorial"),_o=Pt("tutorial"),Yo=_o((e=>null!=e.activeTutorial)),Xo=_o((e=>e.annotatedElements)),Qo=Ro(50,((e=Pe,t)=>{return Ot(t)?(Yo(e)||(n=so(e),localStorage.setItem("autosave",JSON.stringify(n))),e):e;var n})),er=wt("project"),tr=Pt("project"),nr=er(((e,t)=>Ot(t)?Object.assign(Object.assign({},e),{projectModified:!0}):e)),ir=er(((e,t)=>Et(t)?(localStorage.removeItem("autosave"),Object.assign(Object.assign({},e),{projectName:"New Project",projectModified:!1})):e)),or="@project/rename",rr=er(((e,t)=>{if(!function(e){return e.type===or}(t))return e;let{projectName:n}=t.payload;return n=n.trim(),""===n?e:Object.assign(Object.assign({},e),{projectName:n})})),cr="@project/save",sr=()=>({type:cr}),lr="@project/save:success",ar=Ft(Qo,(function(e=Pe,t){if(!function(e){return e.type===Te}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{e=M(e=lo(e,n),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"Previous Project",projectModified:!0})))}catch(e){}return e}),nr,ir,(function(e=Pe,t){if(!function(e){return e.type===bt}(t))return e;const{fileName:n,saveData:i}=t.payload;try{e=M(e=lo(e,i),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:n,projectModified:!1})))}catch(e){console.error("Failed to load save",e)}return e}),rr,er(((e,t)=>function(e){return e.type===lr}(t)?Object.assign(Object.assign({},e),{projectModified:!1}):e))),dr=si(((e,t)=>{if(!qe(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:en()(e.selectedNodeIds,n),selectedConnectionIds:[]})})),ur=si(((e,t)=>Et(t)?N:e));var pr=n(5564),mr=n.n(pr);const yr="@select/all",fr=si(((e,t,n)=>{if(!function(e){return e.type===yr}(t))return e;const i=Lt(n);if(!i)return e;const o=wn(n,i);let r=qi(n);const c=Ki(n);r=r.filter((e=>{const{inputPin:t,outputPin:n}=c[e];return-1!==o.indexOf(t.nodeId)&&-1!==o.indexOf(n.nodeId)}));const s=no(n),l=mr()(r.map((e=>s[e])));return Object.assign(Object.assign({},e),{selectedNodeIds:o,selectedConnectionIds:r,selectedJointIds:l})})),gr="@select/clear",hr=si(((e,t)=>function(e){return e.type===gr}(t)?Object.assign(Object.assign({},e),{selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}):e)),Ir=si(((e,t)=>{if(!function(e){return e.type===ri}(t))return e;const{jointIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===i?[]:e.selectedNodeIds,selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:nn(e.selectedJointIds,n,i)})})),Er=si(((e,t)=>{if(!function(e){return e.type===bi}(t))return e;const{nodeIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:nn(e.selectedNodeIds,n,i),selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:"set"===i?[]:e.selectedJointIds})}));var br=n(2525),vr=n.n(br);const kr=(0,rn.P1)(Sn,qn,pn,((e,t,n)=>sn()(e,((e,i)=>{const o=n[i];if(!o)return I.rG;const r=t[o];return r?(0,I.gQ)(r.visual.hitRect,e):I.rG})))),Or=si(((e,t,n)=>{if(!function(e){return e.type===on}(t))return e;const{region:i,circuitId:o,mode:r}=t.payload,c=wn(n,o),s=Ct()(kr(n),c),l=[];vr()(s,((e,t)=>{(0,I.kK)(e,i)&&l.push(t)}));const a=ro(n),d=((e,t)=>{const n=wn(e,t),i=bn()(n,(t=>Xi(e,t))),o=bn()(i,(t=>io(e,t)));return Hi()(o)})(n,o).filter((e=>{const t=a[e];return(0,I.PL)(t,i)}));return Object.assign(Object.assign({},e),{selectedNodeIds:nn(e.selectedNodeIds,l,r),selectedConnectionIds:"set"===r?[]:e.selectedConnectionIds,selectedJointIds:nn(e.selectedJointIds,d,r)})})),Nr="@select/wires",Cr=si(((e,t)=>{if(!function(e){return e.type===Nr}(t))return e;const{connectionIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===i?[]:e.selectedNodeIds,selectedConnectionIds:nn(e.selectedConnectionIds,n,i),selectedJointIds:"set"===i?[]:e.selectedJointIds})})),jr="@selection/copy",xr=()=>({type:jr}),wr=Ft(ur,dr,fr,hr,Ir,Er,Or,Cr,(function(e=Pe,t){if(!function(e){return e.type===Ge}(t))return e;const{selectedNodeIds:n,selectedJointIds:i}=e.services.selection,o=Sn(e);for(const t of n){const n=o[t];if(!n)continue;const i=ni(e,n);(0,I.kg)(n,i)||(e=Kc(e,qo(t,i)))}const r=ro(e);for(const t of i){const n=r[t];if(!n)continue;const i=ii(e,n);(0,I.kg)(n,i)||(e=Kc(e,ct(t,i)))}return e}),(function(e=Pe,t){if(!function(e){return e.type===jr}(t))return e;const n=ai(e);return 0===n.length?e:Kc(e,(i=n,{type:bo,payload:{nodeIds:Array.isArray(i)?i:[i]}}));var i}),(function(e=Pe,t){if(!function(e){return e.type===_e}(t))return e;const{selectedNodeIds:n,selectedConnectionIds:i,selectedJointIds:o}=e.services.selection;return n.length>0&&(e=Kc(e,Ke(n))),e=i.reduce(((e,t)=>Kc(e,(e=>({type:nt,payload:{connectionId:e}}))(t))),e),o.reduce(((e,t)=>Kc(e,(e=>({type:st,payload:{jointId:e}}))(t))),e)}),(function(e=Pe,t){if(!function(e){return e.type===Xe}(t))return e;const{offsetX:n,offsetY:i,snapMode:o}=t.payload,r=ai(e),c=pi(e),s={x:n,y:i};let l="none";"node"!==o&&"by-type"!==o||(l="node");let a="none";return a="by-type"===o?"joint":o,e=Kc(e,qo(r,s,{relative:!0,snapMode:l})),Kc(e,ct(c,s,{relative:!0,snapMode:a}))}),si(((e,t)=>{if(!it(t))return e;const{connectionId:n}=t.payload;return Object.assign(Object.assign({},e),{selectedConnectionIds:e.selectedConnectionIds.filter((e=>e!==n))})}))),Pr=wt("simulator"),Br=Pt("simulator"),Mr=Pr(((e,t)=>Ot(t)?C:e));function Sr(e){return e.default}const zr={"input-momentary":Sr(n(3667)),"input-toggle":Sr(n(2318)),"logic-and":Sr(n(7909)),"logic-buffer":Sr(n(274)),"logic-nand":Sr(n(4347)),"logic-nor":Sr(n(8112)),"logic-not":Sr(n(6559)),"logic-or":Sr(n(2649)),"logic-xor":Sr(n(8881)),"output-led":Sr(n(6567)),"output-seg7":Sr(n(4257)),"pin-high":Sr(n(4420))};var Tr=n(1235);function Rr(e,t){const n=bn()(t,(e=>[e,"subCircuitIds"]));n.pop();const i=P()(e,n);if(!i)return null;const{simulatorNodeId:o}=i;return null!=o?o:null}var Lr=n(3857),Dr=n.n(Lr);const Jr=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function Wr(e,t,n=[]){var i;if(-1!==n.indexOf(e))throw new Error(`Circuit graph encountered loop on ${n.join(" => ")} while trying to add circuit ${e}`);n=[...n,e];const o={},r={},c={},s={},l=[],a=[],d={},u={},p=null!==(i=t.nodeIdsByCircuitId[e])&&void 0!==i?i:[];for(const e of p){const i=t.nodeTypesByNodeId[e];if(!i)continue;if("pin-input"===i){l.push(e),c[e]=[];continue}if("pin-output"===i){a.push(e);continue}const s=Ar(e,t,n);Dr()(o,s.simulatorNodesById),Dr()(r,s.simulatorNodeIdsByCircuitNodeId),d[e]=s.inputElementPinsByCircuitPinId,u[e]=s.outputElementPinsByCircuitPinId}const m=t.connectionsById;for(const e of Object.keys(m)){const{inputPin:t,outputPin:n}=m[e];if(-1===p.indexOf(t.nodeId)||-1===p.indexOf(n.nodeId))continue;const i=P()(u,[n.nodeId,n.pinId]),r=P()(d,[t.nodeId,t.pinId]);if(-1!==l.indexOf(n.nodeId)&&r){c[n.nodeId].push(...r);continue}if(-1!==a.indexOf(t.nodeId)&&i){s[t.nodeId]=i;continue}if(!i||!r)continue;const y=o[i.simulatorNodeId];let f=y.outputsByPin[i.pinId];null==f&&(y.outputsByPin[i.pinId]=f=[]);for(const e of r)f.push({simulatorNodeId:e.simulatorNodeId,pinId:e.pinId}),o[e.simulatorNodeId].inputsByPin[e.pinId]={simulatorNodeId:i.simulatorNodeId,pinId:i.pinId}}return{simulatorNodesById:o,simulatorNodeIdsByCircuitNodeId:r,inputElementPinsByCircuitPinId:c,outputElementPinsByCircuitPinId:s}}function Ar(e,t,n){const i=t.nodeTypesByNodeId[e];if(!i)return Jr;const o=t.nodeDefsByType[i];if(!o||!o.elementProduction)return Jr;const r="string"==typeof(c=o.elementProduction)?{type:"element",elementType:c}:c;var c;switch(r.type){case"element":return function(e,t,{nodeTypesByNodeId:n,nodeDefsByType:i}){const o=i[n[e]];if(!o)return Jr;const r={},c={},s=(0,Re.Z)();r[s]={elementType:t.elementType,inputsByPin:{},outputsByPin:{}},c[e]={simulatorNodeId:s,subCircuitIds:{}};const l={},a={};for(const e of Object.keys(o.pins)){const{direction:t}=o.pins[e];"input"===t?l[e]=[{pinId:e,simulatorNodeId:s}]:"output"===t&&(a[e]={pinId:e,simulatorNodeId:s})}return{simulatorNodesById:r,simulatorNodeIdsByCircuitNodeId:c,inputElementPinsByCircuitPinId:l,outputElementPinsByCircuitPinId:a}}(e,r,t);case"circuit":return function(e,t,n,i){const o=Wr(t.circuitId,n,i);return Object.assign(Object.assign({},o),{simulatorNodeIdsByCircuitNodeId:{[e]:{simulatorNodeId:null,subCircuitIds:o.simulatorNodeIdsByCircuitNodeId}}})}(e,r,t,n);default:throw new Error("Unsupported production type "+r.type)}}const Ur=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{}}),Zr=(0,rn.P1)(xn,pn,Ki,qn,((e,t,n,i)=>{try{return Wr(p,{nodeIdsByCircuitId:e,nodeTypesByNodeId:t,connectionsById:n,nodeDefsByType:i})}catch(e){return console.error(e),Ur}})),Fr=(e,t)=>{const{simulatorNodesById:n}=Zr(e),i=n[t];return i?i.elementType:null},Hr=(e,t)=>{var n;const i=Fr(e,t);return i&&null!==(n=zr[i])&&void 0!==n?n:null};var Kr=n(7513),qr=n.n(Kr);const $r=Object.freeze([]),Gr=Object.freeze({});function Vr(e,t){const n=(e=>{const{simulatorNodesById:t}=Zr(e);return Object.keys(t)})(t);return e=C,e=n.reduce(((e,n)=>function(e,t,n){const i=Hr(n,t);if(!i)return e;const o={};return i.outputPins.forEach((e=>{o[e]=!1})),M(e,"nodeOutputValuesByNodeId",t,o)}(e,n,t)),e),e=n.reduce(((e,n)=>Yr(e,n,t)),e),Object.assign({},e,{initialized:!0})}function _r(e,t,n){if(0===t.transitionIds.length)return e;let i=Object.assign({},e,{tick:t.tick,nodeOutputValuesByNodeId:Object.assign({},e.nodeOutputValuesByNodeId)});const o=new Set;t.transitionIds.forEach((e=>{const{nodeId:t,valuesByOutputPin:r}=i.transitionsById[e];var c,s;(c=i.nodeOutputValuesByNodeId[t],s=r,Object.keys(s).some((e=>c[e]!==s[e])))&&(i.nodeOutputValuesByNodeId[t]=Object.assign({},i.nodeOutputValuesByNodeId[t],r),((e,t)=>{const{simulatorNodesById:n}=Zr(e),i=n[t];return i?bn()(Zi()(i.outputsByPin),(e=>e.map((e=>e.simulatorNodeId)))):$r})(n,t).forEach((e=>o.add(e))))})),i.transitionsById=Ct()(i.transitionsById,en()(Object.keys(i.transitionsById),t.transitionIds));for(const e of o)i=Yr(i,e,n);return i}function Yr(e,t,n){const i=Hr(n,t);if(!i||!i.evolve)return e;const o=function(e,t,n){const i={},o=((e,t)=>{const{simulatorNodesById:n}=Zr(e),i=n[t];return i?i.inputsByPin:Gr})(n,t);return Object.keys(o).forEach((t=>{var n;const r=o[t];if(!r)return void(i[t]=!1);const{simulatorNodeId:c,pinId:s}=r;i[t]=(null===(n=e.nodeOutputValuesByNodeId[c])||void 0===n?void 0:n[s])||!1})),i}(e,t,n);return Xr(e,t,i.evolve(e.nodeStatesByNodeId[t],o,e.tick))}function Xr(e,t,n){const{state:i,transitions:o}=n;return i&&(e=M(e,"nodeStatesByNodeId",t,i)),o&&(e=se(o).reduce(((e,n,i)=>function(e,t,n,i="replace"){const{tickOffset:o,valuesByPin:r,transitionMerger:c=i}=n,s=e.tick+(o>0?o:1);return"replace"===c&&(e=function(e,t){return Object.keys(e.transitionsById).filter((n=>function(e){return e.nodeId===t}(e.transitionsById[n]))).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const i=Ct()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let o=e.transitionWindows;const r=qr()(o,n.tick,((e,t)=>e.tick-t));if(r>=0){const e=o[r],{transitionIds:n}=e,i=e.transitionIds.indexOf(t);-1!==i&&(1===e.transitionIds.length?o=ae(o,r):(o=o.slice(),o[r]=Object.assign({},o[r],{transitionIds:ae(n,i)})))}return Object.assign({},e,{transitionsById:i,transitionWindows:o})}(e,t)),e)}(e,t)),function(e,t,n,i){const o=(0,Re.Z)(),r={nodeId:t,tick:n,valuesByOutputPin:i},c=e.transitionWindows.slice();let s=qr()(c,n,((e,t)=>e.tick-t));if(s<0){s=-s-1;const e={tick:n,transitionIds:[]};c.splice(s,0,e)}const l=c[s].transitionIds.slice();l.push(o),c[s]=Object.assign({},c[s],{transitionIds:l});const a=Object.assign({},e.transitionsById,{[o]:r});return Object.assign({},e,{transitionsById:a,transitionWindows:c})}(e,t,s,r)}(e,t,n,0===i?"replace":"append")),e)),e}const Qr=Pr(((e,t,n)=>{if(!(0,Tr.ke)(t))return e;const{circuitNodeIdPath:i,data:o}=t.payload,r=((e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=Zr(e);return Rr(n,t)})(n,i);if(!r)return e;const c=Fr(n,r);if(!c)return e;const s=zr[c];if(!s||!s.interact)return e;const l=e.nodeStatesByNodeId[r];return Xr(e,r,s.interact(l,o))})),ec="@sim/start",tc=()=>({type:ec});function nc(e){return e.type===ec}const ic=Pr(((e,t,n)=>nc(t)?Vr(e,n):e)),oc="@sim/step",rc=()=>({type:oc});function cc(e){return e.type===oc}const sc="@sim/tick",lc=e=>({type:sc,payload:{tickCount:e}}),ac="@sim/stop",dc=()=>({type:ac});function uc(e){return e.type===ac}const pc=Ft(Mr,Qr,ic,(function(e=Pe,t){if(!cc(t))return e;const{initialized:n}=e.services.simulator;n||(e=M(e,"services","simulator",(t=>Vr(t,e))));const{tick:i,transitionWindows:o}=e.services.simulator;if(0===o.length)return e;const r=o[0].tick;return Kc(e,lc(r-i))}),Pr(((e,t)=>uc(t)?C:e)),Pr(((e,t,n)=>{if(!function(e){return e.type===sc}(t))return e;const{tickCount:i}=t.payload,o=performance.now();e=function(e,t,n){const i=e.tick+t;e=Object.assign({},e,{transitionWindows:e.transitionWindows.slice()});let o=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=i;){if(0==--o)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=_r(e,t,n)}return e.tick!=i&&(e=Object.assign({},e,{tick:i})),e}(e,i,n);const r=performance.now()-o;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:r})}))),mc=wt("simulatorControl"),yc=Pt("simulatorControl"),fc=mc(((e,t)=>Ot(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e)),gc="@sim/pause",hc=e=>({type:gc,payload:{mode:e}}),Ic=yc((e=>"edit"!==e.mode)),Ec=yc((e=>"run"===e.mode)),bc=yc((e=>"pause"===e.mode)),vc=yc((e=>e.ticksPerSecond)),kc=Ft(fc,mc(((e,t)=>{if(!function(e){return e.type===gc}(t))return e;const{mode:n}=t.payload;if(!Ic.local(e))return e;let i=e.mode;switch(n){case!0:i="pause";break;case!1:i="run";break;case"toggle":i="run"==i?"pause":"run"}return Object.assign(Object.assign({},e),{mode:i})})),mc(((e,t)=>nc(t)?Object.assign(Object.assign({},e),{mode:"run"}):e)),mc(((e,t)=>cc(t)?Object.assign(Object.assign({},e),{mode:"pause"}):e)),mc(((e,t)=>uc(t)?Object.assign(Object.assign({},j),{ticksPerSecond:e.ticksPerSecond}):e))),Oc="@tutorial/annotate",Nc=e=>({type:Oc,payload:{annotations:e}}),Cc=Vo(((e,t)=>{if(!function(e){return e.type===Oc}(t))return e;const{annotations:n}=t.payload;return Object.assign(Object.assign({},e),{annotatedElements:se(n)})})),jc="@tutorial/dismiss",xc=()=>({type:jc}),wc="@tutorial/start",Pc=e=>({type:wc,payload:{tutorial:e}}),Bc=Ft(Cc,((e=Pe,t)=>{var n;return function(e){return e.type===jc}(t)?null!==(n=e.services.tutorial.preTutorialState)&&void 0!==n?n:Pe:e}),((e=Pe,t)=>{if(!function(e){return e.type===wc}(t))return e;const{tutorial:n}=t.payload,i=e;return e=M(e=Pe,"services","project","projectName","Tutorial"),M(e,"services","tutorial",{activeTutorial:n,annotatedElements:[],preTutorialState:i})})),Mc=wt("uiLayout"),Sc=Pt("uiLayout"),zc=Mc(((e,t,n)=>{if(!We(t))return e;if(!e.layout)return e;const{circuitId:i}=t.payload,o=Dt(n,i),r=ge(e.layout,(e=>!ve(e)||-1===o.indexOf(e.windowProps.editorId)));return Object.assign(Object.assign({},e),{layout:r})})),Tc="@layout/rearrange",Rc=Mc(((e,t)=>{if(!function(e){return e.type===Tc}(t))return e;const{layout:n}=t.payload;return Object.assign(Object.assign({},e),{layout:n})})),Lc=Mc(((e,t,n)=>{if(!zi(t))return e;const{newWindowId:i}=t.payload;if(!i)return e;const o=be(i),r=Tt(n);let c=e.layout;if(null==c)c=o;else{let e=!1;l=t=>{const n=W(t);return ve(n)&&n.windowProps.editorId===r?(e=!0,{direction:"row",division:50,first:t,second:o}):null},c=null!==(a=function e(t){const n=l(t);if(n)return n;const i=W(t);if(U(i)){const t=e(i.first);if(t)return Object.assign(Object.assign({},i),{first:t});const n=e(i.second);if(n)return Object.assign(Object.assign({},i),{second:n})}return null}(s=c))&&void 0!==a?a:s,e||(c={direction:"row",division:50,first:c,second:o})}var s,l,a;return Object.assign(Object.assign({},e),{layout:c})})),Dc="@view/reset",Jc=()=>({type:Dc}),Wc=Ft(zc,Rc,Lc,Mc(((e,t)=>function(e){return e.type===Dc}(t)?Oe:e))),Ac="@view/node-names",Uc=e=>({type:Ac,payload:{mode:e}}),Zc=wt("uiSettings"),Fc=Pt("uiSettings"),Hc=Ft(Zc(((e,t)=>{if(!function(e){return e.type===Ac}(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{nodeNameMode:n})}))),Kc=function(e){const t=Zt()(e,(e=>e.weight||0));return(e=Pe,n)=>t.reduce(((e,t)=>t(e,n)),e)}(Ft(xi,Ti,mo,No,To,Zo,Go,ar,wr,pc,kc,Bc,Wc,Hc));const qc=[Vt,ji,sc];var $c=n(4970),Gc=n(8764),Vc=n(8424);function*_c(e,t){yield(0,$c.gz)(((e,t)=>({type:zo,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,$c.qn)([Co,Bo]);return n.type===Co?n.payload.result:null}const Yc="@project/export-link",Xc=()=>({type:Yc});function*Qc(){yield(0,$c.ib)(Yc,es)}function*es(){const e=yield(0,$c.Ys)();try{const t=so(e),n=JSON.stringify(t),i=(0,Vc.Wt)(n),o=Gc.lW.from(i).toString("base64"),r=encodeURIComponent(o),c=ze+d.createHref({pathname:"/import",search:"data="+r});yield(0,$c.RE)(_c,"export-project-link",{projectLink:c})}catch(e){console.error("Failed to export project as link",e)}}var ts=n(4171),ns=n.n(ts);const is="@project/import-circuits",os=()=>({type:is});function*rs(){yield(0,$c.ib)(is,cs)}function*cs(){const[e]=yield(0,$c.RE)(ns(),{accept:"application/json"}),t=yield(0,$c.RE)(e.text.bind(e)),n=JSON.parse(t),i=yield(0,$c.RE)(_c,"import-project-circuits",{circuits:n.circuits.filter((e=>e.circuitId!==p))});if(!Array.isArray(i))return;const o=i,r=[];let c;for(;c=o.pop();){r.push(c);for(const e of n.nodes){const{circuitId:t,nodeType:n}=e;if(c!==t)continue;const i=Rn(n);null!=i&&o.push(i)}}yield(0,$c.gz)(((e,t)=>({type:Li,payload:{circuitIds:se(e),saveData:t}}))(r,n))}const ss="@project/import-link";function*ls(){yield(0,$c.ib)(ss,as)}function*as(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=Gc.lW.from(e,"base64"),i=(0,Vc.rr)(n,{to:"string"}),o=JSON.parse(i);yield(0,$c.gz)(vt("Linked Project",o)),d.replace("/")}catch(e){console.error("Failed to import save from link",e)}}const ds="@project/load",us=()=>({type:ds});function*ps(){yield(0,$c.ib)(ds,ms)}function*ms(){try{const[e]=yield(0,$c.RE)(ns(),{accept:"application/json"}),t=yield(0,$c.RE)(e.text.bind(e)),n=JSON.parse(t);let i=e.name;i=i?i.substr(0,i.lastIndexOf(".json")):"Unnamed Project",yield(0,$c.gz)(vt(i,n))}catch(e){console.warn("Failed to load project:",e)}}var ys=n(3162);const fs=tr((e=>e.projectName)),gs=tr((e=>e.projectModified));function*hs(){yield(0,$c.ib)(cr,Is)}function*Is(){const e=yield(0,$c.Ys)();try{window.showSaveFilePicker?yield(0,$c.RE)(Es,e):yield(0,$c.RE)(bs,e),yield(0,$c.gz)({type:lr})}catch(e){console.warn("Failed to save project",e)}}function*Es(e){const t=yield(0,$c.Ys)(fs),n=yield(0,$c.RE)(window.showSaveFilePicker,{suggestedName:t,types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!n)return;let i=n.name;i||(i=n.getFile().name),i&&(i=i.substr(0,i.lastIndexOf(".json")),yield(0,$c.gz)((e=>({type:or,payload:{projectName:e}}))(i)));const o=so(e),r=yield(0,$c.RE)(n.createWritable.bind(n));yield(0,$c.RE)(r.write.bind(r),JSON.stringify(o,null,2)),yield(0,$c.RE)(r.close.bind(r))}function*bs(e){const t=yield(0,$c.Ys)(fs),n=so(e),i=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});(0,ys.saveAs)(i,t+".json")}function*vs(){yield(0,$c.rM)(Qc),yield(0,$c.rM)(rs),yield(0,$c.rM)(ls),yield(0,$c.rM)(ps),yield(0,$c.rM)(hs)}function*ks(){yield(0,$c.A7)([ec,gc,oc],Os)}function*Os(){for(;yield(0,$c.Ys)(Ec);){try{yield(0,$c.gz)(lc(1))}catch(e){return console.error(e),void(yield(0,$c.gz)(hc(!0)))}const e=yield(0,$c.Ys)(vc),t=Math.max(Math.ceil(1e3/e),1);yield(0,$c.gw)(t)}}function*Ns(){yield(0,$c.rM)(ks)}function Cs(e){return"circuit-editor-"+e}function js(e,t){return`editor-${e}--node-${t}`}function xs(e,t,n){return`editor-${e}--node-${t}--pin-${n}`}const ws="@tutorial/next";function*Ps(e,t={}){var n,i;const o=yield(0,$c.Ys)((t=>$n(t,e)));if(!o)return null;const r=yield(0,$c.Ys)(Tt);return r?(yield(0,$c.gz)(Nc([{selector:"#node-tray--node-"+e,message:null!==(n=t.trayMessage)&&void 0!==n?n:`This is a ${o.displayName} element`},{selector:"#"+Cs(r),message:null!==(i=t.fieldMessage)&&void 0!==i?i:`Drag the ${o.displayName} element onto the circuit field.`,placement:"top"}])),(yield(0,$c.RE)((()=>Ss(Ue,(({payload:{nodeType:t}})=>t===e))))).payload.nodeId):null}function*Bs(e,t){for(;;){if(yield(0,$c.RE)(Ms,e,t))return;yield(0,$c.qn)(dt)}}function*Ms(e,t){return(yield(0,$c.Ys)(Gi)).some((({inputPin:n,outputPin:i})=>_n(n,t)&&_n(i,e)))}function*Ss(e,t){let n;for(;(n=yield(0,$c.qn)(e))&&!t(n););return n}function*zs(e,t,n={}){var i;yield(0,$c.gz)(Nc([{selector:e,message:t,placement:n.placement,action:{name:"Next",action:{type:ws}}},...(null!==(i=n.additionalSelectors)&&void 0!==i?i:[]).map((e=>({selector:e})))])),yield(0,$c.qn)(ws)}function*Ts(){yield(0,$c.RE)(zs,"#node-tray","This is where logic elements are stored.");const e=yield(0,$c.RE)(Ps,"logic-not");if(!e)return void(yield(0,$c.gz)(xc()));const t=yield(0,$c.RE)(Ps,"interaction-momentary");if(!t)return void(yield(0,$c.gz)(xc()));const n=yield(0,$c.RE)(Ps,"output-led");if(!n)return void(yield(0,$c.gz)(xc()));const i=yield(0,$c.Ys)(Tt);i?(yield(0,$c.gz)(Nc([{selector:"#"+xs(i,t,"OUT"),message:"This is the switch's output pin.",placement:"top"},{selector:"#"+xs(i,e,"IN"),message:"This is the logic gate's input pin.",placement:"bottom"},{selector:"#"+Cs(i),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:t,pinId:"OUT"},{nodeId:e,pinId:"IN"}),yield(0,$c.gz)(Nc([{selector:"#"+xs(i,e,"OUT"),message:"This is the logic gate's output pin.",placement:"top"},{selector:"#"+xs(i,n,"IN"),message:"This is the LED's input pin.",placement:"bottom"},{selector:"#"+Cs(i),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:e,pinId:"OUT"},{nodeId:n,pinId:"IN"}),yield(0,$c.gz)(Nc({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,$c.qn)(ec),yield(0,$c.gz)(Nc([{selector:"#"+Cs(i)},{selector:"#"+js(i,t),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,$c.RE)((()=>Ss(Tr.F,(({payload:{circuitNodeIdPath:e,data:n}})=>!0===n&&le(e,[t]))))),yield(0,$c.gz)(Nc({selector:"#"+Cs(i),placement:"top",message:"That's it!",action:{name:"End Tutorial",action:xc()}}))):yield(0,$c.gz)(xc())}function Rs(e){return"circuit-list--circuit-"+e}function*Ls(){yield(0,$c.RE)(zs,"#circuit-list-window","Circuits are collections of nodes that can be reused as ICs."),yield(0,$c.gz)(Nc({selector:"#circuit-list",message:"Right click on the circuit list to create a new circuit."}));const e=yield(0,$c.qn)(Le),{circuitId:t}=e.payload;yield(0,$c.gz)(Nc({selector:"#"+Rs(t),message:"Here is your circuit.  Double click it to rename it."})),yield(0,$c.qn)(Ae),yield(0,$c.gz)(Nc({selector:"#"+Rs(t),message:"Click the circuit to view it in the active editor window."})),yield(0,$c.RE)((()=>Ss(Mi,(e=>e.payload.circuitId===t))));const n=yield(0,$c.Ys)(Tt);if(!n)return void(yield(0,$c.gz)(xc()));const i=yield(0,$c.RE)(Ps,"pin-input");if(!i)return void(yield(0,$c.gz)(xc()));yield(0,$c.RE)(zs,"#"+js(n,i),"Input pins take a signal from outside for use in your circuit.",{additionalSelectors:["#"+Cs(n)]}),yield(0,$c.gz)(Nc([{selector:"#"+Cs(n)},{selector:"#"+js(n,i),message:"Rename the pin by right clicking it and clicking on the bolded text.  Choose any name you like"}])),yield(0,$c.RE)((()=>Ss($e,(e=>e.payload.nodeId===i)))),yield(0,$c.RE)(zs,"#"+js(n,i),"Pin names will appear on the body of the IC when used in other circuits.  Be sure to name your pins!");const o=yield(0,$c.RE)(Ps,"pin-output");if(!o)return void(yield(0,$c.gz)(xc()));yield(0,$c.RE)(zs,"#"+js(n,o),"Output pins take a signal from your circuit and send it to the outside world.");const r=yield(0,$c.RE)(Ps,"pin-output",{trayMessage:"Let's take another output pin",fieldMessage:"When multiple pins are used, the pins will stack in their vertical orientation on the IC"});if(!r)return void(yield(0,$c.gz)(xc()));yield(0,$c.RE)(zs,"#"+Cs(n),"Let's put together a simple circuit.",{placement:"top"});const c=yield(0,$c.RE)(Ps,"logic-buffer");if(!c)return void(yield(0,$c.gz)(xc()));const s=yield(0,$c.RE)(Ps,"logic-not");if(!s)return void(yield(0,$c.gz)(xc()));yield(0,$c.gz)(Nc([{selector:"#"+xs(n,i,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+xs(n,c,"IN"),message:"...to the buffer's input.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:i,pinId:"OUT"},{nodeId:c,pinId:"IN"}),yield(0,$c.gz)(Nc([{selector:"#"+xs(n,c,"OUT"),message:"Connect the buffer's output pin...",placement:"top"},{selector:"#"+xs(n,o,"IN"),message:"...to the IC's first output.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:c,pinId:"OUT"},{nodeId:o,pinId:"IN"}),yield(0,$c.gz)(Nc([{selector:"#"+xs(n,i,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+xs(n,s,"IN"),message:"...to the NOT's input.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:i,pinId:"OUT"},{nodeId:s,pinId:"IN"}),yield(0,$c.gz)(Nc([{selector:"#"+xs(n,s,"OUT"),message:"Connect the NOT's output...",placement:"top"},{selector:"#"+xs(n,r,"IN"),message:"...to the second IC output.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:s,pinId:"OUT"},{nodeId:r,pinId:"IN"}),yield(0,$c.gz)(Nc({selector:"#"+Rs(p),message:"We now have a functional IC.  Let's go to the root project and make use of it"})),yield(0,$c.RE)((()=>Ss(Mi,(e=>e.payload.circuitId===p))));const l=Tn(t),a=yield(0,$c.RE)(Ps,l);if(!a)return void(yield(0,$c.gz)(xc()));yield(0,$c.RE)(zs,"#"+Cs(n),"Let's wire it up to see it in action.",{placement:"top"});const d=yield(0,$c.RE)(Ps,"interaction-momentary");if(!d)return void(yield(0,$c.gz)(xc()));const u=yield(0,$c.RE)(Ps,"output-led",{trayMessage:"Make an LED to check the status of the first pin."});if(!u)return void(yield(0,$c.gz)(xc()));const m=yield(0,$c.RE)(Ps,"output-led",{trayMessage:"Make an LED to check the status of the second pin."});m?(yield(0,$c.gz)(Nc([{selector:"#"+xs(n,d,"OUT"),message:"Connect the switch output...",placement:"top"},{selector:"#"+xs(n,a,i),message:"...to the IC input.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:d,pinId:"OUT"},{nodeId:a,pinId:i}),yield(0,$c.gz)(Nc([{selector:"#"+xs(n,a,o),message:"Connect the first IC output...",placement:"top"},{selector:"#"+xs(n,u,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:a,pinId:o},{nodeId:u,pinId:"IN"}),yield(0,$c.gz)(Nc([{selector:"#"+xs(n,a,o),message:"Connect the first IC output...",placement:"top"},{selector:"#"+xs(n,u,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:a,pinId:o},{nodeId:u,pinId:"IN"}),yield(0,$c.gz)(Nc([{selector:"#"+xs(n,a,r),message:"Connect the second IC output...",placement:"top"},{selector:"#"+xs(n,m,"IN"),message:"...to the second LED.",placement:"bottom"},{selector:"#"+Cs(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,$c.RE)(Bs,{nodeId:a,pinId:r},{nodeId:m,pinId:"IN"}),yield(0,$c.gz)(Nc({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,$c.qn)(ec),yield(0,$c.gz)(Nc([{selector:"#"+Cs(n)},{selector:"#"+js(n,d),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,$c.RE)((()=>Ss(Tr.F,(({payload:{circuitNodeIdPath:e,data:t}})=>!0===t&&le(e,[d]))))),yield(0,$c.gz)(Nc({selector:"#"+Cs(n),placement:"top",message:"You can place as many copies of an IC as you want.  Circuits can also contain other ICs.",action:{name:"End Tutorial",action:xc()}}))):yield(0,$c.gz)(xc())}function*Ds(){yield(0,$c.ib)(wc,Js)}function*Js(e){const{tutorial:t}=e.payload;switch(t){case"basics":return void(yield(0,$c.RE)(Ts));case"circuits":yield(0,$c.RE)(Ls)}}function*Ws(){yield(0,$c.rM)(Ds)}const As=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionSanitizer:function(e){return e},stateSanitizer:function(e){return e},actionsBlacklist:qc})||Be.qC,Us=(0,Me.ZP)(),Zs=[!1,Us].filter(T),Fs=(0,Be.MT)((function(e=Pe,t){return e=function(e=Pe,t){return function(e=Pe,t){if(!mt(t))return e;const{undoStack:n,redoStack:i}=e.undo,o=At()(n);if(!o)return e;const{serviceStates:r,viewCircuitId:c}=o;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),r),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...i,Jt(e)]})}),c&&(e=Kc(e,Si(c))),e}(e=function(e=Pe,t){if(!gt(t))return e;const{undoStack:n,redoStack:i}=e.undo,o=At()(i);if(!o)return e;const{serviceStates:r,viewCircuitId:c}=o;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),r),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,Jt(e)],redoStack:i.slice(0,i.length-1)})}),c&&(e=Kc(e,Si(c))),e}(e=function(e=Pe,t){return!Ot(t)||mt(t)||gt(t)?e:M(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),Jt(e)],redoStack:[]})))}(e,t),t),t)}(e,t),Kc(e,t)}),As((0,Be.md)(...Zs)));function Hs(e){return(0,c.v9)(e)}function Ks(e,t,n,o){i.useEffect((()=>{if(!e.current)return;const i=e.current;return i.addEventListener(t,n,o),()=>{i.removeEventListener(t,n,o)}}),[t,n,e,o])}Us.run((function*(){yield(0,$c.rM)(vs),yield(0,$c.rM)(Ns),yield(0,$c.rM)(Ws)})),Fs.dispatch({type:Te});const qs=Sc((e=>e.layout)),$s=({className:e,title:t,children:n})=>i.createElement("div",{className:B("titlebar--3-TCE",e)},i.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),i.createElement("div",{className:"titlebar-divider--Wl_27"}),t&&i.createElement("div",{className:"titlebar-title--HXGig"},t),n);var Gs=n(1935);function Vs(){}const _s={registerPopoverChild:Vs,unregisterPopoverChild:Vs},Ys=i.createContext(null),Xs=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const o=i.useContext(Ys),r=null==o?void 0:o.registerPopoverChild,c=null==o?void 0:o.unregisterPopoverChild,s=i.useCallback((t=>{r&&r(t),e(t)}),[e,r]),l=i.useCallback((e=>{t(e)}),[t,c]),a=i.useMemo((()=>({registerPopoverChild:s,unregisterPopoverChild:l})),[s,l]);return i.createElement(Ys.Provider,{value:a},n)},Qs=()=>{},el=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:r=Qs,children:c})=>{const[s,l]=i.useState(null),{attributes:a,styles:d}=(0,Gs.D)(e?t:null,s,{placement:n});!function(e){var t;const n=null!==(t=i.useContext(Ys))&&void 0!==t?t:_s,o=i.useRef(n);i.useEffect((()=>{o.current=n})),i.useEffect((()=>{if(e)return o.current.registerPopoverChild(e),()=>o.current.unregisterPopoverChild(e)}),[e])}(s);const[u,p,m]=function(e=[]){const[t,n]=i.useState(e),o=i.useCallback((e=>{n([...t,e])}),[t]),r=i.useCallback((e=>{n(en()(t,[e]))}),[t]);return[t,o,r,n]}();return function(e,t,n=!0){const o=i.useCallback((n=>{const i=se(e).filter(T);i.length&&i.every((e=>!e.contains(n.target)))&&t()}),[e,t]);i.useEffect((()=>{if(n)return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}}),[o,n])}(i.useMemo((()=>[s,...u]),[u,s]),r),e?(0,o.createPortal)(i.createElement(Xs,{registerPopoverChild:p,unregisterPopoverChild:m},i.createElement("div",Object.assign({ref:l,style:Object.assign(Object.assign({},d.popper),{zIndex:10})},a.popper),c)),document.body):null},tl=i.createContext((function(){}));function nl(){return i.useContext(tl)}const il=tl.Provider,ol=({content:e,placement:t,children:n})=>{const o=i.useRef(null),[r,c]=i.useState(!1),s=i.useCallback((()=>{c(!0)}),[]),l=i.useCallback((()=>{c(!1)}),[]);return i.createElement(il,{value:l},i.createElement("div",{ref:o,onClick:s},n),i.createElement(el,{anchorEl:o.current,isOpen:r,placement:t,onRequestClose:l},r&&e))},rl={button:"button--Ui3Hp","button--size-small":"button--size-small--289kb","button--size-default":"button--size-default--dnLXK","button--variant-primary":"button--variant-primary--2qpAa","button--variant-default":"button--variant-default---2bie","button--variant-menu":"button--variant-menu--3lEZ1"};const cl=e=>{var{variant:t="default",size:n="default"}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["variant","size"]);return i.createElement("button",Object.assign({className:B(rl.button,rl["button--variant-"+t],rl["button--size-"+n]),type:"button"},o),o.children)};function sl(e,...t){const n=(0,c.I0)();return i.useCallback((()=>{const i=e(...t);i&&n(i)}),[n,e,...t])}function ll(e,...t){const n=(0,c.I0)();return i.useCallback((i=>{if(i.defaultPrevented)return;i.preventDefault();const o=e(...t);o&&n(o)}),[n,e,...t])}const al="menu-item--2dcyN",dl="menu-item--disabled--RJJTK",ul="menu-item-content--3s1DG",pl="menu-item-text--1F41V",ml="menu-item-secondary--2PJLF",yl=({children:e})=>i.createElement("ul",{className:"menu--3E86w"},e),fl=({disabled:e,onClick:t,secondary:n,children:o})=>{const r=nl(),c=i.useCallback((e=>{t&&t(e),r()}),[r,t]);return i.createElement("li",{className:B(al,e&&dl)},i.createElement("a",{className:ul,onClick:c},i.createElement("span",{className:pl},o),n&&i.createElement("span",{className:ml},n)))},gl=()=>i.createElement("div",{className:"menu-divider--1QPGp"}),hl=()=>{const e=sl(It),t=sl(sr),n=sl(us),o=sl(os),r=sl(Xc);return i.createElement(yl,null,i.createElement(fl,{onClick:e},"New"),i.createElement(gl,null),i.createElement(fl,{onClick:n},"Load"),i.createElement(fl,{onClick:t},"Save"),i.createElement(gl,null),i.createElement(fl,{onClick:o},"Import Circuits"),i.createElement(gl,null),i.createElement(fl,{onClick:r},"Export Link"))};var Il=n(1795);const El=/(Mac|iOS|OS\ X)/.test((Il.os||"undefined").toString()),bl=El?"command":"ctrl",vl=e=>e.undo.undoStack.length>0,kl=e=>e.undo.redoStack.length>0,Ol=Oo((e=>e.clipboardNodes.length>0)),Nl=()=>{const e=Hs(vl),t=sl(pt),n=Hs(kl),o=sl(ft),r=Hs(ai).length>0,c=sl(xr),s=Hs(Ol),l=sl(at);return i.createElement(yl,null,i.createElement(fl,{disabled:!e,secondary:bl+"+z",onClick:t},"Undo"),i.createElement(fl,{disabled:!n,secondary:bl+"+shift+z",onClick:o},"Redo"),i.createElement(gl,null),i.createElement(fl,{disabled:!r,secondary:bl+"+c",onClick:c},"Copy"),i.createElement(fl,{disabled:!s,secondary:bl+"+v",onClick:l},"Paste"))},Cl=Fc((e=>e.nodeNameMode)),jl=({className:e,value:t,onChange:n,children:o})=>i.createElement("label",{className:e},i.createElement("span",{className:"checkbox-span--1EWGs"},i.createElement("input",{type:"checkbox",checked:t,onChange:n})),o),xl=({disabled:e,secondary:t,value:n,onChange:o,children:r})=>i.createElement("li",{className:B(al,e&&dl)},i.createElement(jl,{className:ul,value:n,onChange:o},i.createElement("span",{className:pl},r),t&&i.createElement("span",{className:ml},t))),wl=({disabled:e,secondary:t,content:n,children:o})=>i.createElement("li",{className:B(al,e&&dl)},i.createElement(ol,{placement:"right-start",content:n},i.createElement("a",{className:ul},i.createElement("span",{className:pl},o),t&&i.createElement("span",{className:ml},t),i.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},i.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),Pl=()=>{const e=Hs(Cl),t=sl(Uc,"all"),n=sl(Uc,"named-only"),o=sl(Uc,"none");return i.createElement(yl,null,i.createElement(xl,{value:"all"===e,onChange:t},"Always visible"),i.createElement(xl,{value:"named-only"===e,onChange:n},"Named Items Only"),i.createElement(xl,{value:"none"===e,onChange:o},"Hidden"))},Bl=()=>{const e=sl(Jc);return i.createElement(yl,null,i.createElement(wl,{content:i.createElement(Pl,null)},"Element Names"),i.createElement(gl,null),i.createElement(fl,{onClick:e},"Reset View"))},Ml=()=>{const e=sl(Pc,"basics"),t=sl(Pc,"circuits");return i.createElement(yl,null,i.createElement(fl,{onClick:e},"Basics"),i.createElement(fl,{onClick:t},"Circuits"))},Sl=()=>i.createElement(yl,null,i.createElement(wl,{content:i.createElement(Ml,null)},"Tutorials")),zl=Br((e=>e.lastTickProcessingTimeMs)),Tl="icon--3Vly6",Rl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:B(Tl,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),Ll=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:B(Tl,e.className)}),i.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),Dl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:B(Tl,e.className)}),i.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),Jl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:B(Tl,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z M11,1 l2,0 l0,14 l-2,0 z"})),Wl="button--2N_ol",Al=()=>{const e=Hs(Ic),t=Hs(bc),n=Hs(zl),o=ll(tc),r=ll(dc),c=ll(hc,"toggle"),s=ll(rc),l=i.useCallback((e=>{e.preventDefault()}),[]);return i.createElement("span",null,e&&i.createElement("span",{className:"simrate--NKBi_"},n.toFixed(2)," ms"),e?i.createElement(Ll,{id:"simctrl-stop",className:B(Wl,"button-stop--1dD4-"),onClick:r,onMouseDown:l}):i.createElement(Rl,{id:"simctrl-run",className:B(Wl,"button-play--1vWfq"),onClick:o,onMouseDown:l}),i.createElement(Jl,{id:"simctrl-step",className:B(Wl,"button-step--3Fat5"),onClick:s,onMouseDown:l}),i.createElement(Dl,{id:"simctrl-pause",className:B(Wl,"button-pause--1UoHJ",!e&&"button--disabled--3caLv",t&&"selected--Ev2q8"),onClick:c,onMouseDown:l}))},Ul=({className:e})=>{const t=`${Hs(fs)}${Hs(gs)?"*":""}`;return i.createElement($s,{className:e,title:t},i.createElement(ol,{content:i.createElement(hl,null),placement:"bottom-start"},i.createElement(cl,{variant:"menu"},"File")),i.createElement(ol,{content:i.createElement(Nl,null),placement:"bottom-start"},i.createElement(cl,{variant:"menu"},"Edit")),i.createElement(ol,{content:i.createElement(Bl,null),placement:"bottom-start"},i.createElement(cl,{variant:"menu"},"View")),i.createElement(ol,{content:i.createElement(Sl,null),placement:"bottom-start"},i.createElement(cl,{variant:"menu"},"Help")),i.createElement("div",{className:"project-titlebar-controls--1c1Qn"},i.createElement(Al,null)))};var Zl=n(3274);const Fl=({circuitId:e,circuitNodeIdPath:t})=>{const n=(0,c.I0)(),o=Hs((e=>Wn(e,p))),r=Hs((t=>Wn(t,e))),s=i.useCallback((e=>{e.preventDefault(),n(Si(p,[]))}),[n]);return i.createElement(cl,{size:"small",onClick:s},0===t.length?r:o)},Hl=({circuitNodeIdPath:e})=>{const t=(0,c.I0)(),n=At()(e),o=Hs((e=>fn(e,n))),r=Hs((e=>hn(e,n))),s=o?Rn(o):null,l=Hs((e=>s?Wn(e,s):null)),a=i.useCallback((n=>{n.preventDefault(),s&&t(Si(s,e))}),[s,e,t]);return i.createElement(cl,{size:"small",onClick:a},r," [",l,"]")},Kl=({circuitId:e,circuitNodeIdPath:t})=>{const n=t.map(((e,n)=>{const o=t.slice(0,n+1);return i.createElement(i.Fragment,{key:e},i.createElement("span",null,">"),i.createElement(Hl,{circuitNodeIdPath:o}))}));return i.createElement("div",{className:B("circuit-node-breadcrumb","circuit-node-breadcrumb--3Rx3N")},i.createElement(Fl,{circuitId:e,circuitNodeIdPath:t}),n)},ql=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),$l=(0,rn.P1)(kr,ro,((e,t)=>[...Zi()(e),...Zi()(t).map((e=>({p1:e,p2:e})))].reduce(I.G0,ql))),Gl="@node/new",Vl=e=>({type:Gl,payload:{nodeType:e}});function _l(e){return e.type===Gl}const Yl=i.createContext({zoomFactor:1,zoom:()=>{}});function Xl(){return i.useContext(Yl)}const Ql=({children:e})=>{const[t,n]=i.useState(1),o=i.useCallback((e=>{n((t=>e>0?t*e*1.03:t/(1.03*-e)))}),[]),r=i.useMemo((()=>({zoomFactor:t,zoom:o})),[o,t]);return i.createElement(Yl.Provider,{value:r},e)},ea={current:null},ta=i.createContext({svgRef:ea,scalerRef:ea}),na=ta.Provider,ia=({svgRef:e,scalerRef:t,children:n})=>{const o=i.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return i.createElement(na,{value:o},n)},oa=i.createContext({editorId:"~none",circuitId:"~none",circuitNodeIdPath:[]});function ra(){return i.useContext(oa)}const ca=({editorId:e,children:t})=>{const n=Hs((t=>St(t,e))),{circuitId:o,circuitNodeIdPath:r}=null!=n?n:{circuitId:"~none",circuitNodeIdPath:[]},c=i.useMemo((()=>({editorId:e,circuitId:o,circuitNodeIdPath:r})),[o,r,e]);return n?i.createElement(oa.Provider,{value:c},t):null};function sa(e,t,n){const i=t.getScreenCTM();if(!i)return n;const o=e.createSVGPoint();o.x=n.x,o.y=n.y;const r=o.matrixTransform(i.inverse());return{x:r.x,y:r.y}}function la(){const{svgRef:e,scalerRef:t}=i.useContext(ta);return i.useCallback((n=>e.current&&t.current?sa(e.current,t.current,n):n),[e,t])}const aa="text-unselectable--2tvXe",da=(e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=Zr(e),i=e.services.simulator.nodeOutputValuesByNodeId,o=Rr(n,t);if(o)return i[o]},ua="node-interaction-toggle--1eXWD",pa={"integrated-circuit":({circuitNodeId:e,circuitNodePath:t,circuitId:n,inputPinIds:o,outputPinIds:r})=>{const s=(0,c.I0)(),l=Hs((e=>Wn(e,n))),a=Hs(gn),d=Ln(o.length,r.length),u=i.useCallback((i=>{e&&(i.defaultPrevented||(i.preventDefault(),s(Si(n,[...t||[],e]))))}),[e,s,n,t]),p=o.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:4,y1:n,x2:10,y2:n}),i.createElement("text",{className:aa,x:15,y:n,alignmentBaseline:"middle",fontSize:".7em"},a[e]))})),m=r.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{key:t,className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:n,x2:100,y2:n}),i.createElement("text",{className:aa,x:85,y:n,textAnchor:"end",alignmentBaseline:"middle",fontSize:".7em"},a[e]))}));return i.createElement("g",null,i.createElement("text",{className:B(aa,"node-select-highlight--fill"),textAnchor:"middle",x:50,y:0},l),i.createElement("path",{className:"node-select-highlight--stroke node-select-highlight--fill",stroke:"black",fill:"white",d,onDoubleClick:u}),p,m)},"interaction-momentary":({circuitNodeId:e,circuitNodePath:t})=>{const n=(0,c.I0)(),o=Hs(Ic),r=i.useMemo((()=>[...t||[],null!=e?e:"~~none"]),[t,e]),s=Hs((e=>da(e,r))),l=i.useCallback((e=>{o&&(e.defaultPrevented||(e.preventDefault(),n((0,Tr.zN)(r,!0))))}),[r,n,o]),a=i.useCallback((()=>{o&&n((0,Tr.zN)(r,!1))}),[r,n,o]);let d="darkgreen",u="lightgrey";return s&&s.OUT&&(d="lightgreen",u="black"),i.createElement("g",{onMouseDown:l,onMouseUp:a,onMouseLeave:a,className:ua},i.createElement("rect",{className:"node-select-highlight--stroke node-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),i.createElement("circle",{cx:25,cy:25,r:17,fill:d}),i.createElement("text",{className:aa,x:25,y:25,fontSize:".8em",fill:u,textAnchor:"middle",alignmentBaseline:"middle"},"Push"))},"interaction-toggle":({circuitNodeId:e,circuitNodePath:t,elementState:n})=>{const o=(0,c.I0)(),r=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),o((0,Tr.zN)([...t||[],e]))))}),[e,o,t]);let s="darkgreen",l="lightgrey",a="darkred";if(n){const{toggleState:e}=n;e?(s="lightgreen",l="black"):a="red"}return i.createElement("g",{onClick:r,className:ua},i.createElement("rect",{className:"node-select-highlight--stroke node-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),i.createElement("rect",{x:10,y:10,width:30,height:15,strokeWidth:0,fill:s}),i.createElement("text",{className:aa,x:25,y:19,fontSize:".8em",fill:l,textAnchor:"middle",alignmentBaseline:"middle"},"On"),i.createElement("rect",{x:10,y:25,width:30,height:15,strokeWidth:0,fill:a}),i.createElement("text",{className:aa,x:25,y:34,fontSize:".8em",fill:"lightgrey",textAnchor:"middle",alignmentBaseline:"middle"},"Off"))}},ma=({componentName:e})=>i.createElement("g",null,i.createElement("rect",{width:50,height:50,fill:"red"}),i.createElement("text",{x:25,y:25,alignmentBaseline:"middle"},e));function ya(e,t,n,o){const{component:r,componentProps:c}=o,s=Object.assign({circuitNodeId:e,circuitNodePath:t,elementState:n},c);let l;return"string"==typeof r?(l=pa[r],l||(l=()=>i.createElement(ma,{componentName:r}))):l=r,i.createElement(l,Object.assign({},s))}const fa=Object.freeze({}),ga=i.memo((function({className:e,circuitNodeId:t,x:n=0,y:o=0,nodeType:r}){const c=Hs((e=>$n(e,r)));let s;s=c?ya(t,[],fa,c.visual):i.createElement("rect",{x:n,y:o,width:50,height:50,fill:"red"});const l=0!=n||0!=o?`translate(${n}, ${o})`:void 0;return i.createElement("g",{className:B(e,"node-visual"),transform:l},s)})),ha=i.memo((function(){const e=(0,c.I0)(),{circuitId:t}=ra(),n=Hs(ei),o=la(),[r,s]=i.useState(null),[l,a]=i.useState(null),d=Hs((e=>Un(e,Rn(r),t))),[,u]=(0,ue.L)({accept:Gl,collect:e=>{e.isOver()||(a(null),s(null))},hover:(e,t)=>{if(!_l(e))return a(null),void s(null);const n=t.getClientOffset();if(!n)return;const i=o({x:n.x,y:n.y});s(e.payload.nodeType),a(i)},drop:(i,r)=>{if(!_l(i))return;if(d)return;const c=r.getClientOffset();if(!c)return;const s=o({x:c.x,y:c.y});e(Ze(i.payload.nodeType,t,(0,I.R9)(s,n)))}},[t,o,n,d]),p=l&&(0,I.R9)(l,n);return i.createElement("g",{id:"drag-new-node-layer"},!d&&p&&r&&i.createElement("g",{opacity:.5},i.createElement(ga,{x:p.x,y:p.y,nodeType:r})),d&&i.createElement("g",null,i.createElement("rect",{width:"100%",height:"100%",opacity:.7,fill:"black"}),i.createElement("text",{x:"100",y:"25%",fill:"white"},"The current circuit is already inside the dragged IC.")),i.createElement("rect",{ref:u,width:"100%",height:"100%",fill:"transparent"}))})),Ia=$t((e=>e.dragMode)),Ea=$t(((e,t)=>null!=e.dragMode&&e.dragStartEditorId===e.dragEndEditorId&&e.dragStartEditorId===t)),ba=$t((e=>null!=e.dragMode)),va=$t((e=>e.dragMode?e.dragStart:null)),ka=$t((e=>e.dragMode?e.dragEnd:null)),Oa=$t((0,rn.P1)(Ia.local,va.local,ka.local,((e,t,n)=>"select"===e&&t&&n?(0,I.Qu)(t,n):null)));let Na=null;const Ca=e=>{const t=e.services.circuitEditorDrag;if("move"!==t.dragMode)return null;let n;n=ai(e).length>0?ei(e):ti(e);const{dragStart:i,dragEnd:o,dragModifierKeys:r}=t;if(!o)return null;const c=(0,I.sj)(o,i);return r.ctrlMetaKey||(c.x=Math.round(c.x/n)*n,c.y=Math.round(c.y/n)*n),Na&&(0,I.kg)(c,Na)||(Na=c),Na},ja=$t((e=>{const t=ti.local(e);if("new-joint"!==e.dragMode)return null;const{dragEnd:n,dragModifierKeys:i}=e;if(!n||!i)return null;const o=Object.assign({},n);return i.ctrlMetaKey||(o.x=Math.round(o.x/t)*t,o.y=Math.round(o.y/t)*t),o})),xa=e=>{const t=e.services.circuitEditorDrag;if("wire"!==t.dragMode)return null;const{dragEnd:n,dragStartEditorId:i}=t;if(!n)return null;const o=zt(e,i);return o?Qn(e,n,o):null},wa=(0,rn.P1)(ai,Sn,((e,t)=>Ct()(t,e))),Pa=(0,rn.P1)(ai,pn,((e,t)=>Ct()(t,e))),Ba=i.memo((function(){const{editorId:e}=ra(),t=Hs((t=>Ea(t,e))),n=Hs(wa),o=Hs(Pa),r=Hs(Ca);if(!t||!r)return null;let c=null;return r&&(c=Zi()(sn()(n,((e,t)=>i.createElement(ga,{key:t,nodeType:o[t],x:e.x+r.x,y:e.y+r.y}))))),i.createElement("g",{id:"drag-node-preview-layer",opacity:.3},c)}));const Ma=e=>{var{x:t,y:n,interactable:o=!0,selected:r=!1}=e,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["x","y","interactable","selected"]);const[s,l]=i.useState(!1),a=i.useCallback((()=>{o&&l(!0)}),[o]),d=i.useCallback((()=>{l(!1)}),[]);return i.createElement("circle",Object.assign({className:B("wire-joint--3o_SE",r&&"selected--33Nsw"),cx:t,cy:n,r:o&&s||r?4:2,onMouseOver:a,onMouseOut:d},c))},Sa=(0,rn.P1)(pi,ro,((e,t)=>Ct()(t,e))),za=i.memo((function(){const{editorId:e}=ra(),t=Hs((t=>Ea(t,e))),n=Hs(Ca),o=Hs(Sa),r=Hs(ja);if(!t||!n&&!r)return null;let c=null;n&&(c=Zi()(o).map(((e,t)=>i.createElement(Ma,{key:t,interactable:!1,x:e.x+n.x,y:e.y+n.y,opacity:.5}))));let s=null;return r&&(s=i.createElement(Ma,{interactable:!1,x:r.x,y:r.y,opacity:.5})),i.createElement("g",{id:"drag-joint-preview-layer",opacity:.3},c,s)}));function Ta({dragThreshold:e=5,onClick:t,onDragStart:n}){const[o,r]=i.useState(!1),c=i.useRef(null),s=i.useCallback((e=>{e.preventDefault&&(r(!0),c.current={x:e.pageX,y:e.pageY})}),[]),l=i.useCallback((t=>{if(!c.current)return;const i=c.current;(Math.abs(i.x-t.pageX)>=e||Math.abs(i.y-t.pageY)>=e)&&(n&&n(t,c.current),r(!1),c.current=null)}),[e,n]),a=i.useCallback((e=>{c.current&&(t&&t(e),r(!1),c.current=null)}),[t]);return i.useEffect((()=>{if(o)return document.addEventListener("mousemove",l),document.addEventListener("mouseup",a),()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a)}}),[o,l,a]),{startTracking:s}}function Ra(e){const{ctrlKey:t,altKey:n,shiftKey:i,metaKey:o}=e;return{ctrlMetaKey:El?o:t,altKey:n,shiftKey:i}}Object.freeze({});const La=({x:e,y:t,open:n,onRequestClose:o,children:r})=>{const c=i.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return i.createElement(il,{value:o},i.createElement(el,{isOpen:n,onRequestClose:o,anchorEl:c,placement:"bottom-start"},r))};function Da(){const[e,t]=i.useState(null),n=i.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),o=i.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:i.useCallback((t=>e?("function"==typeof t&&(t=t({point:e})),i.createElement(La,{open:!0,onRequestClose:o,x:e.x,y:e.y},t)):null),[e,o])}}const Ja=({fieldPosition:e})=>{const t=sl(Ve),n=Hs(ai).length>0,o=sl(xr),r=Hs(Ol),c=sl(at,{pastePosition:e}),s=sl(Ye);return i.createElement(i.Fragment,null,i.createElement(fl,{onClick:t},"Align Selection To Grid"),i.createElement(gl,null),i.createElement(fl,{disabled:!n,secondary:bl+"+c",onClick:o},"Copy"),i.createElement(fl,{disabled:!r,secondary:bl+"+v",onClick:c},"Paste"),i.createElement(gl,null),i.createElement(fl,{onClick:s},"Delete Selected"))},Wa=({fieldPosition:e})=>i.createElement(yl,null,i.createElement(Ja,{fieldPosition:e})),Aa=i.memo((function(){const e=(0,c.I0)(),{editorId:t}=ra(),{zoomFactor:n}=Xl(),o=Hs((e=>Ea(e,t))),r=Hs(Oa);function s(e){return e*(1/n)}const l=la(),{openContextMenu:a,renderContextMenu:d}=Da(),u=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),a(e))}),[a]),p=i.useCallback((t=>{if(0!==t.button)return;const n=Ra(t);n.ctrlMetaKey||n.shiftKey||e({type:gr})}),[e]),m=i.useCallback(((n,i)=>{const o=l(i),r=Ra(n);e(((e,t,n)=>({type:ki,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(o,r,t))}),[e,t,l]),{startTracking:y}=Ta({onClick:p,onDragStart:m});return i.createElement("g",null,i.createElement("rect",{width:100*s(1)+"%",height:100*s(1)+"%",fill:"transparent",onMouseDown:y,onContextMenu:u}),o&&r&&i.createElement("g",{transform:`translate(${r.p1.x}, ${r.p1.y})`},i.createElement("rect",{width:r.p2.x-r.p1.x,height:r.p2.y-r.p1.y,strokeWidth:s(2),strokeDasharray:`${s(5)} ${s(3)}`,stroke:"skyblue",fill:"transparent"})),d((({point:e})=>i.createElement(Wa,{fieldPosition:l(e)}))))})),Ua=i.memo((function(){const[e]=i.useState("grid-"+(0,Re.Z)()),{zoomFactor:t}=Xl(),n=50*t;return i.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null,i.createElement("pattern",{id:e,width:n,height:n,patternUnits:"userSpaceOnUse"},i.createElement("path",{d:`M ${n} 0 L 0 0 0 ${n}`,fill:"none",stroke:"gray",strokeWidth:.5}))),i.createElement("rect",{width:"100%",height:"100%",fill:`url(#${e})`}))})),Za=i.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:o,onChange:r,onBeginEdit:c,onCommit:s,onCancel:l,onBlur:a,onKeyUp:d},u)=>{const[p,m]=i.useState(null),y=i.useCallback((e=>{null==p&&c&&c(),m(e.target.value),r&&r(e)}),[p,c,r]),f=i.useCallback((e=>{d&&d(e),e.defaultPrevented||null!=p&&("Escape"===e.key?(e.preventDefault(),l&&l()):"Enter"===e.key&&(e.preventDefault(),s&&s(p)))}),[d,p,l,s]),g=i.useCallback((e=>{a&&a(e),null!=p&&s&&s(p)}),[a,p,s]);return i.createElement("input",{ref:u,className:e,autoFocus:t,defaultValue:n,value:o,type:"text",onChange:y,onKeyUp:f,onBlur:g})})),Fa=({className:e,textClassname:t,inputClassname:n,label:o,defaultValue:r,isEditing:c,onRequestEdit:s,onCommit:l,onCancel:a})=>{const d=i.useRef(null),u=i.useCallback((e=>{s&&(e.defaultPrevented||(e.preventDefault(),s()))}),[s]),p=i.useCallback((e=>{"Escape"===e.key&&c&&a()}),[c,a]),m=i.useCallback((()=>{c&&a()}),[c,a]);return i.useEffect((()=>{c&&d.current&&d.current.select()}),[c]),c?i.createElement(Za,{ref:d,className:B(e,n),autoFocus:!0,defaultValue:r,onBlur:m,onKeyUp:p,onCommit:l,onCancel:a}):i.createElement("span",{className:B(e,t),onDoubleClick:u},null!=o?o:r)},Ha=e=>{const{onRequestEdit:t,onCommit:n}=e,o=nl(),r=i.useCallback((()=>{t&&t()}),[t]),c=i.useCallback((e=>{n(e),o()}),[n,o]);return i.createElement("li",{className:al,onClick:r},i.createElement(Fa,Object.assign({},e,{onCommit:c})))},Ka=({nodeId:e,fieldPosition:t})=>{const n=(0,c.I0)(),{circuitNodeIdPath:o}=ra(),r=Hs((t=>hn(t,e))),s=Hs((t=>fn(t,e))),l=s?Rn(s):null,[a,d]=i.useState(!1),u=i.useCallback((()=>{d(!0)}),[]),p=i.useCallback((()=>{d(!1)}),[]),m=i.useCallback((t=>{d(!1),n(((e,t)=>({type:$e,payload:{nodeId:e,nodeName:t}}))(e,t))}),[n,e]),y=i.useCallback((()=>{l&&n(Si(l,[...o,e],{newWindow:!0}))}),[o,n,l,e]);return i.createElement(yl,null,i.createElement(Ha,{defaultValue:null!=r?r:"<unknown>",label:i.createElement("span",{style:{fontWeight:"bold"}},r),isEditing:a,onRequestEdit:u,onCommit:m,onCancel:p}),i.createElement(gl,null),l&&i.createElement(i.Fragment,null,i.createElement(fl,{onClick:y},"Open in New Window"),i.createElement(gl,null)),i.createElement(Ja,{fieldPosition:t}))},qa=i.memo((function({nodeId:e}){const t=(0,c.I0)(),{editorId:n,circuitNodeIdPath:o}=ra(),r=Hs(Ic),{openContextMenu:s,renderContextMenu:l}=Da(),a=Hs((t=>Qi(t,e))),{x:d,y:u}=Hs((t=>zn(t,e))),p=Hs((t=>((e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=Zr(e),i=e.services.simulator.nodeStatesByNodeId,o=Rr(n,t);if(o)return i[o]})(t,[...o,e]))),m=Hs((t=>di(t,e))),y=la(),f=i.useCallback((n=>{if(r)return;if(n.defaultPrevented)return;if(0!==n.button)return;n.preventDefault();const i=tn(Ra(n));t(vi(e,i))}),[t,r,e]),g=i.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const i=tn(Ra(n),"set-if-unselected");t(vi(e,i)),s(n)}),[t,e,s]),h=i.useCallback(((i,o)=>{const r=y(o),c=Ra(i);t(((e,t,n,i)=>({type:Ei,payload:Object.assign(Object.assign({},t),{nodeId:e,modifierKeys:n,editorId:i})}))(e,r,c,n))}),[y,t,e,n]),{startTracking:E}=Ta({onClick:f,onDragStart:h}),b=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),r||0===e.button&&E(e))}),[r,E]);let v,k;if(a){const{hitRect:t}=a.visual;v=ya(e,o,p,a.visual),k=t}else v=i.createElement("rect",{x:d,y:u,width:50,height:50,fill:m?"goldenrod":"red"}),k={p1:I.Ds,p2:{x:50,y:50}};const O=0!=d||0!=u?`translate(${d}, ${u})`:void 0;return i.createElement("g",{transform:O},i.createElement("g",{id:js(n,e),className:B("circuit-field-node",m&&"node-selected"),onMouseDown:b,onContextMenu:g},v),i.createElement($a,{nodeId:e,hitRect:k}),l((({point:t})=>i.createElement(Ka,{nodeId:e,fieldPosition:y(t)}))))})),$a=i.memo((function({nodeId:e,hitRect:t}){const{zoomFactor:n}=Xl(),o=Hs((t=>((e,t)=>{switch(e.services.uiSettings.nodeNameMode){case"all":default:return hn(e,t);case"named-only":return In(e,t);case"none":return null}})(t,e))),r=Math.max(.7,n);let c=15;return r>1?c-=2*r:c+=1/r*7,o?i.createElement("text",{fontSize:1.2/r+"em",className:aa,textAnchor:"middle",x:t.p1.x+(t.p2.x-t.p1.x)/2,y:t.p2.y+c},o):null})),Ga=qa,Va=i.memo((function(){const{circuitId:e}=ra(),t=Hs((t=>wn(t,e))).map((e=>i.createElement(Ga,{key:e,nodeId:e})));return i.createElement("g",null,t)})),_a=(e,t,n)=>{const i=$i(e,n);if(!i)return!1;const{outputPin:{nodeId:o,pinId:r}}=i,c=fn(e,o);if("pin-input"===c){const n=t.slice(0,t.length-1),i={nodeId:t[t.length-1],pinId:o},r=Vi(e,i);return!!r&&_a(e,n,r)}if(null==c?void 0:c.startsWith("ic-")){const n=[...t,o],i=Vi(e,{nodeId:r,pinId:"IN"});return!!i&&_a(e,n,i)}{const n=da(e,[...t,o]);return n&&n[r]||!1}},Ya=i.memo((function({connectionId:e,startJointId:t,endJointId:n}){const{editorId:o}=ra(),r=(0,c.I0)(),s=la(),l=Hs(Ic),a=Hs(ba),d=Hs((n=>null==t?((e,t)=>{const{outputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],o=Qi(e,n);if(!o)return I.Ds;const r=zn(e,n),c=eo[t];if(c&&c.inputNodeDef===o&&c.inputNodePosition.x===r.x&&c.inputNodePosition.y===r.y)return c.outputPosition;let s=I.Ds;o&&o.pins[i]&&(s=o.pins[i]);const l=(0,I.ZO)(r,s);return eo[t]={inputNodeDef:o,inputNodePosition:r,outputPosition:l},l})(n,e):oo(n,t))),u=Hs((t=>null==n?((e,t)=>{const{inputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],o=Qi(e,n);if(!o)return I.Ds;const r=zn(e,n),c=to[t];if(c&&c.inputNodeDef===o&&c.inputNodePosition.x===r.x&&c.inputNodePosition.y===r.y)return c.outputPosition;let s=I.Ds;o&&o.pins[i]&&(s=o.pins[i]);const l=(0,I.ZO)(r,s);return to[t]={inputNodeDef:o,inputNodePosition:r,outputPosition:l},l})(t,e):oo(t,n))),[p,m]=i.useState(null),y=i.useCallback((e=>{const t=s({x:e.pageX,y:e.pageY});m(t)}),[s]),f=i.useCallback((()=>{m(null)}),[]),g=i.useCallback(((n,i)=>{const c=s(i),l=Ra(n);r(((e,t,n,i,o)=>({type:hi,payload:Object.assign(Object.assign({},n),{connectionId:e,addAfterJointId:t,modifierKeys:i,editorId:o})}))(e,t,c,l,o))}),[s,r,e,t,o]),h=i.useCallback((t=>{const n=tn(Ra(t));r(((e,t="set")=>({type:Nr,payload:{connectionIds:Array.isArray(e)?e:[e],mode:t}}))(e,n))}),[e,r]),{startTracking:E}=Ta({onClick:h,onDragStart:g}),b=i.useCallback((e=>{e.preventDefault(),l||E(e)}),[l,E]);let v;if(!a&&!l&&p){const e=(0,I.Fv)((0,I.sj)(u,d)),t=(0,I.sj)(p,d),n=(0,I.Ih)(t,e);v=(0,I.ZO)(d,(0,I.bA)(e,n))}return i.createElement("g",{onMouseMove:y,onMouseLeave:f},i.createElement("line",{x1:d.x,y1:d.y,x2:u.x,y2:u.y,strokeWidth:2}),null==n&&i.createElement("circle",{cx:u.x,cy:u.y,r:1.5}),v&&i.createElement("circle",{cx:v.x,cy:v.y,r:3,stroke:"none",fill:"red",onMouseDown:b}))})),Xa=i.memo((function({jointId:e}){const{editorId:t}=ra(),n=la(),o=(0,c.I0)(),r=Hs(Ic),s=Hs((t=>mi(t,e))),l=Hs((t=>oo(t,e))),a=i.useCallback(((i,r)=>{const c=n(r),s=Ra(i);o(((e,t,n,i)=>({type:oi,payload:Object.assign(Object.assign({},t),{jointId:e,modifierKeys:n,editorId:i})}))(e,c,s,t))}),[o,t,n,e]),d=i.useCallback((t=>{const n=tn(Ra(t));o(ci(e,n))}),[o,e]),{startTracking:u}=Ta({onClick:d,onDragStart:a}),p=i.useCallback((e=>{r||e.defaultPrevented||(e.preventDefault(),u(e))}),[r,u]);return i.createElement(Ma,{interactable:!r,selected:s,x:l.x,y:l.y,onMouseDown:p})})),Qa=i.memo((function({connectionId:e}){const{circuitNodeIdPath:t}=ra(),n=Hs((t=>io(t,e))),o=Hs((n=>_a(n,t,e))),r=Hs((t=>ui(t,e))),c=[...n,null].map(((t,o)=>{const r=o>0?n[o-1]:null;return i.createElement(Ya,{key:o,connectionId:e,startJointId:r,endJointId:t})})),s=n.map((e=>i.createElement(Xa,{key:e,jointId:e})));return i.createElement("g",{className:B("wire--2lJT9",o&&"powered--3tsJ_",r&&"selected--Dkrv_")},c,s)})),ed=i.memo((function(){const{circuitId:e}=ra(),t=Hs((t=>fi(t,e))).map((e=>i.createElement(Qa,{key:e,connectionId:e})));return i.createElement("g",null,t)}));var td=n(784);const nd="highlight--30Hqg",id="is-drag-target--1kAL8",od=i.memo((function({nodeId:e,pinId:t}){const{editorId:n}=ra(),o=la(),[r,s]=i.useState(!1),l=(0,c.I0)(),a=Hs((n=>((e,t,n)=>{var i;const o=Yn(e)[t];return o&&null!==(i=o[n])&&void 0!==i?i:I.Ds})(n,e,t))),d=Hs((n=>((e,t,n)=>{const i=Qi(e,t);if(!i)return null;const o=i.pins[n];return o?o.direction:null})(n,e,t))),u=Hs(xa),p=i.useCallback(((i,r)=>{const c=o(r);l(((e,t,n)=>({type:Ni,payload:Object.assign(Object.assign({},e),{pin:t,editorId:n})}))(c,{nodeId:e,pinId:t},n))}),[l,n,o,e,t]),{startTracking:m}=Ta({onDragStart:p}),y=i.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),m(e)))}),[m]),f=i.useCallback((()=>{s(!0)}),[]),g=i.useCallback((()=>{s(!1)}),[]);if(!a)return null;const h=null!=u&&u.nodeId===e&&u.pinId===t,{x:E,y:b}=a;let v;return v="input"===d?i.createElement("path",{d:(0,td.x)(E,b,4,-45,225),strokeWidth:2,className:B("node-pin-input--3iuKH",h&&id,r&&nd)}):i.createElement("circle",{className:B("node-pin-output--WumfM",h&&id,r&&nd),cx:E,cy:b,r:3}),i.createElement("g",{id:xs(n,e,t),onMouseEnter:f,onMouseLeave:g},v,i.createElement("circle",{stroke:"none",fill:"transparent",cx:E,cy:b,r:5,onMouseDown:y}))})),rd=i.memo((function({nodeId:e}){var t;const n=Hs((t=>Qi(t,e))),o=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},r=Object.keys(o).map((t=>i.createElement(od,{key:t,nodeId:e,pinId:t})));return i.createElement(i.Fragment,null,r)})),cd=i.memo((function(){const{circuitId:e}=ra(),t=Hs((t=>wn(t,e))).map((e=>i.createElement(rd,{key:e,nodeId:e})));return i.createElement("g",null,t)})),sd=i.memo((function(){const{editorId:e}=ra(),t=Hs((t=>Ea(t,e))),n=Hs(Ia),o=Hs(va),r=Hs(ka);return t&&"wire"==n&&o&&r?i.createElement("line",{x1:o.x,y1:o.y,x2:r.x,y2:r.y,stroke:"black",strokeWidth:1}):null})),ld=()=>{const e=(0,c.I0)(),{editorId:t}=ra(),n=Hs(ba),o=function(){const{svgRef:e,scalerRef:t}=i.useContext(ta);return i.useCallback((n=>{if(!e.current||!t.current)return I.Ds;const i={x:n.pageX,y:n.pageY};return sa(e.current,t.current,i)}),[e,t])}(),r=i.useCallback((n=>{if(0===n.buttons)return void e(Kt());const i=o(n),r=Ra(n);e(((e,t,n)=>({type:Vt,payload:{dragPos:e,modifierKeys:t,editorId:n}}))(i,r,t))}),[e,t,o]),s=i.useCallback((n=>{const i=o(n),r=Ra(n);e(((e,t,n)=>({type:dt,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(i,r,t))}),[e,t,o]);return n?i.createElement("rect",{width:"100%",height:"100%",fill:"transparent",onMouseMove:r,onMouseUp:s}):null},ad=({width:e,height:t})=>{const n=(0,c.I0)(),{zoomFactor:o}=Xl(),r=i.useRef(null),s=i.useRef(null),l=i.useCallback((()=>{var e;null===(e=r.current)||void 0===e||e.focus()}),[]),a=i.useCallback((()=>{n({type:ji})}),[n]),[{isDraggingNewNode:d},u]=(0,ue.L)({accept:Gl,collect:e=>({isDraggingNewNode:e.isOver()})});return i.createElement("svg",{tabIndex:-1,ref:e=>{r.current=e,u(e)},width:e,height:t,onMouseDown:l,onMouseLeave:a,className:"circuit-field-svg--o7YIn"},i.createElement(Ua,null),i.createElement("g",{ref:s,"transform-origin":"0 0",transform:`scale(${o})`},i.createElement(ia,{svgRef:r,scalerRef:s},i.createElement(Aa,null),i.createElement(Va,null),i.createElement(ed,null),i.createElement(cd,null),i.createElement(sd,null),i.createElement(Ba,null),i.createElement(za,null),d&&i.createElement(ha,null),i.createElement(ld,null))))},dd=({})=>{const e=i.useRef(null),{width:t,height:n}=de(e),{zoomFactor:o,zoom:r}=Xl(),c=Hs($l),{width:s,height:l}=(0,I.nF)(c),a=Math.max(t,s*o),d=Math.max(n,l*o);return Ks(e,"wheel",i.useCallback((e=>{e.defaultPrevented||e.ctrlKey&&(r(e.deltaY>0?-1:1),e.preventDefault(),e.stopPropagation())}),[r]),{passive:!1}),i.createElement("div",{ref:e,style:{width:"100%",height:"100%"}},i.createElement(ad,{width:a,height:d}))},ud=({className:e,editorId:t})=>{const n=Hs(Ic);return i.createElement(ca,{editorId:t},i.createElement("div",{id:Cs(t),className:B("circuit-editor","circuit-editor--2jFUa",n&&"simulator-active",e)},i.createElement("div",{className:"circuit-editor-scrollarea--12k0x"},i.createElement(Ql,null,i.createElement(dd,null)))))};var pd=n(1474);const md=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:B(Tl,e.className)}),i.createElement("path",{d:"M4,4 L12,12 M4,12 L12,4"})),yd=({className:e,id:t,title:n,children:o})=>{const r=X(),{closeWindow:c}=ne(),s=i.useCallback((()=>{c(r)}),[c,r]),[,l]=(0,pd.c)({item:me(r)});return i.createElement(fe,{id:t,className:G["tessel-window"]},i.createElement("div",{ref:l,className:G["tessel-window-titlebar"]},i.createElement("div",{className:G["tessel-window-title"]},n),i.createElement("div",{className:G["tessel-window-controls"]},i.createElement(md,{className:G["tessel-window-controls-close"],onClick:s}))),i.createElement("div",{className:B(G["tessel-window-content"],e)},o))},fd="keymap:CircuitEditor/SimStep",gd="keymap:CircuitEditor/SelectAll",hd="keymap:CircuitEditor/Copy",Id="keymap:CircuitEditor/Paste",Ed="keymap:CircuitEditor/Delete",bd="keymap:CircuitEditor/Undo",vd="keymap:CircuitEditor/Redo",kd={[fd]:"space",[gd]:bl+"+a",[hd]:bl+"+c",[Id]:bl+"+v",[Ed]:["backspace","del"],[bd]:bl+"+z",[vd]:[bl+"+y",bl+"+shift+z"]};const Od=e=>{var{children:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["children"]);return i.createElement("div",Object.assign({},n,{className:R}),t)},Nd=({id:e,value:t,label:n,isSelected:o,onItemSelected:r})=>{const c=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),r(t))}),[r,t]);return i.createElement("li",{id:e,className:B("selection-list-item","selection-list-item--errDr",o&&"selection-list-item--selected--3MkqB"),onClick:c},i.createElement("div",{className:B("selection-list-item-content--321YU",aa)},n))},Cd=({className:e,id:t,items:n,onItemSelected:o})=>i.createElement("ul",{id:t,className:B("selection-list","selection-list--3yujH",e)},n.map((e=>i.createElement(Nd,Object.assign({key:e.value},e,{onItemSelected:o}))))),jd=({circuitId:e})=>{const t=(0,c.I0)(),n=Hs((t=>Wn(t,e))),[o,r]=i.useState(!1),{openContextMenu:s,renderContextMenu:l}=Da(),a=i.useCallback((()=>{e!==p&&r(!0)}),[e]),d=i.useCallback((()=>{r(!1)}),[]),u=i.useCallback((n=>{t(((e,t)=>({type:Ae,payload:{circuitId:e,circuitName:t}}))(e,n)),r(!1)}),[e,t]),m=i.useCallback((n=>{n.preventDefault(),t(Si(e,null,{newWindow:!0}))}),[e,t]),y=i.useCallback((n=>{n.preventDefault(),t((e=>({type:Je,payload:{circuitId:e}}))(e))}),[t,e]),f=i.useCallback((e=>{e.preventDefault(),e.stopPropagation(),s(e)}),[s]);return i.createElement("div",{className:"circuitstree-item--22dzG",onContextMenu:f,onDoubleClick:a},i.createElement(Fa,{defaultValue:n,isEditing:o,onRequestEdit:a,onCommit:u,onCancel:d}),l(i.createElement(yl,null,e!==p&&i.createElement(i.Fragment,null,i.createElement(fl,{onClick:a},"Rename Circuit"),i.createElement(gl,null)),i.createElement(fl,{onClick:m},"Open in New Window"),e!==p&&i.createElement(i.Fragment,null,i.createElement(gl,null),i.createElement(fl,{onClick:y},"Delete Circuit")))))},xd=()=>{const e=(0,c.I0)(),t=i.useCallback((()=>{e(De())}),[e]);return i.createElement(yl,null,i.createElement(fl,{onClick:t},"New Circuit"))},wd=({className:e,isOpen:t,anchorEl:n,placement:r="auto",children:c})=>{const[s,l]=i.useState(null),[a,d]=i.useState(null),{attributes:u,styles:p}=(0,Gs.D)(t?n:null,s,{placement:r,modifiers:[{name:"arrow",options:{element:a}},{name:"offset",options:{offset:[0,8]}}]});return t?(0,o.createPortal)(i.createElement("div",Object.assign({ref:l,className:B("tooltip--2yxRI",e),style:p.popper,role:"tooltip"},u.popper),c,i.createElement("div",Object.assign({ref:d,"data-popper-arrow":!0,className:"tooltip-arrow--2mJMo",style:p.arrow},u.arrow))),document.body):null},Pd={"input-output":"I/O","integrated-circuit":"Integrated Circuits",logic:"Logic"},Bd=({category:e,search:t})=>{const n=Hs(Kn).filter((t=>t.category===e)).filter((function(n){return n.category===e&&(null===t||-1!==n.displayName.toLowerCase().indexOf(t))})).map((e=>i.createElement(Md,{key:e.type,nodeType:e.type})));return 0===n.length?null:i.createElement(i.Fragment,null,i.createElement("li",{className:"node-tray-category--2EvV3"},Pd[e]),n)},Md=({nodeType:e})=>{const[t,n]=i.useState(null),o=Hs((t=>$n(t,e))),[r,c]=i.useState(!1),s=i.useCallback((e=>{e.preventDefault(),c(!0)}),[]),l=i.useCallback((e=>{e.target===t&&c(!1)}),[t]),[,a]=(0,pd.c)({item:Vl(e)});let d,u=e,p="0 0 50 50";if(o){const{trayComponent:e,hitRect:t}=o.visual;if(e){const t=e;d=i.createElement(t,null)}else d=ya(void 0,[],void 0,o.visual),p=`${t.p1.x} ${t.p1.y} ${t.p2.x} ${t.p2.y}`;u=o.displayName}else d=i.createElement(Sd,null);return i.createElement("li",{id:"node-tray--node-"+e,ref:e=>{n(e),a(e)},className:"node-tray-item--16YJl",onClick:s,onMouseOut:l},i.createElement(wd,{placement:"top",isOpen:r,anchorEl:t},"Click and drag to create a new circuit element."),i.createElement("span",{className:"node-tray-item-preview--1SRbp"},i.createElement("svg",{width:30,height:30,viewBox:p},d)),i.createElement("span",{className:aa},u))},Sd=()=>i.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50}),zd={"node-tray":()=>{const e=Hs(Kn),t=Hi()(e.map((e=>e.category))),[n,o]=i.useState(""),r=i.useCallback((e=>{o(e.target.value.toLowerCase())}),[]);return i.createElement(yd,{id:"node-tray",title:"Elements",className:"node-tray--3lZIP"},i.createElement("div",null,i.createElement("input",{className:"node-tray-search--1xn-W",type:"text",value:n,onChange:r,placeholder:"Search"})),i.createElement("div",{className:"node-tray-element-container--3ZO1O"},i.createElement("ul",{className:"node-tray-element-list--1El-9"},t.map((e=>i.createElement(Bd,{key:e,category:e,search:n}))))))},"circuit-field":({editorId:e})=>{var t,n;const o=(0,c.I0)(),{circuitId:r,circuitNodeIdPath:s}=null!==(t=Hs((t=>St(t,e))))&&void 0!==t?t:{circuitId:null,circuitNodeIdPath:[]},l=null!==(n=Hs((e=>Wn(e,r))))&&void 0!==n?n:"<Circuit Missing>",a=i.useMemo((()=>{function e(e){return t=>{if(t){if(t.defaultPrevented)return;t.preventDefault()}o(e)}}return{[fd]:e(rc()),[gd]:e({type:yr}),[hd]:e(xr()),[Id]:e(at()),[Ed]:e(Ye()),[bd]:e(pt()),[vd]:e(ft())}}),[o]),d=i.useCallback((()=>{o((e=>({type:Pi,payload:{editorId:e}}))(e))}),[o,e]);return i.createElement(yd,{title:l+" [Circuit]"},i.createElement(Zl.HotKeys,{keyMap:kd,handlers:a,component:Od},i.createElement("div",{onFocus:d,className:B("circuit-field-view",R,L["flex-column"])},i.createElement(Kl,{circuitId:r,circuitNodeIdPath:s}),i.createElement(ud,{className:B(R,L["flexitem-shrink"]),editorId:e}))))},"circuits-list":()=>{const e=(0,c.I0)(),t=Hs(Jn),{openContextMenu:n,renderContextMenu:o}=Da(),r=i.useCallback((t=>{e(Si(t))}),[e]),s=i.useCallback((e=>{e.preventDefault(),n(e)}),[n]),l=i.useMemo((()=>Object.keys(t).map((e=>({id:Rs(e),value:e,label:i.createElement(jd,{circuitId:e})})))),[t]);return i.createElement(yd,{id:"circuit-list-window",title:"Circuits",className:B("circuitstree--QeaI9")},i.createElement("div",{className:R,onContextMenu:s},i.createElement(Cd,{className:R,id:"circuit-list",items:l,onItemSelected:r})),o(i.createElement(xd,null)))}};function Td(e){const t=zd[e.windowId];return t?i.createElement(t,Object.assign({},e.windowProps)):null}const Rd=()=>{const e=(0,c.I0)(),t=Hs(qs),n=i.useCallback((t=>{e((e=>({type:Tc,payload:{layout:e}}))(t))}),[e]),o=i.useCallback((t=>{let n=t.target;for(;null!=n;){if(n.classList.contains("circuit-editor"))return;n=n.parentElement}e(Kt())}),[e]);return Ks({current:document.body},"mouseup",o),i.createElement("div",{className:B(R,L["flex-column"])},i.createElement(Ul,{className:L["flexitem-fix"]}),i.createElement("div",{className:B(R,L["flexitem-shrink"])},i.createElement(Ie,{className:B("project-editor",R),rootItem:t,onLayoutChange:n,renderWindow:Td})))},Ld=({location:e})=>{const t=(0,c.I0)(),[n,o]=i.useState(!1);return i.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void o(!0)}const i=n.get("data");i?t((e=>({type:ss,payload:{data:e}}))(i)):o(!0)}),[]),n?i.createElement("div",null,"Failed to import project"):i.createElement("div",null,"Importing Project...")},Dd=()=>i.createElement(s.rs,null,i.createElement(s.AW,{exact:!0,path:"/",component:Rd}),i.createElement(s.AW,{exact:!0,path:"/import",component:Ld})),Jd=wo((e=>e.dialogType)),Wd=wo((e=>e.data));var Ad=n(227),Ud=n(1074);const Zd=({className:e,isOpen:t,onRequestClose:n,children:r})=>t?(0,o.createPortal)(i.createElement("div",{className:B("modal","modal--25LBN")},i.createElement(Ad.Y,{onClickOutside:n,onEscapeKey:n},i.createElement("div",{className:B("modal-content--1H0T_",e)},i.createElement(Ud.Z,{className:R},r)))),document.body):null,Fd=({isOpen:e,title:t,acceptText:n,cancelText:o,onAccept:r,onCancel:c,footer:s,children:l})=>i.createElement(Zd,{className:"dialog--1eQi6",isOpen:e,onRequestClose:c},i.createElement("div",{className:"dialog-title--1DWsL"},t),i.createElement("div",null,l),i.createElement("div",{className:"dialog-footer--2hYdr"},s,c&&i.createElement(cl,{onClick:c},null!=o?o:"Cancel"),r&&i.createElement(cl,{variant:"primary",onClick:r},null!=n?n:"Accept"))),Hd=()=>{const e=sl(jo),t=Hs(Wd),n=null==t?void 0:t.projectLink,o=i.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const r=i.createElement(cl,{onClick:o},"Copy to Clipboard");return i.createElement(Fd,{isOpen:!0,title:"Export Project Link",cancelText:"Close",onCancel:e,footer:r},i.createElement("div",{className:"export-link-dialog-link-container--phwUA"},i.createElement("code",{className:"export-link-dialog-link--1dOdK"},n)))},Kd=({circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:o})=>{const r=i.useCallback((t=>{t.target.checked&&o(Hi()([...n,e]))}),[e,o,n]);return i.createElement(jl,{onChange:r,value:-1!==n.indexOf(e)},t)},qd=()=>{const e=(0,c.I0)(),t=Hs(Wd),[n,o]=i.useState([]),r=sl(Mo),s=i.useCallback((()=>{e(jo(n))}),[e,n]);if(!t)return null;const{circuits:l}=t;return i.createElement(Fd,{isOpen:!0,title:"Import Circuits",onAccept:s,onCancel:r,acceptText:"Import Circuits"},i.createElement("div",null,i.createElement("p",null,"Choose the circuits to import."),i.createElement("p",null,"Any chosen circuits that depend on other circuits will import their dependencies automatically."),i.createElement("p",null,"If any circuits already exist in your project, they will not be re-imported.")),i.createElement("ul",{className:"import-project-circuits-list--2ODCz"},l.map((({circuitId:e,circuitName:t})=>i.createElement("li",{key:e},i.createElement(Kd,{circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:o}))))))};const $d=()=>{const e=Hs(Jd);if(!e)return null;const t=function(e){switch(e){case"export-project-link":return Hd;case"import-project-circuits":return qd;default:return function(e){throw new Error("Unknown dialog type "+e)}(e)}}(e);return i.createElement(t,null)},Gd=({selector:e,message:t,placement:n,action:o=[]})=>{const r=(0,c.I0)(),s=function(e){const[t,n]=i.useState(null);return i.useEffect((()=>{const t=new MutationObserver((()=>{n(document.querySelector(e))}));return t.observe(document.body,{childList:!0,subtree:!0}),n(document.querySelector(e)),()=>{t.disconnect()}}),[e]),t}(e);i.useEffect((()=>{s&&s.scrollIntoView()}),[s]);const l=se(o);if(!s||!t&&!l.length)return null;const a=l.map((({name:e,action:t})=>i.createElement(cl,{key:e,size:"small",onClick:()=>r(t)},e)));return i.createElement(wd,{className:"tutorial-tooltip--3gwli",anchorEl:s,placement:n,isOpen:!0},t,a&&i.createElement("div",{className:"tutorial-tooltip-actions--ENkg1"},a))},Vd=()=>{const e=Hs(Yo),t=Hs(Xo);if(!e)return null;const n=t.map((e=>i.createElement(Gd,Object.assign({key:e.selector},e)))),r=t.map((({selector:e})=>`\n    ${e} {\n      position: relative;\n      z-index: 10;\n    }\n  `)).join("\n");return(0,o.createPortal)(i.createElement("div",{className:"tutorial--jscuw"},i.createElement("div",{className:"tutorial-backdrop--3I0WR"}),i.createElement("style",null,r),n),document.body)},_d=document.getElementById("root");o.render(i.createElement(l.W,{backend:a.PD},i.createElement(s.F0,{history:d},i.createElement(c.zt,{store:Fs},i.createElement((()=>i.createElement(i.Fragment,null,i.createElement(Dd,null),i.createElement($d,null),i.createElement(Vd,null))),null)))),_d)},4313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-momentary",category:"input-output",displayName:"Momentary Switch",elementProduction:"input-momentary",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-momentary"},pins:{OUT:{direction:"output",x:50,y:25}}}},9175:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-toggle",category:"input-output",displayName:"Toggle Switch",elementProduction:"input-toggle",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-toggle"},pins:{OUT:{direction:"output",x:50,y:25}}}},4646:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),o=n(669),r=n.n(o),c=n(8370);const s="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",l={type:"logic-and",category:"logic",displayName:"AND",elementProduction:"logic-and",visual:(0,n(5471).l)((0,c.NG)(r()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2140:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),o=n(669),r=n.n(o),c=n(8370);const s="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",l={type:"logic-buffer",category:"logic",displayName:"Buffer",elementProduction:"logic-buffer",visual:(0,n(5471).l)((0,c.NG)(r()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M72,25 L 100,25"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),i.createElement("path",{className:"node-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},6467:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(7294);const o={type:"logic-nand",category:"logic",displayName:"NAND",elementProduction:"logic-nand",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",{transform:"translate(-10,0)"},i.createElement("path",{d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z",stroke:"none",fill:"transparent"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 88,25 H110"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 41,15 L 15,15"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 42,35 L 15,35"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z M 42.857143,7.8571429 C 50.834264,7.8571429 55.918368,7.8571429 58.095238,7.8571429 C 59.285714,7.8571429 59.880952,7.8571429 60.178571,7.8571429 C 60.327381,7.8571429 60.409227,7.8571429 60.446429,7.8571429 C 60.465029,7.8571429 60.471543,7.8571429 60.47619,7.8571429 C 70.236853,7.857143 77.142857,15.497098 77.142857,25 C 77.142857,34.502902 69.760662,42.142857 60,42.142857 L 42.857143,42.142857 L 42.857143,7.8571429 z"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 79,25 A 4,4 0 1 1 71,25 A 4,4 0 1 1 79,25 z",transform:"translate(9,0)"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},8476:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(7294);const o={type:"logic-nor",category:"logic",displayName:"NOR",elementProduction:"logic-nor",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 h21 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3980:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(7294);const o={type:"logic-not",category:"logic",displayName:"NOT",elementProduction:"logic-not",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 H100 M29,25 h-24"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},9696:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),o=n(669),r=n.n(o),c=n(8370);const s="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",l={type:"logic-or",category:"logic",displayName:"OR",elementProduction:"logic-or",visual:(0,n(5471).l)((0,c.NG)(r()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2201:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),o=n(669),r=n.n(o),c=n(8370);const s="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",l={type:"logic-xor",category:"logic",displayName:"XOR",elementProduction:"logic-xor",visual:(0,n(5471).l)((0,c.NG)(r()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M30,15 H5 M31,35 H5"}),i.createElement("g",{fillRule:"evenodd",className:"node-select-highlight--fill"},i.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),i.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6015:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const o={type:"output-led",category:"input-output",displayName:"Indicator Light",elementProduction:"output-led",visual:(0,n(957).J)(i,{path:i,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},5058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(957);const o=[15,0];function r(e,t){const n=t[0];let i=`M${3*n[0]+o[0]},${3*n[1]+o[1]}`;for(const e of t.slice(1)){const[t,n]=e;i+=`L${3*t+o[0]},${3*n+o[1]}`}return i+="z",{path:i,fill:t=>t[e]?"red":"gray",strokeWidth:0}}const c={type:"output-seg7",category:"input-output",displayName:"7-Segment Display",elementProduction:"output-seg7",visual:(0,i.J)("M15,0 V63 H45 V0 z",[r("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),r("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),r("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),r("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),r("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),r("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),r("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},3158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),o=n(669),r=n.n(o),c=n(8370);const s="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-high",category:"input-output",elementProduction:"pin-high",displayName:"High Pin",visual:(0,n(5471).l)((0,c.NG)(r()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M25,20 v10 M20,25 h10",fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},7529:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),o=n(669),r=n.n(o),c=n(8370),s=n(784);const l="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-input",category:"input-output",displayName:"Input Pin",visual:(0,n(5471).l)((0,c.NG)(r()(l)),i.createElement("g",null,i.createElement("path",{d:l,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:(0,s.x)(25,25,3,-45,225),fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},4987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),o=n(669),r=n.n(o),c=n(8370);const s="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-output",category:"input-output",displayName:"Output Pin",visual:(0,n(5471).l)((0,c.NG)(r()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("circle",{className:"node-select-highlight--fill",cx:25,cy:25,r:3,fill:"black",stroke:"none"}))),pins:{IN:{direction:"input",x:0,y:25}}}},957:(e,t,n)=>{"use strict";n.d(t,{J:()=>u});var i=n(7294),o=n(9242),r=n(669),c=n.n(r),s=n(8370),l=n(1235);const a=({circuitNodeId:e,circuitNodePath:t,shapePath:n,hitPath:r,elementState:c})=>{const s=(0,o.I0)(),a=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),s((0,l.zN)([...t||[],e]))))}),[e,s,t]),d=p(n,c).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"node-select-highlight--stroke node-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("g",{onClick:a},i.createElement("path",{d:r,fill:"transparent",stroke:"none"}),d)},d=({shapePath:e,hitRect:t})=>{const n=p(e,{}).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"node-select-highlight--stroke node-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("svg",{width:50,height:50,viewBox:`${t.p1.x-5} ${t.p1.y-5} ${t.p2.x-t.p1.x+10} ${t.p2.y-t.p1.y+10}`},n)};function u(e,t){const n=(0,s.NG)(c()(e));return{trayComponent:()=>i.createElement(d,{shapePath:t,hitRect:n}),component:n=>i.createElement(a,Object.assign({shapePath:t,hitPath:e},n)),hitRect:n}}function p(e,t){return(Array.isArray(e)?e:[e]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const n="function"==typeof e.fill?e.fill(t||{}):e.fill,i="function"==typeof e.stroke?e.stroke(t||{}):e.stroke,o="function"==typeof e.strokeWidth?e.strokeWidth(t||{}):e.strokeWidth;return{path:e.path,fill:n,stroke:i,strokeWidth:o}}))}},5471:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var i=n(7294);function o(e,t){return{hitRect:e,trayComponent:()=>i.createElement("svg",{width:50,height:50,viewBox:`${e.p1.x-5} ${e.p1.y-5} ${e.p2.x-e.p1.x+10} ${e.p2.y-e.p1.y+10}`},t),component:()=>t}}},784:(e,t,n)=>{"use strict";function i(e,t,n,i,r){const c=o(e,t,n,r),s=o(e,t,n,i),l=r-i<=180?"0":"1";return["M",c.x,c.y,"A",n,n,0,l,0,s.x,s.y].join(" ")}function o(e,t,n,i){const o=(i-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}}n.d(t,{x:()=>i})}},0,[[6151,1,956,874,90,898,14,794,191,80,744,593,617,29,845,105,699,162,771]]]);
//# sourceMappingURL=client.1b4376c4761b89d31662.bundle.js.map