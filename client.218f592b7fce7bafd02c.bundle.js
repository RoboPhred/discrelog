(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{1235:(e,t,n)=>{"use strict";n.d(t,{zN:()=>r,ke:()=>o});const i="@node/interact",r=(e,t)=>({type:i,payload:{circuitNodeIdPath:e,data:t}});function o(e){return e.type===i}},5766:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});const i=4},3667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:[],outputPins:["OUT"],interact:(e,t)=>void 0===t?{transitions:[{tickOffset:1,valuesByPin:{OUT:!0}},{tickOffset:1+Math.round(1.5*i.v),valuesByPin:{OUT:!1}}]}:t?{transitions:{tickOffset:1,valuesByPin:{OUT:!0}}}:{transitions:{tickOffset:1,valuesByPin:{OUT:!1}}}}},2318:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const i={toggleState:!1},r={inputPins:[],outputPins:["OUT"],interact(e=i){const t=!e.toggleState;return{state:Object.assign({},e,{toggleState:t}),transitions:{tickOffset:1,valuesByPin:{OUT:t}}}},evolve:(e=i)=>({state:e,transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},7909:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.A&&t.B}}})}},274:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.IN}}})}},4347:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!(t.A&&t.B)}}})}},8112:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!(t.A||t.B)}}})}},6559:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!t.IN}}})}},2649:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.A||t.B}}})}},8881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},6567:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},4257:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},4420:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:[],outputPins:["OUT"],evolve:()=>({transitions:{tickOffset:1,valuesByPin:{OUT:!0}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{tQ:()=>r,Ds:()=>o,rG:()=>c,NG:()=>s,R9:()=>a,VE:()=>l,Fv:()=>u,Ih:()=>d,bA:()=>p,Qu:()=>m,gQ:()=>y,ZO:()=>f,sj:()=>g,kg:()=>h,PL:()=>I,nF:()=>b,G0:()=>v,kK:()=>E});var i=n(7516);const r=i.Ry().shape({x:i.Rx().required(),y:i.Rx().required()}),o=Object.freeze({x:0,y:0}),c=Object.freeze({p1:o,p2:o});function s(e){return{p1:{x:e[0],y:e[1]},p2:{x:e[2],y:e[3]}}}function a(e,t){return{x:Math.round(e.x/t)*t,y:Math.round(e.y/t)*t}}function l(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function u(e){const t=l(e);return{x:e.x/t,y:e.y/t}}function d(e,t){return e.x*t.x+e.y*t.y}function p(e,t){return{x:e.x*t,y:e.y*t}}function m(...e){let t,n;if(1===e.length){const i=e[0];t=i.p1,n=i.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function y(e,t){return{p1:f(e.p1,t),p2:f(e.p2,t)}}function f(e,t){return{x:e.x+t.x,y:e.y+t.y}}function g(e,t){return{x:e.x-t.x,y:e.y-t.y}}function h(e,t){return e.x===t.x&&e.y===t.y}function I(e,t){return!((t=m(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function b(e){return{width:(e=m(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function v(e,t){return e=m(e),t=m(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function E(e,t){return e=m(e),t=m(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}},1169:(e,t,n)=>{"use strict";var i=n(7294),r=n(3935),o=n(1033),c=n(9242),s=n(5977),a=n(862),l=n(7865);const u=(0,n(7531).q_)(),d=Object.freeze({dragMode:null,dragCircuitId:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewJointConnectionId:null,dragNewJointAfterJointId:null,dragWireSource:null}),p="root",m={circuitNamesByCircuitId:{[p]:"Root"},nodeIdsByCircuitId:{[p]:[]}},y=Object.freeze(m);var f=n(8370);const g=Object.freeze({clipboardNodes:[],clipboardPasteOrigin:f.Ds}),h=Object.freeze({dialogType:null,data:null}),I=Object.freeze({nodesById:{},connectionsById:{}}),b=Object.freeze({nodePositionsById:{},wireJointIdsByConnectionId:{},wireJointPositionsByJointId:{}}),v=Object.freeze({projectName:"New Project",projectModified:!1}),E=Object.freeze({selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}),k=Object.freeze({initialized:!1,tick:0,lastTickProcessingTimeMs:0,nodeStatesByNodeId:{},nodeOutputValuesByNodeId:{},transitionsById:{},transitionWindows:[]}),O=Object.freeze({mode:"edit",ticksPerSecond:1e3});var C=n(7361),N=n.n(C);function x(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function j(...e){return w(e[0],e.slice(1,e.length-1).map(String),e[e.length-1])}function w(e,t,n){if(0===t.length)return"function"==typeof n?n(e):n;const i=t.slice(0,t.length-1).map(String),r=t[t.length-1],o=P(e);let c=o;for(const e of i)c[e]=P(c[e]),c=c[e];return c[r]="function"==typeof n?n(c[r]):n,o}function P(e){return Array.isArray(e)?e.slice():Object.assign({},e)}function B(e){return Boolean(e)}const M="fill-parent--3pw6U",S={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"};var D=n(8721),L=n.n(D);function T(e){return"string"==typeof e?{windowId:e}:e}function z(e){return L()(e,"windowId")}function J(e){return L()(e,"first")&&L()(e,"second")&&L()(e,"direction")}function R(e){return"number"==typeof e?{firstPercent:e}:e}function W(e){return L()(e,"firstPercent")}function A(e){return L()(e,"firstSize")||L()(e,"secondSize")}var U=n(3493),Z=n.n(U);function F(e){const t=i.useRef(e);return i.useEffect((()=>{t.current=e})),t}const H={tessel:"tessel--2Q3Xd","tessel-content":"tessel-content--3-kEA","tessel-drop-capture":"tessel-drop-capture--3TbuI","tessel-drop-capture--dragging":"tessel-drop-capture--dragging--Ihwyz","tessel-drop-marker":"tessel-drop-marker--1cqr2","drop-left":"drop-left--wqP1V","drop-right":"drop-right--2MyGz","drop-top":"drop-top--1S0co","drop-bottom":"drop-bottom--2f330","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C","tessel-window":"tessel-window--1qDgp","tessel-window-titlebar":"tessel-window-titlebar--uHBdn","tessel-window-title":"tessel-window-title--2v0hT","tessel-window-controls":"tessel-window-controls--3i3ou","tessel-window-controls-close":"tessel-window-controls-close--2O8Zs","tessel-window-content":"tessel-window-content--sOnG-"},K=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),G=({direction:e,onChangePercentage:t})=>{const n=i.useRef(null),r=i.useRef(null),o=F(e),c=F(t),s=i.useMemo((()=>Z()((e=>{var t,i;if(null==r.current||null==n.current)return;const s=null!==(i=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==i?i:K;let a=0,l=0;"row"===o.current?(l=e.pageX-s.left,a=l/s.width,isNaN(a)?(a=0,l=s.left):a>1&&(a=1,l=s.right)):(l=e.pageY-s.top,a=l/s.height,isNaN(a)?(a=0,l=s.top):a>1&&(a=1,l=s.bottom)),c.current(100*a,l)}),1e3/60,{leading:!0})),[o,c]),a=i.useCallback((e=>{e.persist(),s(e)}),[s]),l=i.useCallback((e=>{!e.defaultPrevented&&n.current&&(r.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),r.current=e.pointerId))}),[]),u=i.useCallback((()=>{n.current&&r.current&&(n.current.releasePointerCapture(r.current),r.current=null)}),[]);return i.createElement("div",{ref:n,className:x("tessel-split",H["tessel-split"],H["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:l,onPointerMove:a,onPointerUp:u})},V=i.createContext([]);function q(){return i.useContext(V)}const $=({pathKey:e,children:t})=>{const n=q(),r=i.useMemo((()=>[...n,e]),[n,e]);return i.createElement(V.Provider,{value:r},t)};function _(){}const X=i.createContext({moveWindow:_,closeWindow:_});function Y(){return i.useContext(X)}const Q=({moveWindow:e,closeWindow:t,children:n})=>{const r=i.useMemo((()=>({moveWindow:e,closeWindow:t})),[e,t]);return i.createElement(X.Provider,{value:r},n)};function ee(e,t,n){return W(e)?{firstPercent:t}:A(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const te=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:r,first:o,second:c,division:s}=e,a="row"===r?"width":"height",l=i.useCallback(((t,i)=>{const r=R(e.division);n(Object.assign(Object.assign({},e),{division:ee(r,t,i)}))}),[e,n]),u=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),d=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),p=R(s);let m="50%",y="50%",f=!1,g=!1;if(W(p)){const{firstPercent:e}=p;m=e+"%",y=100-e+"%"}else if(A(p)){const{firstSize:e,secondSize:t}=p;e?(m=e+"px",f=!0,y="100%"):(m="100%",y=t+"px",g=!0)}return i.createElement("div",{className:x(M,S["row"===r?"flex-row":"flex-column"])},i.createElement("div",{className:x(f?S["flexitem-fix"]:S["flexitem-shrink"]),style:{[a]:m}},i.createElement($,{pathKey:"first"},i.createElement(ne,{value:o,renderWindow:t,onLayoutChange:u}))),i.createElement(G,{direction:r,onChangePercentage:l}),i.createElement("div",{className:x(g?S["flexitem-fix"]:S["flexitem-shrink"]),style:{[a]:y}},i.createElement($,{pathKey:"second"},i.createElement(ne,{value:c,renderWindow:t,onLayoutChange:d}))))},ne=({value:e,renderWindow:t,onLayoutChange:n})=>{const r=T(e);return z(r)?t(r):J(r)?i.createElement(te,{item:r,renderWindow:t,onLayoutChange:n}):null};function ie(e){return Array.isArray(e)?e:[e]}function re(e,t){return e===t||e.length===t.length&&e.every(((e,n)=>t[n]===e))}function oe(e,t){const n=e.slice(0,t);for(let i=t+1;i<e.length;i++)n.push(e[i]);return n}function ce(e){const[t,n]=i.useState({left:0,top:0,right:0,bottom:0,width:0,height:0});return i.useLayoutEffect((()=>{if(!e.current)return;const t=new o.Z((()=>{const t=e.current;if(!t)return;const i=t.getBoundingClientRect();n({top:i.top,left:i.left,right:i.right,bottom:i.bottom,width:i.width,height:i.height})}));return t.observe(e.current),()=>{t.disconnect()}}),[e]),t}Object.freeze([]);var se=n(9240);const ae="@tessel/window",le=e=>({type:ae,payload:{path:e}});function ue(e){return e.type===ae}const de=i.forwardRef((({className:e,children:t},n)=>{const r=q(),{moveWindow:o}=Y(),c=i.useRef(null),{top:s,left:a,right:l,bottom:u}=ce(c),[d,p]=i.useState(null),m=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return void p(null);const n=t.getClientOffset();if(null==e||null==n||!ue(e))return void p(null);if(n.x<a||n.x>l)return void p(null);if(n.y<s||n.y>u)return void p(null);const i=(n.x-a)/(l-a);if(i<=.3)return void p("left");if(i>=.6)return void p("right");const r=(n.y-s)/(u-s);p(r<=.3?"top":r>=.6?"bottom":null)}),[s,a,l,u]),y=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return;if(!ue(e))return;const{path:n}=e.payload;re(n,r)||null!=d&&o(n,r,d)}),[r,d,o]),[{draggingSelf:f},g]=(0,se.L)({accept:ae,collect:e=>{e.isOver({shallow:!0})||p(null);const t=e.getItem();return t&&ue(t)?{draggingSelf:re(t.payload.path,r)}:{}},hover:m,drop:y},[m,y]);let h=H["tessel-drop-marker"]+" ";if(null!=d&&!f)switch(d){case"bottom":h+=H["drop-bottom"];break;case"top":h+=H["drop-top"];break;case"left":h+=H["drop-left"];break;case"right":h+=H["drop-right"]}return i.createElement("div",{ref:e=>{c.current=e,g(e),"function"==typeof n?n(e):n&&(n.current=e)},className:x(H["tessel-drop-capture"],f&&H["tessel-drop-capture--dragging"],e)},t,i.createElement("div",{className:h}))}));function pe(e,t){var n;if(!t(e))return null;const i=T(e);if(J(i)){const r=pe(i.first,t),o=pe(i.second,t);return r&&o?e:null!==(n=null!=r?r:o)&&void 0!==n?n:null}return e}function me(e){return"string"==typeof e?e:J(e)?null==e.first?me(e.second):null==e.second?me(e.first):Object.assign(Object.assign({},e),{first:me(e.first),second:me(e.second)}):e}const ye=({className:e,rootItem:t,renderWindow:n,onLayoutChange:r})=>{const o=i.useCallback(((e,n,i)=>{if(0===e.length)return;let o=t;const c=N()(o,e);o&&"string"!=typeof o&&c&&(n.length>0&&!N()(o,n)||(o=w(o,e,null),o=w(o,n,(e=>{let t;if("left"===i||"right"===i)t={direction:"row",division:50,first:"left"===i?c:e,second:"right"===i?c:e};else{if("top"!==i&&"bottom"!==i)throw new Error("Unknown tessel position: "+i);t={direction:"column",division:50,first:"top"===i?c:e,second:"bottom"===i?c:e}}return t})),o=me(o),r(o)))}),[t,r]),c=i.useCallback((e=>{let n=t;n&&("string"!=typeof n?(n=w(n,e,null),n=me(n),r(n)):0===e.length&&r(null))}),[r,t]);return i.createElement("div",{className:x("tessel",H.tessel,e)},i.createElement(Q,{moveWindow:o,closeWindow:c},i.createElement(de,null,i.createElement("div",{className:H["tessel-content"]},t&&i.createElement(ne,{value:t,renderWindow:n,onLayoutChange:r})))))},fe="circuit-field",ge=(e,t)=>({windowId:fe,windowProps:{circuitId:e,circuitNodeIdPath:t}});function he(e){return"string"!=typeof e&&!!z(e)&&e.windowId===fe}const Ie={layout:{direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"node-tray"},second:ge(p,[])},activeCircuitEditorPath:["second"]},be=Object.freeze(Ie),ve=Object.freeze({nodeNameMode:"named-only"}),Ee={circuitEditorUiDrag:d,nodeGraph:I,nodeLayout:b,circuits:y,clipboard:g,dialog:h,project:v,selection:E,simulator:k,simulatorControl:O,uiLayout:be,uiSettings:ve},ke=Object.freeze(Ee),Oe=["circuits","nodeGraph","nodeLayout"],Ce={services:ke,undo:Object.freeze({undoStack:[],redoStack:[]})},Ne=Object.freeze(Ce);var xe=n(4890),je=(n(2729),n(7172));const we=new URL(window.location.origin);we.pathname=n.p;const Pe=we.toString(),Be="@init";var Me=n(4586);const Se="@circuit/add",De=({circuitName:e,circuitId:t,edit:n}={})=>({type:Se,payload:{circuitId:null!=t?t:(0,Me.Z)(),circuitName:e,edit:n}}),Le="@circuit/delete";function Te(e){return e.type===Le}const ze="@circuit/rename",Je="@node/add",Re=(e,t,n,i)=>({type:Je,payload:Object.assign({nodeId:(0,Me.Z)(),nodeType:e,circuitId:t,position:n},i||{})});function We(e){return e.type===Je}const Ae="@node/delete";function Ue(e){return e.type===Ae}const Ze="@node/rename",Fe="@selection/align-to-grid",He="@selection/delete",Ke=()=>({type:He}),Ge="@selection/move",Ve="@wire/attach",qe=(e,t,n)=>({type:Ve,payload:{connectionId:(0,Me.Z)(),p1:e,p2:t,joints:(null==n?void 0:n.joints)||[]}});function $e(e){return e.type===Ve}const _e="@wire/detatch";function Xe(e){return e.type===_e}const Ye="@wire/joint/add",Qe="@wire/joint/move",et=(e,t,n={})=>{var i,r;return{type:Qe,payload:{jointIds:ie(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}},tt="@wire/joint/delete",nt="@clipboard/paste",it="@field/drag/end",rt=(e,t)=>({type:it,payload:Object.assign(Object.assign({},e),{modifierKeys:t})}),ot="@undo/undo",ct=()=>({type:ot});function st(e){return e.type===ot}const at="@undo/redo",lt=()=>({type:at});function ut(e){return e.type===at}const dt="@project/new",pt=()=>({type:dt});function mt(e){return e.type===dt}const yt="@project/receive",ft=(e,t)=>({type:yt,payload:{fileName:e,saveData:t}}),gt=[Se,Le,ze,Je,Ae,Ze,Fe,He,Ge,Ve,_e,Ye,tt,Qe,ot,at,nt,it];function ht(e){return-1!==gt.indexOf(e.type)}var It=n(8718),bt=n.n(It);function vt(e){let t=null;const{layout:n,activeCircuitEditorPath:i}=e.services.uiLayout,r=N()(n,i);return he(r)&&(t=r.windowProps.circuitId),{serviceStates:bt()(e.services,Oe),viewCircuitId:t}}var Et=n(928),kt=n.n(Et),Ot=n(9734),Ct=n.n(Ot);function Nt(...e){return[].concat(...e)}const xt="@field/drag/continue",jt=(e,t)=>({type:xt,payload:{dragPos:e,modifierKeys:t}});function wt(e){return t=>(n=Ne,i)=>{const r=t(n.services[e],i,n);return n.services[e]!=r?j(n,"services",e,r):n}}function Pt(e){return t=>{const n=(n,...i)=>t(n.services[e],...i);return n.local=t,n}}const Bt=wt("circuitEditorUiDrag"),Mt=Pt("circuitEditorUiDrag"),St=Bt(((e,t)=>{if(!function(e){return e.type===xt}(t))return e;const{dragPos:n,modifierKeys:i}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragModifierKeys:i})}));var Dt=n(3386),Lt=n.n(Dt),Tt=n(1966),zt=n.n(Tt);function Jt(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function Rt(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return Lt()(e,t);case"remove":return zt()(e,t);case"toggle":return zt()(e,t).concat(zt()(t,e))}return t}const Wt="@select/region",At=Mt((()=>50)),Ut=Mt((()=>5)),Zt=(e,t)=>{const n=At(e);return(0,f.R9)(t,n)},Ft=(e,t)=>{const n=Ut(e);return(0,f.R9)(t,n)};var Ht=n(2222),Kt=n(1795);const Gt=/(Mac|iOS|OS\ X)/.test((Kt.os||"undefined").toString()),Vt=Gt?"command":"ctrl",qt=Object.freeze({});function $t(e){const{ctrlKey:t,altKey:n,shiftKey:i,metaKey:r}=e;return{ctrlMetaKey:Gt?r:t,altKey:n,shiftKey:i}}var _t=n(6604),Xt=n.n(_t);const Yt=wt("nodeGraph"),Qt=Pt("nodeGraph"),en=Qt((e=>e.nodesById)),tn=Qt((0,Ht.P1)(en.local,(e=>Object.keys(e)))),nn=Qt((0,Ht.P1)(en.local,(e=>Xt()(e,(e=>e.nodeType))))),rn=Qt(((e,t)=>e.nodesById[t]||null)),on=Qt(((e,t)=>{const n=[];for(const i of Object.keys(e.nodesById)){const{nodeType:r}=e.nodesById[i];r===t&&n.push(i)}return n})),cn=Qt(((e,t)=>{const n=rn.local(e,t);return n?n.nodeType:null})),sn=Qt((0,Ht.P1)((e=>e.nodesById),(e=>Xt()(e,(e=>e.nodeName))))),an=Qt(((e,t)=>{var n;const i=rn.local(e,t);return i?null!==(n=i.nodeName)&&void 0!==n?n:t.substr(0,4):null})),ln=Qt(((e,t)=>{const n=rn.local(e,t);return n?n.nodeName:null}));var un=n(4654),dn=n.n(un),pn=n(3311),mn=n.n(pn),yn=n(669),fn=n.n(yn);const gn=wt("circuits"),hn=Pt("circuits"),In=hn((e=>e.nodeIdsByCircuitId)),bn=hn(((e,t)=>e.nodeIdsByCircuitId[t])),vn=hn(((e,t)=>{for(const n of Object.keys(e.nodeIdsByCircuitId))if(-1!==e.nodeIdsByCircuitId[n].indexOf(t))return n;return null})),En=wt("nodeLayout"),kn=Pt("nodeLayout"),On=kn((e=>e.nodePositionsById)),Cn=kn(((e,t)=>{var n;return null!==(n=e.nodePositionsById[t])&&void 0!==n?n:f.Ds}));function Nn(e){return"ic-"+e}function xn(e){return e&&e.startsWith("ic-")?e.substr(3):null}function jn(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}const wn=hn((e=>Object.keys(e.circuitNamesByCircuitId))),Pn=hn((e=>e.circuitNamesByCircuitId)),Bn=hn(((e,t)=>e.circuitNamesByCircuitId[t])),Mn=hn(((e,t)=>{const{nodeIdsByCircuitId:n}=e,i=Object.keys(n);for(const e of i)if(-1!==n[e].indexOf(t))return e;return null})),Sn=(e,t,n)=>{if(!t)return!1;if(t===n)return!0;const i=Nn(n),{nodesById:r}=e.services.nodeGraph;return Object.keys(r).filter((e=>r[e].nodeType===i)).some((n=>{const i=Mn(e,n);return!!i&&Sn(e,t,i)}))};function Dn(e,t){return{x:"input"===t?0:100,y:50*e+25}}const Ln=[(0,Ht.P1)(In,nn,On,Pn,((e,t,n,r)=>Object.keys(e).filter((e=>e!==p)).map((o=>{var c,s;const a=null!==(c=e[o])&&void 0!==c?c:[],l=null!==(s=r[o])&&void 0!==s?s:o.substr(0,5);let u=a.filter((e=>t[e].startsWith("pin-")));u=Ct()(u,(e=>n[e].y),(e=>n[e].x));const d={},p=[],m=[];for(const e of u){const n=t[e];"pin-input"===n?(d[e]=Object.assign({direction:"input"},Dn(p.length,"input")),p.push(e)):"pin-output"===n&&(d[e]=Object.assign({direction:"output"},Dn(m.length,"output")),m.push(e))}const y={circuitId:o,inputPinIds:p,outputPinIds:m};return{type:Nn(o),category:"integrated-circuit",displayName:l,elementProduction:{type:"circuit",circuitId:o},visual:{hitRect:(0,f.NG)(fn()(jn(p.length,m.length))),trayComponent:()=>i.createElement("g",{stroke:"black",strokeWidth:1},i.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),i.createElement("line",{x1:10,y1:15,x2:5,y2:15}),i.createElement("line",{x1:40,y1:15,x2:45,y2:15}),i.createElement("line",{x1:10,y1:35,x2:5,y2:35}),i.createElement("line",{x1:40,y1:35,x2:45,y2:35})),component:"integrated-circuit",componentProps:y},pins:d}})))),n(4313).Z,n(9175).Z,n(4646).Z,n(2140).Z,n(6467).Z,n(8476).Z,n(3980).Z,n(9696).Z,n(2201).Z,n(6015).Z,n(5058).Z,n(3158).Z,n(7529).Z,n(4987).Z];let Tn=[];const zn=e=>{const t=dn()(Ln,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,ie(n)}(t,e)));return t.every(((e,t)=>e===Tn[t]))?Tn:(Tn=t,t)},Jn=(0,Ht.P1)(zn,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),Rn=(e,t)=>{var n;const i=zn(e);return null!==(n=mn()(i,(e=>e.type===t)))&&void 0!==n?n:null},Wn=(0,Ht.P1)(Jn,On,nn,((e,t,n)=>{var i;const r={},o=Object.keys(n);for(const c of o){const o={};r[c]=o;const s=null!==(i=t[c])&&void 0!==i?i:f.Ds,a=n[c];if(!a)continue;const l=e[a];if(!l)continue;const u=Object.keys(l.pins);for(const e of u){const t=l.pins[e],n=(0,f.ZO)(s,t);o[e]=n}}return r})),An=wt("selection"),Un=Pt("selection"),Zn=Un((e=>e.selectedNodeIds)),Fn=Un(((e,t)=>-1!==e.selectedNodeIds.indexOf(t))),Hn=((0,Ht.P1)(en,Zn,((e,t)=>bt()(e,t))),Un((e=>e.selectedConnectionIds)),Un(((e,t)=>-1!==e.selectedConnectionIds.indexOf(t)))),Kn=Un((e=>e.selectedJointIds)),Gn=Un(((e,t)=>-1!==e.selectedJointIds.indexOf(t))),Vn=Mt(((e,t)=>e.dragCircuitId===t)),qn=Mt((e=>e.dragMode)),$n=Mt((e=>null!=e.dragMode)),_n=Mt((e=>e.dragCircuitId)),Xn=Mt((e=>e.dragStart)),Yn=Mt((e=>e.dragEnd)),Qn=Mt((e=>{var t;return null!==(t=e.dragModifierKeys)&&void 0!==t?t:qt})),ei=Mt((0,Ht.P1)(qn.local,Xn.local,Yn.local,((e,t,n)=>"select"===e&&t&&n?(0,f.Qu)(t,n):null))),ti=(0,Ht.P1)(qn,Zn,Qn,Xn,Yn,At,Ut,((e,t,n,i,r,o,c)=>{if("move"!==e||!i||!r)return null;let s=c;t.length>0&&(s=o);const a=(0,f.sj)(r,i);return n.ctrlMetaKey||(a.x=Math.round(a.x/s)*s,a.y=Math.round(a.y/s)*s),a})),ni=Mt((e=>{const t=Ut.local(e),{dragMode:n,dragEnd:i,dragModifierKeys:r}=e;if("new-joint"!==n||!i||!r)return null;const o=Object.assign({},i);return r.ctrlMetaKey||(o.x=Math.round(o.x/t)*t,o.y=Math.round(o.y/t)*t),o})),ii=(0,Ht.P1)(qn,Yn,In,_n,Wn,((e,t,n,i,r)=>{var o;if("wire"!==e||!t||!i)return null;const c=n[i];if(!c)return null;for(const e of c){const n=null!==(o=r[e])&&void 0!==o?o:f.Ds,i=Object.keys(n);for(const r of i){const i=n[r],o=(0,f.sj)(t,i);if((0,f.VE)(o)<=6)return{nodeId:e,pinId:r}}}return null})),ri="@field/drag/start/joint",oi="@select/wire-joints",ci=(e,t="set")=>({type:oi,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}});var si=n(6486);const ai=(0,Ht.P1)(((e,t)=>bn(e,t)),(e=>e.services.nodeGraph.connectionsById),((e,t)=>Object.keys(t).filter((n=>{const{inputPin:i,outputPin:r}=t[n];return!!(0,si.includes)(e,i.nodeId)&&!!(0,si.includes)(e,r.nodeId)})))),li=(e,t)=>{const{connectionsById:n}=e.services.nodeGraph,i=n[t];if(!i)return null;const{nodeId:r}=i.inputPin||i.outputPin;return vn(e,r)},ui=(e,t)=>{const{wireJointIdsByConnectionId:n}=e.services.nodeLayout,i=Object.keys(n).find((e=>-1!==n[e].indexOf(t)));return i?li(e,i):null},di="@field/drag/start/new-joint",pi=Bt(((e,t,n)=>{if(!function(e){return e.type===di}(t))return e;const{connectionId:i,addAfterJointId:r,modifierKeys:o,x:c,y:s}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"new-joint",dragCircuitId:li(n,i),dragStart:{x:c,y:s},dragNewJointConnectionId:i,dragNewJointAfterJointId:r,dragModifierKeys:o})})),mi="@field/drag/start/node",yi="@select/nodes",fi=(e,t="set")=>({type:yi,payload:{nodeIds:Array.isArray(e)?e:[e],mode:t}}),gi="@field/drag/start/select",hi=Bt(((e,t)=>{if(!function(e){return e.type===gi}(t))return e;const{x:n,y:i,circuitId:r}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragCircuitId:r,dragStart:{x:n,y:i}})})),Ii="@field/drag/start/wire",bi=Bt(((e,t,n)=>{if(!function(e){return e.type===Ii}(t))return e;const{dragStart:i,pin:r}=t.payload,o=function(e,t){const n=In(t);for(const t of Object.keys(n))if(-1!==n[t].indexOf(e))return t;return null}(r.nodeId,n);return o?Object.assign(Object.assign({},e),{dragMode:"wire",dragCircuitId:o,dragStart:i,dragWireSource:r}):e})),vi="@field/mouse/leave",Ei=Nt(St,(function(e=Ne,t){if(!function(e){return e.type===it}(t))return e;const{x:n,y:i,modifierKeys:r}=t.payload,{dragMode:o,dragStart:c,dragCircuitId:s,dragNewJointAfterJointId:a,dragNewJointConnectionId:l,dragWireSource:u}=e.services.circuitEditorUiDrag;switch(o){case"select":if(c&&s){const t=Jt(r),o=(0,f.Qu)(c,{x:n,y:i});e=Dc(e,((e,t,n="set")=>({type:Wt,payload:{region:e,circuitId:t,mode:n}}))(o,s,t))}break;case"move":if(c){let t=(0,f.sj)({x:n,y:i},c);const o=e.services.selection.selectedNodeIds.length>0;r.ctrlMetaKey||(t=o?Zt(e,t):Ft(e,t)),e=Dc(e,((e,t,n={})=>{var i;return{type:Ge,payload:{offsetX:e,offsetY:t,snapMode:null!==(i=n.snapMode)&&void 0!==i?i:"none"}}})(t.x,t.y))}break;case"new-joint":{const t=Ft(e,{x:n,y:i});e=Dc(e,((e,t,n,i)=>({type:Ye,payload:{connectionId:e,jointId:(0,Me.Z)(),addAfterJointId:t,position:n}}))(l,a,t));break}case"wire":{const t=j(e,"services","circuitEditorUiDrag","dragEnd",{x:n,y:i}),r=ii(t);u&&r&&(e=Dc(e,qe(u,r)));break}}return j(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:null,dragCircuitId:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewNodeType:null,dragWireSource:null})))}),(function(e=Ne,t){if(!function(e){return e.type===ri}(t))return e;const{jointId:n,x:i,y:r,modifierKeys:o}=t.payload;if(e=j(e,"services","circuitEditorUiDrag",(t=>Object.assign(Object.assign({},t),{dragMode:"move",dragCircuitId:ui(e,n),dragStart:{x:i,y:r}}))),!Gn(e,n)){const t=Jt(o);e=Dc(e,ci(n,t))}return e}),pi,(function(e=Ne,t){if(!function(e){return e.type===mi}(t))return e;const{nodeId:n,x:i,y:r,modifierKeys:o}=t.payload;if(e=j(e,"services","circuitEditorUiDrag",(t=>Object.assign(Object.assign({},t),{dragMode:"move",dragCircuitId:vn(e,n),dragStart:{x:i,y:r}}))),!Fn(e,n)){const t=Jt(o);e=Dc(e,fi(n,t))}return e}),hi,bi,Bt(((e,t)=>function(e){return e.type===vi}(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e))),ki=gn(((e,t)=>{if(!function(e){return e.type===Se}(t))return e;const n=t.payload.circuitId;let i=t.payload.circuitName;return i||(i="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:i}),nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[n]:[]})})})),Oi=gn(((e,t,n)=>{if(!Te(t))return e;const{circuitId:i}=t.payload,r=Object.keys(e.circuitNamesByCircuitId).filter((e=>e!==i)),o=on(n,Nn(i));let c=bt()(e.nodeIdsByCircuitId,r);return c=Xt()(c,(e=>zt()(e,o))),Object.assign(Object.assign({},e),{nodeIdsByCircuitId:c,circuitNamesByCircuitId:bt()(e.circuitNamesByCircuitId,r)})})),Ci=gn(((e,t)=>{if(!function(e){return e.type===ze}(t))return e;const{circuitId:n,circuitName:i}=t.payload,r=i.trim();return""===r?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:r})})})),Ni=gn(((e,t)=>{if(!We(t))return e;const{nodeId:n,circuitId:i}=t.payload,r=i;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[r]:[...e.nodeIdsByCircuitId[r],n]})})})),xi=gn(((e,t)=>{if(!Ue(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:Xt()(e.nodeIdsByCircuitId,(e=>e.filter((e=>-1===n.indexOf(e)))))})})),ji=Nt(ki,Oi,Ci,Ni,xi,gn(((e,t)=>mt(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[p]:"Root"},nodeIdsByCircuitId:{[p]:[]}}):e)));var wi=n(5161),Pi=n.n(wi),Bi=n(998),Mi=n.n(Bi),Si=n(7287),Di=n.n(Si);const Li="@clipboard/copy";var Ti=n(2628),zi=n.n(Ti),Ji=n(4908),Ri=n.n(Ji),Wi=n(7516);const Ai=Wi.Ry().shape({nodeId:Wi.Z_().required().min(1),pinId:Wi.Z_().required().min(1)});function Ui(e,t){return e.nodeId===t.nodeId&&e.pinId===t.pinId}const Zi=Qt((e=>e.connectionsById)),Fi=Qt((0,Ht.P1)((e=>e.connectionsById),(e=>Object.keys(e)))),Hi=Qt(((e,t)=>e.connectionsById[t])),Ki=Qt((0,Ht.P1)((e=>e.connectionsById),(e=>zi()(e)))),Gi=Qt(((e,t)=>{const{connectionsById:n}=e,i=Object.keys(n);for(const e of i)if(Ui(n[e].inputPin,t))return e;return null})),Vi=Qt(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].inputPin.nodeId===t)))),qi=Qt(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].outputPin.nodeId===t)))),$i=Qt(((e,t)=>{const n=Vi.local(e,t),i=qi.local(e,t);return Ri()([...n,...i])})),_i=(e,t)=>{const n=cn(e,t);return n?Rn(e,n):null},Xi=(e,t)=>{const n=cn(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const i=vn(e,t);if(!i)return[];const r=Nn(i);return on(e,r).map((e=>({nodeId:e,pinId:t})))},Yi=wt("clipboard");Pt("clipboard");const Qi=Nt(Yi(((e,t,n)=>{if(!function(e){return e.type===Li}(t))return e;const{nodeIds:i}=t.payload;if(0===i.length)return e;const r=On(n),o=Di()(i,Pi()(i,(()=>(0,Me.Z)()))),c=r[i[0]],s=i.map((e=>{const t=rn(n,e),s=((e,t)=>{const n=Ki(e),i=_i(e,t);if(!i)return{};let r=[];r=Object.keys(i.pins).filter((e=>"output"===i.pins[e].direction));const o=n.filter((e=>e.outputPin.nodeId===t)),c={};for(const e of r)c[e]=[];for(const e of o){const{outputPin:t,inputPin:n}=e;c[t.pinId].push(n)}return c})(n,e);return{id:o[e],nodeType:t.nodeType,offset:(0,f.sj)(r[e],c),outputs:Xt()(s,(e=>e.filter((e=>{return t=e.nodeId,-1!==Mi()(i,(e=>e===t));var t})).map((e=>({nodeId:o[e.nodeId],pinId:e.pinId})))))}}));return Object.assign(Object.assign({},e),{clipboardNodes:s,clipboardPasteOrigin:c})})),(function(e=Ne,t){if(!function(e){return e.type===nt}(t))return e;const{targetCircuitId:n}=t.payload,{clipboardNodes:i,clipboardPasteOrigin:r}=e.services.clipboard,o=At(e),c=(0,f.ZO)(r,{x:o,y:o}),s=Di()(i.map((e=>e.id)),Pi()(i,(()=>(0,Me.Z)())));for(const t of i){const{id:i,nodeType:r,offset:o}=t,a=(0,f.ZO)(c,o);e=Dc(e,Re(r,n,a,{nodeId:s[i]}))}for(const t of i){const{id:n,outputs:i}=t,r=s[n];for(const t of Object.keys(i))for(const n of i[t]){const{nodeId:i,pinId:o}=n,c=s[i];e=Dc(e,qe({nodeId:r,pinId:t},{nodeId:c,pinId:o}))}}return e=j(e,"services","clipboard","clipboardPasteOrigin",c),Dc(e,fi(zi()(s)))})),er="@dialog/response/accept",tr=e=>({type:er,payload:{result:e}}),nr=wt("dialog"),ir=Pt("dialog"),rr=nr(((e,t)=>function(e){return e.type===er}(t)?h:e)),or="@dialog/response/cancel",cr=nr(((e,t)=>function(e){return e.type===or}(t)?h:e)),sr="@dialog/show",ar=Nt(rr,cr,nr(((e,t)=>{if(!function(e){return e.type===sr}(t))return e;const{dialogType:n,data:i}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:i})})));function lr(e,t){return t.weight=e,t}function ur(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}var dr=n(5937),pr=n.n(dr);function mr(e,t,n){const i=zt()(Object.keys(e.nodesById),t),r=dn()(t,(e=>Xi(n,e)));return Object.assign(Object.assign({},e),{nodesById:bt()(e.nodesById,i),connectionsById:pr()(e.connectionsById,(function({inputPin:e,outputPin:n}){return-1===t.indexOf(e.nodeId)&&-1===t.indexOf(n.nodeId)&&!r.some((t=>Ui(t,e)||Ui(t,n)))}))})}const yr=lr(ur(Oi),Yt(((e,t,n)=>{if(!Te(t))return e;const{circuitId:i}=t.payload;return mr(e,[...bn(n,i),...on(n,Nn(i))],n)}))),fr=lr(-10,Yt(((e,t)=>{if(!We(t))return e;const{nodeId:n,nodeType:i,nodeName:r}=t.payload;return Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:{nodeType:i,nodeName:null!=r?r:null}})})}))),gr=lr(ur(xi),Yt(((e,t,n)=>{if(!Ue(t))return e;const{nodeIds:i}=t.payload;return mr(e,i,n)}))),hr=Yt(((e,t)=>{if(!function(e){return e.type===Ze}(t))return e;const{nodeId:n}=t.payload;if(!e.nodesById[n])return e;let i=t.payload.nodeName;return i||""!==i.trim()||(i=null),Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:Object.assign(Object.assign({},e.nodesById[n]),{nodeName:i})})})})),Ir=Nt(yr,fr,Yt(((e,t)=>mt(t)?I:e)),gr,hr,Yt(((e,t,n)=>{if(!$e(t))return e;const{connectionId:i,p1:r,p2:o}=t.payload,c=function(e,t,n,i){const r=e.nodesById[t.nodeId],o=e.nodesById[n.nodeId];if(!r||!o)return null;const c=Rn(i,r.nodeType),s=Rn(i,o.nodeType);if(!c||!s)return null;const a=c.pins[t.pinId],l=s.pins[n.pinId];if(!a||!l)return null;if(a.direction===l.direction)return null;return{outputPin:"output"===a.direction?t:n,inputPin:"input"===a.direction?t:n}}(e,r,o,n);if(!c)return e;const{inputPin:s}=c;return mn()(e.connectionsById,(e=>Ui(e.inputPin,s)))?e:Object.assign(Object.assign({},e),{connectionsById:Object.assign(Object.assign({},e.connectionsById),{[i]:Object.assign({id:i},c)})})})),Yt(((e,t)=>{if(!Xe(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.connectionsById).filter((e=>e!==n));return Object.assign(Object.assign({},e),{connectionsById:bt()(e.connectionsById,i)})})));function br(e,t,n){const i=t.reduce(((e,t)=>{const i=Vi(n,t),r=qi(n,t);return e.push(...i,...r),e}),[]),r=dn()(t,(e=>Xi(n,e))),o=Zi(n),c=Object.keys(o).filter((e=>{const{inputPin:t,outputPin:n}=o[e];return r.some((e=>Ui(e,t)||Ui(e,n)))})),s=[...i,...c].reduce(((t,n)=>(t.push(...e.wireJointIdsByConnectionId[n]),t)),[]),a=zt()(Object.keys(e.wireJointIdsByConnectionId),i),l=zt()(Object.keys(e.wireJointPositionsByJointId),s),u=zt()(Object.keys(e.nodePositionsById),t);return Object.assign(Object.assign({},e),{nodePositionsById:bt()(e.nodePositionsById,u),wireJointIdsByConnectionId:bt()(e.wireJointIdsByConnectionId,a),wireJointPositionsByJointId:bt()(e.wireJointPositionsByJointId,l)})}const vr=lr(ur(yr),En(((e,t,n)=>{if(!Te(t))return e;const{circuitId:i}=t.payload;return e=br(e,bn(n,i),n),br(e,on(n,Nn(i)),n)}))),Er=En(((e,t)=>{if(!We(t))return e;const{nodeId:n,position:i=f.Ds}=t.payload;return j(e,"nodePositionsById",n,i)})),kr=lr(ur(gr),En(((e,t,n)=>{if(!Ue(t))return e;const{nodeIds:i}=t.payload;return br(e,i,n)}))),Or="@node/move",Cr=(e,t,n={})=>{var i,r;return{type:Or,payload:{nodeIds:ie(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}},Nr=En(((e,t,n)=>{if(!function(e){return e.type===Or}(t))return e;const{nodeIds:i,position:r,relative:o,snapMode:c}=t.payload,s=Xt()(bt()(e.nodePositionsById,i),(e=>{let t={x:o?e.x+r.x:r.x,y:o?e.y+r.y:r.y};return"node"===c&&(t=Zt(n,t)),t}));return Object.assign(Object.assign({},e),{nodePositionsById:Object.assign(Object.assign({},e.nodePositionsById),s)})})),xr=Nt(vr,Er,En(((e,t)=>mt(t)?b:e)),kr,Nr,En(((e,t)=>{if(!$e(t))return e;const{connectionId:n,joints:i}=t.payload;if(i.length>0){const t=i.map((()=>(0,Me.Z)()));e=j(e,"wireJointIdsByConnectionId",n,t),e=j(e,"wireJointPositionsByJointId",(e=>Object.assign(Object.assign({},e),Di()(t,i))))}else e=j(e,"wireJointIdsByConnectionId",n,[]);return e})),En(((e,t)=>{if(!Xe(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.wireJointIdsByConnectionId).filter((e=>e!=n)),r=zt()(Object.keys(e.wireJointPositionsByJointId),e.wireJointIdsByConnectionId[n]);return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:bt()(e.wireJointIdsByConnectionId,i),wireJointPositionsByJointId:bt()(e.wireJointPositionsByJointId,r)})})),En(((e,t)=>{if(!function(e){return e.type===Ye}(t))return e;const{connectionId:n,addAfterJointId:i,position:r,jointId:o}=t.payload;let c=e.wireJointIdsByConnectionId[n];const s=i?c.indexOf(i)+1:0;return c=[...c.slice(0,s),o,...c.slice(s)],Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:Object.assign(Object.assign({},e.wireJointIdsByConnectionId),{[n]:c}),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),{[o]:r})})})),En(((e,t)=>{if(!function(e){return e.type===tt}(t))return e;const{jointId:n}=t.payload,i=Object.keys(e.wireJointPositionsByJointId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:Xt()(e.wireJointIdsByConnectionId,(e=>e.filter((e=>e!==n)))),wireJointPositionsByJointId:bt()(e.wireJointPositionsByJointId,i)})})),En(((e,t,n)=>{if(!function(e){return e.type===Qe}(t))return e;const{jointIds:i,position:r,relative:o,snapMode:c}=t.payload,s=Xt()(bt()(e.wireJointPositionsByJointId,i),(e=>{let t={x:o?e.x+r.x:r.x,y:o?e.y+r.y:r.y};return"node"===c?t=Zt(n,t):"joint"===c&&(t=Ft(n,t)),t}));return Object.assign(Object.assign({},e),{wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),s)})}))),jr=Wi.Ry().shape({circuitId:Wi.Z_().required().min(1),circuitName:Wi.Z_().required().min(1)}),wr=Wi.Ry().shape({nodeId:Wi.Z_().required().min(1),nodeType:Wi.Z_().required().min(1),nodeName:Wi.Z_().nullable().min(1),circuitId:Wi.Z_().required().min(1),x:Wi.Rx().required(),y:Wi.Rx().required()}),Pr=Wi.Ry().shape({output:Ai.required(),input:Ai.required(),joints:Wi.IX().of(f.tQ)}),Br=Wi.Ry().shape({circuits:Wi.IX().of(jr).min(0),nodes:Wi.IX().of(wr).min(0),wires:Wi.IX().of(Pr).min(0)}),Mr={},Sr={},Dr=(kn((e=>Object.keys(e.wireJointPositionsByJointId))),kn((e=>e.wireJointIdsByConnectionId))),Lr=kn(((e,t)=>e.wireJointIdsByConnectionId[t])),Tr=kn(((e,t)=>e.wireJointPositionsByJointId[t])),zr=kn((e=>e.wireJointPositionsByJointId));class Jr extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function Rr(e){const t=zr(e);return{circuits:wn(e).map((t=>({circuitId:t,circuitName:Bn(e,t)}))),nodes:tn(e).map((t=>{const n=rn(e,t),i=Cn(e,t),r=vn(e,t);return{nodeId:t,nodeType:n.nodeType,nodeName:n.nodeName,circuitId:null!=r?r:p,x:i.x,y:i.y}})),wires:Fi(e).map((n=>{const i=Hi(e,n),r=Lr(e,n);return{input:i.inputPin,output:i.outputPin,joints:r.map((e=>t[e]))}}))}}function Wr(e,t){var n,i,r;try{Br.validateSync(t)}catch(e){throw new Jr(e.message)}e=Ne;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>Dc(e,De({circuitId:t,circuitName:n}))),e),e=(null!==(i=t.nodes)&&void 0!==i?i:[]).reduce(((e,t)=>{var n;return Dc(e,Re(t.nodeType,t.circuitId,{x:t.x,y:t.y},{nodeId:t.nodeId,nodeName:null!==(n=t.nodeName)&&void 0!==n?n:void 0}))}),e),e=(null!==(r=t.wires)&&void 0!==r?r:[]).reduce(((e,t)=>Dc(e,qe(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new Jr("Failed to load project.")}return e}const Ar=lr(50,((e=Ne,t)=>{return ht(t)?(n=Rr(e),localStorage.setItem("autosave",JSON.stringify(n)),e):e;var n})),Ur=wt("project"),Zr=Pt("project"),Fr=Ur(((e,t)=>ht(t)?Object.assign(Object.assign({},e),{projectModified:!0}):e)),Hr=Ur(((e,t)=>mt(t)?(localStorage.removeItem("autosave"),Object.assign(Object.assign({},e),{projectName:"New Project",projectModified:!1})):e)),Kr="@project/rename",Gr=Ur(((e,t)=>{if(!function(e){return e.type===Kr}(t))return e;let{projectName:n}=t.payload;return n=n.trim(),""===n?e:Object.assign(Object.assign({},e),{projectName:n})})),Vr="@project/save",qr=()=>({type:Vr}),$r="@project/save:success",_r=Nt(Ar,(function(e=Ne,t){if(!function(e){return e.type===Be}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{e=j(e=Wr(e,n),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"Previous Project",projectModified:!0})))}catch(e){}return e}),Fr,Hr,(function(e=Ne,t){if(!function(e){return e.type===yt}(t))return e;const{fileName:n,saveData:i}=t.payload;try{e=j(e=Wr(e,i),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:n,projectModified:!1})))}catch(e){console.error("Failed to load save",e)}return e}),Gr,Ur(((e,t)=>function(e){return e.type===$r}(t)?Object.assign(Object.assign({},e),{projectModified:!1}):e))),Xr=An(((e,t)=>{if(!Ue(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:zt()(e.selectedNodeIds,n),selectedConnectionIds:[]})})),Yr=An(((e,t)=>mt(t)?E:e));var Qr=n(5564),eo=n.n(Qr);const to="@select/all",no=e=>({type:to,payload:{circuitId:e}}),io=An(((e,t,n)=>{if(!function(e){return e.type===to}(t))return e;const{circuitId:i}=t.payload,r=bn(n,i);let o=Fi(n);const c=Zi(n);o=o.filter((e=>{const{inputPin:t,outputPin:n}=c[e];return-1!==r.indexOf(t.nodeId)&&-1!==r.indexOf(n.nodeId)}));const s=Dr(n),a=eo()(o.map((e=>s[e])));return Object.assign(Object.assign({},e),{selectedNodeIds:r,selectedConnectionIds:o,selectedJointIds:a})})),ro="@select/clear",oo=An(((e,t)=>function(e){return e.type===ro}(t)?Object.assign(Object.assign({},e),{selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}):e)),co=An(((e,t)=>{if(!function(e){return e.type===oi}(t))return e;const{jointIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===i?[]:e.selectedNodeIds,selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:Rt(e.selectedJointIds,n,i)})})),so=An(((e,t)=>{if(!function(e){return e.type===yi}(t))return e;const{nodeIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:Rt(e.selectedNodeIds,n,i),selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:"set"===i?[]:e.selectedJointIds})}));var ao=n(2525),lo=n.n(ao);const uo=(0,Ht.P1)(On,Jn,nn,((e,t,n)=>Xt()(e,((e,i)=>{const r=n[i];if(!r)return f.rG;const o=t[r];return o?(0,f.gQ)(o.visual.hitRect,e):f.rG})))),po=An(((e,t,n)=>{if(!function(e){return e.type===Wt}(t))return e;const{region:i,circuitId:r,mode:o}=t.payload,c=bn(n,r),s=bt()(uo(n),c),a=[];lo()(s,((e,t)=>{(0,f.kK)(e,i)&&a.push(t)}));const l=zr(n),u=((e,t)=>{const n=bn(e,t),i=dn()(n,(t=>$i(e,t))),r=dn()(i,(t=>Lr(e,t)));return Ri()(r)})(n,r).filter((e=>{const t=l[e];return(0,f.PL)(t,i)}));return Object.assign(Object.assign({},e),{selectedNodeIds:Rt(e.selectedNodeIds,a,o),selectedConnectionIds:"set"===o?[]:e.selectedConnectionIds,selectedJointIds:Rt(e.selectedJointIds,u,o)})})),mo="@select/wires",yo=An(((e,t)=>{if(!function(e){return e.type===mo}(t))return e;const{connectionIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===i?[]:e.selectedNodeIds,selectedConnectionIds:Rt(e.selectedConnectionIds,n,i),selectedJointIds:"set"===i?[]:e.selectedJointIds})})),fo="@selection/copy",go=Nt(Yr,Xr,io,oo,co,so,po,yo,(function(e=Ne,t){if(!function(e){return e.type===Fe}(t))return e;const{selectedNodeIds:n,selectedJointIds:i}=e.services.selection,r=On(e);for(const t of n){const n=r[t];if(!n)continue;const i=Zt(e,n);(0,f.kg)(n,i)||(e=Dc(e,Cr(t,i)))}const o=zr(e);for(const t of i){const n=o[t];if(!n)continue;const i=Ft(e,n);(0,f.kg)(n,i)||(e=Dc(e,et(t,i)))}return e}),(function(e=Ne,t){if(!function(e){return e.type===fo}(t))return e;const n=Zn(e);return 0===n.length?e:Dc(e,(i=n,{type:Li,payload:{nodeIds:Array.isArray(i)?i:[i]}}));var i}),(function(e=Ne,t){if(!function(e){return e.type===He}(t))return e;const{selectedNodeIds:n,selectedConnectionIds:i,selectedJointIds:r}=e.services.selection;return n.length>0&&(e=Dc(e,{type:Ae,payload:{nodeIds:ie(n)}})),e=i.reduce(((e,t)=>Dc(e,(e=>({type:_e,payload:{connectionId:e}}))(t))),e),r.reduce(((e,t)=>Dc(e,(e=>({type:tt,payload:{jointId:e}}))(t))),e)}),(function(e=Ne,t){if(!function(e){return e.type===Ge}(t))return e;const{offsetX:n,offsetY:i,snapMode:r}=t.payload,o=Zn(e),c=Kn(e),s={x:n,y:i};let a="none";"node"!==r&&"by-type"!==r||(a="node");let l="none";return l="by-type"===r?"joint":r,e=Dc(e,Cr(o,s,{relative:!0,snapMode:a})),Dc(e,et(c,s,{relative:!0,snapMode:l}))}),An(((e,t)=>{if(!Xe(t))return e;const{connectionId:n}=t.payload;return Object.assign(Object.assign({},e),{selectedConnectionIds:e.selectedConnectionIds.filter((e=>e!==n))})}))),ho=wt("simulator"),Io=Pt("simulator"),bo=ho(((e,t)=>ht(t)?k:e));function vo(e){return e.default}const Eo={"input-momentary":vo(n(3667)),"input-toggle":vo(n(2318)),"logic-and":vo(n(7909)),"logic-buffer":vo(n(274)),"logic-nand":vo(n(4347)),"logic-nor":vo(n(8112)),"logic-not":vo(n(6559)),"logic-or":vo(n(2649)),"logic-xor":vo(n(8881)),"output-led":vo(n(6567)),"output-seg7":vo(n(4257)),"pin-high":vo(n(4420))};var ko=n(1235);function Oo(e,t){const n=dn()(t,(e=>[e,"subCircuitIds"]));n.pop();const i=N()(e,n);if(!i)return null;const{simulatorNodeId:r}=i;return null!=r?r:null}var Co=n(3857),No=n.n(Co);const xo=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function jo(e,t,n=[]){var i;if(-1!==n.indexOf(e))throw new Error(`Circuit graph encountered loop on ${n.join(" => ")} while trying to add circuit ${e}`);n=[...n,e];const r={},o={},c={},s={},a=[],l=[],u={},d={},p=null!==(i=t.nodeIdsByCircuitId[e])&&void 0!==i?i:[];for(const e of p){const i=t.nodeTypesByNodeId[e];if(!i)continue;if("pin-input"===i){a.push(e),c[e]=[];continue}if("pin-output"===i){l.push(e);continue}const s=wo(e,t,n);No()(r,s.simulatorNodesById),No()(o,s.simulatorNodeIdsByCircuitNodeId),u[e]=s.inputElementPinsByCircuitPinId,d[e]=s.outputElementPinsByCircuitPinId}const m=t.connectionsById;for(const e of Object.keys(m)){const{inputPin:t,outputPin:n}=m[e];if(-1===p.indexOf(t.nodeId)||-1===p.indexOf(n.nodeId))continue;const i=N()(d,[n.nodeId,n.pinId]),o=N()(u,[t.nodeId,t.pinId]);if(-1!==a.indexOf(n.nodeId)&&o){c[n.nodeId].push(...o);continue}if(-1!==l.indexOf(t.nodeId)&&i){s[t.nodeId]=i;continue}if(!i||!o)continue;const y=r[i.simulatorNodeId];let f=y.outputsByPin[i.pinId];null==f&&(y.outputsByPin[i.pinId]=f=[]);for(const e of o)f.push({simulatorNodeId:e.simulatorNodeId,pinId:e.pinId}),r[e.simulatorNodeId].inputsByPin[e.pinId]={simulatorNodeId:i.simulatorNodeId,pinId:i.pinId}}return{simulatorNodesById:r,simulatorNodeIdsByCircuitNodeId:o,inputElementPinsByCircuitPinId:c,outputElementPinsByCircuitPinId:s}}function wo(e,t,n){const i=t.nodeTypesByNodeId[e];if(!i)return xo;const r=t.nodeDefsByType[i];if(!r||!r.elementProduction)return xo;const o="string"==typeof(c=r.elementProduction)?{type:"element",elementType:c}:c;var c;switch(o.type){case"element":return function(e,t,{nodeTypesByNodeId:n,nodeDefsByType:i}){const r=i[n[e]];if(!r)return xo;const o={},c={},s=(0,Me.Z)();o[s]={elementType:t.elementType,inputsByPin:{},outputsByPin:{}},c[e]={simulatorNodeId:s,subCircuitIds:{}};const a={},l={};for(const e of Object.keys(r.pins)){const{direction:t}=r.pins[e];"input"===t?a[e]=[{pinId:e,simulatorNodeId:s}]:"output"===t&&(l[e]={pinId:e,simulatorNodeId:s})}return{simulatorNodesById:o,simulatorNodeIdsByCircuitNodeId:c,inputElementPinsByCircuitPinId:a,outputElementPinsByCircuitPinId:l}}(e,o,t);case"circuit":return function(e,t,n,i){const r=jo(t.circuitId,n,i);return Object.assign(Object.assign({},r),{simulatorNodeIdsByCircuitNodeId:{[e]:{simulatorNodeId:null,subCircuitIds:r.simulatorNodeIdsByCircuitNodeId}}})}(e,o,t,n);default:throw new Error("Unsupported production type "+o.type)}}const Po=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{}}),Bo=(0,Ht.P1)(In,nn,Zi,Jn,((e,t,n,i)=>{try{return jo(p,{nodeIdsByCircuitId:e,nodeTypesByNodeId:t,connectionsById:n,nodeDefsByType:i})}catch(e){return console.error(e),Po}})),Mo=(e,t)=>{const{simulatorNodesById:n}=Bo(e),i=n[t];return i?i.elementType:null},So=(e,t)=>{var n;const i=Mo(e,t);return i&&null!==(n=Eo[i])&&void 0!==n?n:null};var Do=n(7513),Lo=n.n(Do);const To=Object.freeze([]),zo=Object.freeze({});function Jo(e,t){const n=(e=>{const{simulatorNodesById:t}=Bo(e);return Object.keys(t)})(t);return e=k,e=n.reduce(((e,n)=>function(e,t,n){const i=So(n,t);if(!i)return e;const r={};return i.outputPins.forEach((e=>{r[e]=!1})),j(e,"nodeOutputValuesByNodeId",t,r)}(e,n,t)),e),e=n.reduce(((e,n)=>Ao(e,n,t)),e),Object.assign({},e,{initialized:!0})}function Ro(e,t,n){const i=e.tick+t;e=Object.assign({},e,{transitionWindows:e.transitionWindows.slice()});let r=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=i;){if(0==--r)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=Wo(e,t,n)}return e.tick!=i&&(e=Object.assign({},e,{tick:i})),e}function Wo(e,t,n){if(0===t.transitionIds.length)return e;let i=Object.assign({},e,{tick:t.tick,nodeOutputValuesByNodeId:Object.assign({},e.nodeOutputValuesByNodeId)});const r=new Set;t.transitionIds.forEach((e=>{const{nodeId:t,valuesByOutputPin:o}=i.transitionsById[e];var c,s;(c=i.nodeOutputValuesByNodeId[t],s=o,Object.keys(s).some((e=>c[e]!==s[e])))&&(i.nodeOutputValuesByNodeId[t]=Object.assign({},i.nodeOutputValuesByNodeId[t],o),((e,t)=>{const{simulatorNodesById:n}=Bo(e),i=n[t];return i?dn()(zi()(i.outputsByPin),(e=>e.map((e=>e.simulatorNodeId)))):To})(n,t).forEach((e=>r.add(e))))})),i.transitionsById=bt()(i.transitionsById,zt()(Object.keys(i.transitionsById),t.transitionIds));for(const e of r)i=Ao(i,e,n);return i}function Ao(e,t,n){const i=So(n,t);if(!i||!i.evolve)return e;const r=function(e,t,n){const i={},r=((e,t)=>{const{simulatorNodesById:n}=Bo(e),i=n[t];return i?i.inputsByPin:zo})(n,t);return Object.keys(r).forEach((t=>{var n;const o=r[t];if(!o)return void(i[t]=!1);const{simulatorNodeId:c,pinId:s}=o;i[t]=(null===(n=e.nodeOutputValuesByNodeId[c])||void 0===n?void 0:n[s])||!1})),i}(e,t,n);return Uo(e,t,i.evolve(e.nodeStatesByNodeId[t],r,e.tick))}function Uo(e,t,n){const{state:i,transitions:r}=n;return i&&(e=j(e,"nodeStatesByNodeId",t,i)),r&&(e=ie(r).reduce(((e,n,i)=>function(e,t,n,i="replace"){const{tickOffset:r,valuesByPin:o,transitionMerger:c=i}=n,s=e.tick+(r>0?r:1);return"replace"===c&&(e=function(e,t){return Object.keys(e.transitionsById).filter((n=>function(e){return e.nodeId===t}(e.transitionsById[n]))).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const i=bt()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let r=e.transitionWindows;const o=Lo()(r,n.tick,((e,t)=>e.tick-t));if(o>=0){const e=r[o],{transitionIds:n}=e,i=e.transitionIds.indexOf(t);-1!==i&&(1===e.transitionIds.length?r=oe(r,o):(r=r.slice(),r[o]=Object.assign({},r[o],{transitionIds:oe(n,i)})))}return Object.assign({},e,{transitionsById:i,transitionWindows:r})}(e,t)),e)}(e,t)),function(e,t,n,i){const r=(0,Me.Z)(),o={nodeId:t,tick:n,valuesByOutputPin:i},c=e.transitionWindows.slice();let s=Lo()(c,n,((e,t)=>e.tick-t));if(s<0){s=-s-1;const e={tick:n,transitionIds:[]};c.splice(s,0,e)}const a=c[s].transitionIds.slice();a.push(r),c[s]=Object.assign({},c[s],{transitionIds:a});const l=Object.assign({},e.transitionsById,{[r]:o});return Object.assign({},e,{transitionsById:l,transitionWindows:c})}(e,t,s,o)}(e,t,n,0===i?"replace":"append")),e)),e}const Zo=ho(((e,t,n)=>{if(!(0,ko.ke)(t))return e;const{circuitNodeIdPath:i,data:r}=t.payload,o=((e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=Bo(e);return Oo(n,t)})(n,i);if(!o)return e;const c=Mo(n,o);if(!c)return e;const s=Eo[c];if(!s||!s.interact)return e;const a=e.nodeStatesByNodeId[o];return Uo(e,o,s.interact(a,r))})),Fo="@sim/fastforward",Ho=ho(((e,t,n)=>{if(!function(e){return e.type===Fo}(t))return e;const{tick:i,transitionWindows:r}=e;return 0===r.length?e:Ro(e,r[0].tick-i,n)})),Ko="@sim/start",Go=()=>({type:Ko});function Vo(e){return e.type===Ko}const qo=ho(((e,t,n)=>Vo(t)?Jo(e,n):e)),$o="@sim/step",_o=()=>({type:$o});function Xo(e){return e.type===$o}const Yo="@sim/tick",Qo=e=>({type:Yo,payload:{tickCount:e}}),ec="@sim/stop",tc=()=>({type:ec});function nc(e){return e.type===ec}const ic=Nt(bo,Zo,Ho,qo,(function(e=Ne,t){if(!Xo(t))return e;const{initialized:n}=e.services.simulator;n||(e=j(e,"services","simulator",(t=>Jo(t,e))));const{tick:i,transitionWindows:r}=e.services.simulator;if(0===r.length)return e;const o=r[0].tick;return Dc(e,Qo(o-i))}),ho(((e,t)=>nc(t)?k:e)),ho(((e,t,n)=>{if(!function(e){return e.type===Yo}(t))return e;const{tickCount:i}=t.payload,r=performance.now();e=Ro(e,i,n);const o=performance.now()-r;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:o})}))),rc=wt("simulatorControl"),oc=Pt("simulatorControl"),cc=rc(((e,t)=>ht(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e)),sc="@sim/pause",ac=e=>({type:sc,payload:{mode:e}}),lc=oc((e=>"edit"!==e.mode)),uc=oc((e=>"run"===e.mode)),dc=oc((e=>"pause"===e.mode)),pc=oc((e=>e.ticksPerSecond)),mc=Nt(cc,rc(((e,t)=>{if(!function(e){return e.type===sc}(t))return e;const{mode:n}=t.payload;if(!lc.local(e))return e;let i=e.mode;switch(n){case!0:i="pause";break;case!1:i="run";break;case"toggle":i="run"==i?"pause":"run"}return Object.assign(Object.assign({},e),{mode:i})})),rc(((e,t)=>Vo(t)?Object.assign(Object.assign({},e),{mode:"run"}):e)),rc(((e,t)=>Xo(t)?Object.assign(Object.assign({},e),{mode:"pause"}):e)),rc(((e,t)=>nc(t)?Object.assign(Object.assign({},O),{ticksPerSecond:e.ticksPerSecond}):e))),yc=wt("uiLayout"),fc=Pt("uiLayout");function gc(e){let t=[];return e?(function(e,n){!function e(n,i){if(!1===((e,n)=>{const i=T(e);if(z(i)&&i.windowId===fe)return t=n,!1})(n,[]))return!1;const r=T(n);if(J(r)){if(!e(r.first,[...i,"first"]))return!1;if(!e(r.second,[...i,"second"]))return!1}return!0}(e,[])}(e),t):t}const hc=yc(((e,t)=>{if(!Te(t))return e;if(!e.layout)return e;const{circuitId:n}=t.payload,i=pe(e.layout,(e=>!he(e)||e.windowProps.circuitId!==n));return Object.assign(Object.assign({},e),{layout:i,activeCircuitEditorPath:gc(i)})})),Ic="@layout/rearrange",bc=yc(((e,t)=>{if(!function(e){return e.type===Ic}(t))return e;const{layout:n}=t.payload;return Object.assign(Object.assign({},e),{layout:n})})),vc="@view/activate",Ec=yc(((e,t)=>{if(!function(e){return e.type===vc}(t))return e;let{tesselPath:n}=t.payload;return N()(e.layout,n)||(n=gc(e.layout)),Object.assign(Object.assign({},e),{activeCircuitEditorPath:n})})),kc="@view/circuit",Oc=(e,t=null,n={})=>({type:kc,payload:Object.assign({circuitId:e,circuitNodeIdPath:t},n)}),Cc=yc(((e,t,n)=>{if(!function(e){return e.type===kc}(t))return e;const{circuitId:i,circuitNodeIdPath:r,newWindow:o,tesselPath:c}=t.payload;if(-1===wn(n).indexOf(i))return e;if(!e.layout)return e;const s=ge(i,null!=r?r:[]);let a=e.layout,l=e.activeCircuitEditorPath;if(N()(a,l)||(l=gc(a)),c){if(!N()(a,c))return e;a=w(T(a),c,s),l=c}else o||0===l.length?l.length>0?a=w(T(a),l,(e=>({direction:"row",division:50,first:e,second:s}))):(a={direction:"row",division:{firstSize:200},first:a,second:s},l=["second"]):a=w(T(a),l,s);return Object.assign(Object.assign({},e),{layout:a,activeCircuitEditorPath:l})})),Nc="@view/reset",xc=()=>({type:Nc}),jc=Nt(hc,bc,Ec,Cc,yc(((e,t)=>function(e){return e.type===Nc}(t)?be:e))),wc="@view/node-names",Pc=e=>({type:wc,payload:{mode:e}}),Bc=wt("uiSettings"),Mc=Pt("uiSettings"),Sc=Nt(Bc(((e,t)=>{if(!function(e){return e.type===wc}(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{nodeNameMode:n})}))),Dc=function(e){const t=Ct()(e,(e=>e.weight||0));return(e=Ne,n)=>t.reduce(((e,t)=>t(e,n)),e)}(Nt(Ei,ji,Qi,ar,Ir,xr,_r,go,ic,mc,jc,Sc));const Lc=[xt,vi,Qe,Yo];var Tc=n(4970),zc=n(8764),Jc=n(8424);function*Rc(e,t){yield(0,Tc.gz)(((e,t)=>({type:sr,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,Tc.qn)([er,or]);return n.type===er?n.payload.result:null}const Wc="@project/export-link",Ac=()=>({type:Wc});function*Uc(){yield(0,Tc.ib)(Wc,Zc)}function*Zc(){const e=yield(0,Tc.Ys)();try{const t=Rr(e),n=JSON.stringify(t),i=(0,Jc.Wt)(n),r=zc.lW.from(i).toString("base64"),o=encodeURIComponent(r),c=Pe+u.createHref({pathname:"/import",search:"data="+o});yield(0,Tc.RE)(Rc,"export-project-link",{projectLink:c})}catch(e){console.error("Failed to export project as link",e)}}const Fc="@project/import-link";function*Hc(){yield(0,Tc.ib)(Fc,Kc)}function*Kc(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=zc.lW.from(e,"base64"),i=(0,Jc.rr)(n,{to:"string"}),r=JSON.parse(i);yield(0,Tc.gz)(ft("Linked Project",r)),u.push("/")}catch(e){console.error("Failed to import save from link",e)}}var Gc=n(4171),Vc=n.n(Gc);const qc="@project/load",$c=()=>({type:qc});function*_c(){yield(0,Tc.ib)(qc,Xc)}function*Xc(){try{const[e]=yield(0,Tc.RE)(Vc(),{accept:"application/json"}),t=yield(0,Tc.RE)(e.text.bind(e)),n=JSON.parse(t);let i=e.name;i=i?i.substr(0,i.lastIndexOf(".json")):"Unnamed Project",yield(0,Tc.gz)(ft(i,n))}catch(e){console.warn("Failed to load project:",e)}}var Yc=n(3162);const Qc=Zr((e=>e.projectName)),es=Zr((e=>e.projectModified));function*ts(){yield(0,Tc.ib)(Vr,ns)}function*ns(){const e=yield(0,Tc.Ys)();try{window.showSaveFilePicker?yield(0,Tc.RE)(is,e):yield(0,Tc.RE)(rs,e),yield(0,Tc.gz)({type:$r})}catch(e){console.warn("Failed to save project",e)}}function*is(e){const t=yield(0,Tc.Ys)(Qc),n=yield(0,Tc.RE)(window.showSaveFilePicker,{suggestedName:t,types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!n)return;let i=n.name;i||(i=n.getFile().name),i&&(i=i.substr(0,i.lastIndexOf(".json")),yield(0,Tc.gz)((e=>({type:Kr,payload:{projectName:e}}))(i)));const r=Rr(e),o=yield(0,Tc.RE)(n.createWritable.bind(n));yield(0,Tc.RE)(o.write.bind(o),JSON.stringify(r,null,2)),yield(0,Tc.RE)(o.close.bind(o))}function*rs(e){const t=yield(0,Tc.Ys)(Qc),n=Rr(e),i=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});(0,Yc.saveAs)(i,t+".json")}function*os(){yield(0,Tc.rM)(Uc),yield(0,Tc.rM)(Hc),yield(0,Tc.rM)(_c),yield(0,Tc.rM)(ts)}function*cs(){yield(0,Tc.A7)([Ko,sc,$o],ss)}function*ss(){for(;yield(0,Tc.Ys)(uc);){try{yield(0,Tc.gz)(Qo(1))}catch(e){return console.error(e),void(yield(0,Tc.gz)(ac(!0)))}const e=yield(0,Tc.Ys)(pc),t=Math.max(Math.ceil(1e3/e),1);yield(0,Tc.gw)(t)}}function*as(){yield(0,Tc.rM)(cs)}const ls=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionSanitizer:function(e){return e},stateSanitizer:function(e){return e},actionsBlacklist:Lc})||xe.qC,us=(0,je.ZP)(),ds=[!1,us].filter(B),ps=(0,xe.MT)((function(e=Ne,t){return e=function(e=Ne,t){return function(e=Ne,t){if(!st(t))return e;const{undoStack:n,redoStack:i}=e.undo,r=kt()(n);if(!r)return e;const{serviceStates:o,viewCircuitId:c}=r;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...i,vt(e)]})}),c&&(e=Dc(e,Oc(c))),e}(e=function(e=Ne,t){if(!ut(t))return e;const{undoStack:n,redoStack:i}=e.undo,r=kt()(i);if(!r)return e;const{serviceStates:o,viewCircuitId:c}=r;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,vt(e)],redoStack:i.slice(0,i.length-1)})}),c&&(e=Dc(e,Oc(c))),e}(e=function(e=Ne,t){return!ht(t)||st(t)||ut(t)?e:j(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),vt(e)],redoStack:[]})))}(e,t),t),t)}(e,t),Dc(e,t)}),ls((0,xe.md)(...ds)));function ms(e){return(0,c.v9)(e)}us.run((function*(){yield(0,Tc.rM)(os),yield(0,Tc.rM)(as)})),ps.dispatch({type:Be});const ys=fc((e=>e.layout));fc(((e,t)=>{const n=N()(e.layout,t);return he(n)?n.windowProps.circuitId:null}));var fs=n(3274);const gs=e=>i.createElement("button",Object.assign({className:"button--Ui3Hp",type:"button"},e),e.children),hs=({circuitId:e,circuitNodeIdPath:t})=>{const n=(0,c.I0)(),r=q(),o=ms((e=>Bn(e,p))),s=ms((t=>Bn(t,e))),a=i.useCallback((e=>{e.preventDefault(),n(Oc(p,[],{tesselPath:r}))}),[n,r]);return i.createElement(gs,{onClick:a},0===t.length?s:o)},Is=({circuitNodeIdPath:e})=>{const t=(0,c.I0)(),n=q(),r=kt()(e),o=ms((e=>cn(e,r))),s=ms((e=>an(e,r))),a=o?xn(o):null,l=ms((e=>a?Bn(e,a):null)),u=i.useCallback((i=>{i.preventDefault(),a&&t(Oc(a,e,{tesselPath:n}))}),[a,e,t,n]);return i.createElement(gs,{onClick:u},s," [",l,"]")},bs=({circuitId:e,circuitNodeIdPath:t})=>{const n=t.map(((e,n)=>{const r=t.slice(0,n+1);return i.createElement(i.Fragment,{key:e},i.createElement("span",null,">"),i.createElement(Is,{circuitNodeIdPath:r}))}));return i.createElement("div",{className:x("circuit-node-breadcrumb","circuit-node-breadcrumb--3Rx3N")},i.createElement(hs,{circuitId:e,circuitNodeIdPath:t}),n)},vs=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),Es=(0,Ht.P1)(uo,zr,((e,t)=>[...zi()(e),...zi()(t).map((e=>({p1:e,p2:e})))].reduce(f.G0,vs))),ks=i.createContext((function(){}));function Os(){return i.useContext(ks)}const Cs=ks.Provider;var Ns=n(1935);function xs(){}const js={registerPopoverChild:xs,unregisterPopoverChild:xs},ws=i.createContext(null),Ps=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const r=i.useContext(ws),o=null==r?void 0:r.registerPopoverChild,c=null==r?void 0:r.unregisterPopoverChild,s=i.useCallback((t=>{o&&o(t),e(t)}),[e,o]),a=i.useCallback((e=>{t(e)}),[t,c]),l=i.useMemo((()=>({registerPopoverChild:s,unregisterPopoverChild:a})),[s,a]);return i.createElement(ws.Provider,{value:l},n)},Bs=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:o,children:c})=>{const[s,a]=i.useState(null),{attributes:l,styles:u}=(0,Ns.D)(e?t:null,s,{placement:n});!function(e){var t;const n=null!==(t=i.useContext(ws))&&void 0!==t?t:js,r=i.useRef(n);i.useEffect((()=>{r.current=n})),i.useEffect((()=>{if(e)return r.current.registerPopoverChild(e),()=>r.current.unregisterPopoverChild(e)}),[e])}(s);const[d,p,m]=function(e=[]){const[t,n]=i.useState(e),r=i.useCallback((e=>{n([...t,e])}),[t]),o=i.useCallback((e=>{n(zt()(t,[e]))}),[t]);return[t,r,o,n]}();return function(e,t,n=!0){const r=i.useCallback((n=>{const i=ie(e).filter(B);i.length&&i.every((e=>!e.contains(n.target)))&&t()}),[e,t]);i.useEffect((()=>{if(n)return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[r,n])}(i.useMemo((()=>[s,...d]),[d,s]),o),e?(0,r.createPortal)(i.createElement(Ps,{registerPopoverChild:p,unregisterPopoverChild:m},i.createElement("div",Object.assign({ref:a,style:u.popper},l.popper),c)),document.body):null},Ms=({x:e,y:t,open:n,onRequestClose:r,children:o})=>{const c=i.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return i.createElement(Cs,{value:r},i.createElement(Bs,{isOpen:n,onRequestClose:r,anchorEl:c,placement:"bottom-start"},o))};function Ss(){const[e,t]=i.useState(null),n=i.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),r=i.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:i.useCallback((t=>e?i.createElement(Ms,{open:!0,onRequestClose:r,x:e.x,y:e.y},t):null),[e,r])}}const Ds="menu-item--2dcyN",Ls="menu-item--disabled--RJJTK",Ts="menu-item-content--3s1DG",zs="menu-item-text--1F41V",Js="menu-item-secondary--2PJLF",Rs=({children:e})=>i.createElement("ul",{className:"menu--3E86w"},e),Ws=({disabled:e,onClick:t,secondary:n,children:r})=>{const o=Os(),c=i.useCallback((e=>{t&&t(e),o()}),[o,t]);return i.createElement("li",{className:x(Ds,e&&Ls)},i.createElement("a",{className:Ts,onClick:c},i.createElement("span",{className:zs},r),n&&i.createElement("span",{className:Js},n)))},As=()=>i.createElement("div",{className:"menu-divider--1QPGp"}),Us=()=>{const e=(0,c.I0)(),t=i.useCallback((()=>{e({type:Fe})}),[e]),n=i.useCallback((()=>{e(Ke())}),[e]);return i.createElement(i.Fragment,null,i.createElement(Ws,{onClick:t},"Align Selection To Grid"),i.createElement(As,null),i.createElement(Ws,{onClick:n},"Delete Selected"))},Zs=()=>i.createElement(Rs,null,i.createElement(Us,null)),Fs="@node/new",Hs=e=>({type:Fs,payload:{nodeType:e}});function Ks(e){return e.type===Fs}const Gs={current:null},Vs=i.createContext({svgRef:Gs,scalerRef:Gs}),qs=Vs.Provider,$s=({svgRef:e,scalerRef:t,children:n})=>{const r=i.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return i.createElement(qs,{value:r},n)},_s=i.createContext({circuitId:p,circuitNodePath:[]});function Xs(){return i.useContext(_s)}const Ys=({circuitId:e,circuitNodePath:t,children:n})=>{const r=i.useMemo((()=>({circuitId:e,circuitNodePath:t})),[e,t]);return i.createElement(_s.Provider,{value:r},n)};function Qs(e,t,n){const i=t.getScreenCTM();if(!i)return n;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const o=r.matrixTransform(i.inverse());return{x:o.x,y:o.y}}function ea(){const{svgRef:e,scalerRef:t}=i.useContext(Vs);return i.useCallback((n=>{if(!e.current||!t.current)return f.Ds;const i={x:n.pageX,y:n.pageY};return Qs(e.current,t.current,i)}),[e,t])}const ta="text-unselectable--2tvXe",na=(e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=Bo(e),i=e.services.simulator.nodeOutputValuesByNodeId,r=Oo(n,t);if(r)return i[r]},ia="node-interaction-toggle--1eXWD",ra={"integrated-circuit":({circuitNodeId:e,circuitNodePath:t,circuitId:n,inputPinIds:r,outputPinIds:o})=>{const s=(0,c.I0)(),a=ms((e=>Bn(e,n))),l=ms(sn),u=jn(r.length,o.length),d=i.useCallback((i=>{e&&(i.defaultPrevented||(i.preventDefault(),s(Oc(n,[...t||[],e]))))}),[e,s,n,t]),p=r.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:4,y1:n,x2:10,y2:n}),i.createElement("text",{className:ta,x:15,y:n,alignmentBaseline:"middle",fontSize:".7em"},l[e]))})),m=o.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{key:t,className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:n,x2:100,y2:n}),i.createElement("text",{className:ta,x:85,y:n,textAnchor:"end",alignmentBaseline:"middle",fontSize:".7em"},l[e]))}));return i.createElement("g",null,i.createElement("text",{className:x(ta,"node-select-highlight--fill"),textAnchor:"middle",x:50,y:0},a),i.createElement("path",{className:"node-select-highlight--stroke node-select-highlight--fill",stroke:"black",fill:"transparent",d:u,onDoubleClick:d}),p,m)},"interaction-momentary":({circuitNodeId:e,circuitNodePath:t})=>{const n=(0,c.I0)(),r=ms(lc),o=i.useMemo((()=>[...t||[],null!=e?e:"~~none"]),[t,e]),s=ms((e=>na(e,o))),a=i.useCallback((e=>{r&&(e.defaultPrevented||(e.preventDefault(),n((0,ko.zN)(o,!0))))}),[o,n,r]),l=i.useCallback((()=>{r&&n((0,ko.zN)(o,!1))}),[o,n,r]);let u="darkgreen",d="lightgrey";return s&&s.OUT&&(u="lightgreen",d="black"),i.createElement("g",{onMouseDown:a,onMouseUp:l,onMouseLeave:l,className:ia},i.createElement("rect",{className:"node-select-highlight--stroke node-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),i.createElement("circle",{cx:25,cy:25,r:17,fill:u}),i.createElement("text",{className:ta,x:25,y:25,fontSize:".8em",fill:d,textAnchor:"middle",alignmentBaseline:"middle"},"Push"))},"interaction-toggle":({circuitNodeId:e,circuitNodePath:t,elementState:n})=>{const r=(0,c.I0)(),o=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),r((0,ko.zN)([...t||[],e]))))}),[e,r,t]);let s="darkgreen",a="lightgrey",l="darkred";if(n){const{toggleState:e}=n;e?(s="lightgreen",a="black"):l="red"}return i.createElement("g",{onClick:o,className:ia},i.createElement("rect",{className:"node-select-highlight--stroke node-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),i.createElement("rect",{x:10,y:10,width:30,height:15,strokeWidth:0,fill:s}),i.createElement("text",{className:ta,x:25,y:19,fontSize:".8em",fill:a,textAnchor:"middle",alignmentBaseline:"middle"},"On"),i.createElement("rect",{x:10,y:25,width:30,height:15,strokeWidth:0,fill:l}),i.createElement("text",{className:ta,x:25,y:34,fontSize:".8em",fill:"lightgrey",textAnchor:"middle",alignmentBaseline:"middle"},"Off"))}},oa=({componentName:e})=>i.createElement("g",null,i.createElement("rect",{width:50,height:50,fill:"red"}),i.createElement("text",{x:25,y:25,alignmentBaseline:"middle"},e));function ca(e,t,n,r){const{component:o,componentProps:c}=r,s=Object.assign({circuitNodeId:e,circuitNodePath:t,elementState:n},c);let a;return"string"==typeof o?(a=ra[o],a||(a=()=>i.createElement(oa,{componentName:o}))):a=o,i.createElement(a,Object.assign({},s))}const sa=Object.freeze({}),aa=i.memo((function({className:e,circuitNodeId:t,x:n=0,y:r=0,nodeType:o}){const c=ms((e=>Rn(e,o)));let s;s=c?ca(t,[],sa,c.visual):i.createElement("rect",{x:n,y:r,width:50,height:50,fill:"red"});const a=0!=n||0!=r?`translate(${n}, ${r})`:void 0;return i.createElement("g",{className:x(e,"node-visual"),transform:a},s)})),la=i.memo((function(){const e=(0,c.I0)(),{circuitId:t}=Xs(),n=ms(At),r=function(){const{svgRef:e,scalerRef:t}=i.useContext(Vs);return i.useCallback((n=>e.current&&t.current?Qs(e.current,t.current,n):n),[e,t])}(),[o,s]=i.useState(null),[a,l]=i.useState(null),u=ms((e=>Sn(e,xn(o),t))),[,d]=(0,se.L)({accept:Fs,collect:e=>{e.isOver()||(l(null),s(null))},hover:(e,t)=>{if(!Ks(e))return l(null),void s(null);const n=t.getClientOffset();if(!n)return;const i=r({x:n.x,y:n.y});s(e.payload.nodeType),l(i)},drop:(i,o)=>{if(!Ks(i))return;if(u)return;const c=o.getClientOffset();if(!c)return;const s=r({x:c.x,y:c.y});e(Re(i.payload.nodeType,t,(0,f.R9)(s,n)))}},[t,r,n,u]),p=a&&(0,f.R9)(a,n);return i.createElement("g",{id:"drag-new-node-layer"},!u&&p&&o&&i.createElement("g",{opacity:.5},i.createElement(aa,{x:p.x,y:p.y,nodeType:o})),u&&i.createElement("g",null,i.createElement("rect",{width:"100%",height:"100%",opacity:.7,fill:"black"}),i.createElement("text",{x:"100",y:"25%",fill:"white"},"The current circuit is already inside the dragged IC.")),i.createElement("rect",{ref:d,width:"100%",height:"100%",fill:"transparent"}))})),ua=(0,Ht.P1)(Zn,On,((e,t)=>bt()(t,e))),da=(0,Ht.P1)(Zn,nn,((e,t)=>bt()(t,e))),pa=i.memo((function(){const{circuitId:e}=Xs(),t=ms((t=>Vn(t,e))),n=ms(ua),r=ms(da),o=ms(ti);if(!t||!o)return null;let c=null;return o&&(c=zi()(Xt()(n,((e,t)=>i.createElement(aa,{key:t,nodeType:r[t],x:e.x+o.x,y:e.y+o.y}))))),i.createElement("g",{id:"drag-node-preview-layer",opacity:.3},c)}));const ma=e=>{var{x:t,y:n,interactable:r=!0,selected:o=!1}=e,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["x","y","interactable","selected"]);const[s,a]=i.useState(!1),l=i.useCallback((()=>{r&&a(!0)}),[r]),u=i.useCallback((()=>{a(!1)}),[]);return i.createElement("circle",Object.assign({className:x("wire-joint--16G5Q",o&&"selected--1wUHn"),cx:t,cy:n,r:r&&s||o?4:2,onMouseOver:l,onMouseOut:u},c))},ya=(0,Ht.P1)(Kn,zr,((e,t)=>bt()(t,e))),fa=i.memo((function(){const{circuitId:e}=Xs(),t=ms((t=>Vn(t,e))),n=ms(ti),r=ms(ya),o=ms(ni);if(!t||!n&&!o)return null;let c=null;n&&(c=zi()(r).map(((e,t)=>i.createElement(ma,{key:t,interactable:!1,x:e.x+n.x,y:e.y+n.y,opacity:.5}))));let s=null;return o&&(s=i.createElement(ma,{interactable:!1,x:o.x,y:o.y,opacity:.5})),i.createElement("g",{id:"drag-joint-preview-layer",opacity:.3},c,s)}));function ga(e){const{dragThreshold:t=5,onClick:n,onDragStart:r,onDragMove:o,onDragEnd:c}=e,[s,a]=i.useState(!1),l=i.useRef(!1),u=i.useRef(!1),d=i.useRef(f.Ds),p=i.useCallback((e=>{l.current||(l.current=!0,a(!0),d.current={x:e.pageX,y:e.pageY})}),[]),m=i.useCallback((()=>{l.current=!1,a(!1),u.current=!1,d.current=f.Ds}),[]),y=i.useCallback((e=>{if(l.current)if(u.current){if(o){const t=(0,f.sj)({x:e.pageX,y:e.pageY},d.current);o(t,e)}}else{const n=d.current;(Math.abs(n.x-e.pageX)>=t||Math.abs(n.y-e.pageY)>=t)&&(u.current=!0,r&&r(e))}}),[t,o,r]),g=i.useCallback((e=>{if(l.current){if(u.current){if(c){const t=(0,f.sj)({x:e.pageX,y:e.pageY},d.current);c(t,e)}}else n&&n(e);m()}}),[m,n,c]);return i.useEffect((()=>{if(s)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",g)}}),[s,y,g]),{startTracking:p,cancelTracking:m}}const ha=i.createContext({zoomFactor:1,zoom:()=>{}});function Ia(){return i.useContext(ha)}const ba=({children:e})=>{const[t,n]=i.useState(1),r=i.useCallback((e=>{n((t=>e>0?t*e*1.03:t/(1.03*-e)))}),[]),o=i.useMemo((()=>({zoomFactor:t,zoom:r})),[r,t]);return i.createElement(ha.Provider,{value:o},e)},va=i.memo((function(){const e=(0,c.I0)(),{circuitId:t}=Xs(),{zoomFactor:n}=Ia(),r=ms((e=>Vn(e,t))),o=ms(ei);function s(e){return e*(1/n)}const a=ea(),l=i.useCallback((t=>{if(0!==t.button)return;const n=$t(t);n.ctrlMetaKey||n.shiftKey||e({type:ro})}),[e]),u=i.useCallback((n=>{const i=a(n);e(((e,t)=>({type:gi,payload:Object.assign(Object.assign({},e),{circuitId:t})}))(i,t))}),[t,e,a]),d=i.useCallback(((t,n)=>{const i=a(n),r=$t(n);e(jt(i,r))}),[e,a]),p=i.useCallback(((t,n)=>{const i=a(n),r=$t(n);e(rt(i,r))}),[e,a]),{startTracking:m}=ga({onClick:l,onDragStart:u,onDragMove:d,onDragEnd:p}),y=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),m(e))}),[m]);return i.createElement("g",{id:"drag-select-layer"},i.createElement("rect",{width:100*s(1)+"%",height:100*s(1)+"%",fill:"transparent",onMouseDown:y}),r&&o&&i.createElement("g",{transform:`translate(${o.p1.x}, ${o.p1.y})`},i.createElement("rect",{width:o.p2.x-o.p1.x,height:o.p2.y-o.p1.y,strokeWidth:s(2),strokeDasharray:`${s(5)} ${s(3)}`,stroke:"skyblue",fill:"transparent"})))})),Ea=i.memo((function(){const[e]=i.useState("grid-"+(0,Me.Z)()),{zoomFactor:t}=Ia(),n=50*t;return i.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null,i.createElement("pattern",{id:e,width:n,height:n,patternUnits:"userSpaceOnUse"},i.createElement("path",{d:`M ${n} 0 L 0 0 0 ${n}`,fill:"none",stroke:"gray",strokeWidth:.5}))),i.createElement("rect",{width:"100%",height:"100%",fill:`url(#${e})`}))})),ka=Mc((e=>e.nodeNameMode)),Oa=i.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:r,onChange:o,onBeginEdit:c,onCommit:s,onCancel:a,onBlur:l,onKeyUp:u},d)=>{const[p,m]=i.useState(null),y=i.useCallback((e=>{null==p&&c&&c(),m(e.target.value),o&&o(e)}),[p,c,o]),f=i.useCallback((e=>{u&&u(e),e.defaultPrevented||null!=p&&("Escape"===e.key?(e.preventDefault(),a&&a()):"Enter"===e.key&&(e.preventDefault(),s&&s(p)))}),[u,p,a,s]),g=i.useCallback((e=>{l&&l(e),null!=p&&s&&s(p)}),[l,p,s]);return i.createElement("input",{ref:d,className:e,autoFocus:t,defaultValue:n,value:r,type:"text",onChange:y,onKeyUp:f,onBlur:g})})),Ca=({className:e,textClassname:t,inputClassname:n,label:r,defaultValue:o,isEditing:c,onRequestEdit:s,onCommit:a,onCancel:l})=>{const u=i.useRef(null),d=i.useCallback((e=>{s&&(e.defaultPrevented||(e.preventDefault(),s()))}),[s]),p=i.useCallback((e=>{"Escape"===e.key&&c&&l()}),[c,l]),m=i.useCallback((()=>{c&&l()}),[c,l]);return i.useEffect((()=>{c&&u.current&&u.current.select()}),[c]),c?i.createElement(Oa,{ref:u,className:x(e,n),autoFocus:!0,defaultValue:o,onBlur:m,onKeyUp:p,onCommit:a,onCancel:l}):i.createElement("span",{className:x(e,t),onDoubleClick:d},null!=r?r:o)},Na=e=>{const{onRequestEdit:t,onCommit:n}=e,r=Os(),o=i.useCallback((()=>{t&&t()}),[t]),c=i.useCallback((e=>{n(e),r()}),[n,r]);return i.createElement("li",{className:Ds,onClick:o},i.createElement(Ca,Object.assign({},e,{onCommit:c})))},xa=({nodeId:e})=>{const t=(0,c.I0)(),{circuitNodePath:n}=Xs(),r=ms((t=>an(t,e))),o=ms((t=>cn(t,e))),s=o?xn(o):null,[a,l]=i.useState(!1),u=i.useCallback((()=>{l(!0)}),[]),d=i.useCallback((()=>{l(!1)}),[]),p=i.useCallback((n=>{l(!1),t(((e,t)=>({type:Ze,payload:{nodeId:e,nodeName:t}}))(e,n))}),[t,e]),m=i.useCallback((()=>{s&&t(Oc(s,[...n,e],{newWindow:!0}))}),[n,t,s,e]);return i.createElement(Rs,null,i.createElement(Na,{defaultValue:null!=r?r:"<unknown>",label:i.createElement("span",{style:{fontWeight:"bold"}},r),isEditing:a,onRequestEdit:u,onCommit:p,onCancel:d}),i.createElement(As,null),s&&i.createElement(i.Fragment,null,i.createElement(Ws,{onClick:m},"Open in New Window"),i.createElement(As,null)),i.createElement(Us,null))},ja=i.memo((function({nodeId:e}){const t=(0,c.I0)(),{circuitNodePath:n}=Xs(),r=ms(lc),{openContextMenu:o,renderContextMenu:s}=Ss(),a=ms((t=>_i(t,e))),{x:l,y:u}=ms((t=>Cn(t,e))),d=ms((t=>((e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=Bo(e),i=e.services.simulator.nodeStatesByNodeId,r=Oo(n,t);if(r)return i[r]})(t,[...n,e]))),p=ms((t=>Fn(t,e))),m=ea(),y=i.useCallback((n=>{if(r)return;if(n.defaultPrevented)return;if(0!==n.button)return;n.preventDefault();const i=Jt($t(n));t(fi(e,i))}),[t,r,e]),g=i.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const i=Jt($t(n),"set-if-unselected");t(fi(e,i)),o(n)}),[t,e,o]),h=i.useCallback((n=>{const i=m(n),r=$t(n);t(((e,t,n)=>({type:mi,payload:Object.assign(Object.assign({},t),{nodeId:e,modifierKeys:n})}))(e,i,r))}),[m,t,e]),I=i.useCallback(((e,n)=>{const i=m(n),r=$t(n);t(jt(i,r))}),[t,m]),b=i.useCallback(((e,n)=>{const i=m(n),r=$t(n);t(rt(i,r))}),[t,m]),{startTracking:v}=ga({onClick:y,onDragStart:h,onDragMove:I,onDragEnd:b}),E=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),r||0===e.button&&v(e))}),[r,v]);if(!a)return null;let k,O;if(a){const{hitRect:t}=a.visual;k=ca(e,n,d,a.visual),O=t}else k=i.createElement("rect",{x:l,y:u,width:50,height:50,fill:p?"goldenrod":"red"}),O={p1:f.Ds,p2:{x:50,y:50}};const C=0!=l||0!=u?`translate(${l}, ${u})`:void 0;return i.createElement("g",{transform:C},i.createElement("g",{className:x("circuit-field-node",p&&"node-selected"),onMouseDown:E,onContextMenu:g},k),i.createElement(wa,{nodeId:e,hitRect:O}),s(i.createElement(xa,{nodeId:e})))})),wa=i.memo((function({nodeId:e,hitRect:t}){const{zoomFactor:n}=Ia(),r=ms((t=>((e,t)=>{switch(e.services.uiSettings.nodeNameMode){case"all":default:return an(e,t);case"named-only":return ln(e,t);case"none":return null}})(t,e))),o=Math.max(.7,n);let c=15;return o>1?c-=2*o:c+=1/o*7,r?i.createElement("text",{fontSize:1.2/o+"em",className:ta,textAnchor:"middle",x:t.p1.x+(t.p2.x-t.p1.x)/2,y:t.p2.y+c},r):null})),Pa=ja,Ba=i.memo((function(){const{circuitId:e}=Xs(),t=ms((t=>bn(t,e))).map((e=>i.createElement(Pa,{key:e,nodeId:e})));return i.createElement("g",{id:"nodes-layer"},t)})),Ma=(e,t,n)=>{const i=Hi(e,n);if(!i)return!1;const{outputPin:{nodeId:r,pinId:o}}=i,c=cn(e,r);if("pin-input"===c){const n=t.slice(0,t.length-1),i={nodeId:t[t.length-1],pinId:r},o=Gi(e,i);return!!o&&Ma(e,n,o)}if(null==c?void 0:c.startsWith("ic-")){const n=[...t,r],i=Gi(e,{nodeId:o,pinId:"IN"});return!!i&&Ma(e,n,i)}{const n=na(e,[...t,r]);return n&&n[o]||!1}},Sa=i.memo((function({connectionId:e,startJointId:t,endJointId:n}){const r=(0,c.I0)(),o=ea(),s=ms(lc),a=ms($n),l=ms((n=>null==t?((e,t)=>{const{outputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],r=_i(e,n);if(!r)return f.Ds;const o=Cn(e,n),c=Mr[t];if(c&&c.inputNodeDef===r&&c.inputNodePosition.x===o.x&&c.inputNodePosition.y===o.y)return c.outputPosition;let s=f.Ds;r&&r.pins[i]&&(s=r.pins[i]);const a=(0,f.ZO)(o,s);return Mr[t]={inputNodeDef:r,inputNodePosition:o,outputPosition:a},a})(n,e):Tr(n,t))),u=ms((t=>null==n?((e,t)=>{const{inputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],r=_i(e,n);if(!r)return f.Ds;const o=Cn(e,n),c=Sr[t];if(c&&c.inputNodeDef===r&&c.inputNodePosition.x===o.x&&c.inputNodePosition.y===o.y)return c.outputPosition;let s=f.Ds;r&&r.pins[i]&&(s=r.pins[i]);const a=(0,f.ZO)(o,s);return Sr[t]={inputNodeDef:r,inputNodePosition:o,outputPosition:a},a})(t,e):Tr(t,n))),[d,p]=i.useState(null),m=i.useCallback((e=>{const t=o(e);p(t)}),[o]),y=i.useCallback((()=>{p(null)}),[]),g=i.useCallback((n=>{const i=o(n),c=$t(n);r(((e,t,n,i)=>({type:di,payload:Object.assign(Object.assign({},n),{connectionId:e,addAfterJointId:t,modifierKeys:i})}))(e,t,i,c))}),[o,r,e,t]),h=i.useCallback(((e,t)=>{const n=o(t),i=$t(t);r(jt(n,i))}),[r,o]),I=i.useCallback(((e,t)=>{const n=o(t),i=$t(t);r(rt(n,i))}),[r,o]),b=i.useCallback((t=>{const n=Jt($t(t));r(((e,t="set")=>({type:mo,payload:{connectionIds:Array.isArray(e)?e:[e],mode:t}}))(e,n))}),[e,r]),{startTracking:v}=ga({onClick:b,onDragStart:g,onDragMove:h,onDragEnd:I}),E=i.useCallback((e=>{e.preventDefault(),s||v(e)}),[s,v]);let k;if(!a&&!s&&d){const e=(0,f.Fv)((0,f.sj)(u,l)),t=(0,f.sj)(d,l),n=(0,f.Ih)(t,e);k=(0,f.ZO)(l,(0,f.bA)(e,n))}return i.createElement("g",{onMouseMove:m,onMouseLeave:y},i.createElement("line",{x1:l.x,y1:l.y,x2:u.x,y2:u.y,strokeWidth:2}),null==n&&i.createElement("circle",{cx:u.x,cy:u.y,r:1.5}),k&&i.createElement("circle",{cx:k.x,cy:k.y,r:3,stroke:"none",fill:"red",onMouseDown:E}))})),Da=i.memo((function({jointId:e}){const t=ea(),n=(0,c.I0)(),r=ms(lc),o=ms((t=>Gn(t,e))),s=ms((t=>Tr(t,e))),a=i.useCallback((i=>{const r=t(i),o=$t(i);n(((e,t,n)=>({type:ri,payload:Object.assign(Object.assign({},t),{jointId:e,modifierKeys:n})}))(e,r,o))}),[n,t,e]),l=i.useCallback(((e,i)=>{const r=t(i),o=$t(i);n(jt(r,o))}),[n,t]),u=i.useCallback(((e,i)=>{const r=t(i),o=$t(i);n(rt(r,o))}),[n,t]),d=i.useCallback((t=>{const i=Jt($t(t));n(ci(e,i))}),[n,e]),{startTracking:p}=ga({onClick:d,onDragStart:a,onDragMove:l,onDragEnd:u}),m=i.useCallback((e=>{r||e.defaultPrevented||(e.preventDefault(),p(e))}),[r,p]);return i.createElement(ma,{interactable:!r,selected:o,x:s.x,y:s.y,onMouseDown:m})})),La=i.memo((function({connectionId:e}){const{circuitNodePath:t}=Xs(),n=ms((t=>Lr(t,e))),r=ms((n=>Ma(n,t,e))),o=ms((t=>Hn(t,e))),c=[...n,null].map(((t,r)=>{const o=r>0?n[r-1]:null;return i.createElement(Sa,{key:r,connectionId:e,startJointId:o,endJointId:t})})),s=n.map((e=>i.createElement(Da,{key:e,jointId:e})));return i.createElement("g",{className:x("wire--2ESXn",r&&"powered--317-6",o&&"selected--2WM72")},c,s)})),Ta=i.memo((function(){const{circuitId:e}=Xs(),t=ms((t=>ai(t,e))).map((e=>i.createElement(La,{key:e,connectionId:e})));return i.createElement("g",{id:"wires-layer"},t)}));var za=n(784);const Ja="highlight--1PHIy",Ra="is-drag-target--2mBxU",Wa=i.memo((function({nodeId:e,pinId:t}){const n=ea(),[r,o]=i.useState(!1),s=(0,c.I0)(),a=ms((n=>((e,t,n)=>{var i;const r=Wn(e)[t];return r&&null!==(i=r[n])&&void 0!==i?i:f.Ds})(n,e,t))),l=ms((n=>((e,t,n)=>{const i=_i(e,t);if(!i)return null;const r=i.pins[n];return r?r.direction:null})(n,e,t))),u=ms(ii),d=i.useCallback((i=>{const r=n(i);s({type:Ii,payload:{dragStart:r,pin:{nodeId:e,pinId:t}}})}),[s,n,e,t]),p=i.useCallback(((e,t)=>{const i=n(t),r=$t(t);s(jt(i,r))}),[s,n]),m=i.useCallback(((e,t)=>{const i=n(t),r=$t(t);s(rt(i,r))}),[s,n]),{startTracking:y}=ga({onDragStart:d,onDragMove:p,onDragEnd:m}),g=i.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),y(e)))}),[y]),h=i.useCallback((()=>{o(!0)}),[]),I=i.useCallback((()=>{o(!1)}),[]);if(!a)return null;const b=null!=u&&u.nodeId===e&&u.pinId===t,{x:v,y:E}=a;let k;return k="input"===l?i.createElement("path",{d:(0,za.x)(v,E,4,-45,225),strokeWidth:2,className:x("node-pin-input--2AbG5",b&&Ra,r&&Ja)}):i.createElement("circle",{className:x("node-pin-output--2MDEG",b&&Ra,r&&Ja),cx:v,cy:E,r:3}),i.createElement("g",{onMouseEnter:h,onMouseLeave:I},k,i.createElement("circle",{stroke:"none",fill:"transparent",cx:v,cy:E,r:5,onMouseDown:g}))})),Aa=i.memo((function({nodeId:e}){var t;const n=ms((t=>_i(t,e))),r=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},o=Object.keys(r).map((t=>i.createElement(Wa,{key:t,nodeId:e,pinId:t})));return i.createElement(i.Fragment,null,o)})),Ua=i.memo((function(){const{circuitId:e}=Xs(),t=ms((t=>bn(t,e))).map((e=>i.createElement(Aa,{key:e,nodeId:e})));return i.createElement("g",{id:"node-pins-layer"},t)})),Za=i.memo((function(){const{circuitId:e}=Xs(),t=ms((t=>Vn(t,e))),n=ms(qn),r=ms(Xn),o=ms(Yn);return t&&"wire"==n&&r&&o?i.createElement("line",{x1:r.x,y1:r.y,x2:o.x,y2:o.y,stroke:"black",strokeWidth:1}):null})),Fa=({width:e,height:t,onContextMenu:n})=>{const r=(0,c.I0)(),{zoomFactor:o}=Ia(),s=i.useRef(null),a=i.useRef(null),l=i.useCallback((()=>{var e;null===(e=s.current)||void 0===e||e.focus()}),[]),u=i.useCallback((()=>{r({type:vi})}),[r]),d=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),n(e))}),[n]),[{isDragging:p},m]=(0,se.L)({accept:Fs,collect:e=>({isDragging:e.isOver()})});return i.createElement("svg",{tabIndex:-1,ref:e=>{s.current=e,m(e)},width:e,height:t,onMouseDown:l,onMouseLeave:u,onContextMenu:d,className:"circuit-field-svg--1lQh_"},i.createElement(Ea,null),i.createElement("g",{ref:a,"transform-origin":"0 0",transform:`scale(${o})`},i.createElement($s,{svgRef:s,scalerRef:a},i.createElement(va,null),i.createElement(Ba,null),i.createElement(Ta,null),i.createElement(Ua,null),i.createElement(Za,null),i.createElement(pa,null),i.createElement(fa,null),p&&i.createElement(la,null))))},Ha=({onContextMenu:e})=>{const t=i.useRef(null),{width:n,height:r}=ce(t),{zoomFactor:o,zoom:c}=Ia(),s=ms(Es),{width:a,height:l}=(0,f.nF)(s),u=Math.max(n,a*o),d=Math.max(r,l*o),p=i.useCallback((e=>{e.defaultPrevented||e.ctrlKey&&(c(e.deltaY>0?-1:1),e.preventDefault(),e.stopPropagation())}),[c]);var m,y,g,h;return m=t,y="wheel",g=p,h={passive:!1},i.useEffect((()=>{if(!m.current)return;const e=m.current;return e.addEventListener(y,g,h),()=>{e.removeEventListener(y,g,h)}}),[y,g,m,h]),i.createElement("div",{ref:t,style:{width:"100%",height:"100%"}},i.createElement(Fa,{width:u,height:d,onContextMenu:e}))},Ka=({className:e,circuitId:t,circuitNodePath:n})=>{const r=ms(lc),{openContextMenu:o,renderContextMenu:c}=Ss();return i.createElement(Ys,{circuitId:t,circuitNodePath:n},i.createElement("div",{className:x("circuit-field","circuit-field--3PQBN",r&&"simulator-active",e)},i.createElement("div",{className:"circuit-field-scrollarea--vyu82"},i.createElement(ba,null,i.createElement(Ha,{onContextMenu:o}))),c(i.createElement(Zs,null))))};var Ga=n(1474);const Va="icon--3Vly6",qa=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:x(Va,e.className)}),i.createElement("path",{d:"M4,4 L12,12 M4,12 L12,4"})),$a=({title:e,className:t,children:n})=>{const r=q(),{closeWindow:o}=Y(),c=i.useCallback((()=>{o(r)}),[o,r]),[,s]=(0,Ga.c)({item:le(r)});return i.createElement(de,{className:H["tessel-window"]},i.createElement("div",{ref:s,className:H["tessel-window-titlebar"]},i.createElement("div",{className:H["tessel-window-title"]},e),i.createElement("div",{className:H["tessel-window-controls"]},i.createElement(qa,{className:H["tessel-window-controls-close"],onClick:c}))),i.createElement("div",{className:x(H["tessel-window-content"],t)},n))},_a="keymap:CircuitEditor/SimStep",Xa="keymap:CircuitEditor/SimFastForward",Ya="keymap:CircuitEditor/SelectAll",Qa="keymap:CircuitEditor/Copy",el="keymap:CircuitEditor/Paste",tl="keymap:CircuitEditor/Delete",nl="keymap:CircuitEditor/Undo",il="keymap:CircuitEditor/Redo",rl={[_a]:"space",[Xa]:"shift+space",[Ya]:Vt+"+a",[Qa]:Vt+"+c",[el]:Vt+"+v",[tl]:["backspace","del"],[nl]:Vt+"+z",[il]:[Vt+"+y",Vt+"+shift+z"]};const ol=e=>{var{children:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["children"]);return i.createElement("div",Object.assign({},n,{className:M}),t)},cl=({value:e,label:t,isSelected:n,onItemSelected:r})=>{const o=i.useCallback((t=>{t.defaultPrevented||(t.preventDefault(),r(e))}),[r,e]);return i.createElement("li",{className:x("selection-list-item","selection-list-item--errDr",n&&"selection-list-item--selected--3MkqB"),onClick:o},i.createElement("div",{className:x("selection-list-item-content--321YU",ta)},t))},sl=({className:e,items:t,onItemSelected:n})=>i.createElement("ul",{className:x("selection-list","selection-list--3yujH",e)},t.map((e=>i.createElement(cl,Object.assign({key:e.value},e,{onItemSelected:n}))))),al=({circuitId:e})=>{const t=(0,c.I0)(),n=ms((t=>Bn(t,e))),[r,o]=i.useState(!1),{openContextMenu:s,renderContextMenu:a}=Ss(),l=i.useCallback((()=>{e!==p&&o(!0)}),[e]),u=i.useCallback((()=>{o(!1)}),[]),d=i.useCallback((n=>{t(((e,t)=>({type:ze,payload:{circuitId:e,circuitName:t}}))(e,n)),o(!1)}),[e,t]),m=i.useCallback((n=>{n.preventDefault(),t(Oc(e,null,{newWindow:!0}))}),[e,t]),y=i.useCallback((n=>{n.preventDefault(),t((e=>({type:Le,payload:{circuitId:e}}))(e))}),[t,e]),f=i.useCallback((e=>{e.preventDefault(),e.stopPropagation(),s(e)}),[s]);return i.createElement("div",{style:{width:"100%"},onContextMenu:f,onDoubleClick:l},i.createElement(Ca,{defaultValue:n,isEditing:r,onRequestEdit:l,onCommit:d,onCancel:u}),a(i.createElement(Rs,null,e!==p&&i.createElement(i.Fragment,null,i.createElement(Ws,{onClick:l},"Rename Circuit"),i.createElement(As,null)),i.createElement(Ws,{onClick:m},"Open in New Window"),e!==p&&i.createElement(i.Fragment,null,i.createElement(As,null),i.createElement(Ws,{onClick:y},"Delete Circuit")))))},ll=()=>{const e=(0,c.I0)(),t=i.useCallback((()=>{e(De())}),[e]);return i.createElement(Rs,null,i.createElement(Ws,{onClick:t},"New Circuit"))},ul=({isOpen:e,anchorEl:t,placement:n="auto",children:o})=>{const[c,s]=i.useState(null),[a,l]=i.useState(null),{attributes:u,styles:d}=(0,Ns.D)(e?t:null,c,{placement:n,modifiers:[{name:"arrow",options:{element:a}},{name:"offset",options:{offset:[0,8]}}]});return e?(0,r.createPortal)(i.createElement("div",Object.assign({ref:s,className:"tooltip--2yxRI",style:d.popper,role:"tooltip"},u.popper),o,i.createElement("div",Object.assign({ref:l,"data-popper-arrow":!0,className:"tooltip-arrow--2mJMo",style:d.arrow},u.arrow))),document.body):null},dl={"input-output":"I/O","integrated-circuit":"Integrated Circuits",logic:"Logic"},pl=({category:e})=>{const t=ms(zn).filter((t=>t.category===e)).filter((t=>t.category===e)).map((e=>i.createElement(ml,{key:e.type,nodeType:e.type})));return i.createElement(i.Fragment,null,i.createElement("li",{className:"node-tray-category---Phmh"},dl[e]),t)},ml=({nodeType:e})=>{const[t,n]=i.useState(null),r=ms((t=>Rn(t,e))),[o,c]=i.useState(!1),s=i.useCallback((e=>{e.preventDefault(),c(!0)}),[]),a=i.useCallback((e=>{e.target===t&&c(!1)}),[t]),[,l]=(0,Ga.c)({item:Hs(e)});let u,d=e,p="0 0 50 50";if(r){const{trayComponent:e,hitRect:t}=r.visual;if(e){const t=e;u=i.createElement(t,null)}else u=ca(void 0,[],void 0,r.visual),p=`${t.p1.x} ${t.p1.y} ${t.p2.x} ${t.p2.y}`;d=r.displayName}else u=i.createElement(yl,null);return i.createElement("li",{ref:e=>{n(e),l(e)},className:"node-tray-item--2_AyH",onClick:s,onMouseOut:a},i.createElement(ul,{placement:"top",isOpen:o,anchorEl:t},"Click and drag to create a new circuit element."),i.createElement("span",{className:"node-tray-item-preview--2QFhF"},i.createElement("svg",{width:30,height:30,viewBox:p},u)),i.createElement("span",{className:ta},d))},yl=()=>i.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50}),fl={"node-tray":()=>{const e=ms(zn),t=Ri()(e.map((e=>e.category)));return i.createElement($a,{title:"Elements",className:"node-tray--1uIvj"},i.createElement("ul",{className:"node-tray-elements--KiJGM"},t.map((e=>i.createElement(pl,{key:e,category:e})))))},"circuit-field":({circuitId:e,circuitNodeIdPath:t})=>{var n;const r=(0,c.I0)(),o=q(),s=null!==(n=ms((t=>Bn(t,e))))&&void 0!==n?n:"<Circuit Missing>",a=i.useMemo((()=>{function t(e){return t=>{if(t){if(t.defaultPrevented)return;t.preventDefault()}r(e)}}var n;return{[_a]:t(Qo(1)),[Xa]:t({type:Fo}),[Ya]:t(no(e)),[Qa]:t({type:fo}),[el]:t((n=e,{type:nt,payload:{targetCircuitId:n}})),[tl]:t(Ke()),[nl]:t(ct()),[il]:t(lt())}}),[r,e]),l=i.useCallback((()=>{r((e=>({type:vc,payload:{tesselPath:e}}))(o))}),[r,o]);return e&&t?i.createElement($a,{title:s+" [Circuit]"},i.createElement(fs.HotKeys,{keyMap:rl,handlers:a,component:ol},i.createElement("div",{onFocus:l,className:x("circuit-field-view",M,S["flex-column"])},i.createElement(bs,{circuitId:e,circuitNodeIdPath:t}),i.createElement(Ka,{className:x(M,S["flexitem-shrink"]),circuitId:e,circuitNodePath:t})))):i.createElement("div",null,"Misconfigured circuit field window. Window must have a circuit id and circuit node id path.")},"circuits-list":()=>{const e=(0,c.I0)(),t=ms(Pn),{openContextMenu:n,renderContextMenu:r}=Ss(),o=i.useCallback((t=>{e(Oc(t))}),[e]),s=i.useCallback((e=>{e.preventDefault(),n(e)}),[n]),a=i.useMemo((()=>Object.keys(t).map((e=>({value:e,label:i.createElement(al,{circuitId:e})})))),[t]);return i.createElement($a,{title:"Circuits",className:x("circuitstree--1eZ0Q")},i.createElement("div",{className:M,onContextMenu:s},i.createElement(sl,{className:M,items:a,onItemSelected:o})),r(i.createElement(ll,null)))}};function gl(e){const t=fl[e.windowId];return t?i.createElement(t,Object.assign({},e.windowProps)):null}const hl=()=>{const e=(0,c.I0)(),t=ms(ys),n=i.useCallback((t=>{e((e=>({type:Ic,payload:{layout:e}}))(t))}),[e]);return i.createElement(ye,{className:x("circuit-editor",M),rootItem:t,onLayoutChange:n,renderWindow:gl})},Il=({location:e})=>{const t=(0,c.I0)(),[n,r]=i.useState(!1);return i.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void r(!0)}const i=n.get("data");i?t((e=>({type:Fc,payload:{data:e}}))(i)):r(!0)}),[]),n?i.createElement("div",null,"Failed to import project"):i.createElement("div",null,"Importing Project...")},bl=()=>i.createElement(s.rs,null,i.createElement(s.AW,{exact:!0,path:"/",component:hl}),i.createElement(s.AW,{exact:!0,path:"/import",component:Il})),vl=({content:e,placement:t,children:n})=>{const r=i.useRef(null),[o,c]=i.useState(!1),s=i.useCallback((()=>{c(!0)}),[]),a=i.useCallback((()=>{c(!1)}),[]);return i.createElement(Cs,{value:a},i.createElement("div",{ref:r,onClick:s},n),i.createElement(Bs,{anchorEl:r.current,isOpen:o,placement:t,onRequestClose:a},o&&e))};function El(e,...t){const n=(0,c.I0)();return i.useCallback(((...i)=>{const r=e(...t,...i);r&&n(r)}),[n,e,...t])}function kl(e,...t){const n=(0,c.I0)();return i.useCallback((i=>{if(i.defaultPrevented)return;i.preventDefault();const r=e(...t);r&&n(r)}),[n,e,...t])}const Ol=()=>{const e=El(pt),t=El(qr),n=El($c),r=El(Ac);return i.createElement(Rs,null,i.createElement(Ws,{onClick:e},"New"),i.createElement(As,null),i.createElement(Ws,{onClick:n},"Load"),i.createElement(Ws,{onClick:t},"Save"),i.createElement(As,null),i.createElement(Ws,{onClick:r},"Export Link"))},Cl=e=>e.undo.undoStack.length>0,Nl=e=>e.undo.redoStack.length>0,xl=()=>{const e=ms(Cl),t=El(ct),n=ms(Nl),r=El(lt);return i.createElement(Rs,null,i.createElement(Ws,{disabled:!e,secondary:Vt+"+z",onClick:t},"Undo"),i.createElement(Ws,{disabled:!n,secondary:Vt+"+shift+z",onClick:r},"Redo"))},jl=({className:e,value:t,onChange:n,children:r})=>i.createElement("label",{className:e},i.createElement("span",{className:"checkbox-span--1EWGs"},i.createElement("input",{type:"checkbox",checked:t,onChange:n})),r),wl=({disabled:e,secondary:t,value:n,onChange:r,children:o})=>i.createElement("li",{className:x(Ds,e&&Ls)},i.createElement(jl,{className:Ts,value:n,onChange:r},i.createElement("span",{className:zs},o),t&&i.createElement("span",{className:Js},t))),Pl=({disabled:e,secondary:t,content:n,children:r})=>i.createElement("li",{className:x(Ds,e&&Ls)},i.createElement(vl,{placement:"right-start",content:n},i.createElement("a",{className:Ts},i.createElement("span",{className:zs},r),t&&i.createElement("span",{className:Js},t),i.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},i.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),Bl=()=>{const e=ms(ka),t=El(Pc,"all"),n=El(Pc,"named-only"),r=El(Pc,"none");return i.createElement(Rs,null,i.createElement(wl,{value:"all"===e,onChange:t},"Always visible"),i.createElement(wl,{value:"named-only"===e,onChange:n},"Named Items Only"),i.createElement(wl,{value:"none"===e,onChange:r},"Hidden"))},Ml=()=>{const e=El(xc);return i.createElement(Rs,null,i.createElement(Pl,{content:i.createElement(Bl,null)},"Element Names"),i.createElement(As,null),i.createElement(Ws,{onClick:e},"Reset View"))},Sl=Io((e=>e.lastTickProcessingTimeMs)),Dl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:x(Va,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),Ll=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:x(Va,e.className)}),i.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),Tl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:x(Va,e.className)}),i.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),zl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:x(Va,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z M11,1 l2,0 l0,14 l-2,0 z"})),Jl="button--1Syge",Rl=()=>{const e=ms(lc),t=ms(dc),n=ms(Sl),r=kl(Go),o=kl(tc),c=kl(ac,"toggle"),s=kl(_o),a=i.useCallback((e=>{e.preventDefault()}),[]);return i.createElement("span",null,e&&i.createElement("span",{className:"simrate--1LNMp"},n.toFixed(2)," ms"),e?i.createElement(Ll,{id:"simctrl-stop",className:x(Jl,"button-stop--264bH"),onClick:o,onMouseDown:a}):i.createElement(Dl,{id:"simctrl-run",className:x(Jl,"button-play--3gVDD"),onClick:r,onMouseDown:a}),i.createElement(zl,{id:"simctrl-step",className:x(Jl,"button-step--WUfNJ"),onClick:s,onMouseDown:a}),i.createElement(Tl,{id:"simctrl-pause",className:x(Jl,"button-pause--YWEL8",!e&&"button--disabled--2BVJb",t&&"selected--QetqX"),onClick:c,onMouseDown:a}))},Wl=({className:e})=>{const t=ms(Qc),n=ms(es);return i.createElement("div",{className:x("titlebar--3-TCE",e)},i.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),i.createElement("div",{className:"titlebar-divider--Wl_27"}),i.createElement(vl,{content:i.createElement(Ol,null),placement:"bottom-start"},i.createElement(gs,null,"File")),i.createElement(vl,{content:i.createElement(xl,null),placement:"bottom-start"},i.createElement(gs,null,"Edit")),i.createElement(vl,{content:i.createElement(Ml,null),placement:"bottom-start"},i.createElement(gs,null,"View")),i.createElement("div",{className:"titlebar-projectname--1vIUJ"},t,n&&"*"),i.createElement("div",{className:"titlebar-controls--1R_l6"},i.createElement(Rl,null)))},Al=ir((e=>e.dialogType)),Ul=ir((e=>e.data));var Zl=n(227),Fl=n(1074);const Hl=({className:e,isOpen:t,onRequestClose:n,children:o})=>t?(0,r.createPortal)(i.createElement("div",{className:x("modal","modal--25LBN")},i.createElement(Zl.Y,{onClickOutside:n,onEscapeKey:n},i.createElement("div",{className:x("modal-content--1H0T_",e)},i.createElement(Fl.Z,{className:M},o)))),document.body):null,Kl=({isOpen:e,acceptText:t,cancelText:n,onAccept:r,onCancel:o,footer:c,children:s})=>i.createElement(Hl,{className:"dialog--1eQi6",isOpen:e,onRequestClose:o},i.createElement("div",null,s),i.createElement("div",{className:"dialog-footer--2hYdr"},c,o&&i.createElement(gs,{onClick:o},null!=n?n:"Cancel"),r&&i.createElement(gs,{onClick:r},null!=t?t:"Accept"))),Gl=()=>{const e=El(tr),t=ms(Ul),n=null==t?void 0:t.projectLink,r=i.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const o=i.createElement(gs,{onClick:r},"Copy to Clipboard");return i.createElement(Kl,{isOpen:!0,cancelText:"Close",onCancel:e,footer:o},i.createElement("div",{className:"export-link-dialog-link-container--Zas2L"},i.createElement("code",{className:"export-link-dialog-link--7r7uE"},n)))},Vl=()=>{switch(ms(Al)){default:return null;case"export-project-link":return i.createElement(Gl,null)}},ql=document.getElementById("root");r.render(i.createElement(a.W,{backend:l.PD},i.createElement(s.F0,{history:u},i.createElement(c.zt,{store:ps},i.createElement((()=>i.createElement("div",{className:x(M,S["flex-column"])},i.createElement(Wl,{className:S["flexitem-fix"]}),i.createElement("div",{className:x(M,S["flexitem-shrink"])},i.createElement(bl,null)),i.createElement(Vl,null))),null)))),ql)},4313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-momentary",category:"input-output",displayName:"Momentary Switch",elementProduction:"input-momentary",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-momentary"},pins:{OUT:{direction:"output",x:50,y:25}}}},9175:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-toggle",category:"input-output",displayName:"Toggle Switch",elementProduction:"input-toggle",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-toggle"},pins:{OUT:{direction:"output",x:50,y:25}}}},4646:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",a={type:"logic-and",category:"logic",displayName:"AND",elementProduction:"logic-and",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2140:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",a={type:"logic-buffer",category:"logic",displayName:"Buffer",elementProduction:"logic-buffer",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M72,25 L 100,25"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),i.createElement("path",{className:"node-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},6467:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-nand",category:"logic",displayName:"NAND",elementProduction:"logic-nand",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",{transform:"translate(-10,0)"},i.createElement("path",{d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z",stroke:"none",fill:"transparent"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 88,25 H110"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 41,15 L 15,15"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 42,35 L 15,35"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z M 42.857143,7.8571429 C 50.834264,7.8571429 55.918368,7.8571429 58.095238,7.8571429 C 59.285714,7.8571429 59.880952,7.8571429 60.178571,7.8571429 C 60.327381,7.8571429 60.409227,7.8571429 60.446429,7.8571429 C 60.465029,7.8571429 60.471543,7.8571429 60.47619,7.8571429 C 70.236853,7.857143 77.142857,15.497098 77.142857,25 C 77.142857,34.502902 69.760662,42.142857 60,42.142857 L 42.857143,42.142857 L 42.857143,7.8571429 z"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 79,25 A 4,4 0 1 1 71,25 A 4,4 0 1 1 79,25 z",transform:"translate(9,0)"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},8476:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-nor",category:"logic",displayName:"NOR",elementProduction:"logic-nor",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 h21 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3980:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-not",category:"logic",displayName:"NOT",elementProduction:"logic-not",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 H100 M29,25 h-24"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},9696:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",a={type:"logic-or",category:"logic",displayName:"OR",elementProduction:"logic-or",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2201:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",a={type:"logic-xor",category:"logic",displayName:"XOR",elementProduction:"logic-xor",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M30,15 H5 M31,35 H5"}),i.createElement("g",{fillRule:"evenodd",className:"node-select-highlight--fill"},i.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),i.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6015:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const r={type:"output-led",category:"input-output",displayName:"Indicator Light",elementProduction:"output-led",visual:(0,n(957).J)(i,{path:i,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},5058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(957);const r=[15,0];function o(e,t){const n=t[0];let i=`M${3*n[0]+r[0]},${3*n[1]+r[1]}`;for(const e of t.slice(1)){const[t,n]=e;i+=`L${3*t+r[0]},${3*n+r[1]}`}return i+="z",{path:i,fill:t=>t[e]?"red":"gray",strokeWidth:0}}const c={type:"output-seg7",category:"input-output",displayName:"7-Segment Display",elementProduction:"output-seg7",visual:(0,i.J)("M15,0 V63 H45 V0 z",[o("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),o("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),o("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),o("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),o("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),o("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),o("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},3158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-high",category:"input-output",elementProduction:"pin-high",displayName:"High Pin",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M25,20 v10 M20,25 h10",fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},7529:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),r=n(669),o=n.n(r),c=n(8370),s=n(784);const a="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-input",category:"input-output",displayName:"Input Pin",visual:(0,n(5471).l)((0,c.NG)(o()(a)),i.createElement("g",null,i.createElement("path",{d:a,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:(0,s.x)(25,25,3,-45,225),fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},4987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-output",category:"input-output",displayName:"Output Pin",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("circle",{className:"node-select-highlight--fill",cx:25,cy:25,r:3,fill:"black",stroke:"none"}))),pins:{IN:{direction:"input",x:0,y:25}}}},957:(e,t,n)=>{"use strict";n.d(t,{J:()=>d});var i=n(7294),r=n(9242),o=n(669),c=n.n(o),s=n(8370),a=n(1235);const l=({circuitNodeId:e,circuitNodePath:t,shapePath:n,hitPath:o,elementState:c})=>{const s=(0,r.I0)(),l=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),s((0,a.zN)([...t||[],e]))))}),[e,s,t]),u=p(n,c).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"node-select-highlight--stroke node-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("g",{onClick:l},i.createElement("path",{d:o,fill:"transparent",stroke:"none"}),u)},u=({shapePath:e,hitRect:t})=>{const n=p(e,{}).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"node-select-highlight--stroke node-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("svg",{width:50,height:50,viewBox:`${t.p1.x-5} ${t.p1.y-5} ${t.p2.x-t.p1.x+10} ${t.p2.y-t.p1.y+10}`},n)};function d(e,t){const n=(0,s.NG)(c()(e));return{trayComponent:()=>i.createElement(u,{shapePath:t,hitRect:n}),component:n=>i.createElement(l,Object.assign({shapePath:t,hitPath:e},n)),hitRect:n}}function p(e,t){return(Array.isArray(e)?e:[e]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const n="function"==typeof e.fill?e.fill(t||{}):e.fill,i="function"==typeof e.stroke?e.stroke(t||{}):e.stroke,r="function"==typeof e.strokeWidth?e.strokeWidth(t||{}):e.strokeWidth;return{path:e.path,fill:n,stroke:i,strokeWidth:r}}))}},5471:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var i=n(7294);function r(e,t){return{hitRect:e,trayComponent:()=>i.createElement("svg",{width:50,height:50,viewBox:`${e.p1.x-5} ${e.p1.y-5} ${e.p2.x-e.p1.x+10} ${e.p2.y-e.p1.y+10}`},t),component:()=>t}}},784:(e,t,n)=>{"use strict";function i(e,t,n,i,o){const c=r(e,t,n,o),s=r(e,t,n,i),a=o-i<=180?"0":"1";return["M",c.x,c.y,"A",n,n,0,a,0,s.x,s.y].join(" ")}function r(e,t,n,i){const r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}n.d(t,{x:()=>i})}},0,[[1169,1,956,874,90,14,80,744,845,105,699,412]]]);
//# sourceMappingURL=client.218f592b7fce7bafd02c.bundle.js.map