(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{2334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={"text-unselectable":"text-unselectable--2tvXe"}},7252:(e,t,n)=>{"use strict";n.d(t,{q6:()=>o,_Y:()=>i,U_:()=>s});var r=n(4586);const o="@circuit/add",i=({circuitName:e,circuitId:t,edit:n}={})=>({type:o,payload:{circuitId:null!=t?t:(0,r.Z)(),circuitName:e,edit:n}});function s(e){return e.type===o}},5984:(e,t,n)=>{"use strict";n.d(t,{JP:()=>r,Zj:()=>o,Q$:()=>i});const r="@circuit/delete",o=e=>({type:r,payload:{circuitId:e}});function i(e){return e.type===r}},1314:(e,t,n)=>{"use strict";n.d(t,{QM:()=>r,U3:()=>o,lp:()=>i});const r="@circuit/rename",o=(e,t)=>({type:r,payload:{circuitId:e,circuitName:t}});function i(e){return e.type===r}},7930:(e,t,n)=>{"use strict";n.d(t,{_A:()=>o,k5:()=>i});const r="@circuit/view",o=(e,t=null)=>({type:r,payload:{circuitId:e,circuitNodeIdPath:t}});function i(e){return e.type===r}},5621:(e,t,n)=>{"use strict";n.d(t,{Fb:()=>r,v:()=>o,Ff:()=>i});const r="@clipboard/paste",o=()=>({type:r});function i(e){return e.type===r}},5222:(e,t,n)=>{"use strict";n.d(t,{pR:()=>r,GA:()=>o,W2:()=>i});const r="@dialog/response/accept",o=e=>({type:r,payload:{result:e}});function i(e){return e.type===r}},8177:(e,t,n)=>{"use strict";n.d(t,{NQ:()=>r,ey:()=>o,Xm:()=>i});const r="@field/drag/continue",o=(e,t)=>({type:r,payload:{dragPos:e,modifierKeys:t}});function i(e){return e.type===r}},4:(e,t,n)=>{"use strict";n.d(t,{cN:()=>r,k4:()=>o,$V:()=>i});const r="@field/drag/end",o=(e,t)=>({type:r,payload:Object.assign(Object.assign({},e),{modifierKeys:t})});function i(e){return e.type===r}},713:(e,t,n)=>{"use strict";n.d(t,{R4:()=>o,Vl:()=>i});const r="@field/drag/start/joint",o=(e,t,n)=>({type:r,payload:Object.assign(Object.assign({},t),{jointId:e,modifierKeys:n})});function i(e){return e.type===r}},1883:(e,t,n)=>{"use strict";n.d(t,{gM:()=>o,xl:()=>i});const r="@field/drag/start/new-joint",o=(e,t,n,o)=>({type:r,payload:Object.assign(Object.assign({},n),{connectionId:e,addAfterJointId:t,modifierKeys:o})});function i(e){return e.type===r}},8554:(e,t,n)=>{"use strict";n.d(t,{Yf:()=>o,Q6:()=>i});const r="@field/drag/start/new-element",o=e=>({type:r,payload:{nodeType:e}});function i(e){return e.type===r}},8198:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>o,KH:()=>i});const r="@field/drag/start/node",o=(e,t,n)=>({type:r,payload:Object.assign(Object.assign({},t),{nodeId:e,modifierKeys:n})});function i(e){return e.type===r}},853:(e,t,n)=>{"use strict";n.d(t,{wZ:()=>o,dx:()=>i});const r="@field/drag/start/select",o=e=>({type:r,payload:Object.assign({},e)});function i(e){return e.type===r}},4206:(e,t,n)=>{"use strict";n.d(t,{V:()=>o,Zr:()=>i});const r="@field/drag/start/wire",o=(e,t)=>({type:r,payload:{dragStart:e,pin:t}});function i(e){return e.type===r}},1387:(e,t,n)=>{"use strict";n.d(t,{Cq:()=>r,xr:()=>o,hG:()=>i});const r="@field/mouse/leave",o=()=>({type:r});function i(e){return e.type===r}},5273:(e,t,n)=>{"use strict";n.d(t,{dd:()=>o,gz:()=>i,g0:()=>s});var r=n(4586);const o="@node/add",i=(e,t)=>({type:o,payload:Object.assign({nodeId:(0,r.Z)(),nodeType:e},t||{})});function s(e){return e.type===o}},1235:(e,t,n)=>{"use strict";n.d(t,{zN:()=>o,ke:()=>i});const r="@node/interact",o=e=>({type:r,payload:{circuitNodeIdPath:e}});function i(e){return e.type===r}},4443:(e,t,n)=>{"use strict";n.d(t,{XT:()=>r,w:()=>o,HH:()=>i});const r="@node/rename",o=(e,t)=>({type:r,payload:{nodeId:e,nodeName:t}});function i(e){return e.type===r}},4505:(e,t,n)=>{"use strict";n.d(t,{WG:()=>r,C9:()=>o});const r="@project/export-link",o=()=>({type:r})},7198:(e,t,n)=>{"use strict";n.d(t,{Yk:()=>r,vP:()=>o});const r="@project/import-link",o=e=>({type:r,payload:{data:e}})},6577:(e,t,n)=>{"use strict";n.d(t,{Wx:()=>r,Cb:()=>o});const r="@project/load",o=()=>({type:r})},38:(e,t,n)=>{"use strict";n.d(t,{Ny:()=>r,o9:()=>o,Tp:()=>i});const r="@project/new",o=()=>({type:r});function i(e){return e.type===r}},3069:(e,t,n)=>{"use strict";n.d(t,{hq:()=>r,UI:()=>o});const r="@project/save",o=()=>({type:r})},5758:(e,t,n)=>{"use strict";n.d(t,{Nz:()=>r,KX:()=>o,rA:()=>i});const r="@undo/redo",o=()=>({type:r});function i(e){return e.type===r}},7243:(e,t,n)=>{"use strict";n.d(t,{td:()=>o,ov:()=>i});const r="@select/all",o=()=>({type:r});function i(e){return e.type===r}},1578:(e,t,n)=>{"use strict";n.d(t,{MO:()=>o,CH:()=>i});const r="@select/clear",o=()=>({type:r});function i(e){return e.type===r}},4662:(e,t,n)=>{"use strict";n.d(t,{lF:()=>o,xW:()=>i});const r="@select/nodes",o=(e,t="set")=>({type:r,payload:{nodeIds:Array.isArray(e)?e:[e],mode:t}});function i(e){return e.type===r}},2571:(e,t,n)=>{"use strict";n.d(t,{a2:()=>o,p6:()=>i});const r="@select/wire-joints",o=(e,t="set")=>({type:r,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}});function i(e){return e.type===r}},4691:(e,t,n)=>{"use strict";n.d(t,{Rp:()=>o,GT:()=>i});const r="@select/wires",o=(e,t="set")=>({type:r,payload:{connectionIds:Array.isArray(e)?e:[e],mode:t}});function i(e){return e.type===r}},5409:(e,t,n)=>{"use strict";n.d(t,{R9:()=>r,Fs:()=>o,wr:()=>i});const r="@selection/align-to-grid",o=()=>({type:r});function i(e){return e.type===r}},4484:(e,t,n)=>{"use strict";n.d(t,{qn:()=>o,ww:()=>i});const r="@selection/copy",o=()=>({type:r});function i(e){return e.type===r}},2165:(e,t,n)=>{"use strict";n.d(t,{XE:()=>r,NE:()=>o,SB:()=>i});const r="@selection/delete",o=()=>({type:r});function i(e){return e.type===r}},7366:(e,t,n)=>{"use strict";n.d(t,{C2:()=>o,RC:()=>i});const r="@sim/fastforward",o=()=>({type:r});function i(e){return e.type===r}},8261:(e,t,n)=>{"use strict";n.d(t,{l2:()=>r,ri:()=>o,Ie:()=>i});const r="@sim/pause",o=e=>({type:r,payload:{mode:e}});function i(e){return e.type===r}},8910:(e,t,n)=>{"use strict";n.d(t,{pu:()=>r,Fr:()=>o,NL:()=>i});const r="@sim/start",o=()=>({type:r});function i(e){return e.type===r}},737:(e,t,n)=>{"use strict";n.d(t,{Sk:()=>o,qf:()=>i});const r="@sim/stop",o=()=>({type:r});function i(e){return e.type===r}},152:(e,t,n)=>{"use strict";n.d(t,{rZ:()=>r,jf:()=>o,FD:()=>i});const r="@sim/tick",o=e=>({type:r,payload:{tickCount:e}});function i(e){return e.type===r}},3634:(e,t,n)=>{"use strict";n.d(t,{Um:()=>r,Yw:()=>o,Qy:()=>i});const r="@undo/undo",o=()=>({type:r});function i(e){return e.type===r}},5842:(e,t,n)=>{"use strict";n.d(t,{pi:()=>o,RD:()=>i});const r="@view/node-names",o=e=>({type:r,payload:{mode:e}});function i(e){return e.type===r}},4882:(e,t,n)=>{"use strict";n.d(t,{Sh:()=>r,iM:()=>o,UO:()=>i});const r="@view/zoom",o=e=>({type:r,payload:{delta:e}});function i(e){return e.type===r}},5054:(e,t,n)=>{"use strict";function r(e){return Array.isArray(e)?e:[e]}n.d(t,{_:()=>r,f:()=>i});const o=Object.freeze([]);function i(){return o}},5766:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});const r=1},2954:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:t.A&&t.B}}})}},5562:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:t.IN}}})}},2603:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},7814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:!(t.A||t.B)}}})}},50:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:!t.IN}}})}},1652:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:t.A||t.B}}})}},9684:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},9896:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const r={toggleState:!1},o={inputPins:[],outputPins:["OUT"],interact:(e=r)=>Object.assign(Object.assign({},e),{toggleState:!e.toggleState}),evolve:(e=r)=>({state:e,transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},5978:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{tQ:()=>o,Ds:()=>i,VE:()=>s,Fv:()=>c,Ih:()=>a,bA:()=>l,Qu:()=>d,ZO:()=>u,sj:()=>p,kg:()=>y,PL:()=>m,nF:()=>f,G0:()=>g,kK:()=>I});var r=n(7516);const o=r.Ry().shape({x:r.Rx().required(),y:r.Rx().required()}),i=Object.freeze({x:0,y:0});function s(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function c(e){const t=s(e);return{x:e.x/t,y:e.y/t}}function a(e,t){return e.x*t.x+e.y*t.y}function l(e,t){return{x:e.x*t,y:e.y*t}}function d(...e){let t,n;if(1===e.length){const r=e[0];t=r.p1,n=r.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function u(e,t){return{x:e.x+t.x,y:e.y+t.y}}function p(e,t){return{x:e.x-t.x,y:e.y-t.y}}function y(e,t){return e.x===t.x&&e.y===t.y}function m(e,t){return!((t=d(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function f(e){return{width:(e=d(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function g(e,t){return e=d(e),t=d(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function I(e,t){return e=d(e),t=d(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}Object.freeze({p1:i,p2:i})},4875:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(7531).q_)()},7165:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9242);function o(e){return(0,r.v9)(e)}},6475:(e,t,n)=>{"use strict";var r=n(7294),o=n(3935),i=(n(1033),n(9242)),s=n(5977),c=n(4875),a=n(3132),l=n(6600);const d={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"},u="fill-parent--3pw6U";var p=n(8721),y=n.n(p);function m(e){return"number"==typeof e?{firstPercent:e}:e}function f(e){return y()(e,"firstPercent")}function g(e){return y()(e,"firstSize")||y()(e,"secondSize")}var I=n(3493),v=n.n(I);function h(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),t}const b={tessel:"tessel--2Q3Xd","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C"},k=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),E=({direction:e,onChangePercentage:t})=>{const n=r.useRef(null),o=r.useRef(null),i=h(e),s=h(t),c=r.useMemo((()=>v()((e=>{var t,r;if(null==o.current||null==n.current)return;const c=null!==(r=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==r?r:k;let a=0,l=0;"row"===i.current?(l=e.pageX-c.left,a=l/c.width,isNaN(a)?(a=0,l=c.left):a>1&&(a=1,l=c.right)):(l=e.pageY-c.top,a=l/c.height,isNaN(a)?(a=0,l=c.top):a>1&&(a=1,l=c.bottom)),s.current(100*a,l)}),1e3/60,{leading:!0})),[i,s]),a=r.useCallback((e=>{e.persist(),c(e)}),[c]),d=r.useCallback((e=>{!e.defaultPrevented&&n.current&&(o.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),o.current=e.pointerId))}),[]),u=r.useCallback((()=>{n.current&&o.current&&(n.current.releasePointerCapture(o.current),o.current=null)}),[]);return r.createElement("div",{ref:n,className:(0,l.yI)("tessel-split",b["tessel-split"],b["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:d,onPointerMove:a,onPointerUp:u})};function O(e,t,n){return f(e)?{firstPercent:t}:g(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const C=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:o,first:i,second:s,division:c}=e,a="row"===o?"width":"height",p=r.useCallback(((t,r)=>{const o=m(e.division);n(Object.assign(Object.assign({},e),{division:O(o,t,r)}))}),[e,n]),y=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),I=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),v=m(c);let h="50%",b="50%",k=!1,C=!1;if(f(v)){const{firstPercent:e}=v;h=e+"%",b=100-e+"%"}else if(g(v)){const{firstSize:e,secondSize:t}=v;e?(h=e+"px",k=!0,b="100%"):(h="100%",b=t+"px",C=!0)}return r.createElement("div",{className:(0,l.yI)(u,d["row"===o?"flex-row":"flex-column"])},r.createElement("div",{className:(0,l.yI)(k?d["flexitem-fix"]:d["flexitem-shrink"]),style:{[a]:h}},r.createElement(N,{value:i,renderWindow:t,onLayoutChange:y})),r.createElement(E,{direction:o,onChangePercentage:p}),r.createElement("div",{className:(0,l.yI)(C?d["flexitem-fix"]:d["flexitem-shrink"]),style:{[a]:b}},r.createElement(N,{value:s,renderWindow:t,onLayoutChange:I})))},N=({value:e,renderWindow:t,onLayoutChange:n})=>{const o=function(e){return"string"==typeof e?{windowId:e}:e}(e);return function(e){return y()(e,"windowId")}(o)?t(o):function(e){return y()(e,"first")&&y()(e,"second")&&y()(e,"direction")}(o)?r.createElement(C,{item:o,renderWindow:t,onLayoutChange:n}):null},j=({className:e,rootItem:t,renderWindow:n,onLayoutChange:o})=>r.createElement("div",{className:(0,l.yI)("tessel",b.tessel,e)},r.createElement(N,{value:t,renderWindow:n,onLayoutChange:o}));var x=n(3274),P=n(152),w=n(7366),B=n(5621),M=n(4484),S=n(2165),Z=n(7243),D=n(3634),J=n(5758),R=n(928),T=n.n(R),L=n(7165),A=n(7930),z=n(961),W=n(5213),U=n(1089);var F=n(6222);const H=e=>r.createElement("button",Object.assign({className:"button--Ui3Hp",type:"button"},e),e.children);var K=n(9977);const q=()=>{const e=(0,i.I0)(),t=(0,L.Z)(z.se),n=(0,L.Z)((e=>(0,K.w)(e,F.u))),o=(0,L.Z)(z.WU),s=r.useCallback((t=>{t.preventDefault(),e((0,A._A)(F.u,[]))}),[e]);return r.createElement(H,{onClick:s},0===t.length?o:n)},_=({circuitNodeIdPath:e})=>{const t=(0,i.I0)(),n=T()(e),o=(0,L.Z)((e=>(0,W.og)(e,n))),s=(0,L.Z)((e=>(0,W.uk)(e,n))),c=o?(0,U.X)(o):null,a=(0,L.Z)((e=>c?(0,K.w)(e,c):null)),l=r.useCallback((n=>{n.preventDefault(),c&&t((0,A._A)(c,e))}),[c,e,t]);return r.createElement(H,{onClick:l},s," [",a,"]")},V=()=>{const e=(0,L.Z)(z.se),t=e.map(((t,n)=>{const o=e.slice(0,n+1);return r.createElement(r.Fragment,{key:t},r.createElement("span",null,">"),r.createElement(_,{circuitNodeIdPath:o}))}));return r.createElement("div",{className:(0,l.yI)("circuit-node-breadcrumb","circuit-node-breadcrumb--3Rx3N")},r.createElement(q,null),t)};var G=n(3092),X=n.n(G),Q=n(8370),Y=n(2222),$=n(2628),ee=n.n($),te=n(4150),ne=n(5393);const re=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),oe=(0,Y.createSelector)(te.g,ne.v5,((e,t)=>[...ee()(e),...ee()(t).map((e=>({p1:e,p2:e})))].reduce(Q.G0,re))),ie=(0,n(9990).u)((e=>e.viewScale));var se=n(1387),ce=n(4882);const ae=r.createContext((function(){}));function le(){return r.useContext(ae)}const de=ae.Provider;var ue=n(1935),pe=n(5054);function ye(){}const me={registerPopoverChild:ye,unregisterPopoverChild:ye},fe=r.createContext(null),ge=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const o=r.useContext(fe),i=null==o?void 0:o.registerPopoverChild,s=null==o?void 0:o.unregisterPopoverChild,c=r.useCallback((t=>{i&&i(t),e(t)}),[e,i]),a=r.useCallback((e=>{t(e)}),[t,s]),l=r.useMemo((()=>({registerPopoverChild:c,unregisterPopoverChild:a})),[c,a]);return r.createElement(fe.Provider,{value:l},n)};var Ie=n(1966),ve=n.n(Ie);const he=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:i,children:s})=>{const[c,a]=r.useState(null),{attributes:d,styles:u}=(0,ue.D)(e?t:null,c,{placement:n});!function(e){var t;const n=null!==(t=r.useContext(fe))&&void 0!==t?t:me,o=r.useRef(n);r.useEffect((()=>{o.current=n})),r.useEffect((()=>{if(e)return o.current.registerPopoverChild(e),()=>o.current.unregisterPopoverChild(e)}),[e])}(c);const[p,y,m]=function(e=[]){const[t,n]=r.useState(e),o=r.useCallback((e=>{n([...t,e])}),[t]),i=r.useCallback((e=>{n(ve()(t,[e]))}),[t]);return[t,o,i,n]}();return function(e,t,n=!0){const o=r.useCallback((n=>{const r=(0,pe._)(e).filter(l.fQ);r.length&&r.every((e=>!e.contains(n.target)))&&t()}),[e,t]);r.useEffect((()=>{if(n)return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}}),[o,n])}(r.useMemo((()=>[c,...p]),[p,c]),i),e?(0,o.createPortal)(r.createElement(ge,{registerPopoverChild:y,unregisterPopoverChild:m},r.createElement("div",Object.assign({ref:a,style:u.popper},d.popper),s)),document.body):null},be=({x:e,y:t,open:n,onRequestClose:o,children:i})=>{const s=r.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return r.createElement(de,{value:o},r.createElement(he,{isOpen:n,onRequestClose:o,anchorEl:s,placement:"bottom-start"},i))};function ke(){const[e,t]=r.useState(null),n=r.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),o=r.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:r.useCallback((t=>e?r.createElement(be,{open:!0,onRequestClose:o,x:e.x,y:e.y},t):null),[e,o])}}const Ee={current:null},Oe=r.createContext({svgRef:Ee,scalerRef:Ee}),Ce=Oe.Provider,Ne=({svgRef:e,scalerRef:t,children:n})=>{const o=r.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return r.createElement(Ce,{value:o},n)};var je=n(2550),xe=n(6773),Pe=n(8177);function we(){const{svgRef:e,scalerRef:t}=r.useContext(Oe);return r.useCallback((n=>{if(!e.current||!t.current)return Q.Ds;const r={x:n.pageX,y:n.pageY};return function(e,t,n){const r=t.getScreenCTM();if(!r)return n;const o=e.createSVGPoint();o.x=n.x,o.y=n.y;const i=o.matrixTransform(r.inverse());return{x:i.x,y:i.y}}(e.current,t.current,r)}),[e,t])}var Be=n(3304);const Me=r.memo((function({className:e,circuitNodeId:t,x:n=0,y:o=0,nodeType:i,nodeState:s,isSelected:c=!1,onClick:a,onMouseDown:d,onMouseOver:u,onMouseUp:p,onMouseLeave:y,onContextMenu:m}){const f=(0,L.Z)((e=>(0,Be.yP)(e,i)));let g;if(f){const{component:e}=f.visual;g=r.createElement(e,{circuitNodeId:t,isSelected:c,elementState:s})}else g=r.createElement("rect",{x:n,y:o,width:50,height:50,fill:c?"goldenrod":"red"});const I=0!=n||0!=o?`translate(${n}, ${o})`:void 0;return r.createElement("g",{className:(0,l.yI)(e,"node-visual",c&&"node-selected"),transform:I,onClick:a,onMouseDown:d,onMouseOver:u,onMouseUp:p,onMouseLeave:y,onContextMenu:m},g)})),Se=r.memo((function(){const e=(0,i.I0)(),t=we(),n=(0,L.Z)(xe.y_),o=(0,L.Z)(xe.Ll),s=(0,L.Z)(xe.Ny),c=r.useCallback((n=>{const r=t(n),o=(0,je.h)(n);e((0,Pe.ey)(r,o))}),[t,e]);return n&&s?r.createElement(r.Fragment,null,o&&r.createElement("g",{opacity:.5},r.createElement(Me,{x:o.x,y:o.y,nodeType:s,nodeState:{}})),r.createElement("rect",{width:"100%",height:"100%",fill:"transparent",onMouseMove:c})):null}));var Ze=n(8718),De=n.n(Ze),Je=n(6604),Re=n.n(Je),Te=n(1486),Le=n(7836);const Ae=(0,Y.createSelector)(Le.d4,Te.T,((e,t)=>De()(t,e))),ze=(0,Y.createSelector)(Le.d4,W.KO,((e,t)=>De()(t,e))),We=r.memo((function(){const e=(0,L.Z)(Ae),t=(0,L.Z)(ze),n=(0,L.Z)(xe.KQ);let o=null;return n&&(o=ee()(Re()(e,((e,o)=>r.createElement(Me,{key:o,nodeType:t[o],nodeState:{},x:e.x+n.x,y:e.y+n.y}))))),r.createElement("g",{id:"drag-node-preview-layer",opacity:.3},o)}));const Ue=e=>{var{x:t,y:n,interactable:o=!0,selected:i=!1}=e,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["x","y","interactable","selected"]);const[c,a]=r.useState(!1),d=r.useCallback((()=>{o&&a(!0)}),[o]),u=r.useCallback((()=>{a(!1)}),[]);return r.createElement("circle",Object.assign({className:(0,l.yI)("wire-joint--DrAWT",i&&"selected--1I6Un"),cx:t,cy:n,r:o&&c||i?4:2,onMouseOver:d,onMouseOut:u},s))},Fe=(0,Y.createSelector)(Le.O5,ne.v5,((e,t)=>De()(t,e))),He=r.memo((function(){const e=(0,L.Z)(xe.KQ),t=(0,L.Z)(Fe),n=(0,L.Z)(xe.pc);let o=null;e&&(o=ee()(t).map(((t,n)=>r.createElement(Ue,{key:n,interactable:!1,x:t.x+e.x,y:t.y+e.y,opacity:.5}))));let i=null;return n&&(i=r.createElement(Ue,{interactable:!1,x:n.x,y:n.y,opacity:.5})),r.createElement("g",{id:"drag-joint-preview-layer",opacity:.3},o,i)}));function Ke(e){const{dragThreshold:t=5,onClick:n,onDragStart:o,onDragMove:i,onDragEnd:s}=e,[c,a]=r.useState(!1),l=r.useRef(!1),d=r.useRef(!1),u=r.useRef(Q.Ds),p=r.useCallback((e=>{l.current||(l.current=!0,a(!0),u.current={x:e.pageX,y:e.pageY})}),[]),y=r.useCallback((()=>{l.current=!1,a(!1),d.current=!1,u.current=Q.Ds}),[]),m=r.useCallback((e=>{if(l.current)if(d.current){if(i){const t=(0,Q.sj)({x:e.pageX,y:e.pageY},u.current);i(t,e)}}else{const n=u.current;(Math.abs(n.x-e.pageX)>=t||Math.abs(n.y-e.pageY)>=t)&&(d.current=!0,o&&o(e))}}),[t,i,o]),f=r.useCallback((e=>{if(l.current){if(d.current){if(s){const t=(0,Q.sj)({x:e.pageX,y:e.pageY},u.current);s(t,e)}}else n&&n(e);y()}}),[y,n,s]);return r.useEffect((()=>{if(c)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)}}),[c,m,f]),{startTracking:p,cancelTracking:y}}var qe=n(1578),_e=n(853),Ve=n(4);const Ge=r.memo((function(){const e=(0,i.I0)(),t=(0,i.v9)(xe.xn),n=(0,i.v9)(ie);function o(e){return e*(1/n)}const s=we(),c=r.useCallback((t=>{if(0!==t.button)return;const n=(0,je.h)(t);n.ctrlMetaKey||n.shiftKey||e((0,qe.MO)())}),[e]),a=r.useCallback((t=>{const n=s(t);e((0,_e.wZ)(n))}),[e,s]),l=r.useCallback(((t,n)=>{const r=s(n),o=(0,je.h)(n);e((0,Pe.ey)(r,o))}),[e,s]),d=r.useCallback(((t,n)=>{const r=s(n),o=(0,je.h)(n);e((0,Ve.k4)(r,o))}),[e,s]),{startTracking:u}=Ke({onClick:c,onDragStart:a,onDragMove:l,onDragEnd:d}),p=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),u(e))}),[u]);return r.createElement("g",{id:"drag-select-layer"},r.createElement("rect",{width:100*o(1)+"%",height:100*o(1)+"%",fill:"transparent",onMouseDown:p}),t&&r.createElement("g",{transform:`translate(${t.p1.x}, ${t.p1.y})`},r.createElement("rect",{width:t.p2.x-t.p1.x,height:t.p2.y-t.p1.y,strokeWidth:o(2),strokeDasharray:`${o(5)} ${o(3)}`,stroke:"skyblue",fill:"transparent"})))})),Xe=r.memo((function(){const e=50*(0,L.Z)(ie);return r.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("pattern",{id:"grid",width:e,height:e,patternUnits:"userSpaceOnUse"},r.createElement("path",{d:`M ${e} 0 L 0 0 0 ${e}`,fill:"none",stroke:"gray",strokeWidth:.5}))),r.createElement("rect",{width:"100%",height:"100%",fill:"url(#grid)"}))}));var Qe=n(5878),Ye=n(669),$e=n.n(Ye),et=n(3871),tt=n(2334),nt=n(1755);const rt=Object.freeze({});var ot=n(2619),it=n(4368);const st=(0,n(6147).h)((e=>e.nodeNameMode));var ct=n(8198),at=n(4662),lt=n(5409),dt=n(4443);const ut="menu-item--2dcyN",pt="menu-item--disabled--RJJTK",yt="menu-item-content--3s1DG",mt="menu-item-text--1F41V",ft="menu-item-secondary--2PJLF",gt=({children:e})=>r.createElement("ul",{className:"menu--3E86w"},e),It=({disabled:e,onClick:t,secondary:n,children:o})=>{const i=le(),s=r.useCallback((e=>{t&&t(e),i()}),[i,t]);return r.createElement("li",{className:(0,l.yI)(ut,e&&pt)},r.createElement("a",{className:yt,onClick:s},r.createElement("span",{className:mt},o),n&&r.createElement("span",{className:ft},n)))},vt=()=>r.createElement("div",{className:"menu-divider--1QPGp"}),ht=r.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:o,onChange:i,onBeginEdit:s,onCommit:c,onCancel:a,onBlur:l,onKeyUp:d},u)=>{const[p,y]=r.useState(null),m=r.useCallback((e=>{null==p&&s&&s(),y(e.target.value),i&&i(e)}),[p,s,i]),f=r.useCallback((e=>{d&&d(e),e.defaultPrevented||null!=p&&("Escape"===e.key?(e.preventDefault(),a&&a()):"Enter"===e.key&&(e.preventDefault(),c&&c(p)))}),[d,p,a,c]),g=r.useCallback((e=>{l&&l(e),null!=p&&c&&c(p)}),[l,p,c]);return r.createElement("input",{ref:u,className:e,autoFocus:t,defaultValue:n,value:o,type:"text",onChange:m,onKeyUp:f,onBlur:g})})),bt=({className:e,textClassname:t,inputClassname:n,label:o,defaultValue:i,isEditing:s,onRequestEdit:c,onCommit:a,onCancel:d})=>{const u=r.useRef(null),p=r.useCallback((e=>{c&&(e.defaultPrevented||(e.preventDefault(),c()))}),[c]),y=r.useCallback((e=>{"Escape"===e.key&&s&&d()}),[s,d]),m=r.useCallback((()=>{s&&d()}),[s,d]);return r.useEffect((()=>{s&&u.current&&u.current.select()}),[s]),s?r.createElement(ht,{ref:u,className:(0,l.yI)(e,n),autoFocus:!0,defaultValue:i,onBlur:m,onKeyUp:y,onCommit:a,onCancel:d}):r.createElement("span",{className:(0,l.yI)(e,t),onDoubleClick:p},null!=o?o:i)},kt=e=>{const{onRequestEdit:t,onCommit:n}=e,o=le(),i=r.useCallback((()=>{t&&t()}),[t]),s=r.useCallback((e=>{n(e),o()}),[n,o]);return r.createElement("li",{className:ut,onClick:i},r.createElement(bt,Object.assign({},e,{onCommit:s})))},Et=({nodeId:e})=>{const t=(0,i.I0)(),n=(0,L.Z)((t=>(0,W.uk)(t,e))),[o,s]=r.useState(!1),c=r.useCallback((()=>{s(!0)}),[]),a=r.useCallback((()=>{s(!1)}),[]),l=r.useCallback((n=>{s(!1),t((0,dt.w)(e,n))}),[t,e]),d=r.useCallback((()=>{t((0,lt.Fs)())}),[t]),u=r.useCallback((()=>{t((0,S.NE)())}),[t]);return r.createElement(gt,null,r.createElement(kt,{defaultValue:null!=n?n:"<unknown>",label:r.createElement("span",{style:{fontWeight:"bold"}},n),isEditing:o,onRequestEdit:c,onCommit:l,onCancel:a}),r.createElement(vt,null),r.createElement(It,{onClick:d},"Align Selection To Grid"),r.createElement(vt,null),r.createElement(It,{onClick:u},"Delete Selected"))},Ot=r.memo((function({nodeId:e}){const t=(0,i.I0)(),n=(0,L.Z)(ot.D7),o=(0,L.Z)(z.se),{openContextMenu:s,renderContextMenu:c}=ke(),a=(0,L.Z)((t=>(0,it.m)(t,e))),{x:d,y:u}=(0,L.Z)((t=>(0,Te.e)(t,e))),p=(0,L.Z)((t=>((e,t)=>{const n=e.services.simulatorGraph.simulatorNodeIdsByCircuitNodeId,r=e.services.simulator.nodeStatesByNodeId,o=(0,nt.F9)(n,t);return o?r[o]:rt})(t,[...o,e]))),y=(0,L.Z)((t=>(0,Le.CP)(t,e))),m=we(),f=r.useCallback((r=>{if(n)return;if(r.defaultPrevented)return;if(0!==r.button)return;r.preventDefault();const o=(0,je.h)(r),i=(0,et.t)(o);t((0,at.lF)(e,i))}),[t,n,e]),g=r.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const r=(0,je.h)(n),o=(0,et.t)(r,"set-if-unselected");t((0,at.lF)(e,o)),s(n)}),[t,e,s]),I=r.useCallback((n=>{const r=m(n),o=(0,je.h)(n);t((0,ct.hZ)(e,r,o))}),[m,t,e]),v=r.useCallback(((e,n)=>{const r=m(n),o=(0,je.h)(n);t((0,Pe.ey)(r,o))}),[t,m]),h=r.useCallback(((e,n)=>{const r=m(n),o=(0,je.h)(n);t((0,Ve.k4)(r,o))}),[t,m]),{startTracking:b}=Ke({onClick:f,onDragStart:I,onDragMove:v,onDragEnd:h}),k=r.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),b(e)))}),[b]);if(!a)return null;let E,O;if(a){const{component:t,hitPath:n}=a.visual;E=r.createElement(t,{circuitNodeId:e,isSelected:y,elementState:p}),O=$e()(n)}else E=r.createElement("rect",{x:d,y:u,width:50,height:50,fill:y?"goldenrod":"red"}),O=[0,0,50,50];const C=0!=d||0!=u?`translate(${d}, ${u})`:void 0;return r.createElement("g",{transform:C},r.createElement("g",{className:(0,l.yI)("circuit-field-node",y&&"node-selected"),onMouseDown:k,onContextMenu:g},E),r.createElement(Ct,{nodeId:e,bounds:O}),c(r.createElement(Et,{nodeId:e})))})),Ct=r.memo((function({nodeId:e,bounds:t}){const n=(0,L.Z)(ie),o=(0,L.Z)((t=>((e,t)=>{switch(e.services.circuitEditorUiSettings.nodeNameMode){case"all":default:return(0,W.uk)(e,t);case"named-only":return(0,W.p2)(e,t);case"none":return null}})(t,e))),i=Math.max(.7,n);let s=15;return i>1?s-=2*i:s+=1/i*7,o?r.createElement("text",{fontSize:1.2/i+"em",className:tt.Z["text-unselectable"],textAnchor:"middle",x:t[0]+(t[2]-t[0])/2,y:t[3]+s},o):null})),Nt=Ot,jt=r.memo((function(){const e=(0,L.Z)(Qe.f).map((e=>r.createElement(Nt,{key:e,nodeId:e})));return r.createElement("g",{id:"nodes-layer"},e)}));var xt=n(5879);const Pt=n.n(xt)()(((e,t,n)=>e.services.nodeGraph.connectionsById[n]),((e,t)=>t),(e=>e.services.simulatorGraph.simulatorNodeIdsByCircuitNodeId),(e=>e.services.simulator.nodeOutputValuesByNodeId),((e,t,n,r)=>{var o;if(!e)return!1;const{outputPin:{nodeId:i,pinId:s}}=e,c=(0,nt.F9)(n,[...t,i]);return c&&(null===(o=r[c])||void 0===o?void 0:o[s])||!1}))(((e,t,n)=>t.join(".")+"::"+n));var wt=n(1883),Bt=n(4691);const Mt=r.memo((function({connectionId:e,startJointId:t,endJointId:n}){const o=(0,i.I0)(),s=we(),c=(0,L.Z)((n=>null==t?(0,ne.qX)(n,e):(0,ne.oW)(n,t))),a=(0,L.Z)((t=>null==n?(0,ne.wR)(t,e):(0,ne.oW)(t,n))),[l,d]=r.useState(null),u=r.useCallback((e=>{const t=s(e);d(t)}),[s]),p=r.useCallback((()=>{d(null)}),[]),y=r.useCallback((n=>{const r=s(n),i=(0,je.h)(n);o((0,wt.gM)(e,t,r,i))}),[s,o,e,t]),m=r.useCallback(((e,t)=>{const n=s(t),r=(0,je.h)(t);o((0,Pe.ey)(n,r))}),[o,s]),f=r.useCallback((e=>{const t=s(e),n=(0,je.h)(e);o((0,Ve.k4)(t,n))}),[o,s]),g=r.useCallback((t=>{const n=(0,je.h)(t),r=(0,et.t)(n);o((0,Bt.Rp)(e,r))}),[e,o]),{startTracking:I}=Ke({onClick:g,onDragStart:y,onDragMove:m,onDragEnd:f}),v=r.useCallback((e=>{e.preventDefault(),I(e)}),[I]);let h;if(l){const e=(0,Q.Fv)((0,Q.sj)(a,c)),t=(0,Q.sj)(l,c),n=(0,Q.Ih)(t,e);h=(0,Q.ZO)(c,(0,Q.bA)(e,n))}return r.createElement("g",{onMouseMove:u,onMouseLeave:p},r.createElement("line",{x1:c.x,y1:c.y,x2:a.x,y2:a.y,strokeWidth:2}),h&&r.createElement("circle",{cx:h.x,cy:h.y,r:3,stroke:"none",fill:"red",onMouseDown:v}))}));var St=n(2571),Zt=n(713);const Dt=r.memo((function({jointId:e}){const t=we(),n=(0,i.I0)(),o=(0,L.Z)((t=>(0,Le.g7)(t,e))),s=(0,L.Z)((t=>(0,ne.oW)(t,e))),c=r.useCallback((r=>{const o=t(r),i=(0,je.h)(r);n((0,Zt.R4)(e,o,i))}),[n,t,e]),a=r.useCallback(((e,r)=>{const o=t(r),i=(0,je.h)(r);n((0,Pe.ey)(o,i))}),[n,t]),l=r.useCallback(((e,r)=>{const o=t(r),i=(0,je.h)(r);n((0,Ve.k4)(o,i))}),[n,t]),d=r.useCallback((t=>{const r=(0,je.h)(t),o=(0,et.t)(r);n((0,St.a2)(e,o))}),[n,e]),{startTracking:u}=Ke({onClick:d,onDragStart:c,onDragMove:a,onDragEnd:l}),p=r.useCallback((e=>{e.preventDefault(),u(e)}),[u]);return r.createElement(Ue,{selected:o,x:s.x,y:s.y,onMouseDown:p})})),Jt=r.memo((function({connectionId:e}){const t=(0,L.Z)(z.se),n=(0,L.Z)((t=>(0,ne.qq)(t,e))),o=(0,L.Z)((n=>Pt(n,t,e))),i=(0,L.Z)((t=>(0,Le.nG)(t,e))),s=[...n,null].map(((t,o)=>{const i=o>0?n[o-1]:null;return r.createElement(Mt,{key:o,connectionId:e,startJointId:i,endJointId:t})})),c=n.map((e=>r.createElement(Dt,{key:e,jointId:e})));return r.createElement("g",{className:(0,l.yI)("wire--3TtqK",o&&"powered--3lHhu",i&&"selected--3qbV0")},s,c)})),Rt=r.memo((function(){const e=(0,L.Z)(Qe.G).map((e=>r.createElement(Jt,{key:e,connectionId:e})));return r.createElement("g",{id:"wires-layer"},e)}));var Tt=n(9203),Lt=n(3065),At=n(4206);const zt="is-drag-target--1_8nq";function Wt(e,t,n,r,o){const i=Ut(e,t,n,o),s=Ut(e,t,n,r),c=o-r<=180?"0":"1";return["M",i.x,i.y,"A",n,n,0,c,0,s.x,s.y].join(" ")}function Ut(e,t,n,r){const o=(r-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}}const Ft=r.memo((function({nodeId:e,pinId:t}){const n=we(),o=(0,i.I0)(),s=(0,L.Z)((n=>(0,Tt.G)(n,e,t))),c=(0,L.Z)((n=>(0,Lt.k_)(n,e,t))),a=(0,L.Z)(xe.qO),d=r.useCallback((r=>{const i=n(r);o((0,At.V)(i,{nodeId:e,pinId:t}))}),[o,n,e,t]),u=r.useCallback(((e,t)=>{const r=n(t),i=(0,je.h)(t);o((0,Pe.ey)(r,i))}),[o,n]),p=r.useCallback(((e,t)=>{const r=n(t),i=(0,je.h)(t);o((0,Ve.k4)(r,i))}),[o,n]),{startTracking:y}=Ke({onDragStart:d,onDragMove:u,onDragEnd:p}),m=r.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),y(e)))}),[y]);if(!s)return null;const f=null!=a&&a.nodeId===e&&a.pinId===t,{x:g,y:I}=s;let v;return v="input"===c?r.createElement("path",{d:Wt(g,I,3,-45,225),className:(0,l.yI)("node-pin-input--2bnnb",f&&zt)}):r.createElement("circle",{className:(0,l.yI)("node-pin-output--Okd03",f&&zt),cx:g,cy:I,r:3}),r.createElement("g",null,v,r.createElement("circle",{stroke:"none",fill:"transparent",cx:g,cy:I,r:3,onMouseDown:m}))})),Ht=r.memo((function({nodeId:e}){var t;const n=(0,L.Z)((t=>(0,it.m)(t,e))),o=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},i=Object.keys(o).map((t=>r.createElement(Ft,{key:t,nodeId:e,pinId:t})));return r.createElement(r.Fragment,null,i)})),Kt=r.memo((function(){const e=(0,L.Z)(Qe.f).map((e=>r.createElement(Ht,{key:e,nodeId:e})));return r.createElement("g",{id:"node-pins-layer"},e)})),qt=r.memo((function(){const e=(0,L.Z)(xe.rC),t=(0,L.Z)(xe.zL),n=(0,L.Z)(xe.Ll);return"wire"==e&&t&&n?r.createElement("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"black",strokeWidth:1}):null})),_t=()=>{const e=(0,i.I0)(),t=r.useCallback((()=>{e((0,lt.Fs)())}),[e]),n=r.useCallback((()=>{e((0,S.NE)())}),[e]);return r.createElement(gt,null,r.createElement(It,{onClick:t},"Align Selection To Grid"),r.createElement(vt,null),r.createElement(It,{onClick:n},"Delete Selected"))},Vt=({className:e})=>{const t=(0,i.I0)(),n=r.useRef(null),o=r.useRef(null),s=r.useRef(null),{openContextMenu:c,renderContextMenu:a}=ke(),{width:d,height:u}=X()(n),p=(0,L.Z)(oe),{width:y,height:m}=(0,Q.nF)(p),f=(0,L.Z)(ie),g=Math.max(d,y*f),I=Math.max(u,m*f),v=r.useCallback((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),[]),h=r.useCallback((()=>{t((0,se.xr)())}),[t]),b=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),c(e))}),[c]),k=r.useCallback((e=>{e.defaultPrevented||e.ctrlKey&&(t((0,ce.iM)(e.deltaY>0?-1:1)),e.preventDefault(),e.stopPropagation())}),[t]);var E,O,C,N;return E=n,O="wheel",C=k,N={passive:!1},r.useEffect((()=>{if(!E.current)return;const e=E.current;return e.addEventListener(O,C,N),()=>{e.removeEventListener(O,C,N)}}),[O,C,E,N]),r.createElement("div",{className:(0,l.yI)("circuit-field","circuit-field--3PQBN",e)},r.createElement("div",{className:"circuit-field-scrollarea--vyu82"},r.createElement("div",{ref:n,style:{width:"100%",height:"100%"}},r.createElement("svg",{tabIndex:-1,ref:o,width:g,height:I,onMouseDown:v,onMouseLeave:h,onContextMenu:b},r.createElement(Xe,null),r.createElement("g",{ref:s,"transform-origin":"0 0",transform:`scale(${f})`},r.createElement(Ne,{svgRef:o,scalerRef:s},r.createElement(Ge,null),r.createElement(jt,null),r.createElement(Rt,null),r.createElement(Kt,null),r.createElement(qt,null),r.createElement(We,null),r.createElement(He,null),r.createElement(Se,null)))))),a(r.createElement(_t,null)))};var Gt=n(5667);const Xt="keymap:CircuitEditor/SimStep",Qt="keymap:CircuitEditor/SimFastForward",Yt="keymap:CircuitEditor/SelectAll",$t="keymap:CircuitEditor/Copy",en="keymap:CircuitEditor/Paste",tn="keymap:CircuitEditor/Delete",nn="keymap:CircuitEditor/Undo",rn="keymap:CircuitEditor/Redo",on={[Xt]:"space",[Qt]:"shift+space",[Yt]:Gt.t+"+a",[$t]:Gt.t+"+c",[en]:Gt.t+"+v",[tn]:["backspace","del"],[nn]:Gt.t+"+z",[rn]:[Gt.t+"+y",Gt.t+"+shift+z"]};const sn=e=>{var{children:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["children"]);return r.createElement("div",Object.assign({},n,{className:u}),t)};var cn=n(5984),an=n(7252),ln=n(1314);const dn=({value:e,label:t,isSelected:n,onItemSelected:o})=>{const i=r.useCallback((t=>{t.defaultPrevented||(t.preventDefault(),o(e))}),[o,e]);return r.createElement("li",{className:(0,l.yI)("selection-list-item","selection-list-item--errDr",n&&"selection-list-item--selected--3MkqB"),onClick:i},r.createElement("div",{className:(0,l.yI)("selection-list-item-content--321YU",tt.Z["text-unselectable"])},t))},un=({className:e,items:t,onItemSelected:n})=>r.createElement("ul",{className:(0,l.yI)("selection-list","selection-list--3yujH",e)},t.map((e=>r.createElement(dn,Object.assign({key:e.value},e,{onItemSelected:n}))))),pn=({circuitId:e})=>{const t=(0,i.I0)(),n=(0,L.Z)((t=>(0,K.w)(t,e))),[o,s]=r.useState(!1),{openContextMenu:c,renderContextMenu:a}=ke(),l=r.useCallback((()=>{e!==F.u&&s(!0)}),[e]),d=r.useCallback((()=>{s(!1)}),[]),u=r.useCallback((n=>{t((0,ln.U3)(e,n)),s(!1)}),[e,t]),p=r.useCallback((n=>{n.preventDefault(),t((0,cn.Zj)(e))}),[t,e]),y=r.useCallback((t=>{e!==F.u&&(t.preventDefault(),t.stopPropagation(),c(t))}),[e,c]);return r.createElement("div",{style:{width:"100%"},onContextMenu:y,onDoubleClick:l},r.createElement(bt,{defaultValue:n,isEditing:o,onRequestEdit:l,onCommit:u,onCancel:d}),a(r.createElement(gt,null,r.createElement(It,{onClick:l},"Rename Circuit"),r.createElement(vt,null),r.createElement(It,{onClick:p},"Delete Circuit"))))},yn=()=>{const e=(0,i.I0)(),t=r.useCallback((()=>{e((0,an._Y)())}),[e]);return r.createElement(gt,null,r.createElement(It,{onClick:t},"New Circuit"))},mn=({className:e})=>{const t=(0,i.I0)(),n=(0,L.Z)(z.Gl),o=(0,L.Z)(K.nR),{openContextMenu:s,renderContextMenu:c}=ke(),a=r.useCallback((e=>{t((0,A._A)(e))}),[t]),d=r.useCallback((e=>{e.preventDefault(),s(e)}),[s]),p=r.useMemo((()=>Object.keys(o).map((e=>({value:e,label:r.createElement(pn,{circuitId:e}),isSelected:e===n})))),[o,n]);return r.createElement("div",{className:(0,l.yI)("circuitstree--1eZ0Q",e),onContextMenu:d},r.createElement(un,{className:u,items:p,onItemSelected:a}),c(r.createElement(yn,null)))};var fn=n(5273),gn=n(8554);const In=({nodeType:e})=>{const t=(0,i.I0)(),n=r.useCallback((n=>{n.defaultPrevented||(n.preventDefault(),t((0,fn.gz)(e)))}),[t,e]),o=r.useCallback((()=>{t((0,gn.Yf)(e))}),[t,e]),s=r.useCallback((()=>{t((0,Ve.k4)({x:-1,y:-1},je.J))}),[t]),{startTracking:c}=Ke({onClick:n,onDragStart:o,onDragEnd:s}),a=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),c(e))}),[c]),l=(0,L.Z)((t=>(0,Be.yP)(t,e)));let d,u=e,p="0 0 50 50";if(l){const{trayComponent:e,component:t,hitPath:n}=l.visual;e?d=e:(d=()=>{const e=t;return r.createElement(e,{elementState:{}})},p=$e()(n).join(" ")),u=l.displayName}else d=()=>r.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50});return r.createElement("li",{className:"node-tray-item--2_AyH",onMouseDown:a},r.createElement("span",{className:"node-tray-item-preview--2QFhF"},r.createElement("svg",{width:30,height:30,viewBox:p},r.createElement(d,null))),r.createElement("span",{className:tt.Z["text-unselectable"]},u))},vn={"node-tray":({className:e})=>{const t=(0,L.Z)(Be.NJ).map((e=>r.createElement(In,{key:e.type,nodeType:e.type})));return r.createElement("div",{className:(0,l.yI)("node-tray--1uIvj",e)},r.createElement("ul",{className:"node-tray-elements--KiJGM"},t))},"circuit-field":({className:e})=>{const t=(0,i.I0)(),n=r.useMemo((()=>{function e(e){return n=>{if(n){if(n.defaultPrevented)return;n.preventDefault()}t(e)}}return{[Xt]:e((0,P.jf)(1)),[Qt]:e((0,w.C2)()),[Yt]:e((0,Z.td)()),[$t]:e((0,M.qn)()),[en]:e((0,B.v)()),[tn]:e((0,S.NE)()),[nn]:e((0,D.Yw)()),[rn]:e((0,J.KX)())}}),[t]);return r.createElement(x.HotKeys,{keyMap:on,handlers:n,component:sn},r.createElement("div",{className:(0,l.yI)("circuit-field-view",u,d["flex-column"],e)},r.createElement(V,null),r.createElement(Vt,{className:(0,l.yI)(u,d["flexitem-shrink"])})))},"circuits-list":mn};function hn(e){const t=vn[e.windowId];return t?r.createElement(t,Object.assign({},e.windowProps)):null}const bn=()=>{const[e,t]=r.useState({direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"node-tray"},second:"circuit-field"});return r.createElement(j,{className:(0,l.yI)("circuit-editor",u),rootItem:e,onLayoutChange:t,renderWindow:hn})};var kn=n(7198);const En=({location:e})=>{const t=(0,i.I0)(),[n,o]=r.useState(!1);return r.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void o(!0)}const r=n.get("data");r?t((0,kn.vP)(r)):o(!0)}),[]),n?r.createElement("div",null,"Failed to import project"):r.createElement("div",null,"Importing Project...")},On=()=>r.createElement(s.rs,null,r.createElement(s.AW,{exact:!0,path:"/",component:bn}),r.createElement(s.AW,{exact:!0,path:"/import",component:En})),Cn=({content:e,placement:t,children:n})=>{const o=r.useRef(null),[i,s]=r.useState(!1),c=r.useCallback((()=>{s(!0)}),[]),a=r.useCallback((()=>{s(!1)}),[]);return r.createElement(de,{value:a},r.createElement("div",{ref:o,onClick:c},n),r.createElement(he,{anchorEl:o.current,isOpen:i,placement:t,onRequestClose:a},i&&e))};function Nn(e,...t){const n=(0,i.I0)();return r.useCallback(((...r)=>{const o=e(...t,...r);o&&n(o)}),[n,e,...t])}var jn=n(38),xn=n(3069),Pn=n(6577),wn=n(4505);const Bn=()=>{const e=Nn(jn.o9),t=Nn(xn.UI),n=Nn(Pn.Cb),o=Nn(wn.C9);return r.createElement(gt,null,r.createElement(It,{onClick:e},"New"),r.createElement(vt,null),r.createElement(It,{onClick:n},"Load"),r.createElement(It,{onClick:t},"Save"),r.createElement(vt,null),r.createElement(It,{onClick:o},"Export Link"))},Mn=e=>e.undo.undoStack.length>0,Sn=e=>e.undo.redoStack.length>0,Zn=()=>{const e=(0,L.Z)(Mn),t=Nn(D.Yw),n=(0,L.Z)(Sn),o=Nn(J.KX);return r.createElement(gt,null,r.createElement(It,{disabled:!e,secondary:Gt.t+"+z",onClick:t},"Undo"),r.createElement(It,{disabled:!n,secondary:Gt.t+"+shift+z",onClick:o},"Redo"))};var Dn=n(5842);const Jn=({className:e,value:t,onChange:n,children:o})=>r.createElement("label",{className:e},r.createElement("span",{className:"checkbox-span--1EWGs"},r.createElement("input",{type:"checkbox",checked:t,onChange:n})),o),Rn=({disabled:e,secondary:t,value:n,onChange:o,children:i})=>r.createElement("li",{className:(0,l.yI)(ut,e&&pt)},r.createElement(Jn,{className:yt,value:n,onChange:o},r.createElement("span",{className:mt},i),t&&r.createElement("span",{className:ft},t))),Tn=({disabled:e,secondary:t,content:n,children:o})=>r.createElement("li",{className:(0,l.yI)(ut,e&&pt)},r.createElement(Cn,{placement:"right-start",content:n},r.createElement("a",{className:yt},r.createElement("span",{className:mt},o),t&&r.createElement("span",{className:ft},t),r.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},r.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),Ln=()=>{const e=(0,L.Z)(st),t=Nn(Dn.pi,"all"),n=Nn(Dn.pi,"named-only"),o=Nn(Dn.pi,"none");return r.createElement(gt,null,r.createElement(Rn,{value:"all"===e,onChange:t},"Always visible"),r.createElement(Rn,{value:"named-only"===e,onChange:n},"Named Items Only"),r.createElement(Rn,{value:"none"===e,onChange:o},"Hidden"))},An=()=>r.createElement(gt,null,r.createElement(Tn,{content:r.createElement(Ln,null)},"Element Names"));var zn=n(8910),Wn=n(737),Un=n(8261);const Fn=(0,n(6036).g)((e=>e.lastTickProcessingTimeMs)),Hn=e=>r.createElement("svg",Object.assign({width:16,height:16},e),r.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),Kn=e=>r.createElement("svg",Object.assign({width:16,height:16},e),r.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),qn=e=>r.createElement("svg",Object.assign({width:16,height:16},e),r.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),_n="button--1Syge",Vn=()=>{const e=(0,L.Z)(ot.D7),t=(0,L.Z)(ot.Ro),n=(0,L.Z)(Fn),o=Nn(zn.Fr),i=Nn(Wn.Sk),s=Nn(Un.ri,"toggle");return r.createElement("span",null,e&&r.createElement("span",{className:"simrate--1LNMp"},n.toFixed(2)," ms"),e?r.createElement(Kn,{className:(0,l.yI)(_n,"button-stop--264bH"),onClick:i}):r.createElement(Hn,{className:(0,l.yI)(_n,"button-play--3gVDD"),onClick:o}),r.createElement(qn,{className:(0,l.yI)(_n,"button-pause--YWEL8",!e&&"button--disabled--2BVJb",t&&"selected--QetqX"),onClick:s}))},Gn=({className:e})=>r.createElement("div",{className:(0,l.yI)("titlebar--3-TCE",e)},r.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),r.createElement("div",{className:"titlebar-divider--Wl_27"}),r.createElement(Cn,{content:r.createElement(Bn,null),placement:"bottom-start"},r.createElement(H,null,"File")),r.createElement(Cn,{content:r.createElement(Zn,null),placement:"bottom-start"},r.createElement(H,null,"Edit")),r.createElement(Cn,{content:r.createElement(An,null),placement:"bottom-start"},r.createElement(H,null,"View")),r.createElement("div",{className:"titlebar-controls--1R_l6"},r.createElement(Vn,null)));var Xn=n(2047);const Qn=(0,Xn.m)((e=>e.dialogType)),Yn=(0,Xn.m)((e=>e.data));var $n=n(5222),er=n(227),tr=n(1074);const nr=({className:e,isOpen:t,onRequestClose:n,children:i})=>t?(0,o.createPortal)(r.createElement("div",{className:(0,l.yI)("modal","modal--25LBN")},r.createElement(er.Y,{onClickOutside:n,onEscapeKey:n},r.createElement("div",{className:(0,l.yI)("modal-content--1H0T_",e)},r.createElement(tr.Z,{className:u},i)))),document.body):null,rr=({isOpen:e,acceptText:t,cancelText:n,onAccept:o,onCancel:i,footer:s,children:c})=>r.createElement(nr,{className:"dialog--1eQi6",isOpen:e,onRequestClose:i},r.createElement("div",null,c),r.createElement("div",{className:"dialog-footer--2hYdr"},s,i&&r.createElement(H,{onClick:i},null!=n?n:"Cancel"),o&&r.createElement(H,{onClick:o},null!=t?t:"Accept"))),or=()=>{const e=Nn($n.GA),t=(0,L.Z)(Yn),n=null==t?void 0:t.projectLink,o=r.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const i=r.createElement(H,{onClick:o},"Copy to Clipboard");return r.createElement(rr,{isOpen:!0,cancelText:"Close",onCancel:e,footer:i},r.createElement("div",{className:"export-link-dialog-link-container--Zas2L"},r.createElement("code",{className:"export-link-dialog-link--7r7uE"},n)))},ir=()=>{switch((0,L.Z)(Qn)){default:return null;case"export-project-link":return r.createElement(or,null)}},sr=document.getElementById("root");o.render(r.createElement(s.F0,{history:c.Z},r.createElement(i.zt,{store:a.h},r.createElement((()=>r.createElement("div",{className:(0,l.yI)(u,d["flex-column"])},r.createElement(Gn,{className:d["flexitem-fix"]}),r.createElement("div",{className:(0,l.yI)(u,d["flexitem-shrink"])},r.createElement(On,null)),r.createElement(ir,null))),null))),sr)},2550:(e,t,n)=>{"use strict";n.d(t,{J:()=>o,h:()=>i});var r=n(5667);const o=Object.freeze({});function i(e){const{ctrlKey:t,altKey:n,shiftKey:o,metaKey:i}=e;return{ctrlMetaKey:r.f?i:t,altKey:n,shiftKey:o}}},5667:(e,t,n)=>{"use strict";n.d(t,{f:()=>o,t:()=>i});var r=n(1795);const o=/(Mac|iOS|OS\ X)/.test((r.os||"undefined").toString()),i=o?"command":"ctrl"},3871:(e,t,n)=>{"use strict";n.d(t,{t:()=>c,a:()=>a});var r=n(3386),o=n.n(r),i=n(1966),s=n.n(i);function c(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function a(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return o()(e,t);case"remove":return s()(e,t);case"toggle":return s()(e,t).concat(s()(t,e))}return t}},6773:(e,t,n)=>{"use strict";n.d(t,{rC:()=>u,zL:()=>p,Ll:()=>y,xn:()=>f,KQ:()=>g,pc:()=>I,y_:()=>v,Ny:()=>h,qO:()=>b});var r=n(2222),o=n(8370),i=n(2550),s=n(9203),c=n(7836),a=n(5878),l=n(2951),d=n(1556);const u=(0,l.k)((e=>e.dragMode)),p=(0,l.k)((e=>e.dragStart)),y=(0,l.k)((e=>e.dragEnd)),m=(0,l.k)((e=>{var t;return null!==(t=e.dragModifierKeys)&&void 0!==t?t:i.J})),f=(0,l.k)((0,r.createSelector)(u.local,p.local,y.local,((e,t,n)=>"select"===e&&t&&n?(0,o.Qu)(t,n):null))),g=(0,r.createSelector)(u,c.d4,m,p,y,d.pf,d.Fv,((e,t,n,r,i,s,c)=>{if("move"!==e||!r||!i)return null;let a=c;t.length>0&&(a=s);const l=(0,o.sj)(i,r);return n.ctrlMetaKey||(l.x=Math.round(l.x/a)*a,l.y=Math.round(l.y/a)*a),l})),I=(0,l.k)((e=>{const t=d.Fv.local(e),{dragMode:n,dragEnd:r,dragModifierKeys:o}=e;if("new-joint"!==n||!r||!o)return null;const i=Object.assign({},r);return o.ctrlMetaKey||(i.x=Math.round(i.x/t)*t,i.y=Math.round(i.y/t)*t),i})),v=(0,l.k)((e=>"new-node"===e.dragMode)),h=(0,l.k)((e=>"new-node"===e.dragMode?e.dragNewNodeType:null)),b=(0,r.createSelector)(u,y,a.f,s.x,((e,t,n,r)=>{var i;if("wire"!==e||!t)return null;for(const e of n){const n=null!==(i=r[e])&&void 0!==i?i:o.Ds,s=Object.keys(n);for(const r of s){const i=n[r],s=(0,o.sj)(t,i);if((0,o.VE)(s)<=6)return{nodeId:e,pinId:r}}}return null}))},1556:(e,t,n)=>{"use strict";n.d(t,{pf:()=>o,Fv:()=>i,ph:()=>s,aj:()=>c});var r=n(2951);const o=(0,r.k)((()=>50)),i=(0,r.k)((()=>5)),s=(e,t)=>{const n=o(e);return{x:Math.round(t.x/n)*n,y:Math.round(t.y/n)*n}},c=(e,t)=>{const n=i(e);return{x:Math.round(t.x/n)*n,y:Math.round(t.y/n)*n}}},2951:(e,t,n)=>{"use strict";n.d(t,{N:()=>o,k:()=>i});var r=n(9963);const o=(0,r.R)("circuitEditorUiDrag"),i=(0,r.e)("circuitEditorUiDrag")},6147:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,h:()=>i});var r=n(9963);const o=(0,r.R)("circuitEditorUiSettings"),i=(0,r.e)("circuitEditorUiSettings")},961:(e,t,n)=>{"use strict";n.d(t,{Gl:()=>s,se:()=>c,WU:()=>a});var r=n(5054),o=n(9977),i=n(9990);const s=(0,i.u)((e=>e.editingCircuitId)),c=(0,i.u)((e=>{var t;return null!==(t=e.editingCircuitNodeIdPath)&&void 0!==t?t:(0,r.f)()})),a=e=>(0,o.w)(e,s(e))},5878:(e,t,n)=>{"use strict";n.d(t,{G:()=>l,f:()=>a});var r=n(8133),o=n(2222),i=n(6486);const s=(0,o.createSelector)(((e,t)=>(0,r.U4)(e,t)),(e=>e.services.nodeGraph.connectionsById),((e,t)=>Object.keys(t).filter((n=>{const{inputPin:r,outputPin:o}=t[n];return!!(0,i.includes)(e,r.nodeId)&&!!(0,i.includes)(e,o.nodeId)}))));var c=n(961);const a=e=>{const t=(0,c.Gl)(e);return(0,r.U4)(e,t)},l=e=>{const t=(0,c.Gl)(e);return s(e,t)}},9990:(e,t,n)=>{"use strict";n.d(t,{b:()=>o,u:()=>i});var r=n(9963);const o=(0,r.R)("circuitEditorUiViewport"),i=(0,r.e)("circuitEditorUiViewport")},6222:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});const r="root"},9977:(e,t,n)=>{"use strict";n.d(t,{Nd:()=>o,nR:()=>i,w:()=>s});var r=n(8628);const o=(0,r.b)((e=>Object.keys(e.circuitNamesByCircuitId))),i=(0,r.b)((e=>e.circuitNamesByCircuitId)),s=(0,r.b)(((e,t)=>e.circuitNamesByCircuitId[t]))},8133:(e,t,n)=>{"use strict";n.d(t,{oh:()=>o,U4:()=>i,RW:()=>s});var r=n(8628);const o=(0,r.b)((e=>e.nodeIdsByCircuitId)),i=(0,r.b)(((e,t)=>e.nodeIdsByCircuitId[t])),s=(0,r.b)(((e,t)=>{for(const n of Object.keys(e.nodeIdsByCircuitId))if(-1!==e.nodeIdsByCircuitId[n].indexOf(t))return n;return null}))},8628:(e,t,n)=>{"use strict";n.d(t,{v:()=>o,b:()=>i});var r=n(9963);const o=(0,r.R)("circuits"),i=(0,r.e)("circuits")},2047:(e,t,n)=>{"use strict";n.d(t,{L:()=>o,m:()=>i});var r=n(9963);const o=(0,r.R)("dialog"),i=(0,r.e)("dialog")},5637:(e,t,n)=>{"use strict";n.d(t,{DH:()=>c,PB:()=>a,rl:()=>l,ij:()=>d,Me:()=>u,lZ:()=>p});var r=n(2628),o=n.n(r),i=n(2222),s=n(3562);const c=(0,s.Z)((e=>e.connectionsById)),a=(0,s.Z)((0,i.createSelector)((e=>e.connectionsById),(e=>Object.keys(e)))),l=(0,s.Z)(((e,t)=>e.connectionsById[t])),d=(0,s.Z)((0,i.createSelector)((e=>e.connectionsById),(e=>o()(e)))),u=(0,s.Z)(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].inputPin.nodeId===t)))),p=(0,s.Z)(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].outputPin.nodeId===t))))},4368:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=n(3304),o=n(5213);const i=(e,t)=>{const n=(0,o.og)(e,t);return n?(0,r.yP)(e,n):null}},5213:(e,t,n)=>{"use strict";n.d(t,{Xi:()=>c,Fm:()=>a,KO:()=>l,yX:()=>d,M6:()=>u,og:()=>p,uk:()=>y,p2:()=>m});var r=n(2222),o=n(6604),i=n.n(o),s=n(3562);const c=(0,s.Z)((e=>e.nodesById)),a=(0,s.Z)((0,r.createSelector)(c.local,(e=>Object.keys(e)))),l=(0,s.Z)((0,r.createSelector)(c.local,(e=>i()(e,(e=>e.nodeType))))),d=(0,s.Z)(((e,t)=>e.nodesById[t]||null)),u=(0,s.Z)(((e,t)=>{const n=[];for(const r of Object.keys(e.nodesById)){const{nodeType:o}=e.nodesById[r];o===t&&n.push(r)}return n})),p=(0,s.Z)(((e,t)=>{const n=d.local(e,t);return n?n.nodeType:null})),y=(0,s.Z)(((e,t)=>{var n;const r=d.local(e,t);return r?null!==(n=r.nodeName)&&void 0!==n?n:t.substr(0,4):null})),m=(0,s.Z)(((e,t)=>{const n=d.local(e,t);return n?n.nodeName:null}))},3065:(e,t,n)=>{"use strict";n.d(t,{k_:()=>a,LK:()=>l,Su:()=>d});var r=n(8133),o=n(1089),i=n(5637),s=n(4368),c=n(5213);const a=(e,t,n)=>{const r=(0,s.m)(e,t);if(!r)return null;const o=r.pins[n];return o?o.direction:null},l=(e,t)=>{const n=(0,i.ij)(e),r=(0,s.m)(e,t);if(!r)return{};let o=[];o=Object.keys(r.pins).filter((e=>"output"===r.pins[e].direction));const c=n.filter((e=>e.outputPin.nodeId===t)),a={};for(const e of o)a[e]=[];for(const e of c){const{outputPin:t,inputPin:n}=e;a[t.pinId].push(n)}return a},d=(e,t)=>{const n=(0,c.og)(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const i=(0,r.RW)(e,t);if(!i)return[];const s=(0,o.u)(i);return(0,c.M6)(e,s).map((e=>({nodeId:e,pinId:t})))}},3562:(e,t,n)=>{"use strict";n.d(t,{s:()=>o,Z:()=>i});var r=n(9963);const o=(0,r.R)("nodeGraph"),i=(0,r.e)("nodeGraph")},4150:(e,t,n)=>{"use strict";n.d(t,{g:()=>y});var r=n(2222),o=n(669),i=n.n(o),s=n(6604),c=n.n(s),a=n(8370),l=n(5213),d=n(3304),u=n(1486);const p=(0,r.createSelector)(d.MW,l.KO,((e,t)=>c()(t,(t=>{const n=e[t];return n?i()(n.visual.hitPath):[0,0,0,0]})))),y=(0,r.createSelector)(u.T,p,((e,t)=>c()(e,((e,n)=>{const r=t[n]||[0,0,0,0];return(0,a.Qu)({x:e.x+r[0],y:e.y+r[1]},{x:e.x+r[2],y:e.y+r[3]})}))))},9203:(e,t,n)=>{"use strict";n.d(t,{x:()=>a,G:()=>l});var r=n(2222),o=n(8370),i=n(5213),s=n(3304),c=n(1486);const a=(0,r.createSelector)(s.MW,c.T,i.KO,((e,t,n)=>{var r;const i={},s=Object.keys(n);for(const c of s){const s={};i[c]=s;const a=null!==(r=t[c])&&void 0!==r?r:o.Ds,l=n[c];if(!l)continue;const d=e[l];if(!d)continue;const u=Object.keys(d.pins);for(const e of u){const t=d.pins[e],n=(0,o.ZO)(a,t);s[e]=n}}return i})),l=(e,t,n)=>{var r;const i=a(e)[t];return i&&null!==(r=i[n])&&void 0!==r?r:o.Ds}},1486:(e,t,n)=>{"use strict";n.d(t,{T:()=>i,e:()=>s});var r=n(8370),o=n(2179);const i=(0,o.J)((e=>e.nodePositionsById)),s=(0,o.J)(((e,t)=>{var n;return null!==(n=e.nodePositionsById[t])&&void 0!==n?n:r.Ds}))},5393:(e,t,n)=>{"use strict";n.d(t,{qX:()=>l,wR:()=>d,II:()=>u,qq:()=>p,oW:()=>y,v5:()=>m});var r=n(8370),o=n(4368),i=n(2179),s=n(1486);const c={},a={},l=(e,t)=>{const{outputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],a=(0,o.m)(e,n);if(!a)return r.Ds;const l=(0,s.e)(e,n),d=c[t];if(d&&d.inputNodeDef===a&&d.inputNodePosition.x===l.x&&d.inputNodePosition.y===l.y)return d.outputPosition;let u=r.Ds;a&&a.pins[i]&&(u=a.pins[i]);const p=(0,r.ZO)(l,u);return c[t]={inputNodeDef:a,inputNodePosition:l,outputPosition:p},p},d=(e,t)=>{const{inputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],c=(0,o.m)(e,n);if(!c)return r.Ds;const l=(0,s.e)(e,n),d=a[t];if(d&&d.inputNodeDef===c&&d.inputNodePosition.x===l.x&&d.inputNodePosition.y===l.y)return d.outputPosition;let u=r.Ds;c&&c.pins[i]&&(u=c.pins[i]);const p=(0,r.ZO)(l,u);return a[t]={inputNodeDef:c,inputNodePosition:l,outputPosition:p},p},u=((0,i.J)((e=>Object.keys(e.wireJointPositionsByJointId))),(0,i.J)((e=>e.wireJointIdsByConnectionId))),p=(0,i.J)(((e,t)=>e.wireJointIdsByConnectionId[t])),y=(0,i.J)(((e,t)=>e.wireJointPositionsByJointId[t])),m=(0,i.J)((e=>e.wireJointPositionsByJointId))},2179:(e,t,n)=>{"use strict";n.d(t,{S:()=>o,J:()=>i});var r=n(9963);const o=(0,r.R)("nodeLayout"),i=(0,r.e)("nodeLayout")},4944:(e,t,n)=>{"use strict";n.d(t,{J:()=>l});var r=n(7294),o=n(9242),i=n(7165),s=n(1235),c=n(961);const a=({circuitNodeId:e,shapePath:t,hitPath:n,isSelected:a,elementState:l})=>{const d=(0,o.I0)(),u=(0,i.Z)(c.se),p=r.useCallback((t=>{e&&(t.defaultPrevented||(t.preventDefault(),d((0,s.zN)([...u,e]))))}),[e,d,u]);var y,m;const f=(y=t,m=l,(Array.isArray(y)?y:[y]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const t="function"==typeof e.fill?e.fill(m||{}):e.fill,n="function"==typeof e.stroke?e.stroke(m||{}):e.stroke,r="function"==typeof e.strokeWidth?e.strokeWidth(m||{}):e.strokeWidth;return{path:e.path,fill:t,stroke:n,strokeWidth:r}}))).map(((e,t)=>r.createElement("path",{key:t,d:e.path,fill:a?"goldenrod":e.fill,stroke:a?"goldenrod":e.stroke,strokeWidth:e.strokeWidth})));return r.createElement("g",{onClick:p},r.createElement("path",{d:n,fill:"transparent",stroke:"none"}),f)};function l(e,t){return{component:n=>r.createElement(a,Object.assign({shapePath:t,hitPath:e},n)),hitPath:e}}},1089:(e,t,n)=>{"use strict";function r(e){return"ic-"+e}function o(e){return e.startsWith("ic-")?e.substr(3):null}n.d(t,{u:()=>r,X:()=>o})},1186:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={type:"interaction-toggle",displayName:"Toggle Switch",elementProduction:"toggle",visual:(0,n(4944).J)("M5,5 L45,5 L45,45 L5,45 z",[{path:"M5,5 L45,5 L45,45 L5,45 z",fill:"#AFAFAF",stroke:"black"},{path:"M10,10 L40,10 L40,40 L10,40 z",fill:e=>e.toggleState?"lightgreen":"darkgreen",stroke:"black"}]),pins:{OUT:{direction:"output",x:45,y:25}}}},1894:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",i={type:"logic-and",displayName:"AND",elementProduction:"and",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M31 15H5M32 35H5"}),r.createElement("path",{className:"node-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},357:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",i={type:"logic-buffer",displayName:"Buffer",elementProduction:"buffer",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 72,25 L 95.085706,25"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),r.createElement("path",{className:"node-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))},pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},2074:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",i={type:"logic-nor",displayName:"NOR",elementProduction:"nor",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25h16M31 15H5M32 35H5"}),r.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"3",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},8061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z",i={type:"logic-not",displayName:"NOT",elementProduction:"not",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79.15691 25H95M29.043478 25h-24"}),r.createElement("path",{className:"node-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"3",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))},pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},6246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",i={type:"logic-or",displayName:"OR",elementProduction:"or",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M31 15H5M32 35H5"}),r.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2356:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",i={type:"logic-xor",displayName:"XOR",elementProduction:"xor",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M30.38572 15H5M31.3621 35H5"}),r.createElement("g",{fillRule:"evenodd",className:"node-select-highlight--fill"},r.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),r.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2944:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const r=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const o={type:"output-led",displayName:"Indicator Light",elementProduction:"led",visual:(0,n(4944).J)(r,{path:r,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},1460:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(4944);const o=[15,0];function i(e,t){const n=t[0];let r=`M${3*n[0]+o[0]},${3*n[1]+o[1]}`;for(const e of t.slice(1)){const[t,n]=e;r+=`L${3*t+o[0]},${3*n+o[1]}`}return r+="z",{path:r,fill:t=>t[e]?"red":"gray"}}const s={type:"output-seg7",displayName:"7-Segment Display",elementProduction:"seg7",visual:(0,r.J)("M15,0 V63 H45 V0 z",[i("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),i("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),i("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),i("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),i("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),i("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),i("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},2554:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",i={type:"pin-input",displayName:"Input Pin",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h5",stroke:"black",fill:"none"}))},pins:{OUT:{direction:"output",x:40,y:25}}}},8420:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const o="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",i={type:"pin-output",displayName:"Output Pin",visual:{hitPath:o,component:()=>r.createElement("g",null,r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-5",stroke:"black",fill:"none"}))},pins:{IN:{direction:"input",x:10,y:25}}}},3304:(e,t,n)=>{"use strict";n.d(t,{yP:()=>S,MW:()=>M,NJ:()=>B});var r=n(4654),o=n.n(r),i=n(3311),s=n.n(i),c=n(5054),a=n(2222),l=n(9734),d=n.n(l),u=n(8133),p=n(6222),y=n(5213),m=n(1486),f=n(7294),g=n(9242),I=n(2334),v=n(7165),h=n(7930),b=n(9977),k=n(961);function E(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}const O=({circuitNodeId:e,circuitId:t,inputPinCount:n,outputPinCount:r})=>{const o=(0,g.I0)(),i=(0,v.Z)((e=>(0,b.w)(e,t))),s=E(n,r),c=(0,v.Z)(k.se),a=f.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),o((0,h._A)(t,[...c,e]))))}),[t,e,o,c]),l=[];for(let e=0;e<n;e++){const t=50*e+25;l.push(f.createElement("line",{key:e,className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:0,y1:t,x2:10,y2:t}))}const d=[];for(let e=0;e<r;e++){const t=50*e+25;d.push(f.createElement("line",{key:e,className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:t,x2:100,y2:t}))}return f.createElement("g",null,f.createElement("path",{className:"node-select-highlight--stroke",stroke:"black",fill:"transparent",d:s,onDoubleClick:a}),f.createElement("text",{className:I.Z["text-unselectable"],textAnchor:"middle",x:50,y:30},i),l,d)},C=()=>f.createElement("g",{stroke:"black",strokeWidth:1},f.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),f.createElement("line",{x1:10,y1:15,x2:5,y2:15}),f.createElement("line",{x1:40,y1:15,x2:45,y2:15}),f.createElement("line",{x1:10,y1:35,x2:5,y2:35}),f.createElement("line",{x1:40,y1:35,x2:45,y2:35}));function N(e,t,n){const r={circuitId:e,inputPinCount:t,outputPinCount:n};return{hitPath:E(t,n),trayComponent:e=>f.createElement(C,Object.assign({},r,e)),component:e=>f.createElement(O,Object.assign({},r,e))}}function j(e,t){return{x:"input"===t?0:100,y:50*e+25}}var x=n(1089);const P=[(0,a.createSelector)(u.oh,y.KO,m.T,b.nR,((e,t,n,r)=>Object.keys(e).filter((e=>e!==p.u)).map((o=>{var i,s;const c=null!==(i=e[o])&&void 0!==i?i:[],a=null!==(s=r[o])&&void 0!==s?s:o.substr(0,5);let l=c.filter((e=>t[e].startsWith("pin-")));l=d()(l,(e=>n[e].y),(e=>n[e].x));const u={};let p=0,y=0;for(const e of l){const n=t[e];"pin-input"===n?(u[e]=Object.assign({direction:"input"},j(p,"input")),p++):"pin-output"===n&&(u[e]=Object.assign({direction:"output"},j(y,"output")),y++)}return{type:(0,x.u)(o),displayName:a,elementProduction:{type:"circuit",circuitId:o},visual:N(o,p,y),pins:u}})))),n(1186).Z,n(1894).Z,n(357).Z,n(2074).Z,n(8061).Z,n(6246).Z,n(2356).Z,n(2944).Z,n(1460).Z,n(2554).Z,n(8420).Z];let w=[];const B=e=>{const t=o()(P,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,(0,c._)(n)}(t,e)));return t.every(((e,t)=>e===w[t]))?w:(w=t,t)},M=(0,a.createSelector)(B,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),S=(e,t)=>{var n;const r=B(e);return null!==(n=s()(r,(e=>e.type===t)))&&void 0!==n?n:null}},7836:(e,t,n)=>{"use strict";n.d(t,{d4:()=>a,CP:()=>l,nG:()=>d,O5:()=>u,g7:()=>p});var r=n(2222),o=n(8718),i=n.n(o),s=n(5213),c=n(9286);const a=(0,c.m)((e=>e.selectedNodeIds)),l=(0,c.m)(((e,t)=>-1!==e.selectedNodeIds.indexOf(t))),d=((0,r.createSelector)(s.Xi,a,((e,t)=>i()(e,t))),(0,c.m)((e=>e.selectedConnectionIds)),(0,c.m)(((e,t)=>-1!==e.selectedConnectionIds.indexOf(t)))),u=(0,c.m)((e=>e.selectedJointIds)),p=(0,c.m)(((e,t)=>-1!==e.selectedJointIds.indexOf(t)))},9286:(e,t,n)=>{"use strict";n.d(t,{V:()=>o,m:()=>i});var r=n(9963);const o=(0,r.R)("selection"),i=(0,r.e)("selection")},9963:(e,t,n)=>{"use strict";n.d(t,{R:()=>i,e:()=>s});var r=n(3132),o=n(6600);function i(e){return t=>(n=r._,i)=>{const s=t(n.services[e],i,n);return n.services[e]!=s?(0,o.cA)(n,"services",e,s):n}}function s(e){return t=>{const n=(n,...r)=>t(n.services[e],...r);return n.local=t,n}}},2619:(e,t,n)=>{"use strict";n.d(t,{D7:()=>o,yU:()=>i,Ro:()=>s,bg:()=>c});var r=n(4389);const o=(0,r.x)((e=>"edit"!==e.mode)),i=(0,r.x)((e=>"run"===e.mode)),s=(0,r.x)((e=>"pause"===e.mode)),c=(0,r.x)((e=>e.ticksPerSecond))},4389:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,x:()=>i});var r=n(9963);const o=(0,r.R)("simulatorControl"),i=(0,r.e)("simulatorControl")},1755:(e,t,n)=>{"use strict";n.d(t,{Ac:()=>a,OF:()=>l,F9:()=>d});var r=n(4654),o=n.n(r),i=n(7361),s=n.n(i),c=n(9963);const a=(0,c.R)("simulatorGraph"),l=(0,c.e)("simulatorGraph");function d(e,t){const n=o()(t,(e=>[e,"subCircuitIds"]));n.pop();const r=s()(e,n);if(!r)return null;const{simulatorNodeId:i}=r;return null!=i?i:null}},6036:(e,t,n)=>{"use strict";n.d(t,{X:()=>o,g:()=>i});var r=n(9963);const o=(0,r.R)("simulator"),i=(0,r.e)("simulator")},3132:(e,t,n)=>{"use strict";n.d(t,{_:()=>O,h:()=>Gr});const r=Object.freeze({dragMode:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewNodeType:null,dragNewJointConnectionId:null,dragNewJointAfterJointId:null,dragWireSource:null}),o=Object.freeze({nodeNameMode:"named-only"});var i=n(6222);const s={editingCircuitId:i.u,editingCircuitNodeIdPath:null,viewScale:1},c=Object.freeze(s),a={circuitNamesByCircuitId:{[i.u]:"Root"},nodeIdsByCircuitId:{[i.u]:[]}},l=Object.freeze(a);var d=n(8370);const u=Object.freeze({clipboardNodes:[],clipboardPasteOrigin:d.Ds}),p=Object.freeze({dialogType:null,data:null}),y=Object.freeze({nodesById:{},connectionsById:{}}),m=Object.freeze({nodePositionsById:{},wireJointIdsByConnectionId:{},wireJointPositionsByJointId:{}}),f=Object.freeze({selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}),g=Object.freeze({tick:0,lastTickProcessingTimeMs:0,nodeStatesByNodeId:{},nodeOutputValuesByNodeId:{},transitionsById:{},transitionWindows:[]}),I=Object.freeze({mode:"edit",ticksPerSecond:1e3}),v=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{}}),h={circuitEditorUiDrag:r,circuitEditorUiSettings:o,circuitEditorUiViewport:c,nodeGraph:y,nodeLayout:m,circuits:l,clipboard:u,dialog:p,selection:f,simulator:g,simulatorControl:I,simulatorGraph:v},b=Object.freeze(h),k=["circuitEditorUiViewport","circuits","nodeGraph","nodeLayout"],E={services:b,undo:Object.freeze({undoStack:[],redoStack:[]})},O=Object.freeze(E);var C=n(4890),N=(n(2729),n(7172)),j=n(6600);const x=new URL(window.location.origin);x.pathname=n.p;const P=x.toString(),w="@init";var B=n(7252),M=n(5984),S=n(1314),Z=n(5273),D=n(5054);const J="@node/delete";function R(e){return e.type===J}var T=n(4443),L=n(5409),A=n(2165);const z="@selection/move";var W=n(4586);const U="@wire/attach",F=(e,t,n)=>({type:U,payload:{connectionId:(0,W.Z)(),p1:e,p2:t,joints:(null==n?void 0:n.joints)||[]}});function H(e){return e.type===U}const K="@wire/detatch";function q(e){return e.type===K}const _="@wire/joint/add",V="@wire/joint/move",G=(e,t,n={})=>{var r,o;return{type:V,payload:{jointIds:(0,D._)(e),position:t,relative:null!==(r=n.relative)&&void 0!==r&&r,snapMode:null!==(o=n.snapMode)&&void 0!==o?o:"none"}}},X="@wire/joint/delete";var Q=n(5621),Y=n(4),$=n(3634),ee=n(5758),te=n(38);const ne="@project/receive",re=e=>({type:ne,payload:{saveData:e}}),oe=[B.q6,M.JP,S.QM,Z.dd,J,T.XT,L.R9,A.XE,z,U,K,_,X,V,$.Um,ee.Nz,Q.Fb,Y.cN];function ie(e){return-1!==oe.indexOf(e.type)}te.Ny;var se=n(8718),ce=n.n(se);function ae(e){return ce()(e.services,k)}var le=n(928),de=n.n(le);var ue=n(8177),pe=n(1387),ye=n(152),me=n(4882);const fe=[ue.NQ,pe.Cq,V,ye.rZ,me.Sh];var ge=n(4970),Ie=n(8764),ve=n(8424),he=n(4875);const be="@dialog/show";var ke=n(5222);const Ee="@dialog/response/cancel";function*Oe(e,t){yield(0,ge.gz)(((e,t)=>({type:be,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,ge.qn)([ke.pR,Ee]);return n.type===ke.pR?n.payload.result:null}var Ce=n(4505),Ne=n(7516);const je=Ne.Ry().shape({nodeId:Ne.Z_().required().min(1),pinId:Ne.Z_().required().min(1)});function xe(e,t){return e.nodeId===t.nodeId&&e.pinId===t.pinId}const Pe=Ne.Ry().shape({circuitId:Ne.Z_().required().min(1),circuitName:Ne.Z_().required().min(1)}),we=Ne.Ry().shape({nodeId:Ne.Z_().required().min(1),nodeType:Ne.Z_().required().min(1),nodeName:Ne.Z_().nullable().min(1),circuitId:Ne.Z_().required().min(1),x:Ne.Rx().required(),y:Ne.Rx().required()}),Be=Ne.Ry().shape({output:je.required(),input:je.required(),joints:Ne.IX().of(d.tQ)}),Me=Ne.Ry().shape({circuits:Ne.IX().of(Pe).min(0),nodes:Ne.IX().of(we).min(0),wires:Ne.IX().of(Be).min(0)});var Se=n(9734),Ze=n.n(Se);function De(...e){return[].concat(...e)}var Je=n(2951);const Re=(0,Je.N)(((e,t)=>{if(!(0,ue.Xm)(t))return e;const{dragPos:n,modifierKeys:r}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragModifierKeys:r})}));var Te=n(3871);const Le="@select/region";var Ae=n(1556),ze=n(6773),We=n(713),Ue=n(2571),Fe=n(7836),He=n(1883);const Ke=(0,Je.N)(((e,t)=>{if(!(0,He.xl)(t))return e;const{connectionId:n,addAfterJointId:r,modifierKeys:o,x:i,y:s}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"new-joint",dragStart:{x:i,y:s},dragNewJointConnectionId:n,dragNewJointAfterJointId:r,dragModifierKeys:o})}));var qe=n(8554);const _e=(0,Je.N)(((e,t)=>{if(!(0,qe.Q6)(t))return e;const{nodeType:n}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"new-node",dragNewNodeType:n})}));var Ve=n(8198),Ge=n(4662),Xe=n(853);const Qe=(0,Je.N)(((e,t)=>{if(!(0,Xe.dx)(t))return e;const{x:n,y:r}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragStart:{x:n,y:r}})}));var Ye=n(4206);const $e=De(Re,(function(e=O,t){if(!(0,Y.$V)(t))return e;const{x:n,y:r,modifierKeys:o}=t.payload,{dragMode:i,dragStart:s,dragEnd:c,dragNewNodeType:a,dragNewJointAfterJointId:l,dragNewJointConnectionId:u,dragWireSource:p}=e.services.circuitEditorUiDrag;switch(i){case"select":if(s){const t=(0,Te.t)(o),i=(0,d.Qu)(s,{x:n,y:r});e=Er(e,((e,t="set")=>({type:Le,payload:{region:e,mode:t}}))(i,t))}break;case"move":if(s){let t=(0,d.sj)({x:n,y:r},s);const i=e.services.selection.selectedNodeIds.length>0;o.ctrlMetaKey||(t=i?(0,Ae.ph)(e,t):(0,Ae.aj)(e,t)),e=Er(e,((e,t,n={})=>{var r;return{type:z,payload:{offsetX:e,offsetY:t,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}})(t.x,t.y))}break;case"new-node":if(c){const t=(0,Ae.ph)(e,c);e=Er(e,(0,Z.gz)(a,{position:t}))}break;case"new-joint":if(c){const t=(0,Ae.aj)(e,c);e=Er(e,((e,t,n,r)=>({type:_,payload:{connectionId:e,jointId:(0,W.Z)(),addAfterJointId:t,position:n}}))(u,l,t))}break;case"wire":{const t=(0,ze.qO)(e);p&&c&&t&&(e=Er(e,F(p,t)));break}}return(0,j.cA)(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewNodeType:null,dragWireSource:null})))}),(function(e=O,t){if(!(0,We.Vl)(t))return e;const{jointId:n,x:r,y:o,modifierKeys:i}=t.payload;if(e=(0,j.cA)(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:r,y:o}}))),!(0,Fe.g7)(e,n)){const t=(0,Te.t)(i);e=Er(e,(0,Ue.a2)(n,t))}return e}),Ke,_e,(function(e=O,t){if(!(0,Ve.KH)(t))return e;const{nodeId:n,x:r,y:o,modifierKeys:i}=t.payload;if(e=(0,j.cA)(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:r,y:o}}))),!(0,Fe.CP)(e,n)){const t=(0,Te.t)(i);e=Er(e,(0,Ge.lF)(n,t))}return e}),Qe,(0,Je.N)(((e,t)=>{if(!(0,Ye.Zr)(t))return e;const{dragStart:n,pin:r}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"wire",dragStart:n,dragWireSource:r})})),(0,Je.N)(((e,t)=>(0,pe.hG)(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e)));var et=n(5842);const tt=De((0,n(6147).D)(((e,t)=>{if(!(0,et.RD)(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{nodeNameMode:n})})));var nt=n(9990);const rt=(0,nt.b)(((e,t)=>{if(!(0,M.Q$)(t))return e;const{circuitId:n}=t.payload;return e.editingCircuitId!==n?e:Object.assign(Object.assign({},e),{editingCircuitId:i.u})})),ot=(0,nt.b)(((e,t)=>{if(!(0,B.U_)(t))return e;const{circuitId:n,edit:r}=t.payload;return r?Object.assign(Object.assign({},e),{editingCircuitId:n}):e}));var it=n(7930),st=n(9977);const ct=De(rt,ot,(0,nt.b)(((e,t,n)=>{if(!(0,it.k5)(t))return e;const{circuitId:r,circuitNodeIdPath:o}=t.payload;return-1===(0,st.Nd)(n).indexOf(r)?e:Object.assign(Object.assign({},e),{editingCircuitId:r,editingCircuitNodeIdPath:o})})),(0,nt.b)(((e,t)=>{if(!(0,me.UO)(t))return e;const{viewScale:n}=e,{delta:r}=t.payload;return Object.assign(Object.assign({},e),{viewScale:r>0?n*r*1.03:n/(1.03*-r)})})));var at=n(8628);const lt=(0,at.v)(((e,t)=>{if(!(0,B.U_)(t))return e;const n=t.payload.circuitId;let r=t.payload.circuitName;return r||(r="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:r}),nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[n]:[]})})}));var dt=n(6604),ut=n.n(dt),pt=n(1966),yt=n.n(pt),mt=n(5213),ft=n(1089);const gt=(0,at.v)(((e,t,n)=>{if(!(0,M.Q$)(t))return e;const{circuitId:r}=t.payload,o=Object.keys(e.circuitNamesByCircuitId).filter((e=>e!==r)),i=(0,mt.M6)(n,(0,ft.u)(r));let s=ce()(e.nodeIdsByCircuitId,o);return s=ut()(s,(e=>yt()(e,i))),Object.assign(Object.assign({},e),{nodeIdsByCircuitId:s,circuitNamesByCircuitId:ce()(e.circuitNamesByCircuitId,o)})})),It=(0,at.v)(((e,t)=>{if(!(0,S.lp)(t))return e;const{circuitId:n,circuitName:r}=t.payload,o=r.trim();return""===o?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:o})})}));var vt=n(961);const ht=(0,at.v)(((e,t,n)=>{if(!(0,Z.g0)(t))return e;const{nodeId:r,circuitId:o}=t.payload,i=null!=o?o:(0,vt.Gl)(n);return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[i]:[...e.nodeIdsByCircuitId[i],r]})})})),bt=(0,at.v)(((e,t)=>{if(!R(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:ut()(e.nodeIdsByCircuitId,(e=>e.filter((e=>-1===n.indexOf(e)))))})})),kt=De(lt,gt,It,ht,bt,(0,at.v)(((e,t)=>(0,te.Tp)(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[i.u]:"Root"},nodeIdsByCircuitId:{[i.u]:[]}}):e)));var Et=n(5161),Ot=n.n(Et),Ct=n(998),Nt=n.n(Ct),jt=n(7287),xt=n.n(jt);const Pt="@clipboard/copy";var wt=n(3065),Bt=n(1486),Mt=n(9963);const St=(0,Mt.R)("clipboard"),Zt=((0,Mt.e)("clipboard"),St(((e,t,n)=>{if(!function(e){return e.type===Pt}(t))return e;const{nodeIds:r}=t.payload;if(0===r.length)return e;const o=(0,Bt.T)(n),i=xt()(r,Ot()(r,(()=>(0,W.Z)()))),s=o[r[0]],c=r.map((e=>{const t=(0,mt.yX)(n,e),c=(0,wt.LK)(n,e);return{id:i[e],nodeType:t.nodeType,offset:(0,d.sj)(o[e],s),outputs:ut()(c,(e=>e.filter((e=>{return t=e.nodeId,-1!==Nt()(r,(e=>e===t));var t})).map((e=>({nodeId:i[e.nodeId],pinId:e.pinId})))))}}));return Object.assign(Object.assign({},e),{clipboardNodes:c,clipboardPasteOrigin:s})})));var Dt=n(2628),Jt=n.n(Dt);const Rt=De(Zt,(function(e=O,t){if(!(0,Q.Ff)(t))return e;const{clipboardNodes:n,clipboardPasteOrigin:r}=e.services.clipboard,o=(0,Ae.pf)(e),i=(0,d.ZO)(r,{x:o,y:o}),s=xt()(n.map((e=>e.id)),Ot()(n,(()=>(0,W.Z)())));for(const t of n){const{id:n,nodeType:r,offset:o}=t,c=(0,d.ZO)(i,o);e=Er(e,(0,Z.gz)(r,{position:c,nodeId:s[n]}))}for(const t of n){const{id:n,outputs:r}=t,o=s[n];for(const t of Object.keys(r))for(const n of r[t]){const{nodeId:r,pinId:i}=n,c=s[r];e=Er(e,F({nodeId:o,pinId:t},{nodeId:c,pinId:i}))}}return e=(0,j.cA)(e,"services","clipboard","clipboardPasteOrigin",i),Er(e,(0,Ge.lF)(Jt()(s)))}));var Tt=n(2047);const Lt=De((0,Tt.L)(((e,t)=>(0,ke.W2)(t)?p:e)),(0,Tt.L)(((e,t)=>function(e){return e.type===Ee}(t)?p:e)),(0,Tt.L)(((e,t)=>{if(!function(e){return e.type===be}(t))return e;const{dialogType:n,data:r}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:r})})));function At(e,t){return t.weight=e,t}function zt(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}var Wt=n(8133),Ut=n(3562),Ft=n(5937),Ht=n.n(Ft),Kt=n(4654),qt=n.n(Kt);function _t(e,t,n){const r=yt()(Object.keys(e.nodesById),t),o=qt()(t,(e=>(0,wt.Su)(n,e)));return Object.assign(Object.assign({},e),{nodesById:ce()(e.nodesById,r),connectionsById:Ht()(e.connectionsById,(function({inputPin:e,outputPin:n}){return-1===t.indexOf(e.nodeId)&&-1===t.indexOf(n.nodeId)&&!o.some((t=>xe(t,e)||xe(t,n)))}))})}const Vt=At(zt(gt),(0,Ut.s)(((e,t,n)=>{if(!(0,M.Q$)(t))return e;const{circuitId:r}=t.payload;return _t(e,[...(0,Wt.U4)(n,r),...(0,mt.M6)(n,(0,ft.u)(r))],n)}))),Gt=At(-10,(0,Ut.s)(((e,t)=>{if(!(0,Z.g0)(t))return e;const{nodeId:n,nodeType:r,nodeName:o}=t.payload;return Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:{nodeType:r,nodeName:null!=o?o:null}})})}))),Xt=At(zt(bt),(0,Ut.s)(((e,t,n)=>{if(!R(t))return e;const{nodeIds:r}=t.payload;return _t(e,r,n)}))),Qt=(0,Ut.s)(((e,t)=>{if(!(0,T.HH)(t))return e;const{nodeId:n}=t.payload;if(!e.nodesById[n])return e;let r=t.payload.nodeName;return r||""!==r.trim()||(r=null),Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:Object.assign(Object.assign({},e.nodesById[n]),{nodeName:r})})})})),Yt=(0,Ut.s)(((e,t)=>(0,te.Tp)(t)?y:e));var $t=n(3311),en=n.n($t),tn=n(3304);const nn=De(Vt,Gt,Yt,Xt,Qt,(0,Ut.s)(((e,t,n)=>{if(!H(t))return e;const{connectionId:r,p1:o,p2:i}=t.payload,s=function(e,t,n,r){const o=e.nodesById[t.nodeId],i=e.nodesById[n.nodeId];if(!o||!i)return null;const s=(0,tn.yP)(r,o.nodeType),c=(0,tn.yP)(r,i.nodeType);if(!s||!c)return null;const a=s.pins[t.pinId],l=c.pins[n.pinId];if(!a||!l)return null;if(a.direction===l.direction)return null;return{outputPin:"output"===a.direction?t:n,inputPin:"input"===a.direction?t:n}}(e,o,i,n);if(!s)return e;const{inputPin:c}=s;return en()(e.connectionsById,(e=>xe(e.inputPin,c)))?e:Object.assign(Object.assign({},e),{connectionsById:Object.assign(Object.assign({},e.connectionsById),{[r]:Object.assign({id:r},s)})})})),(0,Ut.s)(((e,t)=>{if(!q(t))return e;const{connectionId:n}=t.payload,r=Object.keys(e.connectionsById).filter((e=>e!==n));return Object.assign(Object.assign({},e),{connectionsById:ce()(e.connectionsById,r)})})));var rn=n(2179),on=n(5637);function sn(e,t,n){const r=t.reduce(((e,t)=>{const r=(0,on.Me)(n,t),o=(0,on.lZ)(n,t);return e.push(...r,...o),e}),[]),o=qt()(t,(e=>(0,wt.Su)(n,e))),i=(0,on.DH)(n),s=Object.keys(i).filter((e=>{const{inputPin:t,outputPin:n}=i[e];return o.some((e=>xe(e,t)||xe(e,n)))})),c=[...r,...s].reduce(((t,n)=>(t.push(...e.wireJointIdsByConnectionId[n]),t)),[]),a=yt()(Object.keys(e.wireJointIdsByConnectionId),r),l=yt()(Object.keys(e.wireJointPositionsByJointId),c),d=yt()(Object.keys(e.nodePositionsById),t);return Object.assign(Object.assign({},e),{nodePositionsById:ce()(e.nodePositionsById,d),wireJointIdsByConnectionId:ce()(e.wireJointIdsByConnectionId,a),wireJointPositionsByJointId:ce()(e.wireJointPositionsByJointId,l)})}const cn=At(zt(Vt),(0,rn.S)(((e,t,n)=>{if(!(0,M.Q$)(t))return e;const{circuitId:r}=t.payload;return e=sn(e,(0,Wt.U4)(n,r),n),sn(e,(0,mt.M6)(n,(0,ft.u)(r)),n)}))),an=(0,rn.S)(((e,t)=>{if(!(0,Z.g0)(t))return e;const{nodeId:n,position:r=d.Ds}=t.payload;return(0,j.cA)(e,"nodePositionsById",n,r)})),ln=At(zt(Xt),(0,rn.S)(((e,t,n)=>{if(!R(t))return e;const{nodeIds:r}=t.payload;return sn(e,r,n)}))),dn="@node/move",un=(e,t,n={})=>{var r,o;return{type:dn,payload:{nodeIds:(0,D._)(e),position:t,relative:null!==(r=n.relative)&&void 0!==r&&r,snapMode:null!==(o=n.snapMode)&&void 0!==o?o:"none"}}},pn=(0,rn.S)(((e,t,n)=>{if(!function(e){return e.type===dn}(t))return e;const{nodeIds:r,position:o,relative:i,snapMode:s}=t.payload,c=ut()(ce()(e.nodePositionsById,r),(e=>{let t={x:i?e.x+o.x:o.x,y:i?e.y+o.y:o.y};return"node"===s&&(t=(0,Ae.ph)(n,t)),t}));return Object.assign(Object.assign({},e),{nodePositionsById:Object.assign(Object.assign({},e.nodePositionsById),c)})})),yn=De(cn,an,(0,rn.S)(((e,t)=>(0,te.Tp)(t)?m:e)),ln,pn,(0,rn.S)(((e,t)=>{if(!H(t))return e;const{connectionId:n,joints:r}=t.payload;if(r.length>0){const t=r.map((()=>(0,W.Z)()));e=(0,j.cA)(e,"wireJointIdsByConnectionId",n,t),e=(0,j.cA)(e,"wireJointPositionsByJointId",(e=>Object.assign(Object.assign({},e),xt()(t,r))))}else e=(0,j.cA)(e,"wireJointIdsByConnectionId",n,[]);return e})),(0,rn.S)(((e,t)=>{if(!q(t))return e;const{connectionId:n}=t.payload,r=Object.keys(e.wireJointIdsByConnectionId).filter((e=>e!=n)),o=yt()(Object.keys(e.wireJointPositionsByJointId),e.wireJointIdsByConnectionId[n]);return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:ce()(e.wireJointIdsByConnectionId,r),wireJointPositionsByJointId:ce()(e.wireJointPositionsByJointId,o)})})),(0,rn.S)(((e,t)=>{if(!function(e){return e.type===_}(t))return e;const{connectionId:n,addAfterJointId:r,position:o,jointId:i}=t.payload;let s=e.wireJointIdsByConnectionId[n];const c=r?s.indexOf(r)+1:0;return s=[...s.slice(0,c),i,...s.slice(c)],Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:Object.assign(Object.assign({},e.wireJointIdsByConnectionId),{[n]:s}),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),{[i]:o})})})),(0,rn.S)(((e,t)=>{if(!function(e){return e.type===X}(t))return e;const{jointId:n}=t.payload,r=Object.keys(e.wireJointPositionsByJointId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:ut()(e.wireJointIdsByConnectionId,(e=>e.filter((e=>e!==n)))),wireJointPositionsByJointId:ce()(e.wireJointPositionsByJointId,r)})})),(0,rn.S)(((e,t,n)=>{if(!function(e){return e.type===V}(t))return e;const{jointIds:r,position:o,relative:i,snapMode:s}=t.payload,c=ut()(ce()(e.wireJointPositionsByJointId,r),(e=>{let t={x:i?e.x+o.x:o.x,y:i?e.y+o.y:o.y};return"node"===s?t=(0,Ae.ph)(n,t):"joint"===s&&(t=(0,Ae.aj)(n,t)),t}));return Object.assign(Object.assign({},e),{wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),c)})}))),mn=De(At(50,((e=O,t)=>{return ie(t)?(n=Cr(e),localStorage.setItem("autosave",JSON.stringify(n)),e):e;var n})),(function(e=O,t){return(0,te.Tp)(t)?(localStorage.removeItem("autosave"),e):e}),(function(e=O,t){if(!function(e){return e.type===w}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{return Nr(e,n)}catch(t){return e}}),(function(e=O,t){if(!function(e){return e.type===ne}(t))return e;try{return Nr(e,t.payload.saveData)}catch(t){return console.error("Failed to load save",t),e}}));var fn=n(9286);const gn=(0,fn.V)(((e,t)=>{if(!R(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:yt()(e.selectedNodeIds,n),selectedConnectionIds:[]})})),In=(0,fn.V)(((e,t)=>(0,te.Tp)(t)?f:e));var vn=n(5564),hn=n.n(vn),bn=n(7243),kn=n(5878),En=n(5393);const On=(0,fn.V)(((e,t,n)=>{if(!(0,bn.ov)(t))return e;const r=(0,kn.f)(n);let o=(0,on.PB)(n);const i=(0,on.DH)(n);o=o.filter((e=>{const{inputPin:t,outputPin:n}=i[e];return-1!==r.indexOf(t.nodeId)&&-1!==r.indexOf(n.nodeId)}));const s=(0,En.II)(n),c=hn()(o.map((e=>s[e])));return Object.assign(Object.assign({},e),{selectedNodeIds:r,selectedConnectionIds:o,selectedJointIds:c})}));var Cn=n(1578);const Nn=(0,fn.V)(((e,t)=>(0,Cn.CH)(t)?Object.assign(Object.assign({},e),{selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}):e)),jn=(0,fn.V)(((e,t)=>{if(!(0,Ue.p6)(t))return e;const{jointIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===r?[]:e.selectedNodeIds,selectedConnectionIds:"set"===r?[]:e.selectedConnectionIds,selectedJointIds:(0,Te.a)(e.selectedJointIds,n,r)})})),xn=(0,fn.V)(((e,t)=>{if(!(0,Ge.xW)(t))return e;const{nodeIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:(0,Te.a)(e.selectedNodeIds,n,r),selectedConnectionIds:"set"===r?[]:e.selectedConnectionIds,selectedJointIds:"set"===r?[]:e.selectedJointIds})}));var Pn=n(2525),wn=n.n(Pn),Bn=n(4150);const Mn=(0,fn.V)(((e,t,n)=>{if(!function(e){return e.type===Le}(t))return e;const{region:r,mode:o}=t.payload,i=(0,kn.f)(n),s=ce()((0,Bn.g)(n),i),c=[];wn()(s,((e,t)=>{(0,d.kK)(e,r)&&c.push(t)}));const a=[],l=(0,En.v5)(n);return wn()(l,((e,t)=>{(0,d.PL)(e,r)&&a.push(t)})),Object.assign(Object.assign({},e),{selectedNodeIds:(0,Te.a)(e.selectedNodeIds,c,o),selectedConnectionIds:"set"===o?[]:e.selectedConnectionIds,selectedJointIds:(0,Te.a)(e.selectedJointIds,a,o)})}));var Sn=n(4691);const Zn=(0,fn.V)(((e,t)=>{if(!(0,Sn.GT)(t))return e;const{connectionIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===r?[]:e.selectedNodeIds,selectedConnectionIds:(0,Te.a)(e.selectedConnectionIds,n,r),selectedJointIds:"set"===r?[]:e.selectedJointIds})}));var Dn=n(4484);const Jn=De(In,gn,On,Nn,jn,xn,Mn,Zn,(function(e=O,t){if(!(0,L.wr)(t))return e;const{selectedNodeIds:n,selectedJointIds:r}=e.services.selection,o=(0,Bt.T)(e);for(const t of n){const n=o[t];if(!n)continue;const r=(0,Ae.ph)(e,n);(0,d.kg)(n,r)||(e=Er(e,un(t,r)))}const i=(0,En.v5)(e);for(const t of r){const n=i[t];if(!n)continue;const r=(0,Ae.aj)(e,n);(0,d.kg)(n,r)||(e=Er(e,G(t,r)))}return e}),(function(e=O,t){if(!(0,Dn.ww)(t))return e;const n=(0,Fe.d4)(e);return 0===n.length?e:Er(e,(r=n,{type:Pt,payload:{nodeIds:Array.isArray(r)?r:[r]}}));var r}),(function(e=O,t){if(!(0,A.SB)(t))return e;const{selectedNodeIds:n,selectedConnectionIds:r,selectedJointIds:o}=e.services.selection;var i;return n.length>0&&(e=Er(e,(i=n,{type:J,payload:{nodeIds:(0,D._)(i)}}))),e=r.reduce(((e,t)=>Er(e,(e=>({type:K,payload:{connectionId:e}}))(t))),e),o.reduce(((e,t)=>Er(e,(e=>({type:X,payload:{jointId:e}}))(t))),e)}),(function(e=O,t){if(!function(e){return e.type===z}(t))return e;const{offsetX:n,offsetY:r,snapMode:o}=t.payload,i=(0,Fe.d4)(e),s=(0,Fe.O5)(e),c={x:n,y:r};let a="none";"node"!==o&&"by-type"!==o||(a="node");let l="none";return l="by-type"===o?"joint":o,e=Er(e,un(i,c,{relative:!0,snapMode:a})),Er(e,G(s,c,{relative:!0,snapMode:l}))}),(0,fn.V)(((e,t)=>{if(!q(t))return e;const{connectionId:n}=t.payload;return Object.assign(Object.assign({},e),{selectedConnectionIds:e.selectedConnectionIds.filter((e=>e!==n))})})));var Rn=n(6036);const Tn=(0,Rn.X)(((e,t)=>ie(t)?g:e));n(2603),n(9896);const Ln={and:n(2954).Z,or:n(1652).Z,nor:n(7814).Z,not:n(50).Z,buffer:n(5562).Z,led:n(2603).Z,toggle:n(9896).Z,seg7:n(9684).Z,xor:n(5978).Z};var An=n(1235),zn=n(1755);const Wn=(0,zn.OF)(((e,t)=>(0,zn.F9)(e.simulatorNodeIdsByCircuitNodeId,t))),Un=(0,zn.OF)((e=>Object.keys(e.simulatorNodesById))),Fn=(0,zn.OF)(((e,t)=>{const n=e.simulatorNodesById[t];return n?n.elementType:null}));var Hn=n(7513),Kn=n.n(Hn);const qn=(0,zn.OF)(((e,t)=>{const n=e.simulatorNodesById[t];return n?qt()(Jt()(n.outputsByPin),(e=>e.map((e=>e.simulatorNodeId)))):[]})),_n=(0,zn.OF)(((e,t)=>{const n=e.simulatorNodesById[t];return n?n.inputsByPin:{}}));function Vn(e,t,n){const r=e.tick+t;e=Object.assign(Object.assign({},e),{transitionWindows:[...e.transitionWindows]});let o=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=r;){if(0==--o)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=Gn(e,t,n)}return e.tick!=r&&(e=Object.assign(Object.assign({},e),{tick:r})),e}function Gn(e,t,n){e=Object.assign(Object.assign({},e),{tick:t.tick,nodeOutputValuesByNodeId:Object.assign({},e.nodeOutputValuesByNodeId)});const r=[];for(const o of t.transitionIds){const{nodeId:t,valuesByOutputPin:i}=e.transitionsById[o];e.nodeOutputValuesByNodeId[t]=Object.assign(Object.assign({},e.nodeOutputValuesByNodeId[t]),i);const s=qn(n,t);for(const e of s)-1===r.indexOf(e)&&r.push(e)}e.transitionsById=ce()(e.transitionsById,yt()(Object.keys(e.transitionsById),t.transitionIds));for(const t of r)e=Xn(e,t,n);return e}function Xn(e,t,n){var r;const o=Fn(n,t);if(!o)return e;const i=Ln[o];if(!i||!i.evolve)return e;const s={},c=_n(n,t);for(const t of Object.keys(c)){const n=c[t];if(!n){s[t]=!1;continue}const{simulatorNodeId:o,pinId:i}=n;s[t]=(null===(r=e.nodeOutputValuesByNodeId[o])||void 0===r?void 0:r[i])||!1}const a=i.evolve(e.nodeStatesByNodeId[t],s,e.tick);if(a.state&&(e=(0,j.cA)(e,"nodeStatesByNodeId",t,a.state)),a.transitions){const n=(0,D._)(a.transitions);for(const r of n){const{tickOffset:n,valuesByPin:o,transitionMerger:i="replace"}=r,s=e.tick+(n>0?n:1);"replace"===i&&(e=Yn(e,t)),e=Qn(e,t,s,o)}}return e}function Qn(e,t,n,r){const o=(0,W.Z)(),i={nodeId:t,tick:n,valuesByOutputPin:r},s=[...e.transitionWindows];let c=Kn()(s,n,((e,t)=>e.tick-t));if(c<0){c=-c-1;const e={tick:n,transitionIds:[]};s.splice(c,0,e)}return s[c]=Object.assign(Object.assign({},s[c]),{transitionIds:[...s[c].transitionIds,o]}),Object.assign(Object.assign({},e),{transitionsById:Object.assign(Object.assign({},e.transitionsById),{[o]:i}),transitionWindows:s})}function Yn(e,t){return Object.keys(e.transitionsById).filter((n=>e.transitionsById[n].nodeId===t)).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const r=ce()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let o=e.transitionWindows;const i=Kn()(o,n.tick,((e,t)=>e.tick-t));if(i>=0){const e=o[i],n=e.transitionIds.indexOf(t);if(-1!==n)if(1===e.transitionIds.length)o=[...o.slice(0,i),...o.slice(i+1)];else{o=[...o];const e=o[i].transitionIds;o[i]=Object.assign(Object.assign({},o[i]),{transitionIds:[...e.slice(0,n),...e.slice(n+1)]})}}return Object.assign(Object.assign({},e),{transitionsById:r,transitionWindows:o})}(e,t)),e)}const $n=(0,Rn.X)(((e,t,n)=>{if(!(0,An.ke)(t))return e;const{circuitNodeIdPath:r}=t.payload,o=Wn(n,r);if(!o)return e;const i=Fn(n,o);if(!i)return e;const s=Ln[i];if(!s||!s.interact)return e;const c=e.nodeStatesByNodeId[o],a=s.interact(c);return Xn(e=(0,j.cA)(e,"nodeStatesByNodeId",o,a),o,n)}));var er=n(7366);const tr=(0,Rn.X)(((e,t,n)=>{if(!(0,er.RC)(t))return e;const{tick:r,transitionWindows:o}=e;return 0===o.length?e:Vn(e,o[0].tick-r,n)}));var nr=n(8910);const rr=De(Tn,$n,tr,(0,Rn.X)(((e,t,n)=>(0,nr.NL)(t)?function(e,t){const n=Un(t);return e=g,e=n.reduce(((e,n)=>function(e,t,n){const r=Fn(n,t);if(!r)return e;const o=Ln[r];if(!o)return e;const i={};for(const e of o.outputPins)i[e]=!1;return(0,j.cA)(e,"nodeOutputValuesByNodeId",t,i)}(e,n,t)),e),n.reduce(((e,n)=>Xn(e,n,t)),e)}(e,n):e)),(0,Rn.X)(((e,t,n)=>{if(!(0,ye.FD)(t))return e;const{tickCount:r}=t.payload,o=performance.now();e=Vn(e,r,n);const i=performance.now()-o;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:i})})));var or=n(4389);const ir=(0,or.G)(((e,t)=>ie(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e));var sr=n(8261),cr=n(2619);const ar=(0,or.G)(((e,t)=>{if(!(0,sr.Ie)(t))return e;const{mode:n}=t.payload;if(!cr.D7.local(e))return e;let r=e.mode;switch(n){case!0:r="pause";break;case!1:r="run";break;case"toggle":r="run"==r?"pause":"run"}return Object.assign(Object.assign({},e),{mode:r})})),lr=(0,or.G)(((e,t)=>(0,nr.NL)(t)?Object.assign(Object.assign({},e),{mode:"run"}):e));var dr=n(737);const ur=De(ir,ar,lr,(0,or.G)(((e,t)=>(0,dr.qf)(t)?Object.assign(Object.assign({},I),{ticksPerSecond:e.ticksPerSecond}):e)));var pr=n(3857),yr=n.n(pr),mr=n(7361),fr=n.n(mr),gr=n(4368);const Ir=At(-10,(0,zn.Ac)(((e,t,n)=>{if(!(0,nr.NL)(t))return e;const{simulatorNodesById:r,simulatorNodeIdsByCircuitNodeId:o}=hr(i.u,n);return Object.assign(Object.assign({},e),{simulatorNodesById:r,simulatorNodeIdsByCircuitNodeId:o})}))),vr=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function hr(e,t){const n={},r={},o={},i={},s=[],c=[],a={},l={},d=(0,Wt.U4)(t,e);for(const e of d){const i=(0,mt.og)(t,e);if(!i)continue;if("pin-input"===i){s.push(e),o[e]=[];continue}if("pin-output"===i){c.push(e);continue}const d=br(e,t);yr()(n,d.simulatorNodesById),yr()(r,d.simulatorNodeIdsByCircuitNodeId),a[e]=d.inputElementPinsByCircuitPinId,l[e]=d.outputElementPinsByCircuitPinId}const u=(0,on.DH)(t);for(const e of Object.keys(u)){const{inputPin:t,outputPin:r}=u[e];if(-1===d.indexOf(t.nodeId)||-1===d.indexOf(r.nodeId))continue;const p=fr()(l,[r.nodeId,r.pinId]),y=fr()(a,[t.nodeId,t.pinId]);if(-1!==s.indexOf(r.nodeId)&&y){o[r.nodeId].push(...y);continue}if(-1!==c.indexOf(t.nodeId)&&p){i[t.nodeId]=p;continue}if(!p||!y)continue;const m=n[p.simulatorNodeId];let f=m.outputsByPin[p.pinId];null==f&&(m.outputsByPin[p.pinId]=f=[]);for(const e of y)f.push({simulatorNodeId:e.simulatorNodeId,pinId:e.pinId}),n[e.simulatorNodeId].inputsByPin[e.pinId]={simulatorNodeId:p.simulatorNodeId,pinId:p.pinId}}return{simulatorNodesById:n,simulatorNodeIdsByCircuitNodeId:r,inputElementPinsByCircuitPinId:o,outputElementPinsByCircuitPinId:i}}function br(e,t){const n=(0,mt.og)(t,e);if(!n)return vr;const r=(0,tn.yP)(t,n);if(!r||!r.elementProduction)return vr;const o="string"==typeof(i=r.elementProduction)?{type:"element",elementType:i}:i;var i;switch(o.type){case"element":return function(e,t,n){const r=(0,gr.m)(n,e);if(!r)return vr;const o={},i={},s=(0,W.Z)();o[s]={elementType:t.elementType,inputsByPin:{},outputsByPin:{}},i[e]={simulatorNodeId:s,subCircuitIds:{}};const c={},a={};for(const e of Object.keys(r.pins)){const{direction:t}=r.pins[e];"input"===t?c[e]=[{pinId:e,simulatorNodeId:s}]:"output"===t&&(a[e]={pinId:e,simulatorNodeId:s})}return{simulatorNodesById:o,simulatorNodeIdsByCircuitNodeId:i,inputElementPinsByCircuitPinId:c,outputElementPinsByCircuitPinId:a}}(e,o,t);case"circuit":return function(e,t,n){const r=hr(t.circuitId,n);return Object.assign(Object.assign({},r),{simulatorNodeIdsByCircuitNodeId:{[e]:{simulatorNodeId:null,subCircuitIds:r.simulatorNodeIdsByCircuitNodeId}}})}(e,o,t);default:throw new Error("Unsupported production type "+o.type)}}const kr=De(Ir,(0,zn.Ac)(((e,t)=>(0,dr.qf)(t)?Object.assign({},v):e))),Er=function(e){const t=Ze()(e,(e=>e.weight||0));return(e=O,n)=>t.reduce(((e,t)=>t(e,n)),e)}(De($e,tt,ct,kt,Rt,Lt,nn,yn,mn,Jn,rr,ur,kr));class Or extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function Cr(e){const t=(0,En.v5)(e);return{circuits:(0,st.Nd)(e).map((t=>({circuitId:t,circuitName:(0,st.w)(e,t)}))),nodes:(0,mt.Fm)(e).map((t=>{const n=(0,mt.yX)(e,t),r=(0,Bt.e)(e,t),o=(0,Wt.RW)(e,t);return{nodeId:t,nodeType:n.nodeType,nodeName:n.nodeName,circuitId:null!=o?o:i.u,x:r.x,y:r.y}})),wires:(0,on.PB)(e).map((n=>{const r=(0,on.rl)(e,n),o=(0,En.qq)(e,n);return{input:r.inputPin,output:r.outputPin,joints:o.map((e=>t[e]))}}))}}function Nr(e,t){var n,r,o;try{Me.validateSync(t)}catch(e){throw new Or(e.message)}e=O;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>Er(e,(0,B._Y)({circuitId:t,circuitName:n}))),e),e=(null!==(r=t.nodes)&&void 0!==r?r:[]).reduce(((e,t)=>{var n;return Er(e,(0,Z.gz)(t.nodeType,{nodeId:t.nodeId,circuitId:t.circuitId,position:{x:t.x,y:t.y},nodeName:null!==(n=t.nodeName)&&void 0!==n?n:void 0}))}),e),e=(null!==(o=t.wires)&&void 0!==o?o:[]).reduce(((e,t)=>Er(e,F(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new Or("Failed to load project.")}return e}function*jr(){yield(0,ge.ib)(Ce.WG,xr)}function*xr(){const e=yield(0,ge.Ys)();try{const t=Cr(e),n=JSON.stringify(t),r=(0,ve.Wt)(n),o=Ie.lW.from(r).toString("base64"),i=encodeURIComponent(o),s=P+he.Z.createHref({pathname:"/import",search:"data="+i});yield(0,ge.RE)(Oe,"export-project-link",{projectLink:s})}catch(e){console.error("Failed to export project as link",e)}}var Pr=n(7198);function*wr(){yield(0,ge.ib)(Pr.Yk,Br)}function*Br(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=Ie.lW.from(e,"base64"),r=(0,ve.rr)(n,{to:"string"}),o=JSON.parse(r);yield(0,ge.gz)(re(o)),he.Z.push("/")}catch(e){console.error("Failed to import save from link",e)}}var Mr=n(4171),Sr=n.n(Mr),Zr=n(6577);function*Dr(){yield(0,ge.ib)(Zr.Wx,Jr)}function*Jr(){try{const[e]=yield(0,ge.RE)(Sr(),{accept:"application/json"}),t=yield(0,ge.RE)(e.text.bind(e)),n=JSON.parse(t);yield(0,ge.gz)(re(n))}catch(e){console.warn("Failed to load project:",e)}}var Rr=n(3162),Tr=n(3069);function*Lr(){yield(0,ge.ib)(Tr.hq,Ar)}function*Ar(){const e=yield(0,ge.Ys)();try{window.showSaveFilePicker?yield(0,ge.RE)(zr,e):yield(0,ge.RE)(Wr,e)}catch(e){console.warn("Failed to save project",e)}}function*zr(e){const t=yield(0,ge.RE)(window.showSaveFilePicker,{types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!t)return;const n=Cr(e),r=yield(0,ge.RE)(t.createWritable.bind(t));yield(0,ge.RE)(r.write.bind(r),JSON.stringify(n,null,2)),yield(0,ge.RE)(r.close.bind(r))}function*Wr(e){const t=Cr(e),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json;charset=utf-8"});(0,Rr.saveAs)(n,"discrelog-project.json")}function*Ur(){yield(0,ge.rM)(jr),yield(0,ge.rM)(wr),yield(0,ge.rM)(Dr),yield(0,ge.rM)(Lr)}function*Fr(){yield(0,ge.A7)([nr.pu,sr.l2],Hr)}function*Hr(){for(;yield(0,ge.Ys)(cr.yU);){yield(0,ge.gz)((0,ye.jf)(1));const e=yield(0,ge.Ys)(cr.bg),t=Math.max(Math.ceil(1e3/e),1);yield(0,ge.gw)(t)}}function*Kr(){yield(0,ge.rM)(Fr)}const qr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionSanitizer:function(e){return e},stateSanitizer:function(e){return e},actionsBlacklist:fe})||C.qC,_r=(0,N.ZP)(),Vr=[!1,_r].filter(j.fQ),Gr=(0,C.MT)((function(e=O,t){return e=function(e=O,t){return function(e=O,t){if(!(0,$.Qy)(t))return e;const{undoStack:n,redoStack:r}=e.undo,o=de()(n);return o?Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...r,ae(e)]})}):e}(e=function(e=O,t){if(!(0,ee.rA)(t))return e;const{undoStack:n,redoStack:r}=e.undo,o=de()(r);return o?Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,ae(e)],redoStack:r.slice(0,r.length-1)})}):e}(e=function(e=O,t){return!ie(t)||(0,$.Qy)(t)||(0,ee.rA)(t)?e:(0,j.cA)(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),ae(e)],redoStack:[]})))}(e,t),t),t)}(e,t),Er(e,t)}),qr((0,C.md)(...Vr)));_r.run((function*(){yield(0,ge.rM)(Ur),yield(0,ge.rM)(Kr)})),Gr.dispatch({type:w})},6600:(e,t,n)=>{"use strict";function r(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function o(...e){let t=e[0];const n=e.slice(1,e.length-2).map(String),r=e[e.length-2],o=e[e.length-1],s=i(t);t=s;for(const e of n)t[e]=i(t[e]),t=t[e];return t[r]="function"==typeof o?o(t[r]):o,s}function i(e){return Array.isArray(e)?[...e]:Object.assign({},e)}function s(e){return Boolean(e)}n.d(t,{yI:()=>r,cA:()=>o,fQ:()=>s})}},0,[[6475,1,956,874,14,80,744,845,105,699,937]]]);
//# sourceMappingURL=client.f063017d49b31c8433d2.bundle.js.map