(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{2846:(e,t,n)=>{"use strict";n.d(t,{Tu:()=>i,Xx:()=>r,Vj:()=>o});const i="@element/interact",r=(e,t)=>({type:i,payload:{elementIdPath:e,data:t}});function o(e){return e.type===i}},6319:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-momentary",category:"input-output",displayName:"Momentary Switch",elementProduction:"input-momentary",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-momentary"},pins:{OUT:{direction:"output",x:50,y:25}}}},8891:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-toggle",category:"input-output",displayName:"Toggle Switch",elementProduction:"input-toggle",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-toggle"},pins:{OUT:{direction:"output",x:50,y:25}}}},4409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const l="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",s={type:"logic-and",category:"logic",displayName:"AND",elementProduction:"logic-and",visual:(0,n(7806).v)((0,c.NG)(o()(l)),i.createElement("g",null,i.createElement("path",{d:l,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"element-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3013:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const l="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",s={type:"logic-buffer",category:"logic",displayName:"Buffer",elementProduction:"logic-buffer",visual:(0,n(7806).v)((0,c.NG)(o()(l)),i.createElement("g",null,i.createElement("path",{d:l,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M72,25 L 100,25"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),i.createElement("path",{className:"element-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},2050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-nand",category:"logic",displayName:"NAND",elementProduction:"logic-nand",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",{transform:"translate(-10,0)"},i.createElement("path",{d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z",stroke:"none",fill:"transparent"}),i.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 88,25 H110"}),i.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 41,15 L 15,15"}),i.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 42,35 L 15,35"}),i.createElement("path",{className:"element-select-highlight--fill",d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z M 42.857143,7.8571429 C 50.834264,7.8571429 55.918368,7.8571429 58.095238,7.8571429 C 59.285714,7.8571429 59.880952,7.8571429 60.178571,7.8571429 C 60.327381,7.8571429 60.409227,7.8571429 60.446429,7.8571429 C 60.465029,7.8571429 60.471543,7.8571429 60.47619,7.8571429 C 70.236853,7.857143 77.142857,15.497098 77.142857,25 C 77.142857,34.502902 69.760662,42.142857 60,42.142857 L 42.857143,42.142857 L 42.857143,7.8571429 z"}),i.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 79,25 A 4,4 0 1 1 71,25 A 4,4 0 1 1 79,25 z",transform:"translate(9,0)"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6583:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-nor",category:"logic",displayName:"NOR",elementProduction:"logic-nor",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 h21 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"element-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6524:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-not",category:"logic",displayName:"NOT",elementProduction:"logic-not",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 H100 M29,25 h-24"}),i.createElement("path",{className:"element-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},3183:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const l="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",s={type:"logic-or",category:"logic",displayName:"OR",elementProduction:"logic-or",visual:(0,n(7806).v)((0,c.NG)(o()(l)),i.createElement("g",null,i.createElement("path",{d:l,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),i.createElement("path",{className:"element-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},1454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const l="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",s={type:"logic-xor",category:"logic",displayName:"XOR",elementProduction:"logic-xor",visual:(0,n(7806).v)((0,c.NG)(o()(l)),i.createElement("g",null,i.createElement("path",{d:l,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M30,15 H5 M31,35 H5"}),i.createElement("g",{fillRule:"evenodd",className:"element-select-highlight--fill"},i.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),i.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3532:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const r={type:"output-led",category:"input-output",displayName:"Indicator Light",elementProduction:"output-led",visual:(0,n(6816).J)(i,{path:i,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},8112:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(6816);const r=[15,0];function o(e,t){const n=t[0];let i=`M${3*n[0]+r[0]},${3*n[1]+r[1]}`;for(const e of t.slice(1)){const[t,n]=e;i+=`L${3*t+r[0]},${3*n+r[1]}`}return i+="z",{path:i,fill:t=>t[e]?"red":"gray",strokeWidth:0}}const c={type:"output-seg7",category:"input-output",displayName:"7-Segment Display",elementProduction:"output-seg7",visual:(0,i.J)("M15,0 V63 H45 V0 z",[o("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),o("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),o("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),o("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),o("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),o("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),o("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},5148:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const l="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",s={type:"pin-high",category:"input-output",elementProduction:"pin-high",displayName:"High Pin",visual:(0,n(7806).v)((0,c.NG)(o()(l)),i.createElement("g",null,i.createElement("path",{d:l,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",d:"M25,20 v10 M20,25 h10",fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},2380:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370),l=n(784);const s="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-input",category:"input-output",displayName:"Input Pin",visual:(0,n(7806).v)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",d:(0,l.x)(25,25,3,-45,225),fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},1615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const l="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",s={type:"pin-output",category:"input-output",displayName:"Output Pin",visual:(0,n(7806).v)((0,c.NG)(o()(l)),i.createElement("g",null,i.createElement("path",{d:l,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-15",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("circle",{className:"element-select-highlight--fill",cx:25,cy:25,r:3,fill:"black",stroke:"none"}))),pins:{IN:{direction:"input",x:0,y:25}}}},6816:(e,t,n)=>{"use strict";n.d(t,{J:()=>d});var i=n(7294),r=n(9242),o=n(669),c=n.n(o),l=n(8370),s=n(2846);const a=({elementId:e,elementPath:t,shapePath:n,hitPath:o,evolverState:c})=>{const l=(0,r.I0)(),a=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),l((0,s.Xx)([...t||[],e]))))}),[e,l,t]),u=m(n,c).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"element-select-highlight--stroke element-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("g",{onClick:a},i.createElement("path",{d:o,fill:"transparent",stroke:"none"}),u)},u=({shapePath:e,hitRect:t})=>{const n=m(e,{}).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"element-select-highlight--stroke element-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("svg",{width:50,height:50,viewBox:`${t.p1.x-5} ${t.p1.y-5} ${t.p2.x-t.p1.x+10} ${t.p2.y-t.p1.y+10}`},n)};function d(e,t){const n=(0,l.NG)(c()(e));return{trayComponent:()=>i.createElement(u,{shapePath:t,hitRect:n}),component:n=>i.createElement(a,Object.assign({shapePath:t,hitPath:e},n)),hitRect:n}}function m(e,t){return(Array.isArray(e)?e:[e]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const n="function"==typeof e.fill?e.fill(t||{}):e.fill,i="function"==typeof e.stroke?e.stroke(t||{}):e.stroke,r="function"==typeof e.strokeWidth?e.strokeWidth(t||{}):e.strokeWidth;return{path:e.path,fill:n,stroke:i,strokeWidth:r}}))}},7806:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var i=n(7294);function r(e,t){return{hitRect:e,trayComponent:()=>i.createElement("svg",{width:50,height:50,viewBox:`${e.p1.x-5} ${e.p1.y-5} ${e.p2.x-e.p1.x+10} ${e.p2.y-e.p1.y+10}`},t),component:()=>t}}},6503:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});const i=4},4263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:[],outputPins:["OUT"],interact:(e,t)=>void 0===t?{transitions:[{tickOffset:1,valuesByPin:{OUT:!0}},{tickOffset:1+Math.round(1.5*i.f),valuesByPin:{OUT:!1}}]}:t?{transitions:{tickOffset:1,valuesByPin:{OUT:!0}}}:{transitions:{tickOffset:1,valuesByPin:{OUT:!1}}}}},9028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const i={toggleState:!1},r={inputPins:[],outputPins:["OUT"],interact(e=i){const t=!e.toggleState;return{state:Object.assign({},e,{toggleState:t}),transitions:{tickOffset:1,valuesByPin:{OUT:t}}}},evolve:(e=i)=>({state:e,transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},2404:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.f,valuesByPin:{OUT:t.A&&t.B}}})}},3880:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.f,valuesByPin:{OUT:t.IN}}})}},5813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.f,valuesByPin:{OUT:!(t.A&&t.B)}}})}},2791:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.f,valuesByPin:{OUT:!(t.A||t.B)}}})}},6139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.f,valuesByPin:{OUT:!t.IN}}})}},1868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.f,valuesByPin:{OUT:t.A||t.B}}})}},6259:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6503);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.f,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},9480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},4303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:[],outputPins:["OUT"],evolve:()=>({transitions:{tickOffset:1,valuesByPin:{OUT:!0}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{tQ:()=>r,Ds:()=>o,rG:()=>c,NG:()=>l,R9:()=>s,VE:()=>a,Fv:()=>u,Ih:()=>d,bA:()=>m,Qu:()=>p,gQ:()=>y,ZO:()=>f,sj:()=>g,kg:()=>h,PL:()=>I,nF:()=>v,G0:()=>E,kK:()=>b});var i=n(7516);const r=i.Ry().shape({x:i.Rx().required(),y:i.Rx().required()}),o=Object.freeze({x:0,y:0}),c=Object.freeze({p1:o,p2:o});function l(e){return{p1:{x:e[0],y:e[1]},p2:{x:e[2],y:e[3]}}}function s(e,t){return{x:Math.round(e.x/t)*t,y:Math.round(e.y/t)*t}}function a(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function u(e){const t=a(e);return{x:e.x/t,y:e.y/t}}function d(e,t){return e.x*t.x+e.y*t.y}function m(e,t){return{x:e.x*t,y:e.y*t}}function p(...e){let t,n;if(1===e.length){const i=e[0];t=i.p1,n=i.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function y(e,t){return{p1:f(e.p1,t),p2:f(e.p2,t)}}function f(e,t){return{x:e.x+t.x,y:e.y+t.y}}function g(e,t){return{x:e.x-t.x,y:e.y-t.y}}function h(e,t){return e.x===t.x&&e.y===t.y}function I(e,t){return!((t=p(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function v(e){return{width:(e=p(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function E(e,t){return e=p(e),t=p(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function b(e,t){return e=p(e),t=p(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}},4228:(e,t,n)=>{"use strict";var i=n(7294),r=n(3935),o=n(1033),c=n(9242),l=n(6550),s=n(862),a=n(7865);const u=(0,n(9731).q_)(),d=Object.freeze({dragMode:null}),m="root",p="root-editor",y={circucitEditorsById:{[p]:{circuitId:m,elementIdPath:[]}},activeEditorId:null},f=Object.freeze(y),g={elementIdsByCircuitId:{[m]:[]},elementsById:{},connectionsById:{}},h=Object.freeze(g),I=Object.freeze({elementPositionsById:{},connectionJointIdsByConnectionId:{},connectionJointPositionsByJointId:{}}),v={circuitNamesByCircuitId:{[m]:"Root"}},E=Object.freeze(v);var b=n(8370);const k=Object.freeze({clipboardElements:[],clipboardPasteOrigin:b.Ds}),O=Object.freeze({dialogType:null,data:null}),C=Object.freeze({projectName:"New Project",projectModified:!1}),j=Object.freeze({selectedElementIds:[],selectedConnectionIds:[],selectedJointIds:[]}),x=Object.freeze({initialized:!1,tick:0,lastTickProcessingTimeMs:0,evolverStatesByEvolverId:{},evolverOutputValuesByEvolverId:{},transitionsById:{},transitionWindows:[]}),P=Object.freeze({mode:"edit",ticksPerSecond:1e3}),w=Object.freeze({activeTutorial:null,annotatedElements:[],preTutorialState:null});var N=n(7361),B=n.n(N);function M(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function S(...e){return z(e[0],e.slice(1,e.length-1).map(String),e[e.length-1])}function z(e,t,n){if(0===t.length)return"function"==typeof n?n(e):n;const i=t.slice(0,t.length-1).map(String),r=t[t.length-1],o=T(e);let c=o;for(const e of i)c[e]=T(c[e]),c=c[e];return c[r]="function"==typeof n?n(c[r]):n,o}function T(e){return Array.isArray(e)?e.slice():Object.assign({},e)}function R(e){return Boolean(e)}const L="fill-parent--3pw6U",D={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"};var J=n(8721),W=n.n(J);function A(e){return"string"==typeof e?{windowId:e}:e}function U(e){return W()(e,"windowId")}function Z(e){return W()(e,"first")&&W()(e,"second")&&W()(e,"direction")}function F(e){return"number"==typeof e?{firstPercent:e}:e}function K(e){return W()(e,"firstPercent")}function H(e){return W()(e,"firstSize")||W()(e,"secondSize")}var q=n(3493),$=n.n(q);function V(e){const t=i.useRef(e);return i.useEffect((()=>{t.current=e})),t}const G={tessel:"tessel--2Q3Xd","tessel-content":"tessel-content--3-kEA","tessel-drop-capture":"tessel-drop-capture--3TbuI","tessel-drop-capture--dragging":"tessel-drop-capture--dragging--Ihwyz","tessel-drop-marker":"tessel-drop-marker--1cqr2","drop-left":"drop-left--wqP1V","drop-right":"drop-right--2MyGz","drop-top":"drop-top--1S0co","drop-bottom":"drop-bottom--2f330","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C","tessel-window":"tessel-window--1qDgp","tessel-window-titlebar":"tessel-window-titlebar--uHBdn","tessel-window-title":"tessel-window-title--2v0hT","tessel-window-controls":"tessel-window-controls--3i3ou","tessel-window-controls-close":"tessel-window-controls-close--2O8Zs","tessel-window-content":"tessel-window-content--sOnG-"},Y=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),_=({direction:e,onChangePercentage:t})=>{const n=i.useRef(null),r=i.useRef(null),o=V(e),c=V(t),l=i.useMemo((()=>$()((e=>{var t,i;if(null==r.current||null==n.current)return;const l=null!==(i=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==i?i:Y;let s=0,a=0;"row"===o.current?(a=e.pageX-l.left,s=a/l.width,isNaN(s)?(s=0,a=l.left):s>1&&(s=1,a=l.right)):(a=e.pageY-l.top,s=a/l.height,isNaN(s)?(s=0,a=l.top):s>1&&(s=1,a=l.bottom)),c.current(100*s,a)}),1e3/60,{leading:!0})),[o,c]),s=i.useCallback((e=>{e.persist(),l(e)}),[l]),a=i.useCallback((e=>{!e.defaultPrevented&&n.current&&(r.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),r.current=e.pointerId))}),[]),u=i.useCallback((()=>{n.current&&r.current&&(n.current.releasePointerCapture(r.current),r.current=null)}),[]);return i.createElement("div",{ref:n,className:M("tessel-split",G["tessel-split"],G["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:a,onPointerMove:s,onPointerUp:u})},X=i.createContext([]);function Q(){return i.useContext(X)}const ee=({pathKey:e,children:t})=>{const n=Q(),r=i.useMemo((()=>[...n,e]),[n,e]);return i.createElement(X.Provider,{value:r},t)};function te(){}const ne=i.createContext({moveWindow:te,closeWindow:te});function ie(){return i.useContext(ne)}const re=({moveWindow:e,closeWindow:t,children:n})=>{const r=i.useMemo((()=>({moveWindow:e,closeWindow:t})),[e,t]);return i.createElement(ne.Provider,{value:r},n)};function oe(e,t,n){return K(e)?{firstPercent:t}:H(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const ce=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:r,first:o,second:c,division:l}=e,s="row"===r?"width":"height",a=i.useCallback(((t,i)=>{const r=F(e.division);n(Object.assign(Object.assign({},e),{division:oe(r,t,i)}))}),[e,n]),u=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),d=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),m=F(l);let p="50%",y="50%",f=!1,g=!1;if(K(m)){const{firstPercent:e}=m;p=e+"%",y=100-e+"%"}else if(H(m)){const{firstSize:e,secondSize:t}=m;e?(p=e+"px",f=!0,y="100%"):(p="100%",y=t+"px",g=!0)}return i.createElement("div",{className:M(L,D["row"===r?"flex-row":"flex-column"])},i.createElement("div",{className:M(f?D["flexitem-fix"]:D["flexitem-shrink"]),style:{[s]:p}},i.createElement(ee,{pathKey:"first"},i.createElement(le,{value:o,renderWindow:t,onLayoutChange:u}))),i.createElement(_,{direction:r,onChangePercentage:a}),i.createElement("div",{className:M(g?D["flexitem-fix"]:D["flexitem-shrink"]),style:{[s]:y}},i.createElement(ee,{pathKey:"second"},i.createElement(le,{value:c,renderWindow:t,onLayoutChange:d}))))},le=({value:e,renderWindow:t,onLayoutChange:n})=>{const r=A(e);return U(r)?t(r):Z(r)?i.createElement(ce,{item:r,renderWindow:t,onLayoutChange:n}):null};function se(e){return Array.isArray(e)?e:[e]}function ae(e,t){return e===t||e.length===t.length&&e.every(((e,n)=>t[n]===e))}function ue(e,t){const n=e.slice(0,t);for(let i=t+1;i<e.length;i++)n.push(e[i]);return n}function de(e){const[t,n]=i.useState({left:0,top:0,right:0,bottom:0,width:0,height:0});return i.useLayoutEffect((()=>{if(!e.current)return;const t=new o.Z((()=>{const t=e.current;if(!t)return;const i=t.getBoundingClientRect();n({top:i.top,left:i.left,right:i.right,bottom:i.bottom,width:i.width,height:i.height})}));return t.observe(e.current),()=>{t.disconnect()}}),[e]),t}Object.freeze([]);var me=n(9240);const pe="@tessel/window",ye=e=>({type:pe,payload:{path:e}});function fe(e){return e.type===pe}const ge=i.forwardRef((({className:e,id:t,children:n},r)=>{const o=Q(),{moveWindow:c}=ie(),l=i.useRef(null),{top:s,left:a,right:u,bottom:d}=de(l),[m,p]=i.useState(null),y=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return void p(null);const n=t.getClientOffset();if(null==e||null==n||!fe(e))return void p(null);if(n.x<a||n.x>u)return void p(null);if(n.y<s||n.y>d)return void p(null);const i=(n.x-a)/(u-a);if(i<=.3)return void p("left");if(i>=.6)return void p("right");const r=(n.y-s)/(d-s);p(r<=.3?"top":r>=.6?"bottom":null)}),[s,a,u,d]),f=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return;if(!fe(e))return;const{path:n}=e.payload;ae(n,o)||null!=m&&c(n,o,m)}),[o,m,c]),[{draggingSelf:g},h]=(0,me.L)({accept:pe,collect:e=>{e.isOver({shallow:!0})||p(null);const t=e.getItem();return t&&fe(t)?{draggingSelf:ae(t.payload.path,o)}:{}},hover:y,drop:f},[y,f]);let I=G["tessel-drop-marker"]+" ";if(null!=m&&!g)switch(m){case"bottom":I+=G["drop-bottom"];break;case"top":I+=G["drop-top"];break;case"left":I+=G["drop-left"];break;case"right":I+=G["drop-right"]}return i.createElement("div",{id:t,ref:e=>{l.current=e,h(e),"function"==typeof r?r(e):r&&(r.current=e)},className:M(G["tessel-drop-capture"],g&&G["tessel-drop-capture--dragging"],e)},n,i.createElement("div",{className:I}))}));function he(e,t){var n;if(!t(e))return null;const i=A(e);if(Z(i)){const r=he(i.first,t),o=he(i.second,t);return r&&o?e:null!==(n=null!=r?r:o)&&void 0!==n?n:null}return e}function Ie(e){return"string"==typeof e?e:Z(e)?null==e.first?Ie(e.second):null==e.second?Ie(e.first):Object.assign(Object.assign({},e),{first:Ie(e.first),second:Ie(e.second)}):e}const ve=({className:e,rootItem:t,renderWindow:n,onLayoutChange:r})=>{const o=i.useCallback(((e,n,i)=>{if(0===e.length)return;let o=t;const c=B()(o,e);o&&"string"!=typeof o&&c&&(n.length>0&&!B()(o,n)||(o=z(o,e,null),o=z(o,n,(e=>{let t;if("left"===i||"right"===i)t={direction:"row",division:50,first:"left"===i?c:e,second:"right"===i?c:e};else{if("top"!==i&&"bottom"!==i)throw new Error("Unknown tessel position: "+i);t={direction:"column",division:50,first:"top"===i?c:e,second:"bottom"===i?c:e}}return t})),o=Ie(o),r(o)))}),[t,r]),c=i.useCallback((e=>{let n=t;n&&("string"!=typeof n?(n=z(n,e,null),n=Ie(n),r(n)):0===e.length&&r(null))}),[r,t]);return i.createElement("div",{className:M("tessel",G.tessel,e)},i.createElement(re,{moveWindow:o,closeWindow:c},i.createElement(ge,null,i.createElement("div",{className:G["tessel-content"]},t&&i.createElement(le,{value:t,renderWindow:n,onLayoutChange:r})))))},Ee="circuit-field",be=e=>({windowId:Ee,windowProps:{editorId:e}});function ke(e){return"string"!=typeof e&&!!U(e)&&e.windowId===Ee}const Oe={layout:{direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"element-tray"},second:be(p)}},Ce=Object.freeze(Oe),je=Object.freeze({elementNameMode:"named-only"}),xe={circuitEditorDrag:d,circuitEditors:f,circuitGraph:h,circuitLayout:I,circuitProperties:E,clipboard:k,dialog:O,project:C,selection:j,simulator:x,simulatorControl:P,tutorial:w,uiLayout:Ce,uiSettings:je},Pe=Object.freeze(xe),we=["circuitProperties","circuitGraph","circuitLayout"],Ne={services:Pe,undo:Object.freeze({undoStack:[],redoStack:[]})},Be=Object.freeze(Ne);var Me=n(4890),Se=(n(2729),n(7172));const ze=new URL(window.location.origin);ze.pathname=n.p;const Te=ze.toString(),Re="@init";var Le=n(4586);const De="@circuit/add",Je=({circuitName:e,circuitId:t,edit:n}={})=>({type:De,payload:{circuitId:null!=t?t:(0,Le.Z)(),circuitName:e,edit:n}});function We(e){return e.type===De}const Ae="@circuit/delete";function Ue(e){return e.type===Ae}const Ze="@circuit/rename",Fe="@element/add",Ke=(e,t,n,i)=>({type:Fe,payload:Object.assign({elementId:(0,Le.Z)(),elementType:e,circuitId:t,position:n},i||{})});function He(e){return e.type===Fe}const qe="@element/delete";function $e(e){return e.type===qe}const Ve="@element/rename",Ge="@selection/align-to-grid",Ye=()=>({type:Ge}),_e="@selection/delete",Xe=()=>({type:_e}),Qe="@selection/move",et="@connection/attach",tt=(e,t,n)=>({type:et,payload:{connectionId:(0,Le.Z)(),p1:e,p2:t,joints:(null==n?void 0:n.joints)||[]}});function nt(e){return e.type===et}const it="@connection/detatch";function rt(e){return e.type===it}const ot="@connection/joint/add",ct="@connection/joint/move",lt=(e,t,n={})=>{var i,r;return{type:ct,payload:{jointIds:se(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}},st="@connection/joint/delete",at="@clipboard/paste",ut=(e={})=>({type:at,payload:Object.assign({},e)}),dt="@circuit-editor/drag/end",mt="@undo/undo",pt=()=>({type:mt});function yt(e){return e.type===mt}const ft="@undo/redo",gt=()=>({type:ft});function ht(e){return e.type===ft}const It="@project/new",vt=()=>({type:It});function Et(e){return e.type===It}const bt="@project/receive",kt=(e,t)=>({type:bt,payload:{fileName:e,saveData:t}}),Ot=[De,Ae,Ze,Fe,qe,Ve,Ge,_e,Qe,et,it,ot,st,ct,mt,ft,at,dt];function Ct(e){return-1!==Ot.indexOf(e.type)}var jt=n(8718),xt=n.n(jt),Pt=n(8804),wt=n.n(Pt);function Nt(e){return t=>(n=Be,i)=>{const r=t(n.services[e],i,n);return n.services[e]!=r?S(n,"services",e,r):n}}function Bt(e){return t=>{const n=(n,...i)=>t(n.services[e],...i);return n.local=t,n}}const Mt=Nt("circuitEditors"),St=Bt("circuitEditors"),zt=St(((e,t)=>e.circucitEditorsById[t])),Tt=(e,t)=>{const n=zt(e,t);return n?n.circuitId:null},Rt=St((e=>{if(e.activeEditorId)return e.activeEditorId;const t=Object.keys(e.circucitEditorsById);return t.length>0?t[0]:null})),Lt=St((e=>e.activeEditorId?e.circucitEditorsById[e.activeEditorId]:null)),Dt=St((e=>{if(!e.activeEditorId)return null;const t=e.circucitEditorsById[e.activeEditorId];return t?t.circuitId:null})),Jt=St(((e,t)=>Object.keys(e.circucitEditorsById).filter((n=>e.circucitEditorsById[n].circuitId===t))));function Wt(e){let t=null;const n=Lt(e);return n&&(t=n.circuitId),{serviceStates:xt()(e.services,we),viewCircuitId:t}}var At=n(928),Ut=n.n(At),Zt=n(9734),Ft=n.n(Zt);function Kt(...e){return[].concat(...e)}const Ht="@circuit-editor/drag/abort",qt=()=>({type:Ht}),$t=Nt("circuitEditorDrag"),Vt=Bt("circuitEditorDrag"),Gt=$t(((e,t)=>function(e){return e.type===Ht}(t)?d:e)),Yt="@circuit-editor/drag/continue",_t=$t(((e,t)=>{if(!function(e){return e.type===Yt}(t))return e;const{dragPos:n,modifierKeys:i,editorId:r}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragEndEditorId:r,dragModifierKeys:i})}));var Xt=n(3386),Qt=n.n(Xt),en=n(1966),tn=n.n(en);function nn(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function rn(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return Qt()(e,t);case"remove":return tn()(e,t);case"toggle":return tn()(e,t).concat(tn()(t,e))}return t}const on="@select/region";var cn=n(2222),ln=n(6604),sn=n.n(ln);const an=Nt("circuitGraph"),un=Bt("circuitGraph"),dn=un((e=>e.elementsById)),mn=un((0,cn.P1)(dn.local,(e=>Object.keys(e)))),pn=un((0,cn.P1)(dn.local,(e=>sn()(e,(e=>e.elementType))))),yn=un(((e,t)=>e.elementsById[t]||null)),fn=un(((e,t)=>{const n=[];for(const i of Object.keys(e.elementsById)){const{elementType:r}=e.elementsById[i];r===t&&n.push(i)}return n})),gn=un(((e,t)=>{const n=yn.local(e,t);return n?n.elementType:null})),hn=un((e=>e.elementIdsByCircuitId)),In=[],vn=un(((e,t)=>{var n;return null!==(n=e.elementIdsByCircuitId[t])&&void 0!==n?n:In})),En=un(((e,t)=>{for(const n of Object.keys(e.elementIdsByCircuitId))if(-1!==e.elementIdsByCircuitId[n].indexOf(t))return n;return null})),bn=un((0,cn.P1)((e=>e.elementsById),(e=>sn()(e,(e=>e.elementName))))),kn=un(((e,t)=>{var n;const i=yn.local(e,t);return i?null!==(n=i.elementName)&&void 0!==n?n:t.substr(0,4):null})),On=un(((e,t)=>{const n=yn.local(e,t);return n?n.elementName:null}));var Cn=n(4654),jn=n.n(Cn),xn=n(3311),Pn=n.n(xn),wn=n(669),Nn=n.n(wn);const Bn=Nt("circuitLayout"),Mn=Bt("circuitLayout"),Sn=Mn((e=>e.elementPositionsById)),zn=Mn(((e,t)=>{var n;return null!==(n=e.elementPositionsById[t])&&void 0!==n?n:b.Ds})),Tn=Nt("circuitProperties"),Rn=Bt("circuitProperties"),Ln=Rn((e=>Object.keys(e.circuitNamesByCircuitId))),Dn=Rn((e=>e.circuitNamesByCircuitId)),Jn=Rn(((e,t)=>e.circuitNamesByCircuitId[t]));function Wn(e){return"ic-"+e}function An(e){return e&&e.startsWith("ic-")?e.substr(3):null}function Un(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}function Zn(e,t){return{x:"input"===t?0:100,y:50*e+25}}const Fn=[(0,cn.P1)(hn,pn,Sn,Dn,((e,t,n,r)=>Object.keys(e).filter((e=>e!==m)).map((o=>{var c,l;const s=null!==(c=e[o])&&void 0!==c?c:[],a=null!==(l=r[o])&&void 0!==l?l:o.substr(0,5);let u=s.filter((e=>t[e].startsWith("pin-")));u=Ft()(u,(e=>n[e].y),(e=>n[e].x));const d={},m=[],p=[];for(const e of u){const n=t[e];"pin-input"===n?(d[e]=Object.assign({direction:"input"},Zn(m.length,"input")),m.push(e)):"pin-output"===n&&(d[e]=Object.assign({direction:"output"},Zn(p.length,"output")),p.push(e))}const y={circuitId:o,inputPinIds:m,outputPinIds:p};return{type:Wn(o),category:"integrated-circuit",displayName:a,elementProduction:{type:"circuit",circuitId:o},visual:{hitRect:(0,b.NG)(Nn()(Un(m.length,p.length))),trayComponent:()=>i.createElement("g",{stroke:"black",strokeWidth:1},i.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),i.createElement("line",{x1:10,y1:15,x2:5,y2:15}),i.createElement("line",{x1:40,y1:15,x2:45,y2:15}),i.createElement("line",{x1:10,y1:35,x2:5,y2:35}),i.createElement("line",{x1:40,y1:35,x2:45,y2:35})),component:"integrated-circuit",componentProps:y},pins:d}})))),n(6319).Z,n(8891).Z,n(4409).Z,n(3013).Z,n(2050).Z,n(6583).Z,n(6524).Z,n(3183).Z,n(1454).Z,n(3532).Z,n(8112).Z,n(5148).Z,n(2380).Z,n(1615).Z];let Kn=[];const Hn=e=>{const t=jn()(Fn,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,se(n)}(t,e)));return t.every(((e,t)=>e===Kn[t]))?Kn:(Kn=t,t)},qn=(0,cn.P1)(Hn,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),$n=(e,t)=>{var n;const i=Hn(e);return null!==(n=Pn()(i,(e=>e.type===t)))&&void 0!==n?n:null};var Vn=n(7516);const Gn=Vn.Ry().shape({elementId:Vn.Z_().required().min(1),pinId:Vn.Z_().required().min(1)});function Yn(e,t){return e.elementId===t.elementId&&e.pinId===t.pinId}const _n=(0,cn.P1)(qn,Sn,pn,((e,t,n)=>{var i;const r={},o=Object.keys(n);for(const c of o){const o={};r[c]=o;const l=null!==(i=t[c])&&void 0!==i?i:b.Ds,s=n[c];if(!s)continue;const a=e[s];if(!a)continue;const u=Object.keys(a.pins);for(const e of u){const t=a.pins[e],n=(0,b.ZO)(l,t);o[e]=n}}return r}));let Xn=null;const Qn=(e,t,n)=>{var i;const r=_n(e),o=vn(e,n);if(!o)return null;for(const e of o){const n=null!==(i=r[e])&&void 0!==i?i:b.Ds,o=Object.keys(n);for(const i of o){const r=n[i],o=(0,b.sj)(t,r);if((0,b.VE)(o)>6)continue;const c={elementId:e,pinId:i};return Xn&&Yn(c,Xn)||(Xn=c),Xn}}return null},ei=Vt((()=>50)),ti=Vt((()=>5)),ni=(e,t)=>{const n=ei(e);return(0,b.R9)(t,n)},ii=(e,t)=>{const n=ti(e);return(0,b.R9)(t,n)},ri="@circuit-editor/drag/start/connection",oi=$t(((e,t)=>{if(!function(e){return e.type===ri}(t))return e;const{x:n,y:i,pin:r,editorId:o}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"connection",dragStart:{x:n,y:i},dragStartEditorId:o,dragPinSource:r,dragEnd:null,dragEndEditorId:null})})),ci="@field/drag/start/element",li="@select/elements",si=(e,t="set")=>({type:li,payload:{elementIds:Array.isArray(e)?e:[e],mode:t}}),ai=Nt("selection"),ui=Bt("selection"),di=ui((e=>e.selectedElementIds)),mi=ui(((e,t)=>-1!==e.selectedElementIds.indexOf(t))),pi=((0,cn.P1)(dn,di,((e,t)=>xt()(e,t))),ui((e=>e.selectedConnectionIds)),ui(((e,t)=>-1!==e.selectedConnectionIds.indexOf(t)))),yi=ui((e=>e.selectedJointIds)),fi=ui(((e,t)=>-1!==e.selectedJointIds.indexOf(t))),gi="@circuit-editor/drag/start/joint",hi="@select/connection-joints",Ii=(e,t="set")=>({type:hi,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}}),vi="@circuit-editor/drag/start/new-joint",Ei=$t(((e,t)=>{if(!function(e){return e.type===vi}(t))return e;const{connectionId:n,addAfterJointId:i,modifierKeys:r,x:o,y:c,editorId:l}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"new-joint",dragStart:{x:o,y:c},dragStartEditorId:l,dragEnd:null,dragEndEditorId:null,dragNewJointConnectionId:n,dragNewJointAfterJointId:i,dragModifierKeys:r})})),bi="@circuit-editor/drag/start/select",ki=$t(((e,t)=>{if(!function(e){return e.type===bi}(t))return e;const{x:n,y:i,modifierKeys:r,editorId:o}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragStart:{x:n,y:i},dragStartEditorId:o,dragModifierKeys:r,dragEnd:null,dragEndEditorId:null})})),Oi="@circuit-editor/mouse/leave",Ci=Kt(Gt,_t,(function(e=Be,t){if(!function(e){return e.type===dt}(t))return e;const n=e.services.circuitEditorDrag;if(null===n.dragMode)return e;const{x:i,y:r}=t.payload,{dragStart:o,dragStartEditorId:c,dragEndEditorId:l}=n;if(c!=l)return S(e,"services","circuitEditorDrag",d);switch(n.dragMode){case"select":{const t=Tt(e,c);if(t){const{dragModifierKeys:c}=n,l=nn(c),s=(0,b.Qu)(o,{x:i,y:r});e=el(e,((e,t,n="set")=>({type:on,payload:{region:e,circuitId:t,mode:n}}))(s,t,l))}break}case"move":{const{dragModifierKeys:t}=n;let c=(0,b.sj)({x:i,y:r},o);const l=e.services.selection.selectedElementIds.length>0;t.ctrlMetaKey||(c=l?ni(e,c):ii(e,c)),e=el(e,((e,t,n={})=>{var i;return{type:Qe,payload:{offsetX:e,offsetY:t,snapMode:null!==(i=n.snapMode)&&void 0!==i?i:"none"}}})(c.x,c.y));break}case"new-joint":{const{dragNewJointConnectionId:t,dragNewJointAfterJointId:o}=n,c=ii(e,{x:i,y:r});e=el(e,((e,t,n,i)=>({type:ot,payload:{connectionId:e,jointId:(0,Le.Z)(),addAfterJointId:t,position:n}}))(t,o,c));break}case"connection":{const t=Tt(e,c);if(t){const{dragPinSource:o}=n,c=Qn(e,{x:i,y:r},t);o&&c&&(e=el(e,tt(o,c)))}break}}return S(e,"services","circuitEditorDrag",d)}),oi,(function(e=Be,t){if(!function(e){return e.type===gi}(t))return e;const{jointId:n,x:i,y:r,modifierKeys:o,editorId:c}=t.payload;if(e=S(e,"services","circuitEditorDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:i,y:r},dragStartEditorId:c,dragModifierKeys:o,dragEnd:null,dragEndEditorId:null}))),!fi(e,n)){const t=nn(o);e=el(e,Ii(n,t))}return e}),Ei,(function(e=Be,t){if(!function(e){return e.type===ci}(t))return e;const{elementId:n,x:i,y:r,modifierKeys:o,editorId:c}=t.payload;if(e=S(e,"services","circuitEditorDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:i,y:r},dragStartEditorId:c,dragModifierKeys:o,dragEnd:null,dragEndEditorId:null}))),!mi(e,n)){const t=nn(o);e=el(e,si(n,t))}return e}),ki,$t(((e,t)=>function(e){return e.type===Oi}(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e))),ji=Mt(((e,t)=>{if(!Ue(t))return e;const{circuitId:n}=t.payload,i=Object.keys(e.circucitEditorsById).filter((t=>e.circucitEditorsById[t].circuitId!==n));let r=e.activeEditorId;return r&&-1!==i.indexOf(r)||(r=null),Object.assign(Object.assign({},e),{circucitEditorsById:xt()(e.circucitEditorsById,i),activeEditorId:r})})),xi="@circuit-editor/receive-focus",Pi=Mt(((e,t)=>{if(!function(e){return e.type===xi}(t))return e;const{editorId:n}=t.payload;return-1===Object.keys(e.circucitEditorsById).indexOf(n)?e:Object.assign(Object.assign({},e),{activeEditorId:n})})),wi="@view/circuit",Ni=(e,t=null,n={})=>({type:wi,payload:{circuitId:e,elementIdPath:t,newWindowId:n.newWindow?(0,Le.Z)():null}});function Bi(e){return e.type===wi}const Mi=Kt(ji,Pi,Mt(((e,t,n)=>{if(!Bi(t))return e;const{circuitId:i,elementIdPath:r,newWindowId:o}=t.payload;if(-1===Ln(n).indexOf(i))return e;let c=o;return c||(c=function(e){var t;return e.activeEditorId?e.activeEditorId:null!==(t=wt()(Object.keys(e.circucitEditorsById)))&&void 0!==t?t:null}(e)),c?Object.assign(Object.assign({},e),{circucitEditorsById:Object.assign(Object.assign({},e.circucitEditorsById),{[c]:{circuitId:i,elementIdPath:null!=r?r:[]}}),activeEditorId:c}):e})));var Si=n(5161),zi=n.n(Si),Ti=n(998),Ri=n.n(Ti),Li=n(7287),Di=n.n(Li);const Ji="@clipboard/copy-elements";var Wi=n(2628),Ai=n.n(Wi),Ui=n(4908),Zi=n.n(Ui),Fi=n(4721),Ki=n.n(Fi);const Hi=un((e=>e.connectionsById)),qi=un((0,cn.P1)((e=>e.connectionsById),(e=>Object.keys(e)))),$i=un(((e,t)=>e.connectionsById[t])),Vi=un((0,cn.P1)((e=>e.connectionsById),(e=>Ai()(e)))),Gi=un((e=>e.elementIdsByCircuitId)),Yi=(0,cn.P1)(Gi,Hi,((e,t)=>{const n={},i=Object.keys(t),r=Object.keys(e);for(const o of r){const r=e[o];n[o]=i.filter((e=>{const{inputPin:n,outputPin:i}=t[e];return Ki()(r,n.elementId)&&Ki()(r,i.elementId)}))}return n})),_i=[],Xi=un(((e,t)=>{const{connectionsById:n}=e,i=Object.keys(n);for(const e of i)if(Yn(n[e].inputPin,t))return e;return null})),Qi=(un(((e,t)=>{const{connectionsById:n}=e,i=Object.keys(n);for(const e of i)if(Yn(n[e].outputPin,t))return e;return null})),un(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].inputPin.elementId===t))))),er=un(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].outputPin.elementId===t)))),tr=un(((e,t)=>{const n=Qi.local(e,t),i=er.local(e,t);return Zi()([...n,...i])})),nr=(e,t)=>{const n=gn(e,t);return n?$n(e,n):null},ir=(e,t)=>{const n=gn(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const i=En(e,t);if(!i)return[];const r=Wn(i);return fn(e,r).map((e=>({elementId:e,pinId:t})))},rr={},or={},cr=(Mn((e=>Object.keys(e.connectionJointPositionsByJointId))),Mn((e=>e.connectionJointIdsByConnectionId))),lr=Mn(((e,t)=>e.connectionJointIdsByConnectionId[t])),sr=Mn(((e,t)=>e.connectionJointPositionsByJointId[t])),ar=Mn((e=>e.connectionJointPositionsByJointId)),ur=Nt("clipboard"),dr=Bt("clipboard"),mr=Kt(ur(((e,t,n)=>{if(!function(e){return e.type===Ji}(t))return e;const{elementIds:i}=t.payload;if(0===i.length)return e;const r=Sn(n),o=Di()(i,zi()(i,(()=>(0,Le.Z)()))),c=r[i[0]],l=i.map((e=>{const t=yn(n,e),l=((e,t)=>{const n=Vi(e),i=nr(e,t);if(!i)return{};let r=[];r=Object.keys(i.pins).filter((e=>"output"===i.pins[e].direction));const o=n.filter((e=>e.outputPin.elementId===t)),c={};for(const e of r)c[e]=[];for(const e of o){const{outputPin:t,inputPin:n}=e;c[t.pinId].push(n)}return c})(n,e);return{id:o[e],elementType:t.elementType,offset:(0,b.sj)(r[e],c),outputs:sn()(l,(e=>e.filter((e=>{return t=e.elementId,-1!==Ri()(i,(e=>e===t));var t})).map((e=>{const t=Xi(n,e),i=(t?lr(n,t):[]).map((e=>sr(n,e))).map((e=>(0,b.sj)(e,c)));return{pin:{elementId:o[e.elementId],pinId:e.pinId},joints:i}}))))}}));return Object.assign(Object.assign({},e),{clipboardElements:l,clipboardPasteOrigin:c})})),(function(e=Be,t){if(!function(e){return e.type===at}(t))return e;const n=Dt(e);if(!n)return e;const{clipboardElements:i,clipboardPasteOrigin:r}=e.services.clipboard;if(!i.length)return e;let{pastePosition:o}=t.payload;const c=ei(e);o=o?(0,b.R9)(o,c):(0,b.ZO)(r,{x:c,y:c});const l=Di()(i.map((e=>e.id)),zi()(i,(()=>(0,Le.Z)())));for(const t of i){const{id:i,elementType:r,offset:c}=t,s=(0,b.ZO)(o,c);e=el(e,Ke(r,n,s,{elementId:l[i]}))}for(const t of i){const{id:n,outputs:i}=t,r=l[n];for(const t of Object.keys(i))for(const n of i[t]){const{pin:{elementId:i,pinId:c},joints:s}=n,a=l[i];e=el(e,tt({elementId:r,pinId:t},{elementId:a,pinId:c},{joints:s.map((e=>(0,b.ZO)(e,o)))}))}}return e=S(e,"services","clipboard","clipboardPasteOrigin",o),el(e,si(Ai()(l)))})),pr="@dialog/response/accept",yr=e=>({type:pr,payload:{result:e}}),fr=Nt("dialog"),gr=Bt("dialog"),hr=fr(((e,t)=>function(e){return e.type===pr}(t)?O:e)),Ir="@dialog/response/cancel",vr=()=>({type:Ir}),Er=fr(((e,t)=>function(e){return e.type===Ir}(t)?O:e)),br="@dialog/show",kr=Kt(hr,Er,fr(((e,t)=>{if(!function(e){return e.type===br}(t))return e;const{dialogType:n,data:i}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:i})}))),Or=an(((e,t)=>{if(!We(t))return e;const{circuitId:n}=t.payload;return Object.assign(Object.assign({},e),{elementIdsByCircuitId:Object.assign(Object.assign({},e.elementIdsByCircuitId),{[n]:[]})})}));var Cr=n(5937),jr=n.n(Cr);function xr(e,t,n){const i=tn()(Object.keys(e.elementsById),t),r=jn()(t,(e=>ir(n,e))),o=sn()(e.elementIdsByCircuitId,(e=>tn()(e,t)));return Object.assign(Object.assign({},e),{elementsById:xt()(e.elementsById,i),connectionsById:jr()(e.connectionsById,(function({inputPin:e,outputPin:n}){return-1===t.indexOf(e.elementId)&&-1===t.indexOf(n.elementId)&&!r.some((t=>Yn(t,e)||Yn(t,n)))})),elementIdsByCircuitId:o})}const Pr=an(((e,t,n)=>{var i;if(!Ue(t))return e;const{circuitId:r}=t.payload,o=Object.keys(e.elementIdsByCircuitId).filter((e=>e!==r)),c=null!==(i=e.elementIdsByCircuitId[r])&&void 0!==i?i:[],l=Wn(r),s=[...c,...Object.keys(e.elementsById).filter((t=>e.elementsById[t].elementType===l))];return e=xr(e,s,n),Object.assign(Object.assign({},e),{elementIdsByCircuitId:xt()(e.elementIdsByCircuitId,o)})})),wr=an(((e,t,n)=>{if(!nt(t))return e;const{connectionId:i,p1:r,p2:o}=t.payload,c=function(e,t,n,i){const r=e.elementsById[t.elementId],o=e.elementsById[n.elementId];if(!r||!o)return null;const c=$n(i,r.elementType),l=$n(i,o.elementType);if(!c||!l)return null;const s=c.pins[t.pinId],a=l.pins[n.pinId];if(!s||!a)return null;if(s.direction===a.direction)return null;return{outputPin:"output"===s.direction?t:n,inputPin:"input"===s.direction?t:n}}(e,r,o,n);if(!c)return e;const{inputPin:l}=c;return Pn()(e.connectionsById,(e=>Yn(e.inputPin,l)))?e:Object.assign(Object.assign({},e),{connectionsById:Object.assign(Object.assign({},e.connectionsById),{[i]:Object.assign({id:i},c)})})})),Nr=an(((e,t)=>{if(!rt(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.connectionsById).filter((e=>e!==n));return Object.assign(Object.assign({},e),{connectionsById:xt()(e.connectionsById,i)})}));function Br(e,t){return t.weight=e,t}function Mr(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}const Sr=Br(-10,an(((e,t)=>{if(!He(t))return e;const{elementId:n,elementType:i,elementName:r,circuitId:o}=t.payload;return Object.assign(Object.assign({},e),{elementsById:Object.assign(Object.assign({},e.elementsById),{[n]:{elementType:i,elementName:null!=r?r:null}}),elementIdsByCircuitId:Object.assign(Object.assign({},e.elementIdsByCircuitId),{[o]:[...e.elementIdsByCircuitId[o],n]})})}))),zr=an(((e,t,n)=>{if(!$e(t))return e;const{elementIds:i}=t.payload;return xr(e,i,n)})),Tr=an(((e,t)=>{if(!function(e){return e.type===Ve}(t))return e;const{elementId:n}=t.payload;if(!e.elementsById[n])return e;let i=t.payload.elementName;return i||""!==i.trim()||(i=null),Object.assign(Object.assign({},e),{elementsById:Object.assign(Object.assign({},e.elementsById),{[n]:Object.assign(Object.assign({},e.elementsById[n]),{elementName:i})})})})),Rr=Kt(Or,Pr,wr,Nr,Sr,an(((e,t)=>Et(t)?h:e)),zr,Tr),Lr=Bn(((e,t)=>{if(!nt(t))return e;const{connectionId:n,joints:i}=t.payload;if(i.length>0){const t=i.map((()=>(0,Le.Z)()));e=S(e,"connectionJointIdsByConnectionId",n,t),e=S(e,"connectionJointPositionsByJointId",(e=>Object.assign(Object.assign({},e),Di()(t,i))))}else e=S(e,"connectionJointIdsByConnectionId",n,[]);return e})),Dr=Bn(((e,t)=>{if(!rt(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.connectionJointIdsByConnectionId).filter((e=>e!=n)),r=tn()(Object.keys(e.connectionJointPositionsByJointId),e.connectionJointIdsByConnectionId[n]);return Object.assign(Object.assign({},e),{connectionJointIdsByConnectionId:xt()(e.connectionJointIdsByConnectionId,i),connectionJointPositionsByJointId:xt()(e.connectionJointPositionsByJointId,r)})})),Jr=Bn(((e,t)=>{if(!function(e){return e.type===ot}(t))return e;const{connectionId:n,addAfterJointId:i,position:r,jointId:o}=t.payload;let c=e.connectionJointIdsByConnectionId[n];const l=i?c.indexOf(i)+1:0;return c=[...c.slice(0,l),o,...c.slice(l)],Object.assign(Object.assign({},e),{connectionJointIdsByConnectionId:Object.assign(Object.assign({},e.connectionJointIdsByConnectionId),{[n]:c}),connectionJointPositionsByJointId:Object.assign(Object.assign({},e.connectionJointPositionsByJointId),{[o]:r})})})),Wr=Bn(((e,t)=>{if(!function(e){return e.type===st}(t))return e;const{jointId:n}=t.payload,i=Object.keys(e.connectionJointPositionsByJointId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{connectionJointIdsByConnectionId:sn()(e.connectionJointIdsByConnectionId,(e=>e.filter((e=>e!==n)))),connectionJointPositionsByJointId:xt()(e.connectionJointPositionsByJointId,i)})})),Ar=Bn(((e,t,n)=>{if(!function(e){return e.type===ct}(t))return e;const{jointIds:i,position:r,relative:o,snapMode:c}=t.payload,l=sn()(xt()(e.connectionJointPositionsByJointId,i),(e=>{let t={x:o?e.x+r.x:r.x,y:o?e.y+r.y:r.y};return"element"===c?t=ni(n,t):"joint"===c&&(t=ii(n,t)),t}));return Object.assign(Object.assign({},e),{connectionJointPositionsByJointId:Object.assign(Object.assign({},e.connectionJointPositionsByJointId),l)})})),Ur=Bn(((e,t)=>{if(!He(t))return e;const{elementId:n,position:i=b.Ds}=t.payload;return S(e,"elementPositionsById",n,i)})),Zr=Br(Mr(zr),Bn(((e,t,n)=>{if(!$e(t))return e;const{elementIds:i}=t.payload;return function(e,t,n){const i=t.reduce(((e,t)=>{const i=Qi(n,t),r=er(n,t);return e.push(...i,...r),e}),[]),r=jn()(t,(e=>ir(n,e))),o=Hi(n),c=Object.keys(o).filter((e=>{const{inputPin:t,outputPin:n}=o[e];return r.some((e=>Yn(e,t)||Yn(e,n)))})),l=[...i,...c].reduce(((t,n)=>(t.push(...e.connectionJointIdsByConnectionId[n]),t)),[]),s=tn()(Object.keys(e.connectionJointIdsByConnectionId),i),a=tn()(Object.keys(e.connectionJointPositionsByJointId),l),u=tn()(Object.keys(e.elementPositionsById),t);return Object.assign(Object.assign({},e),{elementPositionsById:xt()(e.elementPositionsById,u),connectionJointIdsByConnectionId:xt()(e.connectionJointIdsByConnectionId,s),connectionJointPositionsByJointId:xt()(e.connectionJointPositionsByJointId,a)})}(e,i,n)}))),Fr="@element/move",Kr=(e,t,n={})=>{var i,r;return{type:Fr,payload:{elementIds:se(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}},Hr=Bn(((e,t,n)=>{if(!function(e){return e.type===Fr}(t))return e;const{elementIds:i,position:r,relative:o,snapMode:c}=t.payload,l=sn()(xt()(e.elementPositionsById,i),(e=>{let t={x:o?e.x+r.x:r.x,y:o?e.y+r.y:r.y};return"element"===c&&(t=ni(n,t)),t}));return Object.assign(Object.assign({},e),{elementPositionsById:Object.assign(Object.assign({},e.elementPositionsById),l)})})),qr=Kt(Lr,Dr,Jr,Wr,Ar,Ur,Bn(((e,t)=>Et(t)?I:e)),Zr,Hr),$r=Kt(Tn(((e,t)=>{if(!We(t))return e;const{circuitId:n}=t.payload;let i=t.payload.circuitName;return i||(i="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:i})})})),Tn(((e,t)=>{if(!Ue(t))return e;const{circuitId:n}=t.payload,i=Object.keys(e.circuitNamesByCircuitId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{circuitNamesByCircuitId:xt()(e.circuitNamesByCircuitId,i)})})),Tn(((e,t)=>{if(!function(e){return e.type===Ze}(t))return e;const{circuitId:n,circuitName:i}=t.payload,r=i.trim();return""===r?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:r})})})),Tn(((e,t)=>Et(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[m]:"Root"},elementIdsByCircuitId:{[m]:[]}}):e))),Vr="@circuit/import",Gr=Vn.Ry().shape({circuitId:Vn.Z_().required().min(1),circuitName:Vn.Z_().required().min(1)}),Yr=Vn.Ry().shape({elementId:Vn.Z_().required().min(1),elementType:Vn.Z_().required().min(1),elementName:Vn.Z_().nullable().min(1),circuitId:Vn.Z_().required().min(1),x:Vn.Rx().required(),y:Vn.Rx().required()}),_r=Vn.Ry().shape({output:Gn.required(),input:Gn.required(),joints:Vn.IX().of(b.tQ)}),Xr=Vn.Ry().shape({circuits:Vn.IX().of(Gr).min(0),elements:Vn.IX().of(Yr).min(0),connections:Vn.IX().of(_r).min(0)});class Qr extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function eo(e){const t=ar(e);return{circuits:Ln(e).map((t=>({circuitId:t,circuitName:Jn(e,t)}))),elements:mn(e).map((t=>{const n=yn(e,t),i=zn(e,t),r=En(e,t);return{elementId:t,elementType:n.elementType,elementName:n.elementName,circuitId:null!=r?r:m,x:i.x,y:i.y}})),connections:qi(e).map((n=>{const i=$i(e,n),r=lr(e,n);return{input:i.inputPin,output:i.outputPin,joints:r.map((e=>t[e]))}}))}}function to(e,t){var n,i,r;try{Xr.validateSync(t)}catch(e){throw new Qr(e.message)}e=Be;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>el(e,Je({circuitId:t,circuitName:n}))),e),e=(null!==(i=t.elements)&&void 0!==i?i:[]).reduce(((e,t)=>{var n;return el(e,Ke(t.elementType,t.circuitId,{x:t.x,y:t.y},{elementId:t.elementId,elementName:null!==(n=t.elementName)&&void 0!==n?n:void 0}))}),e),e=(null!==(r=t.connections)&&void 0!==r?r:[]).reduce(((e,t)=>el(e,tt(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new Qr("Failed to load project.")}return e}const no=Nt("tutorial"),io=Bt("tutorial"),ro=io((e=>null!=e.activeTutorial)),oo=io((e=>e.annotatedElements)),co=Br(50,((e=Be,t)=>{return Ct(t)?(ro(e)||(n=eo(e),localStorage.setItem("autosave",JSON.stringify(n))),e):e;var n})),lo=Nt("project"),so=Bt("project"),ao=lo(((e,t)=>Ct(t)?Object.assign(Object.assign({},e),{projectModified:!0}):e)),uo=lo(((e,t)=>Et(t)?(localStorage.removeItem("autosave"),Object.assign(Object.assign({},e),{projectName:"New Project",projectModified:!1})):e)),mo="@project/rename",po=lo(((e,t)=>{if(!function(e){return e.type===mo}(t))return e;let{projectName:n}=t.payload;return n=n.trim(),""===n?e:Object.assign(Object.assign({},e),{projectName:n})})),yo="@project/save",fo=()=>({type:yo}),go="@project/save:success",ho=Kt(co,(function(e=Be,t){if(!function(e){return e.type===Re}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{e=S(e=to(e,n),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"Previous Project",projectModified:!0})))}catch(e){}return e}),ao,uo,(function(e=Be,t){if(!function(e){return e.type===bt}(t))return e;const{fileName:n,saveData:i}=t.payload;try{e=S(e=to(e,i),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:n,projectModified:!1})))}catch(e){console.error("Failed to load save",e)}return e}),po,lo(((e,t)=>function(e){return e.type===go}(t)?Object.assign(Object.assign({},e),{projectModified:!1}):e))),Io=ai(((e,t)=>{if(!rt(t))return e;const{connectionId:n}=t.payload;return Object.assign(Object.assign({},e),{selectedConnectionIds:e.selectedConnectionIds.filter((e=>e!==n))})})),vo=ai(((e,t)=>{if(!$e(t))return e;const{elementIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:tn()(e.selectedElementIds,n),selectedConnectionIds:[]})})),Eo=ai(((e,t)=>Et(t)?j:e));var bo=n(5564),ko=n.n(bo);const Oo="@select/all",Co=ai(((e,t,n)=>{if(!function(e){return e.type===Oo}(t))return e;const i=Dt(n);if(!i)return e;const r=vn(n,i);let o=qi(n);const c=Hi(n);o=o.filter((e=>{const{inputPin:t,outputPin:n}=c[e];return-1!==r.indexOf(t.elementId)&&-1!==r.indexOf(n.elementId)}));const l=cr(n),s=ko()(o.map((e=>l[e])));return Object.assign(Object.assign({},e),{selectedElementIds:r,selectedConnectionIds:o,selectedJointIds:s})})),jo="@select/clear",xo=ai(((e,t)=>function(e){return e.type===jo}(t)?Object.assign(Object.assign({},e),{selectedElementIds:[],selectedConnectionIds:[],selectedJointIds:[]}):e)),Po="@select/connections",wo=ai(((e,t)=>{if(!function(e){return e.type===Po}(t))return e;const{connectionIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:"set"===i?[]:e.selectedElementIds,selectedConnectionIds:rn(e.selectedConnectionIds,n,i),selectedJointIds:"set"===i?[]:e.selectedJointIds})})),No=ai(((e,t)=>{if(!function(e){return e.type===li}(t))return e;const{elementIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:rn(e.selectedElementIds,n,i),selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:"set"===i?[]:e.selectedJointIds})})),Bo=ai(((e,t)=>{if(!function(e){return e.type===hi}(t))return e;const{jointIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:"set"===i?[]:e.selectedElementIds,selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:rn(e.selectedJointIds,n,i)})}));var Mo=n(2525),So=n.n(Mo);const zo=(0,cn.P1)(Sn,qn,pn,((e,t,n)=>sn()(e,((e,i)=>{const r=n[i];if(!r)return b.rG;const o=t[r];return o?(0,b.gQ)(o.visual.hitRect,e):b.rG})))),To=ai(((e,t,n)=>{if(!function(e){return e.type===on}(t))return e;const{region:i,circuitId:r,mode:o}=t.payload,c=vn(n,r),l=xt()(zo(n),c),s=[];So()(l,((e,t)=>{(0,b.kK)(e,i)&&s.push(t)}));const a=ar(n),u=((e,t)=>{const n=vn(e,t),i=jn()(n,(t=>tr(e,t))),r=jn()(i,(t=>lr(e,t)));return Zi()(r)})(n,r).filter((e=>{const t=a[e];return(0,b.PL)(t,i)}));return Object.assign(Object.assign({},e),{selectedElementIds:rn(e.selectedElementIds,s,o),selectedConnectionIds:"set"===o?[]:e.selectedConnectionIds,selectedJointIds:rn(e.selectedJointIds,u,o)})})),Ro="@selection/copy",Lo=()=>({type:Ro}),Do=Kt(Io,Eo,vo,Co,xo,Bo,No,To,wo,(function(e=Be,t){if(!function(e){return e.type===Ge}(t))return e;const{selectedElementIds:n,selectedJointIds:i}=e.services.selection,r=Sn(e);for(const t of n){const n=r[t];if(!n)continue;const i=ni(e,n);(0,b.kg)(n,i)||(e=el(e,Kr(t,i)))}const o=ar(e);for(const t of i){const n=o[t];if(!n)continue;const i=ii(e,n);(0,b.kg)(n,i)||(e=el(e,lt(t,i)))}return e}),(function(e=Be,t){if(!function(e){return e.type===Ro}(t))return e;const n=di(e);return 0===n.length?e:el(e,(i=n,{type:Ji,payload:{elementIds:Array.isArray(i)?i:[i]}}));var i}),(function(e=Be,t){if(!function(e){return e.type===_e}(t))return e;const{selectedElementIds:n,selectedConnectionIds:i,selectedJointIds:r}=e.services.selection;return n.length>0&&(e=el(e,{type:qe,payload:{elementIds:se(n)}})),e=i.reduce(((e,t)=>el(e,(e=>({type:it,payload:{connectionId:e}}))(t))),e),r.reduce(((e,t)=>el(e,(e=>({type:st,payload:{jointId:e}}))(t))),e)}),(function(e=Be,t){if(!function(e){return e.type===Qe}(t))return e;const{offsetX:n,offsetY:i,snapMode:r}=t.payload,o=di(e),c=yi(e),l={x:n,y:i};let s="none";"element"!==r&&"by-type"!==r||(s="element");let a="none";return a="by-type"===r?"joint":r,e=el(e,Kr(o,l,{relative:!0,snapMode:s})),el(e,lt(c,l,{relative:!0,snapMode:a}))})),Jo=Nt("simulator"),Wo=Bt("simulator"),Ao=Jo(((e,t)=>Ct(t)?x:e));function Uo(e){return e.default}const Zo={"input-momentary":Uo(n(4263)),"input-toggle":Uo(n(9028)),"logic-and":Uo(n(2404)),"logic-buffer":Uo(n(3880)),"logic-nand":Uo(n(5813)),"logic-nor":Uo(n(2791)),"logic-not":Uo(n(6139)),"logic-or":Uo(n(1868)),"logic-xor":Uo(n(6259)),"output-led":Uo(n(9480)),"output-seg7":Uo(n(136)),"pin-high":Uo(n(4303))};var Fo=n(2846);function Ko(e,t){const n=jn()(t,(e=>[e,"subElementIds"]));n.pop();const i=B()(e,n);if(!i)return null;const{evolverId:r}=i;return null!=r?r:null}var Ho=n(3857),qo=n.n(Ho);const $o=Object.freeze({evolversById:{},evolverIdsByElementId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function Vo(e,t,n=[]){var i;if(-1!==n.indexOf(e))throw new Error(`Circuit graph encountered loop on ${n.join(" => ")} while trying to add circuit ${e}`);n=[...n,e];const r={},o={},c={},l={},s=[],a=[],u={},d={},m=null!==(i=t.elementIdsByCircuitId[e])&&void 0!==i?i:[];for(const e of m){const i=t.elementTypesByElementId[e];if(!i)continue;if("pin-input"===i){s.push(e),c[e]=[];continue}if("pin-output"===i){a.push(e);continue}const l=Go(e,t,n);qo()(r,l.evolversById),qo()(o,l.evolverIdsByElementId),u[e]=l.inputElementPinsByCircuitPinId,d[e]=l.outputElementPinsByCircuitPinId}const p=t.connectionsById;for(const e of Object.keys(p)){const{inputPin:t,outputPin:n}=p[e];if(-1===m.indexOf(t.elementId)||-1===m.indexOf(n.elementId))continue;const i=B()(d,[n.elementId,n.pinId]),o=B()(u,[t.elementId,t.pinId]);if(-1!==s.indexOf(n.elementId)&&o){c[n.elementId].push(...o);continue}if(-1!==a.indexOf(t.elementId)&&i){l[t.elementId]=i;continue}if(!i||!o)continue;const y=r[i.evolverId];let f=y.outputsByPin[i.pinId];null==f&&(y.outputsByPin[i.pinId]=f=[]);for(const e of o)f.push({evolverId:e.evolverId,pinId:e.pinId}),r[e.evolverId].inputsByPin[e.pinId]={evolverId:i.evolverId,pinId:i.pinId}}return{evolversById:r,evolverIdsByElementId:o,inputElementPinsByCircuitPinId:c,outputElementPinsByCircuitPinId:l}}function Go(e,t,n){const i=t.elementTypesByElementId[e];if(!i)return $o;const r=t.elementDefsByElementType[i];if(!r||!r.elementProduction)return $o;const o="string"==typeof(c=r.elementProduction)?{type:"element",evolverType:c}:c;var c;switch(o.type){case"element":return function(e,t,{elementTypesByElementId:n,elementDefsByElementType:i}){const r=i[n[e]];if(!r)return $o;const o={},c={},l=(0,Le.Z)();o[l]={evolverType:t.evolverType,inputsByPin:{},outputsByPin:{}},c[e]={evolverId:l,subElementIds:{}};const s={},a={};for(const e of Object.keys(r.pins)){const{direction:t}=r.pins[e];"input"===t?s[e]=[{pinId:e,evolverId:l}]:"output"===t&&(a[e]={pinId:e,evolverId:l})}return{evolversById:o,evolverIdsByElementId:c,inputElementPinsByCircuitPinId:s,outputElementPinsByCircuitPinId:a}}(e,o,t);case"circuit":return function(e,t,n,i){const r=Vo(t.circuitId,n,i);return Object.assign(Object.assign({},r),{evolverIdsByElementId:{[e]:{evolverId:null,subElementIds:r.evolverIdsByElementId}}})}(e,o,t,n);default:throw new Error("Unsupported production type "+o.type)}}const Yo=Object.freeze({evolversById:{},evolverIdsByElementId:{}}),_o=(0,cn.P1)(hn,pn,Hi,qn,((e,t,n,i)=>{try{return Vo(m,{elementIdsByCircuitId:e,elementTypesByElementId:t,connectionsById:n,elementDefsByElementType:i})}catch(e){return console.error(e),Yo}})),Xo=(e,t)=>{const{evolversById:n}=_o(e),i=n[t];return i?i.evolverType:null},Qo=(e,t)=>{var n;const i=Xo(e,t);return i&&null!==(n=Zo[i])&&void 0!==n?n:null};var ec=n(7513),tc=n.n(ec);const nc=Object.freeze([]),ic=Object.freeze({});function rc(e,t){const n=(e=>{const{evolversById:t}=_o(e);return Object.keys(t)})(t);return e=x,e=n.reduce(((e,n)=>function(e,t,n){const i=Qo(n,t);if(!i)return e;const r={};return i.outputPins.forEach((e=>{r[e]=!1})),S(e,"evolverOutputValuesByEvolverId",t,r)}(e,n,t)),e),e=n.reduce(((e,n)=>cc(e,n,t)),e),Object.assign({},e,{initialized:!0})}function oc(e,t,n){if(0===t.transitionIds.length)return e;let i=Object.assign({},e,{tick:t.tick,evolverOutputValuesByEvolverId:Object.assign({},e.evolverOutputValuesByEvolverId)});const r=new Set;t.transitionIds.forEach((e=>{const{elementId:t,valuesByOutputPin:o}=i.transitionsById[e];var c,l;(c=i.evolverOutputValuesByEvolverId[t],l=o,Object.keys(l).some((e=>c[e]!==l[e])))&&(i.evolverOutputValuesByEvolverId[t]=Object.assign({},i.evolverOutputValuesByEvolverId[t],o),((e,t)=>{const{evolversById:n}=_o(e),i=n[t];return i?jn()(Ai()(i.outputsByPin),(e=>e.map((e=>e.evolverId)))):nc})(n,t).forEach((e=>r.add(e))))})),i.transitionsById=xt()(i.transitionsById,tn()(Object.keys(i.transitionsById),t.transitionIds));for(const e of r)i=cc(i,e,n);return i}function cc(e,t,n){const i=Qo(n,t);if(!i||!i.evolve)return e;const r=function(e,t,n){const i={},r=((e,t)=>{const{evolversById:n}=_o(e),i=n[t];return i?i.inputsByPin:ic})(n,t);return Object.keys(r).forEach((t=>{var n;const o=r[t];if(!o)return void(i[t]=!1);const{evolverId:c,pinId:l}=o;i[t]=(null===(n=e.evolverOutputValuesByEvolverId[c])||void 0===n?void 0:n[l])||!1})),i}(e,t,n);return lc(e,t,i.evolve(e.evolverStatesByEvolverId[t],r,e.tick))}function lc(e,t,n){const{state:i,transitions:r}=n;return i&&(e=S(e,"evolverStatesByEvolverId",t,i)),r&&(e=se(r).reduce(((e,n,i)=>function(e,t,n,i="replace"){const{tickOffset:r,valuesByPin:o,transitionMerger:c=i}=n,l=e.tick+(r>0?r:1);return"replace"===c&&(e=function(e,t){return Object.keys(e.transitionsById).filter((n=>function(e){return e.elementId===t}(e.transitionsById[n]))).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const i=xt()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let r=e.transitionWindows;const o=tc()(r,n.tick,((e,t)=>e.tick-t));if(o>=0){const e=r[o],{transitionIds:n}=e,i=e.transitionIds.indexOf(t);-1!==i&&(1===e.transitionIds.length?r=ue(r,o):(r=r.slice(),r[o]=Object.assign({},r[o],{transitionIds:ue(n,i)})))}return Object.assign({},e,{transitionsById:i,transitionWindows:r})}(e,t)),e)}(e,t)),function(e,t,n,i){const r=(0,Le.Z)(),o={elementId:t,tick:n,valuesByOutputPin:i},c=e.transitionWindows.slice();let l=tc()(c,n,((e,t)=>e.tick-t));if(l<0){l=-l-1;const e={tick:n,transitionIds:[]};c.splice(l,0,e)}const s=c[l].transitionIds.slice();s.push(r),c[l]=Object.assign({},c[l],{transitionIds:s});const a=Object.assign({},e.transitionsById,{[r]:o});return Object.assign({},e,{transitionsById:a,transitionWindows:c})}(e,t,l,o)}(e,t,n,0===i?"replace":"append")),e)),e}const sc=Jo(((e,t,n)=>{if(!(0,Fo.Vj)(t))return e;const{elementIdPath:i,data:r}=t.payload,o=((e,t)=>{const{evolverIdsByElementId:n}=_o(e);return Ko(n,t)})(n,i);if(!o)return e;const c=Xo(n,o);if(!c)return e;const l=Zo[c];if(!l||!l.interact)return e;const s=e.evolverStatesByEvolverId[o];return lc(e,o,l.interact(s,r))})),ac="@sim/start",uc=()=>({type:ac});function dc(e){return e.type===ac}const mc=Jo(((e,t,n)=>dc(t)?rc(e,n):e)),pc="@sim/step",yc=()=>({type:pc});function fc(e){return e.type===pc}const gc="@sim/tick",hc=e=>({type:gc,payload:{tickCount:e}}),Ic="@sim/stop",vc=()=>({type:Ic});function Ec(e){return e.type===Ic}const bc=Kt(Ao,sc,mc,(function(e=Be,t){if(!fc(t))return e;const{initialized:n}=e.services.simulator;n||(e=S(e,"services","simulator",(t=>rc(t,e))));const{tick:i,transitionWindows:r}=e.services.simulator;if(0===r.length)return e;const o=r[0].tick;return el(e,hc(o-i))}),Jo(((e,t)=>Ec(t)?x:e)),Jo(((e,t,n)=>{if(!function(e){return e.type===gc}(t))return e;const{tickCount:i}=t.payload,r=performance.now();e=function(e,t,n){const i=e.tick+t;e=Object.assign({},e,{transitionWindows:e.transitionWindows.slice()});let r=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=i;){if(0==--r)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=oc(e,t,n)}return e.tick!=i&&(e=Object.assign({},e,{tick:i})),e}(e,i,n);const o=performance.now()-r;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:o})}))),kc=Nt("simulatorControl"),Oc=Bt("simulatorControl"),Cc=kc(((e,t)=>Ct(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e)),jc="@sim/pause",xc=e=>({type:jc,payload:{mode:e}}),Pc=Oc((e=>"edit"!==e.mode)),wc=Oc((e=>"run"===e.mode)),Nc=Oc((e=>"pause"===e.mode)),Bc=Oc((e=>e.ticksPerSecond)),Mc=Kt(Cc,kc(((e,t)=>{if(!function(e){return e.type===jc}(t))return e;const{mode:n}=t.payload;if(!Pc.local(e))return e;let i=e.mode;switch(n){case!0:i="pause";break;case!1:i="run";break;case"toggle":i="run"==i?"pause":"run"}return Object.assign(Object.assign({},e),{mode:i})})),kc(((e,t)=>dc(t)?Object.assign(Object.assign({},e),{mode:"run"}):e)),kc(((e,t)=>fc(t)?Object.assign(Object.assign({},e),{mode:"pause"}):e)),kc(((e,t)=>Ec(t)?Object.assign(Object.assign({},P),{ticksPerSecond:e.ticksPerSecond}):e))),Sc="@tutorial/annotate",zc=e=>({type:Sc,payload:{annotations:e}}),Tc=no(((e,t)=>{if(!function(e){return e.type===Sc}(t))return e;const{annotations:n}=t.payload;return Object.assign(Object.assign({},e),{annotatedElements:se(n)})})),Rc="@tutorial/dismiss",Lc=()=>({type:Rc}),Dc="@tutorial/start",Jc=e=>({type:Dc,payload:{tutorial:e}}),Wc=Kt(Tc,((e=Be,t)=>{var n;return function(e){return e.type===Rc}(t)?null!==(n=e.services.tutorial.preTutorialState)&&void 0!==n?n:Be:e}),((e=Be,t)=>{if(!function(e){return e.type===Dc}(t))return e;const{tutorial:n}=t.payload;let{preTutorialState:i}=e.services.tutorial;return i||(i=e),e=S(e=Be,"services","project","projectName","Tutorial"),S(e,"services","tutorial",{activeTutorial:n,annotatedElements:[],preTutorialState:i})})),Ac=Nt("uiLayout"),Uc=Bt("uiLayout"),Zc=Br(Mr(ji),Ac(((e,t,n)=>{if(!Ue(t))return e;if(!e.layout)return e;const{circuitId:i}=t.payload,r=Jt(n,i),o=he(e.layout,(e=>!ke(e)||-1===r.indexOf(e.windowProps.editorId)));return Object.assign(Object.assign({},e),{layout:o})}))),Fc="@layout/rearrange",Kc=Ac(((e,t)=>{if(!function(e){return e.type===Fc}(t))return e;const{layout:n}=t.payload;return Object.assign(Object.assign({},e),{layout:n})})),Hc=Ac(((e,t,n)=>{if(!Bi(t))return e;const{newWindowId:i}=t.payload;if(!i)return e;const r=be(i),o=Rt(n);let c=e.layout;if(null==c)c=r;else{let e=!1;s=t=>{const n=A(t);return ke(n)&&n.windowProps.editorId===o?(e=!0,{direction:"row",division:50,first:t,second:r}):null},c=null!==(a=function e(t){const n=s(t);if(n)return n;const i=A(t);if(Z(i)){const t=e(i.first);if(t)return Object.assign(Object.assign({},i),{first:t});const n=e(i.second);if(n)return Object.assign(Object.assign({},i),{second:n})}return null}(l=c))&&void 0!==a?a:l,e||(c={direction:"row",division:50,first:c,second:r})}var l,s,a;return Object.assign(Object.assign({},e),{layout:c})})),qc="@view/reset",$c=()=>({type:qc}),Vc=Kt(Zc,Kc,Hc,Ac(((e,t)=>function(e){return e.type===qc}(t)?Ce:e))),Gc="@view/element-names",Yc=e=>({type:Gc,payload:{mode:e}}),_c=Nt("uiSettings"),Xc=Bt("uiSettings"),Qc=Kt(_c(((e,t)=>{if(!function(e){return e.type===Gc}(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{elementNameMode:n})}))),el=function(e){const t=Ft()(e,(e=>e.weight||0));return(e=Be,n)=>t.reduce(((e,t)=>t(e,n)),e)}(Kt(Ci,Mi,mr,kr,Rr,qr,$r,(function(e=Be,t){if(!function(e){return e.type===Vr}(t))return e;const{circuitIds:n,saveData:i}=t.payload;return function(e,t,n){var i,r;try{Xr.validateSync(n)}catch(e){throw new Qr(e.message)}const o=Object.keys(e.services.circuitProperties.circuitNamesByCircuitId),c=n.circuits.filter((e=>-1!==t.indexOf(e.circuitId)&&-1===o.indexOf(e.circuitId)));if(0===c.length)return e;try{e=c.reduce(((e,{circuitId:t,circuitName:n})=>el(e,Je({circuitId:t,circuitName:n}))),e);const t=(null!==(i=n.elements)&&void 0!==i?i:[]).filter((e=>c.some((({circuitId:t})=>t===e.circuitId))));e=t.reduce(((e,t)=>{var n;return el(e,Ke(t.elementType,t.circuitId,{x:t.x,y:t.y},{elementId:t.elementId,elementName:null!==(n=t.elementName)&&void 0!==n?n:void 0}))}),e),e=(null!==(r=n.connections)&&void 0!==r?r:[]).filter((function(e){return t.some((({elementId:t})=>e.input.elementId===t||e.output.elementId===t))})).reduce(((e,t)=>el(e,tt(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to import circuit from SaveData:",e),new Qr("Failed to import circuit.")}return e}(e,n,i)}),ho,Do,bc,Mc,Wc,Vc,Qc));const tl=[Yt,Oi,gc];var nl=n(4970),il=n(8764),rl=n(8424);function*ol(e,t){yield(0,nl.gz)(((e,t)=>({type:br,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,nl.qn)([pr,Ir]);return n.type===pr?n.payload.result:null}const cl="@project/export-link",ll=()=>({type:cl});function*sl(){yield(0,nl.ib)(cl,al)}function*al(){const e=yield(0,nl.Ys)();try{const t=eo(e),n=JSON.stringify(t),i=(0,rl.Wt)(n),r=il.lW.from(i).toString("base64"),o=encodeURIComponent(r),c=Te+u.createHref({pathname:"/import",search:"data="+o});yield(0,nl.RE)(ol,"export-project-link",{projectLink:c})}catch(e){console.error("Failed to export project as link",e)}}var ul=n(4171),dl=n.n(ul);const ml="@project/import-circuits",pl=()=>({type:ml});function*yl(){yield(0,nl.ib)(ml,fl)}function*fl(){const[e]=yield(0,nl.RE)(dl(),{accept:"application/json"}),t=yield(0,nl.RE)(e.text.bind(e)),n=JSON.parse(t),i=yield(0,nl.RE)(ol,"import-project-circuits",{circuits:n.circuits.filter((e=>e.circuitId!==m))});if(!Array.isArray(i))return;const r=i,o=[];let c;for(;c=r.pop();){o.push(c);for(const e of n.elements){const{circuitId:t,elementType:n}=e;if(c!==t)continue;const i=An(n);null!=i&&r.push(i)}}yield(0,nl.gz)(((e,t)=>({type:Vr,payload:{circuitIds:se(e),saveData:t}}))(o,n))}const gl="@project/import-link";function*hl(){yield(0,nl.ib)(gl,Il)}function*Il(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=il.lW.from(e,"base64"),i=(0,rl.rr)(n,{to:"string"}),r=JSON.parse(i);yield(0,nl.gz)(kt("Linked Project",r)),u.replace("/")}catch(e){console.error("Failed to import save from link",e)}}const vl="@project/load",El=()=>({type:vl});function*bl(){yield(0,nl.ib)(vl,kl)}function*kl(){try{const[e]=yield(0,nl.RE)(dl(),{accept:"application/json"}),t=yield(0,nl.RE)(e.text.bind(e)),n=JSON.parse(t);let i=e.name;i=i?i.substr(0,i.lastIndexOf(".json")):"Unnamed Project",yield(0,nl.gz)(kt(i,n))}catch(e){console.warn("Failed to load project:",e)}}var Ol=n(3162);const Cl=so((e=>e.projectName)),jl=so((e=>e.projectModified));function*xl(){yield(0,nl.ib)(yo,Pl)}function*Pl(){const e=yield(0,nl.Ys)();try{window.showSaveFilePicker?yield(0,nl.RE)(wl,e):yield(0,nl.RE)(Nl,e),yield(0,nl.gz)({type:go})}catch(e){console.warn("Failed to save project",e)}}function*wl(e){const t=yield(0,nl.Ys)(Cl),n=yield(0,nl.RE)(window.showSaveFilePicker,{suggestedName:t,types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!n)return;let i=n.name;i||(i=n.getFile().name),i&&(i=i.substr(0,i.lastIndexOf(".json")),yield(0,nl.gz)((e=>({type:mo,payload:{projectName:e}}))(i)));const r=eo(e),o=yield(0,nl.RE)(n.createWritable.bind(n));yield(0,nl.RE)(o.write.bind(o),JSON.stringify(r,null,2)),yield(0,nl.RE)(o.close.bind(o))}function*Nl(e){const t=yield(0,nl.Ys)(Cl),n=eo(e),i=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});(0,Ol.saveAs)(i,t+".json")}function*Bl(){yield(0,nl.rM)(sl),yield(0,nl.rM)(yl),yield(0,nl.rM)(hl),yield(0,nl.rM)(bl),yield(0,nl.rM)(xl)}function*Ml(){yield(0,nl.A7)([ac,jc,pc],Sl)}function*Sl(){for(;yield(0,nl.Ys)(wc);){try{yield(0,nl.gz)(hc(1))}catch(e){return console.error(e),void(yield(0,nl.gz)(xc(!0)))}const e=yield(0,nl.Ys)(Bc),t=Math.max(Math.ceil(1e3/e),1);yield(0,nl.gw)(t)}}function*zl(){yield(0,nl.rM)(Ml)}function Tl(e){return"circuit-editor-"+e}function Rl(e,t){return`editor-${e}--element-${t}`}function Ll(e,t,n){return`editor-${e}--element-${t}--pin-${n}`}const Dl="@tutorial/next";function*Jl(e,t={}){var n,i;const r=yield(0,nl.Ys)((t=>$n(t,e)));if(!r)return null;const o=yield(0,nl.Ys)(Rt);return o?(yield(0,nl.gz)(zc([{selector:"#element-tray--element-"+e,message:null!==(n=t.trayMessage)&&void 0!==n?n:`This is a ${r.displayName} element`},{selector:"#"+Tl(o),message:null!==(i=t.fieldMessage)&&void 0!==i?i:`Drag the ${r.displayName} element onto the circuit field.`,placement:"top"}])),(yield(0,nl.RE)((()=>Ul(Fe,(({payload:{elementType:t}})=>t===e))))).payload.elementId):null}function*Wl(e,t){for(;;){if(yield(0,nl.RE)(Al,e,t))return;yield(0,nl.qn)(dt)}}function*Al(e,t){return(yield(0,nl.Ys)(Vi)).some((({inputPin:n,outputPin:i})=>Yn(n,t)&&Yn(i,e)))}function*Ul(e,t){let n;for(;(n=yield(0,nl.qn)(e))&&!t(n););return n}function*Zl(e,t,n={}){var i;yield(0,nl.gz)(zc([{selector:e,message:t,placement:n.placement,action:{name:"Next",action:{type:Dl}}},...(null!==(i=n.additionalSelectors)&&void 0!==i?i:[]).map((e=>({selector:e})))])),yield(0,nl.qn)(Dl)}function*Fl(){yield(0,nl.RE)(Zl,"#element-tray","This is where logic elements are stored.");const e=yield(0,nl.RE)(Jl,"logic-not");if(!e)return void(yield(0,nl.gz)(Lc()));const t=yield(0,nl.RE)(Jl,"interaction-momentary");if(!t)return void(yield(0,nl.gz)(Lc()));const n=yield(0,nl.RE)(Jl,"output-led");if(!n)return void(yield(0,nl.gz)(Lc()));const i=yield(0,nl.Ys)(Rt);i?(yield(0,nl.gz)(zc([{selector:"#"+Ll(i,t,"OUT"),message:"This is the switch's output pin.",placement:"top"},{selector:"#"+Ll(i,e,"IN"),message:"This is the logic gate's input pin.",placement:"bottom"},{selector:"#"+Tl(i),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:t,pinId:"OUT"},{elementId:e,pinId:"IN"}),yield(0,nl.gz)(zc([{selector:"#"+Ll(i,e,"OUT"),message:"This is the logic gate's output pin.",placement:"top"},{selector:"#"+Ll(i,n,"IN"),message:"This is the LED's input pin.",placement:"bottom"},{selector:"#"+Tl(i),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:e,pinId:"OUT"},{elementId:n,pinId:"IN"}),yield(0,nl.gz)(zc({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,nl.qn)(ac),yield(0,nl.gz)(zc([{selector:"#"+Tl(i)},{selector:"#"+Rl(i,t),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,nl.RE)((()=>Ul(Fo.Tu,(({payload:{elementIdPath:e,data:n}})=>!0===n&&ae(e,[t]))))),yield(0,nl.gz)(zc({selector:"#"+Tl(i),placement:"top",message:"That's it!",action:{name:"End Tutorial",action:Lc()}}))):yield(0,nl.gz)(Lc())}function Kl(e){return"circuit-list--circuit-"+e}function*Hl(){yield(0,nl.RE)(Zl,"#circuit-list-window","Circuits are collections of elements that can be reused as ICs."),yield(0,nl.gz)(zc({selector:"#circuit-list",message:"Right click on the circuit list to create a new circuit."}));const e=yield(0,nl.qn)(De),{circuitId:t}=e.payload;yield(0,nl.gz)(zc({selector:"#"+Kl(t),message:"Here is your circuit.  Double click it to rename it."})),yield(0,nl.qn)(Ze),yield(0,nl.gz)(zc({selector:"#"+Kl(t),message:"Click the circuit to view it in the active editor window."})),yield(0,nl.RE)((()=>Ul(wi,(e=>e.payload.circuitId===t))));const n=yield(0,nl.Ys)(Rt);if(!n)return void(yield(0,nl.gz)(Lc()));const i=yield(0,nl.RE)(Jl,"pin-input");if(!i)return void(yield(0,nl.gz)(Lc()));yield(0,nl.RE)(Zl,"#"+Rl(n,i),"Input pins take a signal from outside for use in your circuit.",{additionalSelectors:["#"+Tl(n)]}),yield(0,nl.gz)(zc([{selector:"#"+Tl(n)},{selector:"#"+Rl(n,i),message:"Rename the pin by right clicking it and clicking on the bolded text.  Choose any name you like"}])),yield(0,nl.RE)((()=>Ul(Ve,(e=>e.payload.elementId===i)))),yield(0,nl.RE)(Zl,"#"+Rl(n,i),"Pin names will appear on the body of the IC when used in other circuits.  Be sure to name your pins!");const r=yield(0,nl.RE)(Jl,"pin-output");if(!r)return void(yield(0,nl.gz)(Lc()));yield(0,nl.RE)(Zl,"#"+Rl(n,r),"Output pins take a signal from your circuit and send it to the outside world.");const o=yield(0,nl.RE)(Jl,"pin-output",{trayMessage:"Let's take another output pin",fieldMessage:"When multiple pins are used, the pins will stack in their vertical orientation on the IC"});if(!o)return void(yield(0,nl.gz)(Lc()));yield(0,nl.RE)(Zl,"#"+Tl(n),"Let's put together a simple circuit.",{placement:"top"});const c=yield(0,nl.RE)(Jl,"logic-buffer");if(!c)return void(yield(0,nl.gz)(Lc()));const l=yield(0,nl.RE)(Jl,"logic-not");if(!l)return void(yield(0,nl.gz)(Lc()));yield(0,nl.gz)(zc([{selector:"#"+Ll(n,i,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+Ll(n,c,"IN"),message:"...to the buffer's input.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:i,pinId:"OUT"},{elementId:c,pinId:"IN"}),yield(0,nl.gz)(zc([{selector:"#"+Ll(n,c,"OUT"),message:"Connect the buffer's output pin...",placement:"top"},{selector:"#"+Ll(n,r,"IN"),message:"...to the IC's first output.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:c,pinId:"OUT"},{elementId:r,pinId:"IN"}),yield(0,nl.gz)(zc([{selector:"#"+Ll(n,i,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+Ll(n,l,"IN"),message:"...to the NOT's input.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:i,pinId:"OUT"},{elementId:l,pinId:"IN"}),yield(0,nl.gz)(zc([{selector:"#"+Ll(n,l,"OUT"),message:"Connect the NOT's output...",placement:"top"},{selector:"#"+Ll(n,o,"IN"),message:"...to the second IC output.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:l,pinId:"OUT"},{elementId:o,pinId:"IN"}),yield(0,nl.gz)(zc({selector:"#"+Kl(m),message:"We now have a functional IC.  Let's go to the root project and make use of it"})),yield(0,nl.RE)((()=>Ul(wi,(e=>e.payload.circuitId===m))));const s=Wn(t),a=yield(0,nl.RE)(Jl,s);if(!a)return void(yield(0,nl.gz)(Lc()));yield(0,nl.RE)(Zl,"#"+Tl(n),"Let's connect it up to see it in action.",{placement:"top"});const u=yield(0,nl.RE)(Jl,"interaction-momentary");if(!u)return void(yield(0,nl.gz)(Lc()));const d=yield(0,nl.RE)(Jl,"output-led",{trayMessage:"Make an LED to check the status of the first pin."});if(!d)return void(yield(0,nl.gz)(Lc()));const p=yield(0,nl.RE)(Jl,"output-led",{trayMessage:"Make an LED to check the status of the second pin."});p?(yield(0,nl.gz)(zc([{selector:"#"+Ll(n,u,"OUT"),message:"Connect the switch output...",placement:"top"},{selector:"#"+Ll(n,a,i),message:"...to the IC input.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:u,pinId:"OUT"},{elementId:a,pinId:i}),yield(0,nl.gz)(zc([{selector:"#"+Ll(n,a,r),message:"Connect the first IC output...",placement:"top"},{selector:"#"+Ll(n,d,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:a,pinId:r},{elementId:d,pinId:"IN"}),yield(0,nl.gz)(zc([{selector:"#"+Ll(n,a,r),message:"Connect the first IC output...",placement:"top"},{selector:"#"+Ll(n,d,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:a,pinId:r},{elementId:d,pinId:"IN"}),yield(0,nl.gz)(zc([{selector:"#"+Ll(n,a,o),message:"Connect the second IC output...",placement:"top"},{selector:"#"+Ll(n,p,"IN"),message:"...to the second LED.",placement:"bottom"},{selector:"#"+Tl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,nl.RE)(Wl,{elementId:a,pinId:o},{elementId:p,pinId:"IN"}),yield(0,nl.gz)(zc({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,nl.qn)(ac),yield(0,nl.gz)(zc([{selector:"#"+Tl(n)},{selector:"#"+Rl(n,u),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,nl.RE)((()=>Ul(Fo.Tu,(({payload:{elementIdPath:e,data:t}})=>!0===t&&ae(e,[u]))))),yield(0,nl.gz)(zc({selector:"#"+Tl(n),placement:"top",message:"You can place as many copies of an IC as you want.  Circuits can also contain other ICs.",action:{name:"End Tutorial",action:Lc()}}))):yield(0,nl.gz)(Lc())}function*ql(){yield(0,nl.ib)(Dc,$l)}function*$l(e){const{tutorial:t}=e.payload;switch(t){case"basics":return void(yield(0,nl.RE)(Fl));case"circuits":yield(0,nl.RE)(Hl)}}function*Vl(){yield(0,nl.rM)(ql)}const Gl=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionSanitizer:function(e){return e},stateSanitizer:function(e){return e},actionsBlacklist:tl})||Me.qC,Yl=(0,Se.ZP)(),_l=[!1,Yl].filter(R),Xl=(0,Me.MT)((function(e=Be,t){return e=function(e=Be,t){return function(e=Be,t){if(!yt(t))return e;const{undoStack:n,redoStack:i}=e.undo,r=Ut()(n);if(!r)return e;const{serviceStates:o,viewCircuitId:c}=r;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...i,Wt(e)]})}),c&&(e=el(e,Ni(c))),e}(e=function(e=Be,t){if(!ht(t))return e;const{undoStack:n,redoStack:i}=e.undo,r=Ut()(i);if(!r)return e;const{serviceStates:o,viewCircuitId:c}=r;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,Wt(e)],redoStack:i.slice(0,i.length-1)})}),c&&(e=el(e,Ni(c))),e}(e=function(e=Be,t){return!Ct(t)||yt(t)||ht(t)?e:S(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),Wt(e)],redoStack:[]})))}(e,t),t),t)}(e,t),el(e,t)}),Gl((0,Me.md)(..._l)));function Ql(e){return(0,c.v9)(e)}function es(e,t,n,r){i.useEffect((()=>{if(!e.current)return;const i=e.current;return i.addEventListener(t,n,r),()=>{i.removeEventListener(t,n,r)}}),[t,n,e,r])}Yl.run((function*(){yield(0,nl.rM)(Bl),yield(0,nl.rM)(zl),yield(0,nl.rM)(Vl)})),Xl.dispatch({type:Re});const ts=Uc((e=>e.layout)),ns=({className:e,title:t,children:n})=>i.createElement("div",{className:M("titlebar--3-TCE",e)},i.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),i.createElement("div",{className:"titlebar-divider--Wl_27"}),t&&i.createElement("div",{className:"titlebar-title--HXGig"},t),n);var is=n(1935);function rs(){}const os={registerPopoverChild:rs,unregisterPopoverChild:rs},cs=i.createContext(null),ls=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const r=i.useContext(cs),o=null==r?void 0:r.registerPopoverChild,c=null==r?void 0:r.unregisterPopoverChild,l=i.useCallback((t=>{o&&o(t),e(t)}),[e,o]),s=i.useCallback((e=>{t(e)}),[t,c]),a=i.useMemo((()=>({registerPopoverChild:l,unregisterPopoverChild:s})),[l,s]);return i.createElement(cs.Provider,{value:a},n)},ss=()=>{},as=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:o=ss,children:c})=>{const[l,s]=i.useState(null),{attributes:a,styles:u}=(0,is.D)(e?t:null,l,{placement:n});!function(e){var t;const n=null!==(t=i.useContext(cs))&&void 0!==t?t:os,r=i.useRef(n);i.useEffect((()=>{r.current=n})),i.useEffect((()=>{if(e)return r.current.registerPopoverChild(e),()=>r.current.unregisterPopoverChild(e)}),[e])}(l);const[d,m,p]=function(e=[]){const[t,n]=i.useState(e),r=i.useCallback((e=>{n([...t,e])}),[t]),o=i.useCallback((e=>{n(tn()(t,[e]))}),[t]);return[t,r,o,n]}();return function(e,t,n=!0){const r=i.useCallback((n=>{const i=se(e).filter(R);i.length&&i.every((e=>!e.contains(n.target)))&&t()}),[e,t]);i.useEffect((()=>{if(n)return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[r,n])}(i.useMemo((()=>[l,...d]),[d,l]),o),e?(0,r.createPortal)(i.createElement(ls,{registerPopoverChild:m,unregisterPopoverChild:p},i.createElement("div",Object.assign({ref:s,style:Object.assign(Object.assign({},u.popper),{zIndex:10})},a.popper),c)),document.body):null},us=i.createContext((function(){}));function ds(){return i.useContext(us)}const ms=us.Provider,ps=({content:e,placement:t,children:n})=>{const r=i.useRef(null),[o,c]=i.useState(!1),l=i.useCallback((()=>{c(!0)}),[]),s=i.useCallback((()=>{c(!1)}),[]);return i.createElement(ms,{value:s},i.createElement("div",{ref:r,onClick:l},n),i.createElement(as,{anchorEl:r.current,isOpen:o,placement:t,onRequestClose:s},o&&e))},ys={button:"button--Ui3Hp","button--size-small":"button--size-small--289kb","button--variant-primary":"button--variant-primary--2qpAa","button--variant-menu":"button--variant-menu--3lEZ1"};const fs=e=>{var{variant:t="default",size:n="default"}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["variant","size"]);return i.createElement("button",Object.assign({className:M(ys.button,ys["button--variant-"+t],ys["button--size-"+n]),type:"button"},r),r.children)};function gs(e,...t){const n=(0,c.I0)();return i.useCallback((()=>{const i=e(...t);i&&n(i)}),[n,e,...t])}function hs(e,...t){const n=(0,c.I0)();return i.useCallback((i=>{if(i.defaultPrevented)return;i.preventDefault();const r=e(...t);r&&n(r)}),[n,e,...t])}const Is="menu-item--2dcyN",vs="menu-item--disabled--RJJTK",Es="menu-item-content--3s1DG",bs="menu-item-text--1F41V",ks="menu-item-secondary--2PJLF",Os=({children:e})=>i.createElement("ul",{className:"menu--3E86w"},e),Cs=({disabled:e,onClick:t,secondary:n,children:r})=>{const o=ds(),c=i.useCallback((e=>{t&&t(e),o()}),[o,t]);return i.createElement("li",{className:M(Is,e&&vs)},i.createElement("a",{className:Es,onClick:c},i.createElement("span",{className:bs},r),n&&i.createElement("span",{className:ks},n)))},js=()=>i.createElement("div",{className:"menu-divider--1QPGp"}),xs=()=>{const e=gs(vt),t=gs(fo),n=gs(El),r=gs(pl),o=gs(ll);return i.createElement(Os,null,i.createElement(Cs,{onClick:e},"New"),i.createElement(js,null),i.createElement(Cs,{onClick:n},"Load"),i.createElement(Cs,{onClick:t},"Save"),i.createElement(js,null),i.createElement(Cs,{onClick:r},"Import Circuits"),i.createElement(js,null),i.createElement(Cs,{onClick:o},"Export Link"))};var Ps=n(1795);const ws=/(Mac|iOS|OS\ X)/.test((Ps.os||"undefined").toString()),Ns=ws?"command":"ctrl",Bs=e=>e.undo.undoStack.length>0,Ms=e=>e.undo.redoStack.length>0,Ss=dr((e=>e.clipboardElements.length>0)),zs=()=>{const e=Ql(Bs),t=gs(pt),n=Ql(Ms),r=gs(gt),o=Ql(di).length>0,c=gs(Lo),l=Ql(Ss),s=gs(ut);return i.createElement(Os,null,i.createElement(Cs,{disabled:!e,secondary:Ns+"+z",onClick:t},"Undo"),i.createElement(Cs,{disabled:!n,secondary:Ns+"+shift+z",onClick:r},"Redo"),i.createElement(js,null),i.createElement(Cs,{disabled:!o,secondary:Ns+"+c",onClick:c},"Copy"),i.createElement(Cs,{disabled:!l,secondary:Ns+"+v",onClick:s},"Paste"))},Ts=Xc((e=>e.elementNameMode)),Rs=({className:e,value:t,onChange:n,children:r})=>i.createElement("label",{className:e},i.createElement("span",{className:"checkbox-span--1EWGs"},i.createElement("input",{type:"checkbox",checked:t,onChange:n})),r),Ls=({disabled:e,secondary:t,value:n,onChange:r,children:o})=>i.createElement("li",{className:M(Is,e&&vs)},i.createElement(Rs,{className:Es,value:n,onChange:r},i.createElement("span",{className:bs},o),t&&i.createElement("span",{className:ks},t))),Ds=({disabled:e,secondary:t,content:n,children:r})=>i.createElement("li",{className:M(Is,e&&vs)},i.createElement(ps,{placement:"right-start",content:n},i.createElement("a",{className:Es},i.createElement("span",{className:bs},r),t&&i.createElement("span",{className:ks},t),i.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},i.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),Js=()=>{const e=Ql(Ts),t=gs(Yc,"all"),n=gs(Yc,"named-only"),r=gs(Yc,"none");return i.createElement(Os,null,i.createElement(Ls,{value:"all"===e,onChange:t},"Always visible"),i.createElement(Ls,{value:"named-only"===e,onChange:n},"Named Items Only"),i.createElement(Ls,{value:"none"===e,onChange:r},"Hidden"))},Ws=()=>{const e=gs($c);return i.createElement(Os,null,i.createElement(Ds,{content:i.createElement(Js,null)},"Element Names"),i.createElement(js,null),i.createElement(Cs,{onClick:e},"Reset View"))},As=()=>{const e=gs(Jc,"basics"),t=gs(Jc,"circuits");return i.createElement(Os,null,i.createElement(Cs,{onClick:e},"Basics"),i.createElement(Cs,{onClick:t},"Circuits"))},Us=()=>i.createElement(Os,null,i.createElement(Ds,{content:i.createElement(As,null)},"Tutorials")),Zs=Wo((e=>e.lastTickProcessingTimeMs)),Fs="icon--3Vly6",Ks=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:M(Fs,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),Hs=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:M(Fs,e.className)}),i.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),qs=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:M(Fs,e.className)}),i.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),$s=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:M(Fs,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z M11,1 l2,0 l0,14 l-2,0 z"})),Vs="button--2N_ol",Gs=()=>{const e=Ql(Pc),t=Ql(Nc),n=Ql(Zs),r=hs(uc),o=hs(vc),c=hs(xc,"toggle"),l=hs(yc),s=i.useCallback((e=>{e.preventDefault()}),[]);return i.createElement("span",null,e&&i.createElement("span",{className:"simrate--NKBi_"},n.toFixed(2)," ms"),e?i.createElement(Hs,{id:"simctrl-stop",className:M(Vs,"button-stop--1dD4-"),onClick:o,onMouseDown:s}):i.createElement(Ks,{id:"simctrl-run",className:M(Vs,"button-play--1vWfq"),onClick:r,onMouseDown:s}),i.createElement($s,{id:"simctrl-step",className:M(Vs,"button-step--3Fat5"),onClick:l,onMouseDown:s}),i.createElement(qs,{id:"simctrl-pause",className:M(Vs,"button-pause--1UoHJ",!e&&"button--disabled--3caLv",t&&"selected--Ev2q8"),onClick:c,onMouseDown:s}))},Ys=({className:e})=>{const t=`${Ql(Cl)}${Ql(jl)?"*":""}`;return i.createElement(ns,{className:e,title:t},i.createElement(ps,{content:i.createElement(xs,null),placement:"bottom-start"},i.createElement(fs,{variant:"menu"},"File")),i.createElement(ps,{content:i.createElement(zs,null),placement:"bottom-start"},i.createElement(fs,{variant:"menu"},"Edit")),i.createElement(ps,{content:i.createElement(Ws,null),placement:"bottom-start"},i.createElement(fs,{variant:"menu"},"View")),i.createElement(ps,{content:i.createElement(Us,null),placement:"bottom-start"},i.createElement(fs,{variant:"menu"},"Help")),i.createElement("div",{className:"project-titlebar-controls--1c1Qn"},i.createElement(Gs,null)))};var _s=n(3274);const Xs=({circuitId:e,elementIdPath:t})=>{const n=(0,c.I0)(),r=Ql((e=>Jn(e,m))),o=Ql((t=>Jn(t,e))),l=i.useCallback((e=>{e.preventDefault(),n(Ni(m,[]))}),[n]);return i.createElement(fs,{size:"small",onClick:l},0===t.length?o:r)},Qs=({elementIdPath:e})=>{const t=(0,c.I0)(),n=Ut()(e),r=Ql((e=>gn(e,n))),o=Ql((e=>kn(e,n))),l=r?An(r):null,s=Ql((e=>l?Jn(e,l):null)),a=i.useCallback((n=>{n.preventDefault(),l&&t(Ni(l,e))}),[l,e,t]);return i.createElement(fs,{size:"small",onClick:a},o," [",s,"]")},ea=({circuitId:e,elementIdPath:t})=>{const n=t.map(((e,n)=>{const r=t.slice(0,n+1);return i.createElement(i.Fragment,{key:e},i.createElement("span",null,">"),i.createElement(Qs,{elementIdPath:r}))}));return i.createElement("div",{className:M("circuit-element-breadcrumb","circuit-element-breadcrumb--1CYNC")},i.createElement(Xs,{circuitId:e,elementIdPath:t}),n)},ta=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),na=(0,cn.P1)(zo,ar,((e,t)=>[...Ai()(e),...Ai()(t).map((e=>({p1:e,p2:e})))].reduce(b.G0,ta))),ia="@element/new",ra=e=>({type:ia,payload:{elementType:e}});function oa(e){return e.type===ia}const ca=i.createContext({zoomFactor:1,zoom:()=>{}});function la(){return i.useContext(ca)}const sa=({children:e})=>{const[t,n]=i.useState(1),r=i.useCallback((e=>{n((t=>e>0?t*e*1.03:t/(1.03*-e)))}),[]),o=i.useMemo((()=>({zoomFactor:t,zoom:r})),[r,t]);return i.createElement(ca.Provider,{value:o},e)},aa={current:null},ua=i.createContext({svgRef:aa,scalerRef:aa}),da=ua.Provider,ma=({svgRef:e,scalerRef:t,children:n})=>{const r=i.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return i.createElement(da,{value:r},n)},pa=un(((e,t)=>{const{elementIdsByCircuitId:n}=e,i=Object.keys(n);for(const e of i)if(-1!==n[e].indexOf(t))return e;return null})),ya=(e,t,n)=>{if(!t)return!1;if(t===n)return!0;const i=Wn(n),{elementsById:r}=e.services.circuitGraph;return Object.keys(r).filter((e=>r[e].elementType===i)).some((n=>{const i=pa(e,n);return!!i&&ya(e,t,i)}))},fa=i.createContext({editorId:"~none",circuitId:"~none",elementIdPath:[]});function ga(){return i.useContext(fa)}const ha=({editorId:e,children:t})=>{const n=Ql((t=>zt(t,e))),{circuitId:r,elementIdPath:o}=null!=n?n:{circuitId:"~none",elementIdPath:[]},c=i.useMemo((()=>({editorId:e,circuitId:r,elementIdPath:o})),[r,o,e]);return n?i.createElement(fa.Provider,{value:c},t):null};function Ia(e,t,n){const i=t.getScreenCTM();if(!i)return n;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const o=r.matrixTransform(i.inverse());return{x:o.x,y:o.y}}function va(){const{svgRef:e,scalerRef:t}=i.useContext(ua);return i.useCallback((n=>e.current&&t.current?Ia(e.current,t.current,n):n),[e,t])}const Ea="text-unselectable--2tvXe",ba=(e,t)=>{const{evolverIdsByElementId:n}=_o(e),i=e.services.simulator.evolverOutputValuesByEvolverId,r=Ko(n,t);if(r)return i[r]},ka="element-interaction-toggle--1eeE2",Oa={"integrated-circuit":({elementId:e,elementPath:t,circuitId:n,inputPinIds:r,outputPinIds:o})=>{const l=(0,c.I0)(),s=Ql((e=>Jn(e,n))),a=Ql(bn),u=Un(r.length,o.length),d=i.useCallback((i=>{e&&(i.defaultPrevented||(i.preventDefault(),l(Ni(n,[...t||[],e]))))}),[e,l,n,t]),m=r.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{className:"element-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:4,y1:n,x2:10,y2:n}),i.createElement("text",{className:Ea,x:15,y:n,alignmentBaseline:"middle",fontSize:".7em"},a[e]))})),p=o.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{key:t,className:"element-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:n,x2:100,y2:n}),i.createElement("text",{className:Ea,x:85,y:n,textAnchor:"end",alignmentBaseline:"middle",fontSize:".7em"},a[e]))}));return i.createElement("g",null,i.createElement("text",{className:M(Ea,"element-select-highlight--fill"),textAnchor:"middle",x:50,y:0},s),i.createElement("path",{className:"element-select-highlight--stroke element-select-highlight--fill",stroke:"black",fill:"white",d:u,onDoubleClick:d}),m,p)},"interaction-momentary":({elementId:e,elementPath:t})=>{const n=(0,c.I0)(),r=Ql(Pc),o=i.useMemo((()=>[...t||[],null!=e?e:"~~none"]),[t,e]),l=Ql((e=>ba(e,o))),s=i.useCallback((e=>{r&&(e.defaultPrevented||(e.preventDefault(),n((0,Fo.Xx)(o,!0))))}),[o,n,r]),a=i.useCallback((()=>{r&&n((0,Fo.Xx)(o,!1))}),[o,n,r]);let u="darkgreen",d="lightgrey";return l&&l.OUT&&(u="lightgreen",d="black"),i.createElement("g",{onMouseDown:s,onMouseUp:a,onMouseLeave:a,className:ka},i.createElement("rect",{className:"element-select-highlight--stroke element-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),i.createElement("circle",{cx:25,cy:25,r:17,fill:u}),i.createElement("text",{className:Ea,x:25,y:25,fontSize:".8em",fill:d,textAnchor:"middle",alignmentBaseline:"middle"},"Push"))},"interaction-toggle":({elementId:e,elementPath:t,evolverState:n})=>{const r=(0,c.I0)(),o=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),r((0,Fo.Xx)([...t||[],e]))))}),[e,r,t]);let l="darkgreen",s="lightgrey",a="darkred";if(n){const{toggleState:e}=n;e?(l="lightgreen",s="black"):a="red"}return i.createElement("g",{onClick:o,className:ka},i.createElement("rect",{className:"element-select-highlight--stroke element-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),i.createElement("rect",{x:10,y:10,width:30,height:15,strokeWidth:0,fill:l}),i.createElement("text",{className:Ea,x:25,y:19,fontSize:".8em",fill:s,textAnchor:"middle",alignmentBaseline:"middle"},"On"),i.createElement("rect",{x:10,y:25,width:30,height:15,strokeWidth:0,fill:a}),i.createElement("text",{className:Ea,x:25,y:34,fontSize:".8em",fill:"lightgrey",textAnchor:"middle",alignmentBaseline:"middle"},"Off"))}},Ca=({componentName:e})=>i.createElement("g",null,i.createElement("rect",{width:50,height:50,fill:"red"}),i.createElement("text",{x:25,y:25,alignmentBaseline:"middle"},e));function ja(e,t,n,r){const{component:o,componentProps:c}=r,l=Object.assign({elementId:e,elementPath:t,evolverState:n},c);let s;return"string"==typeof o?(s=Oa[o],s||(s=()=>i.createElement(Ca,{componentName:o}))):s=o,i.createElement(s,Object.assign({},l))}const xa=Object.freeze({}),Pa=i.memo((function({className:e,elementId:t,x:n=0,y:r=0,elementType:o}){const c=Ql((e=>$n(e,o)));let l;l=c?ja(t,[],xa,c.visual):i.createElement("rect",{x:n,y:r,width:50,height:50,fill:"red"});const s=0!=n||0!=r?`translate(${n}, ${r})`:void 0;return i.createElement("g",{className:M(e,"element-visual"),transform:s},l)})),wa=i.memo((function(){const e=(0,c.I0)(),{circuitId:t}=ga(),n=Ql(ei),r=va(),{zoomFactor:o}=la();function l(e){return e*(1/o)}const[s,a]=i.useState(null),[u,d]=i.useState(null),m=Ql((e=>ya(e,An(s),t))),[,p]=(0,me.L)({accept:ia,collect:e=>{e.isOver()||(d(null),a(null))},hover:(e,t)=>{if(!oa(e))return d(null),void a(null);const n=t.getClientOffset();if(!n)return;const i=r({x:n.x,y:n.y});a(e.payload.elementType),d(i)},drop:(i,o)=>{if(!oa(i))return;if(m)return;const c=o.getClientOffset();if(!c)return;const l=r({x:c.x,y:c.y});e(Ke(i.payload.elementType,t,(0,b.R9)(l,n)))}},[t,r,n,m]),y=u&&(0,b.R9)(u,n),f=100*l(1)+"%";return i.createElement("g",{id:"drag-new-element-layer"},!m&&y&&s&&i.createElement("g",{opacity:.5},i.createElement(Pa,{x:y.x,y:y.y,elementType:s})),m&&i.createElement("g",{transform:`scale(${l(1)})`},i.createElement("rect",{width:"100%",height:"100%",opacity:.7,fill:"black"}),i.createElement("text",{x:"100",y:"25%",fill:"white"},"The current circuit is already inside the dragged IC.")),i.createElement("rect",{ref:p,width:f,height:f,fill:"transparent"}))})),Na=Vt((e=>e.dragMode)),Ba=Vt(((e,t)=>null!=e.dragMode&&e.dragStartEditorId===e.dragEndEditorId&&e.dragStartEditorId===t)),Ma=Vt((e=>null!=e.dragMode)),Sa=Vt((e=>e.dragMode?e.dragStart:null)),za=Vt((e=>e.dragMode?e.dragEnd:null)),Ta=Vt((0,cn.P1)(Na.local,Sa.local,za.local,((e,t,n)=>"select"===e&&t&&n?(0,b.Qu)(t,n):null)));let Ra=null;const La=e=>{const t=e.services.circuitEditorDrag;if("move"!==t.dragMode)return null;let n;n=di(e).length>0?ei(e):ti(e);const{dragStart:i,dragEnd:r,dragModifierKeys:o}=t;if(!r)return null;const c=(0,b.sj)(r,i);return o.ctrlMetaKey||(c.x=Math.round(c.x/n)*n,c.y=Math.round(c.y/n)*n),Ra&&(0,b.kg)(c,Ra)||(Ra=c),Ra},Da=Vt((e=>{const t=ti.local(e);if("new-joint"!==e.dragMode)return null;const{dragEnd:n,dragModifierKeys:i}=e;if(!n||!i)return null;const r=Object.assign({},n);return i.ctrlMetaKey||(r.x=Math.round(r.x/t)*t,r.y=Math.round(r.y/t)*t),r})),Ja=e=>{const t=e.services.circuitEditorDrag;if("connection"!==t.dragMode)return null;const{dragEnd:n,dragStartEditorId:i}=t;if(!n)return null;const r=Tt(e,i);return r?Qn(e,n,r):null},Wa=(0,cn.P1)(di,Sn,((e,t)=>xt()(t,e))),Aa=(0,cn.P1)(di,pn,((e,t)=>xt()(t,e))),Ua=i.memo((function(){const{editorId:e}=ga(),t=Ql((t=>Ba(t,e))),n=Ql(Wa),r=Ql(Aa),o=Ql(La);if(!t||!o)return null;let c=null;return o&&(c=Ai()(sn()(n,((e,t)=>i.createElement(Pa,{key:t,elementType:r[t],x:e.x+o.x,y:e.y+o.y}))))),i.createElement("g",{id:"drag-element-preview-layer",opacity:.3},c)}));const Za=e=>{var{x:t,y:n,interactable:r=!0,selected:o=!1}=e,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["x","y","interactable","selected"]);const[l,s]=i.useState(!1),a=i.useCallback((()=>{r&&s(!0)}),[r]),u=i.useCallback((()=>{s(!1)}),[]);return i.createElement("circle",Object.assign({className:M("connection-joint--2nCMx",o&&"selected--hKp55"),cx:t,cy:n,r:r&&l||o?4:2,onMouseOver:a,onMouseOut:u},c))},Fa=(0,cn.P1)(yi,ar,((e,t)=>xt()(t,e))),Ka=i.memo((function(){const{editorId:e}=ga(),t=Ql((t=>Ba(t,e))),n=Ql(La),r=Ql(Fa),o=Ql(Da);if(!t||!n&&!o)return null;let c=null;n&&(c=Ai()(r).map(((e,t)=>i.createElement(Za,{key:t,interactable:!1,x:e.x+n.x,y:e.y+n.y,opacity:.5}))));let l=null;return o&&(l=i.createElement(Za,{interactable:!1,x:o.x,y:o.y,opacity:.5})),i.createElement("g",{id:"drag-joint-preview-layer",opacity:.3},c,l)}));function Ha({dragThreshold:e=5,onClick:t,onDragStart:n}){const[r,o]=i.useState(!1),c=i.useRef(null),l=i.useCallback((e=>{e.preventDefault&&(o(!0),c.current={x:e.pageX,y:e.pageY})}),[]),s=i.useCallback((t=>{if(!c.current)return;const i=c.current;(Math.abs(i.x-t.pageX)>=e||Math.abs(i.y-t.pageY)>=e)&&(n&&n(t,c.current),o(!1),c.current=null)}),[e,n]),a=i.useCallback((e=>{c.current&&(t&&t(e),o(!1),c.current=null)}),[t]);return i.useEffect((()=>{if(r)return document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a)}}),[r,s,a]),{startTracking:l}}function qa(e){const{ctrlKey:t,altKey:n,shiftKey:i,metaKey:r}=e;return{ctrlMetaKey:ws?r:t,altKey:n,shiftKey:i}}Object.freeze({});const $a=({x:e,y:t,open:n,onRequestClose:r,children:o})=>{const c=i.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return i.createElement(ms,{value:r},i.createElement(as,{isOpen:n,onRequestClose:r,anchorEl:c,placement:"bottom-start"},o))};function Va(){const[e,t]=i.useState(null),n=i.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),r=i.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:i.useCallback((t=>e?("function"==typeof t&&(t=t({point:e})),i.createElement($a,{open:!0,onRequestClose:r,x:e.x,y:e.y},t)):null),[e,r])}}const Ga=({fieldPosition:e})=>{const t=gs(Ye),n=Ql(di).length>0,r=gs(Lo),o=Ql(Ss),c=gs(ut,{pastePosition:e}),l=gs(Xe);return i.createElement(i.Fragment,null,i.createElement(Cs,{onClick:t},"Align Selection To Grid"),i.createElement(js,null),i.createElement(Cs,{disabled:!n,secondary:Ns+"+c",onClick:r},"Copy"),i.createElement(Cs,{disabled:!o,secondary:Ns+"+v",onClick:c},"Paste"),i.createElement(js,null),i.createElement(Cs,{onClick:l},"Delete Selected"))},Ya=({fieldPosition:e})=>i.createElement(Os,null,i.createElement(Ga,{fieldPosition:e})),_a=i.memo((function(){const e=(0,c.I0)(),{editorId:t}=ga(),{zoomFactor:n}=la(),r=Ql((e=>Ba(e,t))),o=Ql(Ta);function l(e){return e*(1/n)}const s=va(),{openContextMenu:a,renderContextMenu:u}=Va(),d=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),a(e))}),[a]),m=i.useCallback((t=>{if(0!==t.button)return;const n=qa(t);n.ctrlMetaKey||n.shiftKey||e({type:jo})}),[e]),p=i.useCallback(((n,i)=>{const r=s(i),o=qa(n);e(((e,t,n)=>({type:bi,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(r,o,t))}),[e,t,s]),{startTracking:y}=Ha({onClick:m,onDragStart:p});return i.createElement("g",{className:"circuit-editor-mouse-layer"},i.createElement("rect",{width:100*l(1)+"%",height:100*l(1)+"%",fill:"transparent",onMouseDown:y,onContextMenu:d}),r&&o&&i.createElement("g",{transform:`translate(${o.p1.x}, ${o.p1.y})`},i.createElement("rect",{width:o.p2.x-o.p1.x,height:o.p2.y-o.p1.y,strokeWidth:l(2),strokeDasharray:`${l(5)} ${l(3)}`,stroke:"skyblue",fill:"transparent"})),u((({point:e})=>i.createElement(Ya,{fieldPosition:s(e)}))))})),Xa=i.memo((function(){const[e]=i.useState("grid-"+(0,Le.Z)()),{zoomFactor:t}=la(),n=50*t;return i.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null,i.createElement("pattern",{id:e,width:n,height:n,patternUnits:"userSpaceOnUse"},i.createElement("path",{d:`M ${n} 0 L 0 0 0 ${n}`,fill:"none",stroke:"gray",strokeWidth:.5}))),i.createElement("rect",{width:"100%",height:"100%",fill:`url(#${e})`}))})),Qa=i.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:r,onChange:o,onBeginEdit:c,onCommit:l,onCancel:s,onBlur:a,onKeyUp:u},d)=>{const[m,p]=i.useState(null),y=i.useCallback((e=>{null==m&&c&&c(),p(e.target.value),o&&o(e)}),[m,c,o]),f=i.useCallback((e=>{u&&u(e),e.defaultPrevented||null!=m&&("Escape"===e.key?(e.preventDefault(),s&&s()):"Enter"===e.key&&(e.preventDefault(),l&&l(m)))}),[u,m,s,l]),g=i.useCallback((e=>{a&&a(e),null!=m&&l&&l(m)}),[a,m,l]);return i.createElement("input",{ref:d,className:e,autoFocus:t,defaultValue:n,value:r,type:"text",onChange:y,onKeyUp:f,onBlur:g})})),eu=({className:e,textClassname:t,inputClassname:n,label:r,defaultValue:o,isEditing:c,onRequestEdit:l,onCommit:s,onCancel:a})=>{const u=i.useRef(null),d=i.useCallback((e=>{l&&(e.defaultPrevented||(e.preventDefault(),l()))}),[l]),m=i.useCallback((e=>{"Escape"===e.key&&c&&a()}),[c,a]),p=i.useCallback((()=>{c&&a()}),[c,a]);return i.useEffect((()=>{c&&u.current&&u.current.select()}),[c]),c?i.createElement(Qa,{ref:u,className:M(e,n),autoFocus:!0,defaultValue:o,onBlur:p,onKeyUp:m,onCommit:s,onCancel:a}):i.createElement("span",{className:M(e,t),onDoubleClick:d},null!=r?r:o)},tu=e=>{const{onRequestEdit:t,onCommit:n}=e,r=ds(),o=i.useCallback((()=>{t&&t()}),[t]),c=i.useCallback((e=>{n(e),r()}),[n,r]);return i.createElement("li",{className:Is,onClick:o},i.createElement(eu,Object.assign({},e,{onCommit:c})))},nu=({elementId:e,fieldPosition:t})=>{const n=(0,c.I0)(),{elementIdPath:r}=ga(),o=Ql((t=>kn(t,e))),l=Ql((t=>gn(t,e))),s=l?An(l):null,[a,u]=i.useState(!1),d=i.useCallback((()=>{u(!0)}),[]),m=i.useCallback((()=>{u(!1)}),[]),p=i.useCallback((t=>{u(!1),n(((e,t)=>({type:Ve,payload:{elementId:e,elementName:t}}))(e,t))}),[n,e]),y=i.useCallback((()=>{s&&n(Ni(s,[...r,e],{newWindow:!0}))}),[r,n,s,e]);return i.createElement(Os,null,i.createElement(tu,{defaultValue:null!=o?o:"<unknown>",label:i.createElement("span",{style:{fontWeight:"bold"}},o),isEditing:a,onRequestEdit:d,onCommit:p,onCancel:m}),i.createElement(js,null),s&&i.createElement(i.Fragment,null,i.createElement(Cs,{onClick:y},"Open in New Window"),i.createElement(js,null)),i.createElement(Ga,{fieldPosition:t}))},iu=i.memo((function({elementId:e}){const t=(0,c.I0)(),{editorId:n,elementIdPath:r}=ga(),o=Ql(Pc),{openContextMenu:l,renderContextMenu:s}=Va(),a=Ql((t=>nr(t,e))),{x:u,y:d}=Ql((t=>zn(t,e))),m=Ql((t=>((e,t)=>{const{evolverIdsByElementId:n}=_o(e),i=e.services.simulator.evolverStatesByEvolverId,r=Ko(n,t);if(r)return i[r]})(t,[...r,e]))),p=Ql((t=>mi(t,e))),y=va(),f=i.useCallback((n=>{if(o)return;if(n.defaultPrevented)return;if(0!==n.button)return;n.preventDefault();const i=nn(qa(n));t(si(e,i))}),[t,o,e]),g=i.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const i=nn(qa(n),"set-if-unselected");t(si(e,i)),l(n)}),[t,e,l]),h=i.useCallback(((i,r)=>{const o=y(r),c=qa(i);t(((e,t,n,i)=>({type:ci,payload:Object.assign(Object.assign({},t),{elementId:e,modifierKeys:n,editorId:i})}))(e,o,c,n))}),[y,t,e,n]),{startTracking:I}=Ha({onClick:f,onDragStart:h}),v=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),o||0===e.button&&I(e))}),[o,I]);let E,k;if(a){const{hitRect:t}=a.visual;E=ja(e,r,m,a.visual),k=t}else E=i.createElement("rect",{x:u,y:d,width:50,height:50,fill:p?"goldenrod":"red"}),k={p1:b.Ds,p2:{x:50,y:50}};const O=0!=u||0!=d?`translate(${u}, ${d})`:void 0;return i.createElement("g",{transform:O},i.createElement("g",{id:Rl(n,e),className:M("circuit-field-element",p&&"element-selected"),onMouseDown:v,onContextMenu:g},E),i.createElement(ru,{elementId:e,hitRect:k}),s((({point:t})=>i.createElement(nu,{elementId:e,fieldPosition:y(t)}))))})),ru=i.memo((function({elementId:e,hitRect:t}){const{zoomFactor:n}=la(),r=Ql((t=>((e,t)=>{switch(e.services.uiSettings.elementNameMode){case"all":default:return kn(e,t);case"named-only":return On(e,t);case"none":return null}})(t,e))),o=Math.max(.7,n);let c=15;return o>1?c-=2*o:c+=1/o*7,r?i.createElement("text",{fontSize:1.2/o+"em",className:Ea,textAnchor:"middle",x:t.p1.x+(t.p2.x-t.p1.x)/2,y:t.p2.y+c},r):null})),ou=iu,cu=i.memo((function(){const{circuitId:e}=ga(),t=Ql((t=>vn(t,e))).map((e=>i.createElement(ou,{key:e,elementId:e})));return i.createElement("g",null,t)})),lu=(e,t,n)=>{const i=$i(e,n);if(!i)return!1;const{outputPin:{elementId:r,pinId:o}}=i,c=gn(e,r);if("pin-input"===c){const n=t.slice(0,t.length-1),i={elementId:t[t.length-1],pinId:r},o=Xi(e,i);return!!o&&lu(e,n,o)}if(null==c?void 0:c.startsWith("ic-")){const n=[...t,r],i=Xi(e,{elementId:o,pinId:"IN"});return!!i&&lu(e,n,i)}{const n=ba(e,[...t,r]);return n&&n[o]||!1}},su=i.memo((function({connectionId:e,startJointId:t,endJointId:n}){const{editorId:r}=ga(),o=(0,c.I0)(),l=va(),s=Ql(Pc),a=Ql(Ma),u=Ql((n=>null==t?((e,t)=>{const{outputPin:{elementId:n,pinId:i}}=e.services.circuitGraph.connectionsById[t],r=nr(e,n);if(!r)return b.Ds;const o=zn(e,n),c=rr[t];if(c&&c.inputElementDef===r&&c.inputElementPosition.x===o.x&&c.inputElementPosition.y===o.y)return c.outputPosition;let l=b.Ds;r&&r.pins[i]&&(l=r.pins[i]);const s=(0,b.ZO)(o,l);return rr[t]={inputElementDef:r,inputElementPosition:o,outputPosition:s},s})(n,e):sr(n,t))),d=Ql((t=>null==n?((e,t)=>{const{inputPin:{elementId:n,pinId:i}}=e.services.circuitGraph.connectionsById[t],r=nr(e,n);if(!r)return b.Ds;const o=zn(e,n),c=or[t];if(c&&c.inputElementDef===r&&c.inputElementPosition.x===o.x&&c.inputElementPosition.y===o.y)return c.outputPosition;let l=b.Ds;r&&r.pins[i]&&(l=r.pins[i]);const s=(0,b.ZO)(o,l);return or[t]={inputElementDef:r,inputElementPosition:o,outputPosition:s},s})(t,e):sr(t,n))),[m,p]=i.useState(null),y=i.useCallback((e=>{const t=l({x:e.pageX,y:e.pageY});p(t)}),[l]),f=i.useCallback((()=>{p(null)}),[]),g=i.useCallback(((n,i)=>{const c=l(i),s=qa(n);o(((e,t,n,i,r)=>({type:vi,payload:Object.assign(Object.assign({},n),{connectionId:e,addAfterJointId:t,modifierKeys:i,editorId:r})}))(e,t,c,s,r))}),[l,o,e,t,r]),h=i.useCallback((t=>{const n=nn(qa(t));o(((e,t="set")=>({type:Po,payload:{connectionIds:Array.isArray(e)?e:[e],mode:t}}))(e,n))}),[e,o]),{startTracking:I}=Ha({onClick:h,onDragStart:g}),v=i.useCallback((e=>{e.preventDefault(),s||I(e)}),[s,I]);let E;if(!a&&!s&&m){const e=(0,b.Fv)((0,b.sj)(d,u)),t=(0,b.sj)(m,u),n=(0,b.Ih)(t,e);E=(0,b.ZO)(u,(0,b.bA)(e,n))}return i.createElement("g",{onMouseMove:y,onMouseLeave:f},i.createElement("line",{x1:u.x,y1:u.y,x2:d.x,y2:d.y,strokeWidth:2}),null==n&&i.createElement("circle",{cx:d.x,cy:d.y,r:1.5}),E&&i.createElement("circle",{cx:E.x,cy:E.y,r:3,stroke:"none",fill:"red",onMouseDown:v}))})),au=i.memo((function({jointId:e}){const{editorId:t}=ga(),n=va(),r=(0,c.I0)(),o=Ql(Pc),l=Ql((t=>fi(t,e))),s=Ql((t=>sr(t,e))),a=i.useCallback(((i,o)=>{const c=n(o),l=qa(i);r(((e,t,n,i)=>({type:gi,payload:Object.assign(Object.assign({},t),{jointId:e,modifierKeys:n,editorId:i})}))(e,c,l,t))}),[r,t,n,e]),u=i.useCallback((t=>{const n=nn(qa(t));r(Ii(e,n))}),[r,e]),{startTracking:d}=Ha({onClick:u,onDragStart:a}),m=i.useCallback((e=>{o||e.defaultPrevented||(e.preventDefault(),d(e))}),[o,d]);return i.createElement(Za,{interactable:!o,selected:l,x:s.x,y:s.y,onMouseDown:m})})),uu=i.memo((function({connectionId:e}){const{elementIdPath:t}=ga(),n=Ql((t=>lr(t,e))),r=Ql((n=>lu(n,t,e))),o=Ql((t=>pi(t,e))),c=[...n,null].map(((t,r)=>{const o=r>0?n[r-1]:null;return i.createElement(su,{key:r,connectionId:e,startJointId:o,endJointId:t})})),l=n.map((e=>i.createElement(au,{key:e,jointId:e})));return i.createElement("g",{className:M("element-connection--3wkBf",r&&"powered--RGBvy",o&&"selected--333cH")},c,l)})),du=i.memo((function(){const{circuitId:e}=ga(),t=Ql((t=>((e,t)=>{var n;return null!==(n=Yi(e)[t])&&void 0!==n?n:_i})(t,e))).map((e=>i.createElement(uu,{key:e,connectionId:e})));return i.createElement("g",null,t)}));var mu=n(784);const pu="highlight--Q2iLD",yu="is-drag-target--1NYuw",fu=i.memo((function({elementId:e,pinId:t}){const{editorId:n}=ga(),r=va(),[o,l]=i.useState(!1),s=(0,c.I0)(),a=Ql((n=>((e,t,n)=>{var i;const r=_n(e)[t];return r&&null!==(i=r[n])&&void 0!==i?i:b.Ds})(n,e,t))),u=Ql((n=>((e,t,n)=>{const i=nr(e,t);if(!i)return null;const r=i.pins[n];return r?r.direction:null})(n,e,t))),d=Ql(Ja),m=i.useCallback(((i,o)=>{const c=r(o);s(((e,t,n)=>({type:ri,payload:Object.assign(Object.assign({},e),{pin:t,editorId:n})}))(c,{elementId:e,pinId:t},n))}),[s,n,r,e,t]),{startTracking:p}=Ha({onDragStart:m}),y=i.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),p(e)))}),[p]),f=i.useCallback((()=>{l(!0)}),[]),g=i.useCallback((()=>{l(!1)}),[]);if(!a)return null;const h=null!=d&&d.elementId===e&&d.pinId===t,{x:I,y:v}=a;let E;return E="input"===u?i.createElement("path",{d:(0,mu.x)(I,v,4,-45,225),strokeWidth:2,className:M("element-pin-input--1urBY",h&&yu,o&&pu)}):i.createElement("circle",{className:M("element-pin-output--1jFy-",h&&yu,o&&pu),cx:I,cy:v,r:3}),i.createElement("g",{id:Ll(n,e,t),onMouseEnter:f,onMouseLeave:g},E,i.createElement("circle",{stroke:"none",fill:"transparent",cx:I,cy:v,r:5,onMouseDown:y}))})),gu=i.memo((function({elementId:e}){var t;const n=Ql((t=>nr(t,e))),r=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},o=Object.keys(r).map((t=>i.createElement(fu,{key:t,elementId:e,pinId:t})));return i.createElement(i.Fragment,null,o)})),hu=i.memo((function(){const{circuitId:e}=ga(),t=Ql((t=>vn(t,e))).map((e=>i.createElement(gu,{key:e,elementId:e})));return i.createElement("g",null,t)})),Iu=i.memo((function(){const{editorId:e}=ga(),t=Ql((t=>Ba(t,e))),n=Ql(Na),r=Ql(Sa),o=Ql(za);return t&&"connection"==n&&r&&o?i.createElement("line",{x1:r.x,y1:r.y,x2:o.x,y2:o.y,stroke:"black",strokeWidth:1}):null})),vu=()=>{const e=(0,c.I0)(),{editorId:t}=ga(),{zoomFactor:n}=la(),r=Ql(Ma);function o(e){return e*(1/n)}const l=function(){const{svgRef:e,scalerRef:t}=i.useContext(ua);return i.useCallback((n=>{if(!e.current||!t.current)return b.Ds;const i={x:n.pageX,y:n.pageY};return Ia(e.current,t.current,i)}),[e,t])}(),s=i.useCallback((n=>{if(0===n.buttons)return void e(qt());const i=l(n),r=qa(n);e(((e,t,n)=>({type:Yt,payload:{dragPos:e,modifierKeys:t,editorId:n}}))(i,r,t))}),[e,t,l]),a=i.useCallback((n=>{const i=l(n),r=qa(n);e(((e,t,n)=>({type:dt,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(i,r,t))}),[e,t,l]);return r?i.createElement("rect",{width:100*o(1)+"%",height:100*o(1)+"%",fill:"transparent",onMouseMove:s,onMouseUp:a}):null},Eu=({width:e,height:t})=>{const n=(0,c.I0)(),{zoomFactor:r}=la(),o=i.useRef(null),l=i.useRef(null),s=i.useCallback((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),[]),a=i.useCallback((()=>{n({type:Oi})}),[n]),[{isDraggingNewElement:u},d]=(0,me.L)({accept:ia,collect:e=>({isDraggingNewElement:e.isOver()})});return i.createElement("svg",{tabIndex:-1,ref:e=>{o.current=e,d(e)},width:e,height:t,onMouseDown:s,onMouseLeave:a,className:"circuit-field-svg--o7YIn"},i.createElement(Xa,null),i.createElement("g",{ref:l,"transform-origin":"0 0",transform:`scale(${r})`},i.createElement(ma,{svgRef:o,scalerRef:l},i.createElement(_a,null),i.createElement(cu,null),i.createElement(du,null),i.createElement(hu,null),i.createElement(Iu,null),i.createElement(Ua,null),i.createElement(Ka,null),u&&i.createElement(wa,null),i.createElement(vu,null))))},bu=({})=>{const e=i.useRef(null),{width:t,height:n}=de(e),{zoomFactor:r,zoom:o}=la(),c=Ql(na),{width:l,height:s}=(0,b.nF)(c),a=Math.max(t,l*r),u=Math.max(n,s*r);return es(e,"wheel",i.useCallback((e=>{e.defaultPrevented||e.ctrlKey&&(o(e.deltaY>0?-1:1),e.preventDefault(),e.stopPropagation())}),[o]),{passive:!1}),i.createElement("div",{ref:e,style:{width:"100%",height:"100%"}},i.createElement(Eu,{width:a,height:u}))},ku=({className:e,editorId:t})=>{const n=Ql(Pc);return i.createElement(ha,{editorId:t},i.createElement("div",{id:Tl(t),className:M("circuit-editor","circuit-editor--2jFUa",n&&"simulator-active",e)},i.createElement("div",{className:"circuit-editor-scrollarea--12k0x"},i.createElement(sa,null,i.createElement(bu,null)))))};var Ou=n(1474);const Cu=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:M(Fs,e.className)}),i.createElement("path",{d:"M4,4 L12,12 M4,12 L12,4"})),ju=({className:e,id:t,title:n,children:r})=>{const o=Q(),{closeWindow:c}=ie(),l=i.useCallback((()=>{c(o)}),[c,o]),[,s]=(0,Ou.c)({item:ye(o)});return i.createElement(ge,{id:t,className:G["tessel-window"]},i.createElement("div",{ref:s,className:G["tessel-window-titlebar"]},i.createElement("div",{className:G["tessel-window-title"]},n),i.createElement("div",{className:G["tessel-window-controls"]},i.createElement(Cu,{className:G["tessel-window-controls-close"],onClick:l}))),i.createElement("div",{className:M(G["tessel-window-content"],e)},r))},xu="keymap:CircuitEditor/SimStep",Pu="keymap:CircuitEditor/SelectAll",wu="keymap:CircuitEditor/Copy",Nu="keymap:CircuitEditor/Paste",Bu="keymap:CircuitEditor/Delete",Mu="keymap:CircuitEditor/Undo",Su="keymap:CircuitEditor/Redo",zu={[xu]:"space",[Pu]:Ns+"+a",[wu]:Ns+"+c",[Nu]:Ns+"+v",[Bu]:["backspace","del"],[Mu]:Ns+"+z",[Su]:[Ns+"+y",Ns+"+shift+z"]};const Tu=e=>{var{children:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["children"]);return i.createElement("div",Object.assign({},n,{className:L}),t)},Ru=({id:e,value:t,label:n,isSelected:r,onItemSelected:o})=>{const c=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),o(t))}),[o,t]);return i.createElement("li",{id:e,className:M("selection-list-item","selection-list-item--errDr",r&&"selection-list-item--selected--3MkqB"),onClick:c},i.createElement("div",{className:M("selection-list-item-content--321YU",Ea)},n))},Lu=({className:e,id:t,items:n,onItemSelected:r})=>i.createElement("ul",{id:t,className:M("selection-list","selection-list--3yujH",e)},n.map((e=>i.createElement(Ru,Object.assign({key:e.value},e,{onItemSelected:r}))))),Du=({circuitId:e})=>{const t=(0,c.I0)(),n=Ql((t=>Jn(t,e))),[r,o]=i.useState(!1),{openContextMenu:l,renderContextMenu:s}=Va(),a=i.useCallback((()=>{e!==m&&o(!0)}),[e]),u=i.useCallback((()=>{o(!1)}),[]),d=i.useCallback((n=>{t(((e,t)=>({type:Ze,payload:{circuitId:e,circuitName:t}}))(e,n)),o(!1)}),[e,t]),p=i.useCallback((n=>{n.preventDefault(),t(Ni(e,null,{newWindow:!0}))}),[e,t]),y=i.useCallback((n=>{n.preventDefault(),t((e=>({type:Ae,payload:{circuitId:e}}))(e))}),[t,e]),f=i.useCallback((e=>{e.preventDefault(),e.stopPropagation(),l(e)}),[l]);return i.createElement("div",{className:"circuitstree-item--22dzG",onContextMenu:f,onDoubleClick:a},i.createElement(eu,{defaultValue:n,isEditing:r,onRequestEdit:a,onCommit:d,onCancel:u}),s(i.createElement(Os,null,e!==m&&i.createElement(i.Fragment,null,i.createElement(Cs,{onClick:a},"Rename Circuit"),i.createElement(js,null)),i.createElement(Cs,{onClick:p},"Open in New Window"),e!==m&&i.createElement(i.Fragment,null,i.createElement(js,null),i.createElement(Cs,{onClick:y},"Delete Circuit")))))},Ju=()=>{const e=(0,c.I0)(),t=i.useCallback((()=>{e(Je())}),[e]);return i.createElement(Os,null,i.createElement(Cs,{onClick:t},"New Circuit"))},Wu=({className:e,isOpen:t,anchorEl:n,placement:o="auto",children:c})=>{const[l,s]=i.useState(null),[a,u]=i.useState(null),{attributes:d,styles:m}=(0,is.D)(t?n:null,l,{placement:o,modifiers:[{name:"arrow",options:{element:a}},{name:"offset",options:{offset:[0,8]}}]});return t?(0,r.createPortal)(i.createElement("div",Object.assign({ref:s,className:M("tooltip--2yxRI",e),style:m.popper,role:"tooltip"},d.popper),c,i.createElement("div",Object.assign({ref:u,"data-popper-arrow":!0,className:"tooltip-arrow--2mJMo",style:m.arrow},d.arrow))),document.body):null},Au={"input-output":"I/O","integrated-circuit":"Integrated Circuits",logic:"Logic"},Uu=({category:e,search:t})=>{const n=Ql(Hn).filter((t=>t.category===e)).filter((function(n){return n.category===e&&(null===t||-1!==n.displayName.toLowerCase().indexOf(t))})).map((e=>i.createElement(Zu,{key:e.type,elementType:e.type})));return 0===n.length?null:i.createElement(i.Fragment,null,i.createElement("li",{className:"element-tray-category--3K8sv"},Au[e]),n)},Zu=({elementType:e})=>{const[t,n]=i.useState(null),r=Ql((t=>$n(t,e))),[o,c]=i.useState(!1),l=i.useCallback((e=>{e.preventDefault(),c(!0)}),[]),s=i.useCallback((e=>{e.target===t&&c(!1)}),[t]),[,a]=(0,Ou.c)({item:ra(e)});let u,d=e,m="0 0 50 50";if(r){const{trayComponent:e,hitRect:t}=r.visual;if(e){const t=e;u=i.createElement(t,null)}else u=ja(void 0,[],void 0,r.visual),m=`${t.p1.x} ${t.p1.y} ${t.p2.x} ${t.p2.y}`;d=r.displayName}else u=i.createElement(Fu,null);return i.createElement("li",{id:"element-tray--element-"+e,ref:e=>{n(e),a(e)},className:"element-tray-item--32gev",onClick:l,onMouseOut:s},i.createElement(Wu,{placement:"top",isOpen:o,anchorEl:t},"Click and drag to create a new circuit element."),i.createElement("span",{className:"element-tray-item-preview--12k1m"},i.createElement("svg",{width:30,height:30,viewBox:m},u)),i.createElement("span",{className:Ea},d))},Fu=()=>i.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50}),Ku={"element-tray":()=>{const e=Ql(Hn),t=Zi()(e.map((e=>e.category))),[n,r]=i.useState(""),o=i.useCallback((e=>{r(e.target.value.toLowerCase())}),[]);return i.createElement(ju,{id:"element-tray",title:"Elements",className:"element-tray--2OmR6"},i.createElement("div",null,i.createElement("input",{className:"element-tray-search--2PYcp",type:"text",value:n,onChange:o,placeholder:"Search"})),i.createElement("div",{className:"element-tray-element-container--1jqen"},i.createElement("ul",{className:"element-tray-element-list--3RXLA"},t.map((e=>i.createElement(Uu,{key:e,category:e,search:n}))))))},"circuit-field":({editorId:e})=>{var t,n;const r=(0,c.I0)(),{circuitId:o,elementIdPath:l}=null!==(t=Ql((t=>zt(t,e))))&&void 0!==t?t:{circuitId:null,elementIdPath:[]},s=null!==(n=Ql((e=>Jn(e,o))))&&void 0!==n?n:"<Circuit Missing>",a=i.useMemo((()=>{function e(e){return t=>{if(t){if(t.defaultPrevented)return;t.preventDefault()}r(e)}}return{[xu]:e(yc()),[Pu]:e({type:Oo}),[wu]:e(Lo()),[Nu]:e(ut()),[Bu]:e(Xe()),[Mu]:e(pt()),[Su]:e(gt())}}),[r]),u=i.useCallback((()=>{r((e=>({type:xi,payload:{editorId:e}}))(e))}),[r,e]);return i.createElement(ju,{title:s+" [Circuit]"},i.createElement(_s.HotKeys,{keyMap:zu,handlers:a,component:Tu},i.createElement("div",{onFocus:u,className:M("circuit-field-view",L,D["flex-column"])},i.createElement(ea,{circuitId:o,elementIdPath:l}),i.createElement(ku,{className:M(L,D["flexitem-shrink"]),editorId:e}))))},"circuits-list":()=>{const e=(0,c.I0)(),t=Ql(Dn),{openContextMenu:n,renderContextMenu:r}=Va(),o=i.useCallback((t=>{e(Ni(t))}),[e]),l=i.useCallback((e=>{e.preventDefault(),n(e)}),[n]),s=i.useMemo((()=>Object.keys(t).map((e=>({id:Kl(e),value:e,label:i.createElement(Du,{circuitId:e})})))),[t]);return i.createElement(ju,{id:"circuit-list-window",title:"Circuits",className:M("circuitstree--QeaI9")},i.createElement("div",{className:L,onContextMenu:l},i.createElement(Lu,{className:L,id:"circuit-list",items:s,onItemSelected:o})),r(i.createElement(Ju,null)))}};function Hu(e){const t=Ku[e.windowId];return t?i.createElement(t,Object.assign({},e.windowProps)):null}const qu=()=>{const e=(0,c.I0)(),t=Ql(ts),n=i.useCallback((t=>{e((e=>({type:Fc,payload:{layout:e}}))(t))}),[e]),r=i.useCallback((t=>{let n=t.target;for(;null!=n;){if(n.classList.contains("circuit-editor"))return;n=n.parentElement}e(qt())}),[e]);return es({current:document.body},"mouseup",r),i.createElement("div",{className:M(L,D["flex-column"])},i.createElement(Ys,{className:D["flexitem-fix"]}),i.createElement("div",{className:M(L,D["flexitem-shrink"])},i.createElement(ve,{className:M("project-editor",L),rootItem:t,onLayoutChange:n,renderWindow:Hu})))},$u=({location:e})=>{const t=(0,c.I0)(),[n,r]=i.useState(!1);return i.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void r(!0)}const i=n.get("data");i?t((e=>({type:gl,payload:{data:e}}))(i)):r(!0)}),[]),n?i.createElement("div",null,"Failed to import project"):i.createElement("div",null,"Importing Project...")},Vu=()=>i.createElement(l.rs,null,i.createElement(l.AW,{exact:!0,path:"/",component:qu}),i.createElement(l.AW,{exact:!0,path:"/import",component:$u})),Gu=gr((e=>e.dialogType)),Yu=gr((e=>e.data));var _u=n(227),Xu=n(1074);const Qu=({className:e,isOpen:t,onRequestClose:n,children:o})=>t?(0,r.createPortal)(i.createElement("div",{className:M("modal","modal--25LBN")},i.createElement(_u.Y,{onClickOutside:n,onEscapeKey:n},i.createElement("div",{className:M("modal-content--1H0T_",e)},i.createElement(Xu.Z,{className:L},o)))),document.body):null,ed=({isOpen:e,title:t,acceptText:n,cancelText:r,onAccept:o,onCancel:c,footer:l,children:s})=>i.createElement(Qu,{className:"dialog--1eQi6",isOpen:e,onRequestClose:c},i.createElement("div",{className:"dialog-title--1DWsL"},t),i.createElement("div",null,s),i.createElement("div",{className:"dialog-footer--2hYdr"},l,c&&i.createElement(fs,{onClick:c},null!=r?r:"Cancel"),o&&i.createElement(fs,{variant:"primary",onClick:o},null!=n?n:"Accept"))),td=()=>{const e=gs(yr),t=Ql(Yu),n=null==t?void 0:t.projectLink,r=i.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const o=i.createElement(fs,{onClick:r},"Copy to Clipboard");return i.createElement(ed,{isOpen:!0,title:"Export Project Link",cancelText:"Close",onCancel:e,footer:o},i.createElement("div",{className:"export-link-dialog-link-container--phwUA"},i.createElement("code",{className:"export-link-dialog-link--1dOdK"},n)))},nd=({circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:r})=>{const o=i.useCallback((t=>{t.target.checked&&r(Zi()([...n,e]))}),[e,r,n]);return i.createElement(Rs,{onChange:o,value:-1!==n.indexOf(e)},t)},id=()=>{const e=(0,c.I0)(),t=Ql(Yu),[n,r]=i.useState([]),o=gs(vr),l=i.useCallback((()=>{e(yr(n))}),[e,n]);if(!t)return null;const{circuits:s}=t;return i.createElement(ed,{isOpen:!0,title:"Import Circuits",onAccept:l,onCancel:o,acceptText:"Import Circuits"},i.createElement("div",null,i.createElement("p",null,"Choose the circuits to import."),i.createElement("p",null,"Any chosen circuits that depend on other circuits will import their dependencies automatically."),i.createElement("p",null,"If any circuits already exist in your project, they will not be re-imported.")),i.createElement("ul",{className:"import-project-circuits-list--2ODCz"},s.map((({circuitId:e,circuitName:t})=>i.createElement("li",{key:e},i.createElement(nd,{circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:r}))))))};const rd=()=>{const e=Ql(Gu);if(!e)return null;const t=function(e){switch(e){case"export-project-link":return td;case"import-project-circuits":return id;default:return function(e){throw new Error("Unknown dialog type "+e)}(e)}}(e);return i.createElement(t,null)},od=({selector:e,message:t,placement:n,action:r=[]})=>{const o=(0,c.I0)(),l=function(e){const[t,n]=i.useState(null);return i.useEffect((()=>{const t=new MutationObserver((()=>{n(document.querySelector(e))}));return t.observe(document.body,{childList:!0,subtree:!0}),n(document.querySelector(e)),()=>{t.disconnect()}}),[e]),t}(e);i.useEffect((()=>{l&&l.scrollIntoView()}),[l]);const s=se(r);if(!l||!t&&!s.length)return null;const a=s.map((({name:e,action:t})=>i.createElement(fs,{key:e,size:"small",onClick:()=>o(t)},e)));return i.createElement(Wu,{className:"tutorial-tooltip--3gwli",anchorEl:l,placement:n,isOpen:!0},t,a&&i.createElement("div",{className:"tutorial-tooltip-actions--ENkg1"},a))},cd=()=>{const e=Ql(ro),t=Ql(oo);if(!e)return null;const n=t.map((e=>i.createElement(od,Object.assign({key:e.selector},e)))),o=t.map((({selector:e})=>`\n    ${e} {\n      position: relative;\n      z-index: 10;\n    }\n  `)).join("\n");return(0,r.createPortal)(i.createElement("div",{className:"tutorial--jscuw"},i.createElement("div",{className:"tutorial-backdrop--3I0WR"}),i.createElement("style",null,o),n),document.body)},ld=document.getElementById("root");r.render(i.createElement(s.W,{backend:a.PD},i.createElement(l.F0,{history:u},i.createElement(c.zt,{store:Xl},i.createElement((()=>i.createElement(i.Fragment,null,i.createElement(Vu,null),i.createElement(rd,null),i.createElement(cd,null))),null)))),ld)},784:(e,t,n)=>{"use strict";function i(e,t,n,i,o){const c=r(e,t,n,o),l=r(e,t,n,i),s=o-i<=180?"0":"1";return["M",c.x,c.y,"A",n,n,0,s,0,l.x,l.y].join(" ")}function r(e,t,n,i){const r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}n.d(t,{x:()=>i})}},0,[[4228,1,956,874,90,898,14,794,191,80,744,593,617,29,845,105,699,162,771]]]);
//# sourceMappingURL=client.6e7d617c604ccd7da7e5.bundle.js.map