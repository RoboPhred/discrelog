(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{2846:(e,t,n)=>{"use strict";n.d(t,{Tu:()=>r,Xx:()=>i,Vj:()=>o});const r="@element/interact",i=(e,t)=>({type:r,payload:{elementIdPath:e,data:t}});function o(e){return e.type===r}},6319:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={type:"interaction-momentary",category:"input-output",displayName:"Momentary Switch",elementProduction:"input-momentary",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-momentary"},pins:{OUT:{direction:"output",x:50,y:25}}}},8891:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={type:"interaction-toggle",category:"input-output",displayName:"Toggle Switch",elementProduction:"input-toggle",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-toggle"},pins:{OUT:{direction:"output",x:50,y:25}}}},4409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",l={type:"logic-and",category:"logic",displayName:"AND",elementProduction:"logic-and",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),r.createElement("path",{className:"element-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3013:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",l={type:"logic-buffer",category:"logic",displayName:"Buffer",elementProduction:"logic-buffer",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M72,25 L 100,25"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),r.createElement("path",{className:"element-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},2050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i={type:"logic-nand",category:"logic",displayName:"NAND",elementProduction:"logic-nand",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},r.createElement("g",{transform:"translate(-10,0)"},r.createElement("path",{d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z",stroke:"none",fill:"transparent"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 88,25 H110"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 41,15 L 15,15"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 42,35 L 15,35"}),r.createElement("path",{className:"element-select-highlight--fill",d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z M 42.857143,7.8571429 C 50.834264,7.8571429 55.918368,7.8571429 58.095238,7.8571429 C 59.285714,7.8571429 59.880952,7.8571429 60.178571,7.8571429 C 60.327381,7.8571429 60.409227,7.8571429 60.446429,7.8571429 C 60.465029,7.8571429 60.471543,7.8571429 60.47619,7.8571429 C 70.236853,7.857143 77.142857,15.497098 77.142857,25 C 77.142857,34.502902 69.760662,42.142857 60,42.142857 L 42.857143,42.142857 L 42.857143,7.8571429 z"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 79,25 A 4,4 0 1 1 71,25 A 4,4 0 1 1 79,25 z",transform:"translate(9,0)"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6583:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i={type:"logic-nor",category:"logic",displayName:"NOR",elementProduction:"logic-nor",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},r.createElement("g",null,r.createElement("path",{fill:"transparent",stroke:"none",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 h21 M31,15 H5 M32,35 H5"}),r.createElement("path",{className:"element-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6524:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i={type:"logic-not",category:"logic",displayName:"NOT",elementProduction:"logic-not",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},r.createElement("g",null,r.createElement("path",{fill:"transparent",stroke:"none",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 H100 M29,25 h-24"}),r.createElement("path",{className:"element-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},3183:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",l={type:"logic-or",category:"logic",displayName:"OR",elementProduction:"logic-or",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),r.createElement("path",{className:"element-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},1454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",l={type:"logic-xor",category:"logic",displayName:"XOR",elementProduction:"logic-xor",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M30,15 H5 M31,35 H5"}),r.createElement("g",{fillRule:"evenodd",className:"element-select-highlight--fill"},r.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),r.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3532:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const i={type:"output-led",category:"input-output",displayName:"Indicator Light",elementProduction:"output-led",visual:(0,n(6816).J)(r,{path:r,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},8112:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(6816);const i=[15,0];function o(e,t){const n=t[0];let r=`M${3*n[0]+i[0]},${3*n[1]+i[1]}`;for(const e of t.slice(1)){const[t,n]=e;r+=`L${3*t+i[0]},${3*n+i[1]}`}return r+="z",{path:r,fill:t=>t[e]?"red":"gray",strokeWidth:0}}const s={type:"output-seg7",category:"input-output",displayName:"7-Segment Display",elementProduction:"output-seg7",visual:(0,r.J)("M15,0 V63 H45 V0 z",[o("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),o("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),o("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),o("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),o("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),o("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),o("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},5148:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-high",category:"input-output",elementProduction:"pin-high",displayName:"High Pin",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M25,20 v10 M20,25 h10",fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},2380:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),i=n(669),o=n.n(i),s=n(8370),c=n(784);const l="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-input",category:"input-output",displayName:"Input Pin",visual:(0,n(7806).v)((0,s.NG)(o()(l)),r.createElement("g",null,r.createElement("path",{d:l,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:(0,c.x)(25,25,3,-45,225),fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},1615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-output",category:"input-output",displayName:"Output Pin",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-15",stroke:"black",strokeWidth:2,fill:"none"}),r.createElement("circle",{className:"element-select-highlight--fill",cx:25,cy:25,r:3,fill:"black",stroke:"none"}))),pins:{IN:{direction:"input",x:0,y:25}}}},6816:(e,t,n)=>{"use strict";n.d(t,{J:()=>d});var r=n(7294),i=n(9242),o=n(669),s=n.n(o),c=n(8370),l=n(2846);const a=({elementId:e,elementPath:t,shapePath:n,hitPath:o,evolverState:s})=>{const c=(0,i.I0)(),a=r.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),c((0,l.Xx)([...t||[],e]))))}),[e,c,t]),u=m(n,s).map(((e,t)=>r.createElement("path",{key:t,d:e.path,className:"element-select-highlight--stroke element-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return r.createElement("g",{onClick:a},r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),u)},u=({shapePath:e,hitRect:t})=>{const n=m(e,{}).map(((e,t)=>r.createElement("path",{key:t,d:e.path,className:"element-select-highlight--stroke element-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return r.createElement("svg",{width:50,height:50,viewBox:`${t.p1.x-5} ${t.p1.y-5} ${t.p2.x-t.p1.x+10} ${t.p2.y-t.p1.y+10}`},n)};function d(e,t){const n=(0,c.NG)(s()(e));return{trayComponent:()=>r.createElement(u,{shapePath:t,hitRect:n}),component:n=>r.createElement(a,Object.assign({shapePath:t,hitPath:e},n)),hitRect:n}}function m(e,t){return(Array.isArray(e)?e:[e]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const n="function"==typeof e.fill?e.fill(t||{}):e.fill,r="function"==typeof e.stroke?e.stroke(t||{}):e.stroke,i="function"==typeof e.strokeWidth?e.strokeWidth(t||{}):e.strokeWidth;return{path:e.path,fill:n,stroke:r,strokeWidth:i}}))}},7806:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(7294);function i(e,t){return{hitRect:e,trayComponent:()=>r.createElement("svg",{width:50,height:50,viewBox:`${e.p1.x-5} ${e.p1.y-5} ${e.p2.x-e.p1.x+10} ${e.p2.y-e.p1.y+10}`},t),component:()=>t}}},6503:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});const r=4},4263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:[],outputPins:["OUT"],interact:(e,t)=>void 0===t?{transitions:[{tickOffset:1,valuesByPin:{OUT:!0}},{tickOffset:1+Math.round(1.5*r.f),valuesByPin:{OUT:!1}}]}:t?{transitions:{tickOffset:1,valuesByPin:{OUT:!0}}}:{transitions:{tickOffset:1,valuesByPin:{OUT:!1}}}}},9028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const r={toggleState:!1},i={inputPins:[],outputPins:["OUT"],interact(e=r){const t=!e.toggleState;return{state:Object.assign({},e,{toggleState:t}),transitions:{tickOffset:1,valuesByPin:{OUT:t}}}},evolve:(e=r)=>({state:e,transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},2404:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:t.A&&t.B}}})}},3880:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:t.IN}}})}},5813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:!(t.A&&t.B)}}})}},2791:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:!(t.A||t.B)}}})}},6139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:!t.IN}}})}},1868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:t.A||t.B}}})}},6259:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},9480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},4303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={inputPins:[],outputPins:["OUT"],evolve:()=>({transitions:{tickOffset:1,valuesByPin:{OUT:!0}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>r,rG:()=>i,NG:()=>o,n$:()=>s,R9:()=>c,VE:()=>l,Fv:()=>a,Ih:()=>u,bA:()=>d,Qu:()=>m,gQ:()=>p,ZO:()=>y,sj:()=>f,kg:()=>g,is:()=>I,nF:()=>h,G0:()=>v,jR:()=>E,Lv:()=>b});const r=Object.freeze({x:0,y:0}),i=Object.freeze({p1:r,p2:r});function o(e){return{p1:{x:e[0],y:e[1]},p2:{x:e[2],y:e[3]}}}function s(e,t){return Math.round(e/t)*t}function c(e,t){return{x:s(e.x,t),y:s(e.y,t)}}function l(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function a(e){const t=l(e);return{x:e.x/t,y:e.y/t}}function u(e,t){return e.x*t.x+e.y*t.y}function d(e,t){return{x:e.x*t,y:e.y*t}}function m(...e){let t,n;if(1===e.length){const r=e[0];t=r.p1,n=r.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function p(e,t){return{p1:y(e.p1,t),p2:y(e.p2,t)}}function y(e,t){return{x:e.x+t.x,y:e.y+t.y}}function f(e,t){return{x:e.x-t.x,y:e.y-t.y}}function g(e,t){return e.x===t.x&&e.y===t.y}function I(e,t){return!((t=m(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function h(e){return{width:(e=m(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function v(e,t){return e=m(e),t=m(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function E(e,t){return e=m(e),t=m(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}function b(e,t,n,{threshhold:r=4,axialGridSnap:i=0}){const o=f(t,e),c=l(o),m=a(o);if(Number.isNaN(m.x)||Number.isNaN(m.y))return null;const p=u(f(n,e),m);if(p<0||p>c)return null;const g=y(e,d(m,p));i>0&&(1===Math.abs(m.x)&&(g.x=s(g.x,i)),1===Math.abs(m.y)&&(g.y=s(g.y,i)));const I=l(f(n,g));return I>r?null:{interceptPoint:g,interceptLineLengthDistance:l(f(g,e)),interceptLinePointDistance:I}}},7800:(e,t,n)=>{"use strict";var r=n(7294),i=n(3935),o=n(1033),s=n(9242),c=n(5977),l=n(862),a=n(7865);const u=(0,n(7531).q_)(),d=Object.freeze({dragMode:null}),m="root",p="root-editor",y={circucitEditorsById:{[p]:{circuitId:m,elementIdPath:[]}},activeEditorId:null},f=Object.freeze(y),g={elementIdsByCircuitId:{[m]:[]},elementsById:{},wireIdsByCircuitId:{[m]:[]},wiresByWireId:{},wireSegmentsById:{},wireJointPositionsByJointId:{}},I=Object.freeze(g),h=Object.freeze({elementPositionsById:{}}),v={circuitNamesByCircuitId:{[m]:"Root"}},E=Object.freeze(v);var b=n(8370);const w=Object.freeze({clipboardElements:[],clipboardPasteOrigin:b.Ds}),O=Object.freeze({dialogType:null,data:null}),k=Object.freeze({projectName:"New Project",projectModified:!1,isLoading:!1}),j=Object.freeze({selectedElementIds:[],selectedJointIds:[]}),x=Object.freeze({initialized:!1,tick:0,lastTickProcessingTimeMs:0,evolverStatesByEvolverId:{},evolverOutputValuesByEvolverId:{},transitionsById:{},transitionWindows:[]}),C=Object.freeze({mode:"edit",ticksPerSecond:1e3}),B=Object.freeze({activeTutorial:null,annotatedElements:[],preTutorialState:null});var P=n(7361),N=n.n(P);function S(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function M(...e){return W(e[0],e.slice(1,e.length-1).map(String),e[e.length-1])}function W(e,t,n){if(0===t.length)return"function"==typeof n?n(e):n;const r=t.slice(0,t.length-1).map(String),i=t[t.length-1],o=z(e);let s=o;for(const e of r)s[e]=z(s[e]),s=s[e];return s[i]="function"==typeof n?n(s[i]):n,o}function z(e){return Array.isArray(e)?e.slice():Object.assign({},e)}function T(e){return Boolean(e)}const L="fill-parent--3pw6U",R={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"};var D=n(8721),A=n.n(D);function J(e){return"string"==typeof e?{windowId:e}:e}function U(e){return A()(e,"windowId")}function Z(e){return A()(e,"first")&&A()(e,"second")&&A()(e,"direction")}function F(e){return"number"==typeof e?{firstPercent:e}:e}function K(e){return A()(e,"firstPercent")}function $(e){return A()(e,"firstSize")||A()(e,"secondSize")}var H=n(3493),V=n.n(H);function G(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),t}const q={tessel:"tessel--2Q3Xd","tessel-content":"tessel-content--3-kEA","tessel-drop-capture":"tessel-drop-capture--3TbuI","tessel-drop-capture--dragging":"tessel-drop-capture--dragging--Ihwyz","tessel-drop-marker":"tessel-drop-marker--1cqr2","drop-left":"drop-left--wqP1V","drop-right":"drop-right--2MyGz","drop-top":"drop-top--1S0co","drop-bottom":"drop-bottom--2f330","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C","tessel-window":"tessel-window--1qDgp","tessel-window-titlebar":"tessel-window-titlebar--uHBdn","tessel-window-title":"tessel-window-title--2v0hT","tessel-window-controls":"tessel-window-controls--3i3ou","tessel-window-controls-close":"tessel-window-controls-close--2O8Zs","tessel-window-content":"tessel-window-content--sOnG-"},Y=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),X=({direction:e,onChangePercentage:t})=>{const n=r.useRef(null),i=r.useRef(null),o=G(e),s=G(t),c=r.useMemo((()=>V()((e=>{var t,r;if(null==i.current||null==n.current)return;const c=null!==(r=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==r?r:Y;let l=0,a=0;"row"===o.current?(a=e.pageX-c.left,l=a/c.width,isNaN(l)?(l=0,a=c.left):l>1&&(l=1,a=c.right)):(a=e.pageY-c.top,l=a/c.height,isNaN(l)?(l=0,a=c.top):l>1&&(l=1,a=c.bottom)),s.current(100*l,a)}),1e3/60,{leading:!0})),[o,s]),l=r.useCallback((e=>{e.persist(),c(e)}),[c]),a=r.useCallback((e=>{!e.defaultPrevented&&n.current&&(i.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),i.current=e.pointerId))}),[]),u=r.useCallback((()=>{n.current&&i.current&&(n.current.releasePointerCapture(i.current),i.current=null)}),[]);return r.createElement("div",{ref:n,className:S("tessel-split",q["tessel-split"],q["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:a,onPointerMove:l,onPointerUp:u})},_=r.createContext([]);function Q(){return r.useContext(_)}const ee=({pathKey:e,children:t})=>{const n=Q(),i=r.useMemo((()=>[...n,e]),[n,e]);return r.createElement(_.Provider,{value:i},t)};function te(){}const ne=r.createContext({moveWindow:te,closeWindow:te});function re(){return r.useContext(ne)}const ie=({moveWindow:e,closeWindow:t,children:n})=>{const i=r.useMemo((()=>({moveWindow:e,closeWindow:t})),[e,t]);return r.createElement(ne.Provider,{value:i},n)};function oe(e,t,n){return K(e)?{firstPercent:t}:$(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const se=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:i,first:o,second:s,division:c}=e,l="row"===i?"width":"height",a=r.useCallback(((t,r)=>{const i=F(e.division);n(Object.assign(Object.assign({},e),{division:oe(i,t,r)}))}),[e,n]),u=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),d=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),m=F(c);let p="50%",y="50%",f=!1,g=!1;if(K(m)){const{firstPercent:e}=m;p=e+"%",y=100-e+"%"}else if($(m)){const{firstSize:e,secondSize:t}=m;e?(p=e+"px",f=!0,y="100%"):(p="100%",y=t+"px",g=!0)}return r.createElement("div",{className:S(L,R["row"===i?"flex-row":"flex-column"])},r.createElement("div",{className:S(f?R["flexitem-fix"]:R["flexitem-shrink"]),style:{[l]:p}},r.createElement(ee,{pathKey:"first"},r.createElement(ce,{value:o,renderWindow:t,onLayoutChange:u}))),r.createElement(X,{direction:i,onChangePercentage:a}),r.createElement("div",{className:S(g?R["flexitem-fix"]:R["flexitem-shrink"]),style:{[l]:y}},r.createElement(ee,{pathKey:"second"},r.createElement(ce,{value:s,renderWindow:t,onLayoutChange:d}))))},ce=({value:e,renderWindow:t,onLayoutChange:n})=>{const i=J(e);return U(i)?t(i):Z(i)?r.createElement(se,{item:i,renderWindow:t,onLayoutChange:n}):null};function le(e){return Array.isArray(e)?e:[e]}function ae(e,t){return e===t||e.length===t.length&&e.every(((e,n)=>t[n]===e))}const ue=Object.freeze([]);function de(){return ue}function me(e,t){const n=e.slice(0,t);for(let r=t+1;r<e.length;r++)n.push(e[r]);return n}function pe(e){const[t,n]=r.useState({left:0,top:0,right:0,bottom:0,width:0,height:0});return r.useLayoutEffect((()=>{if(!e.current)return;const t=new o.Z((()=>{const t=e.current;if(!t)return;const r=t.getBoundingClientRect();n({top:r.top,left:r.left,right:r.right,bottom:r.bottom,width:r.width,height:r.height})}));return t.observe(e.current),()=>{t.disconnect()}}),[e]),t}var ye=n(9240);const fe="@tessel/window",ge=e=>({type:fe,payload:{path:e}});function Ie(e){return e.type===fe}const he=r.forwardRef((({className:e,id:t,children:n},i)=>{const o=Q(),{moveWindow:s}=re(),c=r.useRef(null),{top:l,left:a,right:u,bottom:d}=pe(c),[m,p]=r.useState(null),y=r.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return void p(null);const n=t.getClientOffset();if(null==e||null==n||!Ie(e))return void p(null);if(n.x<a||n.x>u)return void p(null);if(n.y<l||n.y>d)return void p(null);const r=(n.x-a)/(u-a);if(r<=.3)return void p("left");if(r>=.6)return void p("right");const i=(n.y-l)/(d-l);p(i<=.3?"top":i>=.6?"bottom":null)}),[l,a,u,d]),f=r.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return;if(!Ie(e))return;const{path:n}=e.payload;ae(n,o)||null!=m&&s(n,o,m)}),[o,m,s]),[{draggingSelf:g},I]=(0,ye.L)({accept:fe,collect:e=>{e.isOver({shallow:!0})||p(null);const t=e.getItem();return t&&Ie(t)?{draggingSelf:ae(t.payload.path,o)}:{}},hover:y,drop:f},[y,f]);let h=q["tessel-drop-marker"]+" ";if(null!=m&&!g)switch(m){case"bottom":h+=q["drop-bottom"];break;case"top":h+=q["drop-top"];break;case"left":h+=q["drop-left"];break;case"right":h+=q["drop-right"]}return r.createElement("div",{id:t,ref:e=>{c.current=e,I(e),"function"==typeof i?i(e):i&&(i.current=e)},className:S(q["tessel-drop-capture"],g&&q["tessel-drop-capture--dragging"],e)},n,r.createElement("div",{className:h}))}));function ve(e,t){var n;if(!t(e))return null;const r=J(e);if(Z(r)){const i=ve(r.first,t),o=ve(r.second,t);return i&&o?e:null!==(n=null!=i?i:o)&&void 0!==n?n:null}return e}function Ee(e){return"string"==typeof e?e:Z(e)?null==e.first?Ee(e.second):null==e.second?Ee(e.first):Object.assign(Object.assign({},e),{first:Ee(e.first),second:Ee(e.second)}):e}const be=({className:e,rootItem:t,renderWindow:n,onLayoutChange:i})=>{const o=r.useCallback(((e,n,r)=>{if(0===e.length)return;let o=t;const s=N()(o,e);o&&"string"!=typeof o&&s&&(n.length>0&&!N()(o,n)||(o=W(o,e,null),o=W(o,n,(e=>{let t;if("left"===r||"right"===r)t={direction:"row",division:50,first:"left"===r?s:e,second:"right"===r?s:e};else{if("top"!==r&&"bottom"!==r)throw new Error("Unknown tessel position: "+r);t={direction:"column",division:50,first:"top"===r?s:e,second:"bottom"===r?s:e}}return t})),o=Ee(o),i(o)))}),[t,i]),s=r.useCallback((e=>{let n=t;n&&("string"!=typeof n?(n=W(n,e,null),n=Ee(n),i(n)):0===e.length&&i(null))}),[i,t]);return r.createElement("div",{className:S("tessel",q.tessel,e)},r.createElement(ie,{moveWindow:o,closeWindow:s},r.createElement(he,null,r.createElement("div",{className:q["tessel-content"]},t&&r.createElement(ce,{value:t,renderWindow:n,onLayoutChange:i})))))},we="circuit-field",Oe=e=>({windowId:we,windowProps:{editorId:e}});function ke(e){return"string"!=typeof e&&!!U(e)&&e.windowId===we}const je={layout:{direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"element-tray"},second:Oe(p)}},xe=Object.freeze(je),Ce=Object.freeze({elementNameMode:"named-only"}),Be={circuitEditorDrag:d,circuitEditors:f,circuitGraph:I,circuitLayout:h,circuitProperties:E,clipboard:w,dialog:O,project:k,selection:j,simulator:x,simulatorControl:C,tutorial:B,uiLayout:xe,uiSettings:Ce},Pe=Object.freeze(Be),Ne=["circuitProperties","circuitGraph","circuitLayout"],Se={services:Pe,undo:Object.freeze({undoStack:[],redoStack:[]})},Me=Object.freeze(Se);var We=n(4890),ze=(n(2729),n(7172));const Te=new URL(window.location.origin);Te.pathname=n.p;const Le=Te.toString(),Re="@init";var De=n(4586);const Ae="@circuit/add",Je=({circuitName:e,circuitId:t,edit:n}={})=>({type:Ae,payload:{circuitId:null!=t?t:(0,De.Z)(),circuitName:e,edit:n}});function Ue(e){return e.type===Ae}const Ze="@circuit/delete";function Fe(e){return e.type===Ze}const Ke="@circuit/rename",$e="@element/add",He=(e,t,n,r)=>({type:$e,payload:Object.assign({elementId:(0,De.Z)(),elementType:e,circuitId:t,position:n},r||{})});function Ve(e){return e.type===$e}const Ge="@element/delete";function qe(e){return e.type===Ge}const Ye="@element/rename",Xe="@selection/align-to-grid",_e=()=>({type:Xe}),Qe="@selection/delete",et=()=>({type:Qe}),tt="@selection/move",nt="@clipboard/paste",rt=(e={})=>({type:nt,payload:Object.assign({},e)}),it="@circuit-editor/drag/end",ot="@undo/undo",st=()=>({type:ot});function ct(e){return e.type===ot}const lt="@undo/redo",at=()=>({type:lt});function ut(e){return e.type===lt}const dt="@project/new",mt=()=>({type:dt});function pt(e){return e.type===dt}const yt="@project/receive",ft=(e,t)=>({type:yt,payload:{fileName:e,saveData:t}}),gt="@wire/connect",It=(e,t,n)=>({type:gt,payload:{circuitId:e,from:t,to:n}}),ht="@wire/hydrate",vt=e=>({type:ht,payload:e}),Et="@wire/segment/insert-joint",bt=[Ae,Ze,Ke,$e,Ge,Ye,Xe,Qe,tt,ot,lt,gt,ht,Et,nt,it];function wt(e){return-1!==bt.indexOf(e.type)}var Ot=n(8718),kt=n.n(Ot),jt=n(8804),xt=n.n(jt);function Ct(e){return t=>(n=Me,r)=>{const i=t(n.services[e],r,n);return n.services[e]!=i?M(n,"services",e,i):n}}function Bt(e){return t=>{const n=(n,...r)=>t(n.services[e],...r);return n.local=t,n}}const Pt=Ct("circuitEditors"),Nt=Bt("circuitEditors"),St=Nt(((e,t)=>e.circucitEditorsById[t])),Mt=(e,t)=>{const n=St(e,t);return n?n.circuitId:null},Wt=Nt((e=>{if(e.activeEditorId)return e.activeEditorId;const t=Object.keys(e.circucitEditorsById);return t.length>0?t[0]:null})),zt=Nt((e=>e.activeEditorId?e.circucitEditorsById[e.activeEditorId]:null)),Tt=Nt((e=>{if(!e.activeEditorId)return null;const t=e.circucitEditorsById[e.activeEditorId];return t?t.circuitId:null})),Lt=Nt(((e,t)=>Object.keys(e.circucitEditorsById).filter((n=>e.circucitEditorsById[n].circuitId===t))));function Rt(e){let t=null;const n=zt(e);return n&&(t=n.circuitId),{serviceStates:kt()(e.services,Ne),viewCircuitId:t}}var Dt=n(928),At=n.n(Dt),Jt=n(9734),Ut=n.n(Jt);function Zt(...e){return[].concat(...e)}const Ft="@circuit-editor/drag/abort",Kt=()=>({type:Ft}),$t=Ct("circuitEditorDrag"),Ht=Bt("circuitEditorDrag"),Vt=$t(((e,t)=>function(e){return e.type===Ft}(t)?d:e)),Gt="@circuit-editor/drag/continue",qt=$t(((e,t)=>{if(!function(e){return e.type===Gt}(t))return e;const{dragPos:n,modifierKeys:r,editorId:i}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragEndEditorId:i,dragModifierKeys:r})}));var Yt=n(3386),Xt=n.n(Yt),_t=n(1966),Qt=n.n(_t);function en(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function tn(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return Xt()(e,t);case"remove":return Qt()(e,t);case"toggle":return Qt()(e,t).concat(Qt()(t,e))}return t}function nn(e,t){switch(t){case"append":case"remove":return e}return[]}const rn="@select/region",on=Ht((()=>50)),sn=Ht((()=>5)),cn=(e,t)=>{const n=on(e);return(0,b.R9)(t,n)},ln=(e,t)=>{const n=sn(e);return(0,b.R9)(t,n)};var an=n(2222),un=n(6604),dn=n.n(un);const mn=Ct("circuitGraph"),pn=Bt("circuitGraph");function yn(e,t,n){const r=e.wiresByWireId[t],i=new Set;for(const t of r.wireSegmentIds){const r=e.wireSegmentsById[t];switch(r.type){case"input":case"output":r.jointId===n&&i.add(t);break;case"bridge":r.jointAId!==n&&r.jointBId!==n||i.add(t)}}return Array.from(i)}function fn(e){switch(e.type){case"bridge":return[e.jointAId,e.jointBId];case"input":case"output":return[e.jointId];default:return[]}}const gn=pn((e=>e.elementsById)),In=pn((0,an.P1)(gn.local,(e=>Object.keys(e)))),hn=pn((0,an.P1)(gn.local,(e=>dn()(e,(e=>e.elementType))))),vn=pn(((e,t)=>e.elementsById[t]||null)),En=pn(((e,t)=>{const n=[];for(const r of Object.keys(e.elementsById)){const{elementType:i}=e.elementsById[r];i===t&&n.push(r)}return n})),bn=pn(((e,t)=>{const n=vn.local(e,t);return n?n.elementType:null})),wn=pn((e=>e.elementIdsByCircuitId)),On=Object.freeze([]),kn=pn(((e,t)=>{var n;return null!==(n=e.elementIdsByCircuitId[t])&&void 0!==n?n:On})),jn=pn(((e,t)=>{for(const n of Object.keys(e.elementIdsByCircuitId))if(-1!==e.elementIdsByCircuitId[n].indexOf(t))return n;return null})),xn=pn((0,an.P1)((e=>e.elementsById),(e=>dn()(e,(e=>e.elementName))))),Cn=pn(((e,t)=>{var n;const r=vn.local(e,t);return r?null!==(n=r.elementName)&&void 0!==n?n:t.substr(0,4):null})),Bn=pn(((e,t)=>{const n=vn.local(e,t);return n?n.elementName:null}));var Pn=n(4654),Nn=n.n(Pn),Sn=n(3311),Mn=n.n(Sn),Wn=n(669),zn=n.n(Wn);const Tn=Ct("circuitLayout"),Ln=Bt("circuitLayout"),Rn=Ln((e=>e.elementPositionsById)),Dn=Ln(((e,t)=>{var n;return null!==(n=e.elementPositionsById[t])&&void 0!==n?n:b.Ds})),An=Ct("circuitProperties"),Jn=Bt("circuitProperties"),Un=Jn((e=>Object.keys(e.circuitNamesByCircuitId))),Zn=Jn((e=>e.circuitNamesByCircuitId)),Fn=Jn(((e,t)=>e.circuitNamesByCircuitId[t]));function Kn(e){return"ic-"+e}function $n(e){return e&&e.startsWith("ic-")?e.substr(3):null}function Hn(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}function Vn(e,t){return{x:"input"===t?0:100,y:50*e+25}}const Gn=[(0,an.P1)(wn,hn,Rn,Zn,((e,t,n,i)=>Object.keys(e).filter((e=>e!==m)).map((o=>{var s,c;const l=null!==(s=e[o])&&void 0!==s?s:[],a=null!==(c=i[o])&&void 0!==c?c:o.substr(0,5);let u=l.filter((e=>t[e].startsWith("pin-")));u=Ut()(u,(e=>n[e].y),(e=>n[e].x));const d={},m=[],p=[];for(const e of u){const n=t[e];"pin-input"===n?(d[e]=Object.assign({direction:"input"},Vn(m.length,"input")),m.push(e)):"pin-output"===n&&(d[e]=Object.assign({direction:"output"},Vn(p.length,"output")),p.push(e))}const y={circuitId:o,inputPinIds:m,outputPinIds:p};return{type:Kn(o),category:"integrated-circuit",displayName:a,elementProduction:{type:"circuit",circuitId:o},visual:{hitRect:(0,b.NG)(zn()(Hn(m.length,p.length))),trayComponent:()=>r.createElement("g",{stroke:"black",strokeWidth:1},r.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),r.createElement("line",{x1:10,y1:15,x2:5,y2:15}),r.createElement("line",{x1:40,y1:15,x2:45,y2:15}),r.createElement("line",{x1:10,y1:35,x2:5,y2:35}),r.createElement("line",{x1:40,y1:35,x2:45,y2:35})),component:"integrated-circuit",componentProps:y},pins:d}})))),n(6319).Z,n(8891).Z,n(4409).Z,n(3013).Z,n(2050).Z,n(6583).Z,n(6524).Z,n(3183).Z,n(1454).Z,n(3532).Z,n(8112).Z,n(5148).Z,n(2380).Z,n(1615).Z];let qn=[];const Yn=e=>{const t=Nn()(Gn,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,le(n)}(t,e)));return t.every(((e,t)=>e===qn[t]))?qn:(qn=t,t)},Xn=(0,an.P1)(Yn,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),_n=(e,t)=>{var n;const r=Yn(e);return null!==(n=Mn()(r,(e=>e.type===t)))&&void 0!==n?n:null};function Qn(e,t){return e.elementId===t.elementId&&e.pinId===t.pinId}function er(e){return"output"===e.type}function tr(e){return"input"===e.type}function nr(e){return"input-output"===e.type}function rr(e){return"input"===e.type||"input-output"===e.type}const ir=(0,an.P1)(Xn,Rn,hn,((e,t,n)=>{var r;const i={},o=Object.keys(n);for(const s of o){const o={};i[s]=o;const c=null!==(r=t[s])&&void 0!==r?r:b.Ds,l=n[s];if(!l)continue;const a=e[l];if(!a)continue;const u=Object.keys(a.pins);for(const e of u){const t=a.pins[e],n=(0,b.ZO)(c,t);o[e]=n}}return i})),or=(e,t,n)=>{var r;const i=ir(e)[t];return i&&null!==(r=i[n])&&void 0!==r?r:b.Ds};let sr=null;var cr=n(2628),lr=n.n(cr),ar=n(4908),ur=n.n(ar);const dr=pn((e=>e.wiresByWireId)),mr=(0,an.P1)(dr,(e=>Object.keys(e))),pr=pn((e=>e.wireSegmentsById)),yr=pn((0,an.P1)(pr.local,(e=>lr()(e)))),fr=pn(((e,t)=>{const n=e.wiresByWireId[t];return n?n.wireSegmentIds:de()})),gr=pn(((e,t)=>{for(const n of Object.keys(e.wiresByWireId)){const{wireSegmentIds:r}=e.wiresByWireId[n];if(-1!==r.indexOf(t))return n}return null})),Ir=pn(((e,t)=>{const n=e.wiresByWireId[t];return n?n.wireJointIds:de()})),hr=pn(((e,t)=>{const n=vr.local(e,t);if(!n)return null;for(const t of Object.keys(e.wireIdsByCircuitId))if(-1!==e.wireIdsByCircuitId[t].indexOf(n))return t;return null})),vr=pn(((e,t)=>{for(const n of Object.keys(e.wiresByWireId)){const{wireJointIds:r}=e.wiresByWireId[n];if(-1!==r.indexOf(t))return n}return null})),Er=pn(((e,t)=>{const n=e.wireSegmentsById[t];return n?n.type:null})),br=pn(((e,t)=>{const n=fr.local(e,t),r=Nn()(n,(t=>fn(wr.local(e,t))));return ur()(r)})),wr=pn(((e,t)=>{var n;return null!==(n=e.wireSegmentsById[t])&&void 0!==n?n:null})),Or=pn(((e,t,n)=>{const r=yr.local(e);for(const{inputPin:e}of r.filter(rr))if(Qn(e,{elementId:t,pinId:n}))return!0;return!1})),kr=pn(((e,t)=>{var n;return null!==(n=e.wireIdsByCircuitId[t])&&void 0!==n?n:de()})),jr=pn(((e,t)=>{for(const n of Object.keys(e.wireIdsByCircuitId))if(-1!==e.wireIdsByCircuitId[n].indexOf(t))return n;return null})),xr=pn(((e,t)=>{const n=e.wireIdsByCircuitId[t];return Nn()(n,(t=>e.wiresByWireId[t].wireJointIds))})),Cr=pn(((e,t)=>{const n=vr.local(e,t);if(!n)return de();const r=e.wiresByWireId[n],i=[];for(const n of r.wireSegmentIds)-1!==fn(e.wireSegmentsById[n]).indexOf(t)&&i.push(n);return i})),Br=pn((e=>e.wireJointPositionsByJointId)),Pr=pn(((e,t)=>{var n;return null!==(n=e.wireJointPositionsByJointId[t])&&void 0!==n?n:b.Ds})),Nr=(e,t)=>{const n=wr(e,t);switch(n.type){case"output":case"input-output":{const{outputPin:t}=n;return or(e,t.elementId,t.pinId)}case"input":{const{jointId:t}=n;return Pr(e,t)}case"bridge":{const{jointAId:t}=n;return Pr(e,t)}}},Sr=(e,t)=>{const n=wr(e,t);switch(n.type){case"output":{const{jointId:t}=n;return Pr(e,t)}case"input":case"input-output":{const{inputPin:t}=n;return or(e,t.elementId,t.pinId)}case"bridge":{const{jointBId:t}=n;return Pr(e,t)}}},Mr=(e,t)=>{const n=e.services.circuitEditorDrag;if("wire"!==n.dragMode)return null;const{dragStartEditorId:r,dragModifierKeys:i}=n,o=!i.ctrlMetaKey,s=Mt(e,r);if(!s)return null;const c=((e,t,n)=>{var r;const i=ir(e),o=kn(e,n);if(!o)return null;for(const e of o){const n=null!==(r=i[e])&&void 0!==r?r:b.Ds,o=Object.keys(n);for(const r of o){const i=n[r],o=(0,b.sj)(t,i);if((0,b.VE)(o)>6)continue;const s={elementId:e,pinId:r};return sr&&Qn(s,sr)||(sr=s),sr}}return null})(e,t,s);if(c)return{type:"pin",pin:c};const l=function(e,t,n){const r=kr(e,t);for(const t of r){const r=Ir(e,t);for(const t of r){const r=Pr(e,t);if(!((0,b.VE)((0,b.sj)(n,r))>4))return{type:"joint",jointId:t}}}return null}(e,s,t);if(l)return l;const a=function(e,t,n,r){const i=sn(e),o=kr(e,t);for(const t of o){const o=fr(e,t);for(const t of o){const o=Nr(e,t),s=Sr(e,t),c=(0,b.Lv)(o,s,n,{axialGridSnap:r?i:void 0});if(c)return{type:"segment",segmentId:t,segmentInsertLength:c.interceptLineLengthDistance}}}return null}(e,s,t,o);if(a)return a;const u=sn(e);if(i.shiftKey)o&&(t=ln(e,t));else{const n=Rr(e);if(n){const e=(0,b.Fv)((0,b.sj)(t,n));t=Math.abs(e.x)>=.5?{x:o?(0,b.n$)(t.x,u):t.x,y:n.y}:{x:n.x,y:o?(0,b.n$)(t.y,u):t.y}}}return{type:"floating",point:t}},Wr=e=>{const t=e.services.circuitEditorDrag;if("wire"!==t.dragMode)return null;const{dragEnd:n}=t;return n?Mr(e,n):null};let zr=null;const Tr=e=>{const t=Wr(e);if(!t||"pin"!==t.type)return null;const n=t.pin;return zr&&Qn(zr,n)||(zr=n),zr};function Lr(e,t){switch(t.type){case"floating":return t.point;case"pin":return or(e,t.pin.elementId,t.pin.pinId);case"segment":{const{segmentId:n,segmentInsertLength:r}=t,i=Nr(e,n),o=Sr(e,n),s=(0,b.Fv)((0,b.sj)(o,i));return(0,b.ZO)(i,(0,b.bA)(s,r))}case"joint":return Pr(e,t.jointId)}return null}const Rr=e=>{const t=e.services.circuitEditorDrag;return"wire"!==t.dragMode?null:Lr(e,t.dragStartTarget)};let Dr=b.Ds;const Ar=e=>{const t=Wr(e);if(!t)return null;const n=Lr(e,t);return n?((0,b.kg)(n,Dr)||(Dr=n),Dr):null},Jr=e=>{const t=e.services.circuitEditorDrag;if("wire-segment-new-joint"!==t.dragMode)return null;let n=t.dragEnd;return n?(t.dragModifierKeys.ctrlMetaKey||(n=ln(e,n)),n):null},Ur=e=>{const t=e.services.circuitEditorDrag;if("wire-segment-new-joint"!==t.dragMode)return de();const{dragWireSegmentId:n}=t,r=Jr(e);if(!n||!r)return de();const i=Nr(e,n),o=Sr(e,n);return i&&o?[[i,r],[r,o]]:de()},Zr="@field/drag/start/element",Fr="@select/elements",Kr=(e,t="set")=>({type:Fr,payload:{elementIds:Array.isArray(e)?e:[e],mode:t}}),$r=Ct("selection"),Hr=Bt("selection"),Vr=Hr((e=>e.selectedElementIds)),Gr=Hr((e=>e.selectedJointIds)),qr=Hr(((e,t)=>-1!==e.selectedElementIds.indexOf(t))),Yr=Hr(((e,t)=>-1!==e.selectedJointIds.indexOf(t)));(0,an.P1)(gn,Vr,((e,t)=>kt()(e,t)));const Xr="@circuit-editor/drag/start/select",_r=$t(((e,t)=>{if(!function(e){return e.type===Xr}(t))return e;const{x:n,y:r,modifierKeys:i,editorId:o}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragStart:{x:n,y:r},dragStartEditorId:o,dragModifierKeys:i,dragEnd:null,dragEndEditorId:null})})),Qr="@circuit-editor/drag/start/wire-joint",ei="@select/joints",ti=(e,t="set")=>({type:ei,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}}),ni="@circuit-editor/drag/start/wire-segment",ri=$t(((e,t,n)=>{if(!function(e){return e.type===ni}(t))return e;const{x:r,y:i,editorId:o,modifierKeys:s,wireId:c,wireSegmentId:l}=t.payload;if(s.ctrlMetaKey){const e=Nr(n,l),t=Sr(n,l),c=(0,b.Fv)((0,b.sj)(t,e)),a=(0,b.sj)({x:r,y:i},e);return{dragMode:"wire",dragStart:{x:r,y:i},dragStartEditorId:o,dragModifierKeys:s,dragStartTarget:{type:"segment",segmentId:l,segmentInsertLength:(0,b.Ih)(a,c)},dragEnd:null,dragEndEditorId:null}}return{dragMode:"wire-segment-new-joint",dragStart:{x:r,y:i},dragStartEditorId:o,dragModifierKeys:s,dragWireId:c,dragWireSegmentId:l,dragEnd:null,dragEndEditorId:null}})),ii="@circuit-editor/drag/start/wire",oi=(e,t,n,r)=>({type:ii,payload:Object.assign(Object.assign({},e),{target:t,modifierKeys:n,editorId:r})}),si=$t(((e,t)=>{if(!function(e){return e.type===ii}(t))return e;const{x:n,y:r,target:i,editorId:o,modifierKeys:s}=t.payload;return{dragMode:"wire",dragStartEditorId:o,dragStart:{x:n,y:r},dragStartTarget:i,dragModifierKeys:s,dragEndEditorId:null,dragEnd:null}})),ci="@circuit-editor/mouse/leave",li=Zt(Vt,qt,(function(e=Me,t){return function(e){return e.type===it}(t)?e=M(e=function(e,t){const{dragMode:n}=e.services.circuitEditorDrag;switch(n){case"select":return function(e,t){const n=e.services.circuitEditorDrag;if("select"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const{dragModifierKeys:o,dragStart:s}=n,{x:c,y:l}=t.payload,a=Mt(e,r);if(!a)return e;const u=en(o),d=(0,b.Qu)(s,{x:c,y:l});return vc(e,((e,t,n="set")=>({type:rn,payload:{region:e,circuitId:t,mode:n}}))(d,a,u))}(e,t);case"move":return function(e,t){const n=e.services.circuitEditorDrag;if("move"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const{dragStart:o,dragModifierKeys:s}=n,{x:c,y:l}=t.payload;let a=(0,b.sj)({x:c,y:l},o);const u=e.services.selection.selectedElementIds.length>0;return s.ctrlMetaKey||(a=u?cn(e,a):ln(e,a)),vc(e,((e,t,n={})=>{var r;return{type:tt,payload:{offsetX:e,offsetY:t,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}})(a.x,a.y))}(e,t);case"wire":return function(e,t){const n=e.services.circuitEditorDrag;if("wire"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const o=Mt(e,r);if(!o)return e;const{dragStartTarget:s}=n,{x:c,y:l}=t.payload,a=Mr(e,{x:c,y:l});return a?vc(e,It(o,s,a)):e}(e,t);case"wire-segment-new-joint":return function(e,t){const n=e.services.circuitEditorDrag;if("wire-segment-new-joint"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const{dragWireId:o,dragWireSegmentId:s}=n,{x:c,y:l}=t.payload;return vc(e,{type:Et,payload:{wireId:o,wireSegmentId:s,jointPos:{x:c,y:l}}})}(e,t)}return e}(e,t),"services","circuitEditorDrag",d):e}),(function(e=Me,t){if(!function(e){return e.type===Zr}(t))return e;const{elementId:n,x:r,y:i,modifierKeys:o,editorId:s}=t.payload;if(e=M(e,"services","circuitEditorDrag",(()=>({dragMode:"move",dragStart:{x:r,y:i},dragStartEditorId:s,dragModifierKeys:o,dragEnd:null,dragEndEditorId:null}))),!qr(e,n)){const t=en(o);e=vc(e,Kr(n,t))}return e}),_r,((e=Me,t)=>{if(!function(e){return e.type===Qr}(t))return e;const{x:n,y:r,editorId:i,wireId:o,jointId:s,modifierKeys:c}=t.payload;if(c.ctrlMetaKey)e=M(e,"services","circuitEditorDrag",(()=>({dragMode:"wire",dragStart:{x:n,y:r},dragStartEditorId:i,dragStartTarget:{type:"joint",wireId:o,jointId:s},dragModifierKeys:c,dragEnd:null,dragEndEditorId:null})));else if(e=M(e,"services","circuitEditorDrag",(()=>({dragMode:"move",dragStart:{x:n,y:r},dragStartEditorId:i,dragModifierKeys:c,dragEnd:null,dragEndEditorId:null}))),!Yr(e,s)){const t=en(c);e=vc(e,ti(s,t))}return e}),ri,si,$t(((e,t)=>function(e){return e.type===ci}(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e))),ai=Pt(((e,t)=>{if(!Fe(t))return e;const{circuitId:n}=t.payload,r=Object.keys(e.circucitEditorsById).filter((t=>e.circucitEditorsById[t].circuitId!==n));let i=e.activeEditorId;return i&&-1!==r.indexOf(i)||(i=null),Object.assign(Object.assign({},e),{circucitEditorsById:kt()(e.circucitEditorsById,r),activeEditorId:i})})),ui="@circuit-editor/receive-focus",di=Pt(((e,t)=>{if(!function(e){return e.type===ui}(t))return e;const{editorId:n}=t.payload;return-1===Object.keys(e.circucitEditorsById).indexOf(n)?e:Object.assign(Object.assign({},e),{activeEditorId:n})})),mi="@view/circuit",pi=(e,t=null,n={})=>({type:mi,payload:{circuitId:e,elementIdPath:t,newWindowId:n.newWindow?(0,De.Z)():null}});function yi(e){return e.type===mi}const fi=Zt(ai,di,Pt(((e,t,n)=>{if(!yi(t))return e;const{circuitId:r,elementIdPath:i,newWindowId:o}=t.payload;if(-1===Un(n).indexOf(r))return e;let s=o;return s||(s=function(e){var t;return e.activeEditorId?e.activeEditorId:null!==(t=xt()(Object.keys(e.circucitEditorsById)))&&void 0!==t?t:null}(e)),s?Object.assign(Object.assign({},e),{circucitEditorsById:Object.assign(Object.assign({},e.circucitEditorsById),{[s]:{circuitId:r,elementIdPath:null!=i?i:[]}}),activeEditorId:s}):e})));var gi=n(5161),Ii=n.n(gi),hi=n(998),vi=n.n(hi),Ei=n(7287),bi=n.n(Ei);const wi="@clipboard/copy-elements",Oi=pn((0,an.P1)((e=>e.wiresByWireId),(e=>e.wireSegmentsById),((e,t)=>{const n=[],r=Object.keys(e);for(const i of r){const{wireSegmentIds:r}=e[i],o=r.map((e=>t[e]));for(const e of o)if(nr(e))n.push({inputPin:e.inputPin,outputPin:e.outputPin});else if(er(e)){const t=o.filter(tr).filter((({lineId:t})=>t===e.lineId));for(const r of t)n.push({outputPin:e.outputPin,inputPin:r.inputPin})}}return n}))),ki=(e,t)=>{var n;const r=null===(n=e.services.circuitGraph.elementsById[t])||void 0===n?void 0:n.elementType;return r?_n(e,r):null},ji=(e,t,n)=>{const r=ki(e,t);if(!r)return null;const i=r.pins[n];return i?i.direction:null},xi=Ct("clipboard"),Ci=Bt("clipboard"),Bi=Zt(xi(((e,t,n)=>{if(!function(e){return e.type===wi}(t))return e;const{elementIds:r}=t.payload;if(0===r.length)return e;const i=Rn(n),o=bi()(r,Ii()(r,(()=>(0,De.Z)()))),s=i[r[0]],c=r.map((e=>{const t=vn(n,e),c=((e,t)=>{const n=Oi(e),r=ki(e,t);if(!r)return{};let i=[];i=Object.keys(r.pins).filter((e=>"output"===r.pins[e].direction));const o=n.filter((e=>e.outputPin.elementId===t)),s={};for(const e of i)s[e]=[];for(const e of o){const{outputPin:t,inputPin:n}=e;s[t.pinId].push(n)}return s})(n,e);return{id:o[e],elementType:t.elementType,offset:(0,b.sj)(i[e],s),outputs:dn()(c,(e=>e.filter((e=>{return t=e.elementId,-1!==vi()(r,(e=>e===t));var t})).map((e=>({pin:{elementId:o[e.elementId],pinId:e.pinId}})))))}}));return Object.assign(Object.assign({},e),{clipboardElements:c,clipboardPasteOrigin:s})})),(function(e=Me,t){if(!function(e){return e.type===nt}(t))return e;const n=Tt(e);if(!n)return e;const{clipboardElements:r,clipboardPasteOrigin:i}=e.services.clipboard;if(!r.length)return e;let{pastePosition:o}=t.payload;const s=on(e);o=o?(0,b.R9)(o,s):(0,b.ZO)(i,{x:s,y:s});const c=bi()(r.map((e=>e.id)),Ii()(r,(()=>(0,De.Z)())));for(const t of r){const{id:r,elementType:i,offset:s}=t,l=(0,b.ZO)(o,s);e=vc(e,He(i,n,l,{elementId:c[r]}))}for(const t of r){const{id:r,outputs:i}=t,o=c[r];for(const t of Object.keys(i))for(const r of i[t]){const{pin:{elementId:i,pinId:s}}=r,l=c[i];e=vc(e,It(n,{type:"pin",pin:{elementId:o,pinId:t}},{type:"pin",pin:{elementId:l,pinId:s}}))}}return e=M(e,"services","clipboard","clipboardPasteOrigin",o),vc(e,Kr(lr()(c)))})),Pi="@dialog/response/accept",Ni=e=>({type:Pi,payload:{result:e}}),Si=Ct("dialog"),Mi=Bt("dialog"),Wi=Si(((e,t)=>function(e){return e.type===Pi}(t)?O:e)),zi="@dialog/response/cancel",Ti=()=>({type:zi}),Li=Si(((e,t)=>function(e){return e.type===zi}(t)?O:e)),Ri="@dialog/show",Di=Zt(Wi,Li,Si(((e,t)=>{if(!function(e){return e.type===Ri}(t))return e;const{dialogType:n,data:r}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:r})}))),Ai=mn(((e,t)=>{if(!Ue(t))return e;const{circuitId:n}=t.payload;return Object.assign(Object.assign({},e),{elementIdsByCircuitId:Object.assign(Object.assign({},e.elementIdsByCircuitId),{[n]:[]}),wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[n]:[]})})}));var Ji=n(4721),Ui=n.n(Ji);function Zi(e,t){const n=e.wiresByWireId[t];if(!n)return e;const{wireSegmentIds:r,wireJointIds:i}=n;return Object.assign(Object.assign({},e),{wireIdsByCircuitId:dn()(e.wireIdsByCircuitId,(e=>e.filter((e=>e!==t)))),wireSegmentsById:kt()(e.wireSegmentsById,Qt()(Object.keys(e.wireSegmentsById),r)),wiresByWireId:kt()(e.wiresByWireId,Object.keys(e.wiresByWireId).filter((e=>e!==t))),wireJointPositionsByJointId:kt()(e.wireJointPositionsByJointId,Qt()(Object.keys(e.wireJointPositionsByJointId),i))})}class Fi extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype)}}function Ki(e,t,n,r){return Object.assign(Object.assign({},e),{wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[t]:[...e.wireIdsByCircuitId[t],n]}),wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[n]:null!=r?r:{wireSegmentIds:[],wireJointIds:[]}})})}function $i(e,t){const n=vr.local(e,t);if(!n)throw new Fi("Wire for joint id not found.");const r=e.wiresByWireId[n],i=Object.assign(Object.assign({},e.wiresByWireId),{[n]:Object.assign(Object.assign({},r),{wireJointIds:[...r.wireJointIds.filter((e=>e!==t))]})}),o=kt()(e.wireJointPositionsByJointId,Object.keys(e.wireJointPositionsByJointId).filter((e=>e!==t)));return Object.assign(Object.assign({},e),{wiresByWireId:i,wireJointPositionsByJointId:o})}function Hi(e,t,{deleteWireIfLastSegment:n=!0,removeOrphanJoints:r=!0}={}){const i=gr.local(e,t);if(!i)throw new Fi("Wire for segment not found.");const o=e.wiresByWireId[i],s=e.wireSegmentsById[t];if(!s)throw new Fi("Segment not found");const c=o.wireSegmentIds.filter((e=>e!==t));if(n&&0===c.length)return Zi(e,i);if(r){const t=fn(s);for(const n of t)c.every((t=>-1===fn(e.wireSegmentsById[t]).indexOf(n)))&&(e=$i(e,n))}return Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[i]:Object.assign(Object.assign({},o),{wireSegmentIds:c})}),wireSegmentsById:kt()(e.wireSegmentsById,Object.keys(e.wireSegmentsById).filter((e=>e!==t)))})}function Vi(e,t,n){const r=Qt()(Object.keys(e.elementsById),t),i=dn()(e.elementIdsByCircuitId,(e=>Qt()(e,t)));e=Object.assign(Object.assign({},e),{elementsById:kt()(e.elementsById,r),elementIdsByCircuitId:i});const o=Nn()(t,(e=>((e,t)=>{const n=bn(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const r=jn(e,t);if(!r)return[];const i=Kn(r);return En(e,i).map((e=>({elementId:e,pinId:t})))})(n,e))),s=Object.keys(e.wireSegmentsById).filter((n=>{const r=e.wireSegmentsById[n];return function(e){switch(e.type){case"input-output":return Ui()(t,e.inputPin.elementId)||Ui()(t,e.outputPin.elementId);case"input":return Ui()(t,e.inputPin.elementId);case"output":return Ui()(t,e.outputPin.elementId)}return!1}(r)||function(e){switch(e.type){case"input-output":return Boolean(Mn()(o,(t=>Qn(t,e.inputPin)))||Mn()(o,(t=>Qn(t,e.outputPin))));case"input":return Boolean(Mn()(o,(t=>Qn(t,e.inputPin))));case"output":return Boolean(Mn()(o,(t=>Qn(t,e.outputPin))))}return!1}(r)}));return e=s.reduce(((e,t)=>gr.local(e,t)?function(e,t){const n=gr.local(e,t);if(!n)return e;const r=e.wiresByWireId[n];if(-1===r.wireSegmentIds.indexOf(t))return e;const i=e.wireSegmentsById[t];if(!i)return e;if("input-output"===i.type||1===r.wireSegmentIds.length)return Zi(e,n);if("bridge"===i.type){const r=(e=Hi(e,t,{removeOrphanJoints:!0})).wiresByWireId[n],{jointAId:o,jointBId:s}=i;if(r&&-1!==r.wireJointIds.indexOf(o)&&-1!==r.wireJointIds.indexOf(s)){const t=function(e,t){const n=vr.local(e,t);if(!n)throw new Fi("Wire id for joint not found.");const r=jr.local(e,n);if(!r)throw new Fi("Circuit id for joint not found.");const{jointIds:i,segmentIds:o}=function(e,t,n){const r=new Set,i=new Set;function o(t){if(i.has(t))return;const n=e.wireSegmentsById[t];n&&(i.add(t),fn(n).forEach(s))}function s(n){r.has(n)||(r.add(n),yn(e,t,n).forEach(o))}return s(n),{jointIds:Array.from(r),segmentIds:Array.from(i)}}(e,n,t),s=e.wiresByWireId[n];e=Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[n]:Object.assign(Object.assign({},s),{wireSegmentIds:Qt()(s.wireSegmentIds,o),wireJointIds:Qt()(s.wireJointIds,i)})})});const c={};return Ki(e=Object.assign(Object.assign({},e),{wireSegmentsById:dn()(e.wireSegmentsById,((e,t)=>{return-1===o.indexOf(t)?e:er(e)||tr(e)?Object.assign(Object.assign({},e),{lineId:(n=e.lineId,c[n]||(c[n]=(0,De.Z)()),c[n])}):e;var n}))}),r,(0,De.Z)(),{wireJointIds:i,wireSegmentIds:o})}(e,i.jointBId);t&&(e=t)}return e}return Hi(e,t)}(e,t):e),e)}const Gi=mn(((e,t,n)=>{var r;if(!Fe(t))return e;const{circuitId:i}=t.payload,o=Object.keys(e.elementIdsByCircuitId).filter((e=>e!==i)),s=null!==(r=e.elementIdsByCircuitId[i])&&void 0!==r?r:[],c=Kn(i),l=[...s,...Object.keys(e.elementsById).filter((t=>e.elementsById[t].elementType===c))];return e=Vi(e,l,n),Object.assign(Object.assign({},e),{elementIdsByCircuitId:kt()(e.elementIdsByCircuitId,o),wireIdsByCircuitId:kt()(e.wireIdsByCircuitId,o)})}));function qi(e,t){return t.weight=e,t}function Yi(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}const Xi=qi(-10,mn(((e,t)=>{if(!Ve(t))return e;const{elementId:n,elementType:r,elementName:i,circuitId:o}=t.payload;return Object.assign(Object.assign({},e),{elementsById:Object.assign(Object.assign({},e.elementsById),{[n]:{elementType:r,elementName:null!=i?i:null}}),elementIdsByCircuitId:Object.assign(Object.assign({},e.elementIdsByCircuitId),{[o]:[...e.elementIdsByCircuitId[o],n]})})}))),_i=mn(((e,t,n)=>{if(!qe(t))return e;const{elementIds:r}=t.payload;return Vi(e,r,n)})),Qi=mn(((e,t)=>{if(!function(e){return e.type===Ye}(t))return e;const{elementId:n}=t.payload;if(!e.elementsById[n])return e;let r=t.payload.elementName;return r||""!==r.trim()||(r=null),Object.assign(Object.assign({},e),{elementsById:Object.assign(Object.assign({},e.elementsById),{[n]:Object.assign(Object.assign({},e.elementsById[n]),{elementName:r})})})})),eo=mn(((e,t)=>pt(t)?I:e));function to(e,t,n,r){return Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[t]:Object.assign(Object.assign({},e.wiresByWireId[t]),{wireSegmentIds:[...e.wiresByWireId[t].wireSegmentIds,n]})}),wireSegmentsById:Object.assign(Object.assign({},e.wireSegmentsById),{[n]:r})})}function no(e,t,n,r){return Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[t]:Object.assign(Object.assign({},e.wiresByWireId[t]),{wireJointIds:[...e.wiresByWireId[t].wireJointIds,n]})}),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),{[n]:r})})}function ro(e,t){const n=e.wiresByWireId[t];if(!n)return[[],[]];const r=new Set,i=new Set;for(const t of n.wireSegmentIds){const n=e.wireSegmentsById[t];"input"===n.type?r.add(n.lineId):"output"===n.type&&i.add(n.lineId)}return[Array.from(r),Array.from(i)]}function io(e,t,n){const r=e.wiresByWireId[t];if(!r)return e;const i=Object.assign({},e.wireSegmentsById);for(const t of r.wireSegmentIds){const r=e.wireSegmentsById[t];"input"!==r.type&&"output"!==r.type||(i[t]=Object.assign(Object.assign({},r),{lineId:n}))}return Object.assign(Object.assign({},e),{wireSegmentsById:i})}const oo=mn(((e,t,n)=>{if(!function(e){return e.type===gt}(t))return e;const r=e,{circuitId:i,from:o,to:s}=t.payload,{state:c,jointId:l,pin:a}=so(e,i,o,n);e=c;const u=a?jn.local(e,a.elementId):l?hr.local(e,l):null,{state:d,jointId:m,pin:p}=so(e,i,s,n);e=d;const y=p?jn.local(e,p.elementId):m?hr.local(e,m):null;if(!u||!y||u!==y)return r;if(a&&p){const t=ji(n,a.elementId,a.pinId),i=ji(n,p.elementId,p.pinId);if(!t||!i||t===i)return r;const o="input"===t?a:p,s="input"===t?p:a;if(Or(n,o.elementId,o.pinId))return r;const c=(0,De.Z)();return to(e=Ki(e,u,c),c,(0,De.Z)(),{type:"input-output",inputPin:o,outputPin:s})}if(l&&m){const t=vr.local(e,l),n=vr.local(e,m);if(!t||!n)return r;if(t!==n){const i=function(e,t,n){const r=jr.local(e,t),i=jr.local(e,n);if(!r||!i)throw new Error("Unable to determine circuit id for wire.");if(r!==i)throw new Error("Unable to merge wires in different circuits.");const o=e.wiresByWireId[t],s=e.wiresByWireId[n];if(!o||!s)throw new Error("Wire not found.");const[c,l]=ro(e,t),[a,u]=ro(e,n);if(l.length+u.length<=1&&c.length<=1&&a.length<=1){const r=(0,De.Z)();e=io(e,t,r),e=io(e,n,r)}const d=Object.keys(e.wiresByWireId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[r]:e.wireIdsByCircuitId[r].filter((e=>e!==n))}),wiresByWireId:Object.assign(Object.assign({},kt()(e.wiresByWireId,d)),{[t]:Object.assign(Object.assign({},o),{wireSegmentIds:[...o.wireSegmentIds,...s.wireSegmentIds],wireJointIds:[...o.wireJointIds,...s.wireJointIds]})})})}(e,t,n);if(!i)return r;e=i}return to(e,t,(0,De.Z)(),{type:"bridge",jointAId:l,jointBId:m})}{const t=null!=l?l:m,i=null!=a?a:p;if(!t||!i)return r;const o=vr.local(e,t);if(!o)return r;const s=ji(n,i.elementId,i.pinId);if(!s)return r;const[,c]=ro(e,o);if("output"===s&&c.length>0)return r;const u=function(e,t,n,r){var i;let o;const s=ji(r,n.elementId,n.pinId),[c,l]=ro(e,t);return o="output"===s&&l.length>0?(0,De.Z)():1===c.length&&0===l.length||0===c.length&&1===l.length||1===c.length&&1===l.length&&c[0]===l[0]?null!==(i=c[0])&&void 0!==i?i:l[0]:(0,De.Z)(),o}(e,o,i,n);let d;if("input"===s){if(Or(n,i.elementId,i.pinId))return r;d={type:"input",inputPin:i,jointId:t,lineId:u}}else{if("output"!==s)throw new Fi("Unknown pin direction");d={type:"output",outputPin:i,jointId:t,lineId:u}}return to(e,o,(0,De.Z)(),d)}}));function so(e,t,n,r){switch(n.type){case"pin":return{state:e,jointId:null,pin:n.pin};case"joint":return{state:e,jointId:n.jointId,pin:null};case"floating":{const r=(0,De.Z)();e=Ki(e,t,r);const i=(0,De.Z)();return{state:e=no(e,r,i,n.point),jointId:i,pin:null}}case"segment":{const t=(0,De.Z)();return{state:e=function(e,t,n,r,i){const o=gr.local(e,t);if(!o)throw new Fi("Wire segment parent wire not found.");const s=e.wireSegmentsById[t];if(!s)throw new Fi("Wire segment not found.");const c=Nr(i,t),l=Sr(i,t),a=(0,b.Fv)((0,b.sj)(l,c));e=no(e,o,r,(0,b.ZO)(c,(0,b.bA)(a,n)));const u=(0,De.Z)(),d=(0,De.Z)();let m,p;switch(s.type){case"bridge":m={type:"bridge",jointAId:s.jointAId,jointBId:r},p={type:"bridge",jointAId:r,jointBId:s.jointBId};break;case"input":case"output":m=Object.assign(Object.assign({},s),{jointId:r}),p={type:"bridge",jointAId:r,jointBId:s.jointId};break;case"input-output":{const e=(0,De.Z)();m={type:"output",outputPin:s.outputPin,jointId:r,lineId:e},p={type:"input",inputPin:s.inputPin,jointId:r,lineId:e}}break;default:throw new Fi("Unknown segment type.")}return e=to(e=Hi(e,t,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),o,u,m),to(e,o,d,p)}(e,n.segmentId,n.segmentInsertLength,t,r),jointId:t,pin:null}}}throw new Fi("Unknown wire connect target")}var co=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const lo=mn(((e,t)=>{if(!function(e){return e.type===ht}(t))return e;const{wireId:n,circuitId:r,wireSegments:i,wireJoints:o}=t.payload,s={};for(const e of i){const{wireSegmentId:t}=e,n=co(e,["wireSegmentId"]);s[t]=n}const c={};for(const e of o){const{jointId:t}=e,n=co(e,["jointId"]);c[t]=n}return Object.assign(Object.assign({},e),{wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[r]:[...e.wireIdsByCircuitId[r],n]}),wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[n]:{wireSegmentIds:Object.keys(s),wireJointIds:Object.keys(c)}}),wireSegmentsById:Object.assign(Object.assign({},e.wireSegmentsById),s),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),c)})})),ao=mn(((e,t)=>{if(!function(e){return e.type===Et}(t))return e;const{wireId:n,wireSegmentId:r,jointPos:i}=t.payload;if(!e.wiresByWireId[n])return e;const o=e.wireSegmentsById[r];if(!o)return e;const s=(0,De.Z)();let c,l;switch(o.type){case"bridge":c={type:"bridge",jointAId:o.jointAId,jointBId:s},l={type:"bridge",jointAId:s,jointBId:o.jointBId};break;case"input":case"output":c=Object.assign(Object.assign({},o),{jointId:s}),l={type:"bridge",jointAId:s,jointBId:o.jointId};break;case"input-output":{const e=(0,De.Z)();c={type:"output",outputPin:o.outputPin,jointId:s,lineId:e},l={type:"input",inputPin:o.inputPin,jointId:s,lineId:e}}break;default:return e}return e=to(e=Hi(e=no(e,n,s,i),r,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),n,(0,De.Z)(),c),to(e,n,(0,De.Z)(),l)})),uo="@wire/joint/delete";function mo(e){return e.type===uo}const po=mn(((e,t)=>{if(!mo(t))return e;const{jointIds:n}=t.payload;return n.reduce(((e,t)=>{try{return function(e,t){const n=vr.local(e,t);if(!n)throw new Fi("Wire for joint not found");const r=yn(e,n,t);if(2===r.length)try{return function(e,t,n,r){const i=gr.local(e,t),o=gr.local(e,n);if(!i||!o)throw new Fi("Wire for segment not found.");if(i!==o)throw new Fi("Merging segments from different wires is not supported.");const s=e.wireSegmentsById[t],c=e.wireSegmentsById[n];if(!s||!c)throw new Fi("Wire segment not found.");if("input-output"===s.type||"input-output"===c.type)throw new Fi("Cannot merge input-output segments.");if(!("input"!==s.type&&"output"!==s.type||"input"!==c.type&&"output"!==c.type)){if(s.type===c.type)throw new Fi("Cannot merge two inputs or two outputs.");if(s.jointId!==r||c.jointId!==r)throw new Fi("Segments do not share the given joint.");const o="input"===s.type?s:c,l="output"===s.type?s:c;return e=Hi(e=$i(e,r),t,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),to(e=Hi(e,n,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),i,(0,De.Z)(),{type:"input-output",inputPin:o.inputPin,outputPin:l.outputPin})}const l="bridge"===s.type?s:"bridge"===c.type?c:null;if(!l)throw new Fi("Cannot merge segment configuration.");const a=s===l?c:s,u=fn(l).filter((e=>e!==r)).pop();if(!u)throw new Fi("Cannot merge segment configuration.");switch(e=Hi(e=$i(e,r),t,{removeOrphanJoints:!1,deleteWireIfLastSegment:!1}),e=Hi(e,n,{removeOrphanJoints:!1,deleteWireIfLastSegment:!1}),a.type){case"bridge":{const t=a.jointAId===r?a.jointBId:a.jointBId===r?a.jointAId:null;if(!t)throw new Fi("Segments do not share the given joint.");return to(e,i,(0,De.Z)(),{type:"bridge",jointAId:u,jointBId:t})}case"input":case"output":if(a.jointId!==r)throw new Fi("Segments do not share the given joint.");return to(e,i,(0,De.Z)(),Object.assign(Object.assign({},a),{jointId:u}))}throw new Fi("Cannot merge segment configuration.")}(e,r[0],r[1],t)}catch(e){if(e instanceof Fi==0)throw e}return r.reduce(((e,t)=>Hi(e,t)),e)}(e,t)}catch(t){if(t instanceof Fi==0)throw t;return e}}),e)})),yo="@wire/joint/move",fo=(e,t,{relative:n=!1,snapMode:r="none"}={})=>({type:yo,payload:{jointIds:le(e),position:t,relative:n,snapMode:r}}),go=Zt(Ai,Gi,Xi,_i,Qi,eo,oo,lo,ao,po,mn(((e,t,n)=>{if(!function(e){return e.type===yo}(t))return e;const{jointIds:r,position:i,relative:o,snapMode:s}=t.payload,c=dn()(kt()(e.wireJointPositionsByJointId,r),(e=>{let t={x:o?e.x+i.x:i.x,y:o?e.y+i.y:i.y};switch(s){case"element":t=cn(n,t);break;case"joint":t=ln(n,t)}return t}));return Object.assign(Object.assign({},e),{wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),c)})}))),Io=Tn(((e,t)=>{if(!Ve(t))return e;const{elementId:n,position:r=b.Ds}=t.payload;return M(e,"elementPositionsById",n,r)})),ho=qi(Yi(_i),Tn(((e,t)=>{if(!qe(t))return e;const{elementIds:n}=t.payload,r=Qt()(Object.keys(e.elementPositionsById),n);return Object.assign(Object.assign({},e),{elementPositionsById:kt()(e.elementPositionsById,r)})}))),vo="@element/move",Eo=(e,t,n={})=>{var r,i;return{type:vo,payload:{elementIds:le(e),position:t,relative:null!==(r=n.relative)&&void 0!==r&&r,snapMode:null!==(i=n.snapMode)&&void 0!==i?i:"none"}}},bo=Zt(Io,ho,Tn(((e,t,n)=>{if(!function(e){return e.type===vo}(t))return e;const{elementIds:r,position:i,relative:o,snapMode:s}=t.payload,c=dn()(kt()(e.elementPositionsById,r),(e=>{let t={x:o?e.x+i.x:i.x,y:o?e.y+i.y:i.y};return"element"===s&&(t=cn(n,t)),t}));return Object.assign(Object.assign({},e),{elementPositionsById:Object.assign(Object.assign({},e.elementPositionsById),c)})})),Tn(((e,t)=>pt(t)?h:e))),wo=Zt(An(((e,t)=>{if(!Ue(t))return e;const{circuitId:n}=t.payload;let r=t.payload.circuitName;return r||(r="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:r})})})),An(((e,t)=>{if(!Fe(t))return e;const{circuitId:n}=t.payload,r=Object.keys(e.circuitNamesByCircuitId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{circuitNamesByCircuitId:kt()(e.circuitNamesByCircuitId,r)})})),An(((e,t)=>{if(!function(e){return e.type===Ke}(t))return e;const{circuitId:n,circuitName:r}=t.payload,i=r.trim();return""===i?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:i})})})),An(((e,t)=>pt(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[m]:"Root"},elementIdsByCircuitId:{[m]:[]}}):e))),Oo="@circuit/import";class ko extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function jo(e){const t=Br(e);return{circuits:Un(e).map((t=>({circuitId:t,circuitName:Fn(e,t)}))),elements:In(e).map((t=>{const n=vn(e,t),r=Dn(e,t),i=jn(e,t);return{elementId:t,elementType:n.elementType,elementName:n.elementName,circuitId:null!=i?i:m,x:r.x,y:r.y}})),wires:mr(e).map((n=>{const r=br(e,n),i=jr(e,n);return i?{wireId:n,circuitId:i,wireSegments:fr(e,n).map((t=>{const n=wr(e,t);return Object.assign({wireSegmentId:t},n)})),wireJoints:r.map((e=>Object.assign({jointId:e},t[e])))}:null})).filter(T)}}function xo(e,t){var n,r,i;e=Me;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>vc(e,Je({circuitId:t,circuitName:n}))),e),e=(null!==(r=t.elements)&&void 0!==r?r:[]).reduce(((e,t)=>{var n;return vc(e,He(t.elementType,t.circuitId,{x:t.x,y:t.y},{elementId:t.elementId,elementName:null!==(n=t.elementName)&&void 0!==n?n:void 0}))}),e),e=(null!==(i=t.wires)&&void 0!==i?i:[]).reduce(((e,t)=>vc(e,vt(t))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new ko("Failed to load project.")}return e}const Co=Ct("tutorial"),Bo=Bt("tutorial"),Po=Bo((e=>null!=e.activeTutorial)),No=Bo((e=>e.annotatedElements)),So=qi(50,((e=Me,t)=>{return wt(t)?(Po(e)||e.services.project.isLoading||(n=jo(e),localStorage.setItem("autosave",JSON.stringify(n))),e):e;var n})),Mo=Ct("project"),Wo=Bt("project"),zo=Mo(((e,t)=>wt(t)?Object.assign(Object.assign({},e),{projectModified:!0}):e)),To=Mo(((e,t)=>pt(t)?(localStorage.removeItem("autosave"),Object.assign(Object.assign({},e),{projectName:"New Project",projectModified:!1})):e)),Lo="@project/rename",Ro=Mo(((e,t)=>{if(!function(e){return e.type===Lo}(t))return e;let{projectName:n}=t.payload;return n=n.trim(),""===n?e:Object.assign(Object.assign({},e),{projectName:n})})),Do="@project/save",Ao=()=>({type:Do}),Jo="@project/save:success",Uo=Zt(So,(function(e=Me,t){if(!function(e){return e.type===Re}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{e=M(e=xo(e,n),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"Previous Project",projectModified:!0})))}catch(e){}return e}),zo,To,(function(e=Me,t){if(!function(e){return e.type===yt}(t))return e;const{fileName:n,saveData:r}=t.payload;try{e=M(e,"services","project","isLoading",!0),e=M(e=xo(e,r),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:n,projectModified:!1,isLoading:!1})))}catch(t){console.error("Failed to load save",t),e=M(e,"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"",projectModified:!1,isLoading:!1})))}return e}),Ro,Mo(((e,t)=>function(e){return e.type===Jo}(t)?Object.assign(Object.assign({},e),{projectModified:!1}):e))),Zo=$r(((e,t)=>{if(!qe(t))return e;const{elementIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:Qt()(e.selectedElementIds,n),selectedConnectionIds:[]})})),Fo=$r(((e,t)=>pt(t)?j:e)),Ko="@select/all",$o=$r(((e,t,n)=>{if(!function(e){return e.type===Ko}(t))return e;const r=Tt(n);if(!r)return e;const i=kn(n,r),o=xr(n,r);return Object.assign(Object.assign({},e),{selectedElementIds:i,selectedJointIds:o})})),Ho="@select/clear",Vo=$r(((e,t)=>function(e){return e.type===Ho}(t)?Object.assign(Object.assign({},e),{selectedElementIds:[],selectedJointIds:[]}):e)),Go=$r(((e,t)=>{if(!function(e){return e.type===Fr}(t))return e;const{elementIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:tn(e.selectedElementIds,n,r),selectedJointIds:nn(e.selectedJointIds,r)})})),qo=$r(((e,t)=>{if(!function(e){return e.type===ei}(t))return e;const{jointIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:nn(e.selectedElementIds,r),selectedJointIds:tn(e.selectedJointIds,n,r)})}));var Yo=n(2525),Xo=n.n(Yo);const _o=(0,an.P1)(Rn,Xn,hn,((e,t,n)=>dn()(e,((e,r)=>{const i=n[r];if(!i)return b.rG;const o=t[i];return o?(0,b.gQ)(o.visual.hitRect,e):b.rG})))),Qo=$r(((e,t,n)=>{if(!function(e){return e.type===rn}(t))return e;const{region:r,circuitId:i,mode:o}=t.payload,s=kn(n,i),c=kt()(_o(n),s),l=[];Xo()(c,((e,t)=>{(0,b.jR)(e,r)&&l.push(t)}));const a=xr(n,i),u=kt()(Br(n),a),d=[];return Xo()(u,((e,t)=>{(0,b.is)(e,r)&&d.push(t)})),Object.assign(Object.assign({},e),{selectedElementIds:tn(e.selectedElementIds,l,o),selectedJointIds:tn(e.selectedJointIds,d,o)})})),es="@selection/copy",ts=()=>({type:es}),ns=Zt(Fo,Zo,$o,Vo,Go,qo,Qo,(function(e=Me,t){if(!function(e){return e.type===Xe}(t))return e;const{selectedElementIds:n,selectedJointIds:r}=e.services.selection,i=Rn(e);for(const t of n){const n=i[t];if(!n)continue;const r=cn(e,n);(0,b.kg)(n,r)||(e=vc(e,Eo(t,r)))}const o=Br(e);for(const t of r){const n=o[t];if(!n)continue;const r=ln(e,n);(0,b.kg)(n,r)||(e=vc(e,fo(t,r)))}return e}),(function(e=Me,t){if(!function(e){return e.type===es}(t))return e;const n=Vr(e);return 0===n.length?e:vc(e,(r=n,{type:wi,payload:{elementIds:Array.isArray(r)?r:[r]}}));var r}),(function(e=Me,t){if(!function(e){return e.type===Qe}(t))return e;const{selectedElementIds:n,selectedJointIds:r}=e.services.selection;return n.length>0&&(e=vc(e,{type:Ge,payload:{elementIds:le(n)}})),r.length>0&&(e=vc(e,{type:uo,payload:{jointIds:le(r)}})),e}),(function(e=Me,t){if(!function(e){return e.type===tt}(t))return e;const{offsetX:n,offsetY:r,snapMode:i}=t.payload,o=Vr(e),s=Gr(e),c={x:n,y:r};let l="none";"element"!==i&&"by-type"!==i||(l="element");let a="none";return a="by-type"===i?"joint":i,e=vc(e,Eo(o,c,{relative:!0,snapMode:l})),vc(e,fo(s,c,{relative:!0,snapMode:a}))}),$r(((e,t)=>{if(!mo(t))return e;const{jointIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedJointIds:Qt()(e.selectedJointIds,n)})}))),rs=Ct("simulator"),is=Bt("simulator"),os=rs(((e,t)=>wt(t)?x:e));function ss(e){return e.default}const cs={"input-momentary":ss(n(4263)),"input-toggle":ss(n(9028)),"logic-and":ss(n(2404)),"logic-buffer":ss(n(3880)),"logic-nand":ss(n(5813)),"logic-nor":ss(n(2791)),"logic-not":ss(n(6139)),"logic-or":ss(n(1868)),"logic-xor":ss(n(6259)),"output-led":ss(n(9480)),"output-seg7":ss(n(136)),"pin-high":ss(n(4303))};var ls=n(2846);function as(e,t){const n=Nn()(t,(e=>[e,"subElementIds"]));n.pop();const r=N()(e,n);if(!r)return null;const{evolverId:i}=r;return null!=i?i:null}var us=n(3857),ds=n.n(us);const ms=Object.freeze({evolversById:{},evolverIdsByElementId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function ps(e,t,n=[]){var r;if(-1!==n.indexOf(e))throw new Error(`Circuit graph encountered loop on ${n.join(" => ")} while trying to add circuit ${e}`);n=[...n,e];const i={},o={},s={},c={},l=[],a=[],u={},d={},m=null!==(r=t.elementIdsByCircuitId[e])&&void 0!==r?r:[];for(const e of m){const r=t.elementTypesByElementId[e];if(!r)continue;if("pin-input"===r){l.push(e),s[e]=[];continue}if("pin-output"===r){a.push(e);continue}const c=ys(e,t,n);ds()(i,c.evolversById),ds()(o,c.evolverIdsByElementId),u[e]=c.inputElementPinsByCircuitPinId,d[e]=c.outputElementPinsByCircuitPinId}for(const{inputPin:e,outputPin:n}of t.connections){if(-1===m.indexOf(e.elementId)||-1===m.indexOf(n.elementId))continue;const t=N()(d,[n.elementId,n.pinId]),r=N()(u,[e.elementId,e.pinId]);if(-1!==l.indexOf(n.elementId)&&r){s[n.elementId].push(...r);continue}if(-1!==a.indexOf(e.elementId)&&t){c[e.elementId]=t;continue}if(!t||!r)continue;const o=i[t.evolverId];let p=o.outputsByPin[t.pinId];null==p&&(o.outputsByPin[t.pinId]=p=[]);for(const e of r)p.push({evolverId:e.evolverId,pinId:e.pinId}),i[e.evolverId].inputsByPin[e.pinId]={evolverId:t.evolverId,pinId:t.pinId}}return{evolversById:i,evolverIdsByElementId:o,inputElementPinsByCircuitPinId:s,outputElementPinsByCircuitPinId:c}}function ys(e,t,n){const r=t.elementTypesByElementId[e];if(!r)return ms;const i=t.elementDefsByElementType[r];if(!i||!i.elementProduction)return ms;const o="string"==typeof(s=i.elementProduction)?{type:"element",evolverType:s}:s;var s;switch(o.type){case"element":return function(e,t,{elementTypesByElementId:n,elementDefsByElementType:r}){const i=r[n[e]];if(!i)return ms;const o={},s={},c=(0,De.Z)();o[c]={evolverType:t.evolverType,inputsByPin:{},outputsByPin:{}},s[e]={evolverId:c,subElementIds:{}};const l={},a={};for(const e of Object.keys(i.pins)){const{direction:t}=i.pins[e];"input"===t?l[e]=[{pinId:e,evolverId:c}]:"output"===t&&(a[e]={pinId:e,evolverId:c})}return{evolversById:o,evolverIdsByElementId:s,inputElementPinsByCircuitPinId:l,outputElementPinsByCircuitPinId:a}}(e,o,t);case"circuit":return function(e,t,n,r){const i=ps(t.circuitId,n,r);return Object.assign(Object.assign({},i),{evolverIdsByElementId:{[e]:{evolverId:null,subElementIds:i.evolverIdsByElementId}}})}(e,o,t,n);default:throw new Error("Unsupported production type "+o.type)}}const fs=Object.freeze({evolversById:{},evolverIdsByElementId:{}}),gs=(0,an.P1)(wn,hn,Oi,Xn,((e,t,n,r)=>{try{return ps(m,{elementIdsByCircuitId:e,elementTypesByElementId:t,connections:n,elementDefsByElementType:r})}catch(e){return console.error(e),fs}})),Is=(e,t)=>{const{evolversById:n}=gs(e),r=n[t];return r?r.evolverType:null},hs=(e,t)=>{var n;const r=Is(e,t);return r&&null!==(n=cs[r])&&void 0!==n?n:null};var vs=n(7513),Es=n.n(vs);const bs=Object.freeze([]),ws=Object.freeze({});function Os(e,t){const n=(e=>{const{evolversById:t}=gs(e);return Object.keys(t)})(t);return e=x,e=n.reduce(((e,n)=>function(e,t,n){const r=hs(n,t);if(!r)return e;const i={};return r.outputPins.forEach((e=>{i[e]=!1})),M(e,"evolverOutputValuesByEvolverId",t,i)}(e,n,t)),e),e=n.reduce(((e,n)=>js(e,n,t)),e),Object.assign({},e,{initialized:!0})}function ks(e,t,n){if(0===t.transitionIds.length)return e;let r=Object.assign({},e,{tick:t.tick,evolverOutputValuesByEvolverId:Object.assign({},e.evolverOutputValuesByEvolverId)});const i=new Set;t.transitionIds.forEach((e=>{const{elementId:t,valuesByOutputPin:o}=r.transitionsById[e];var s,c;(s=r.evolverOutputValuesByEvolverId[t],c=o,Object.keys(c).some((e=>s[e]!==c[e])))&&(r.evolverOutputValuesByEvolverId[t]=Object.assign({},r.evolverOutputValuesByEvolverId[t],o),((e,t)=>{const{evolversById:n}=gs(e),r=n[t];return r?Nn()(lr()(r.outputsByPin),(e=>e.map((e=>e.evolverId)))):bs})(n,t).forEach((e=>i.add(e))))})),r.transitionsById=kt()(r.transitionsById,Qt()(Object.keys(r.transitionsById),t.transitionIds));for(const e of i)r=js(r,e,n);return r}function js(e,t,n){const r=hs(n,t);if(!r||!r.evolve)return e;const i=function(e,t,n){const r={},i=((e,t)=>{const{evolversById:n}=gs(e),r=n[t];return r?r.inputsByPin:ws})(n,t);return Object.keys(i).forEach((t=>{var n;const o=i[t];if(!o)return void(r[t]=!1);const{evolverId:s,pinId:c}=o;r[t]=(null===(n=e.evolverOutputValuesByEvolverId[s])||void 0===n?void 0:n[c])||!1})),r}(e,t,n);return xs(e,t,r.evolve(e.evolverStatesByEvolverId[t],i,e.tick))}function xs(e,t,n){const{state:r,transitions:i}=n;return r&&(e=M(e,"evolverStatesByEvolverId",t,r)),i&&(e=le(i).reduce(((e,n,r)=>function(e,t,n,r="replace"){const{tickOffset:i,valuesByPin:o,transitionMerger:s=r}=n,c=e.tick+(i>0?i:1);return"replace"===s&&(e=function(e,t){return Object.keys(e.transitionsById).filter((n=>function(e){return e.elementId===t}(e.transitionsById[n]))).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const r=kt()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let i=e.transitionWindows;const o=Es()(i,n.tick,((e,t)=>e.tick-t));if(o>=0){const e=i[o],{transitionIds:n}=e,r=e.transitionIds.indexOf(t);-1!==r&&(1===e.transitionIds.length?i=me(i,o):(i=i.slice(),i[o]=Object.assign({},i[o],{transitionIds:me(n,r)})))}return Object.assign({},e,{transitionsById:r,transitionWindows:i})}(e,t)),e)}(e,t)),function(e,t,n,r){const i=(0,De.Z)(),o={elementId:t,tick:n,valuesByOutputPin:r},s=e.transitionWindows.slice();let c=Es()(s,n,((e,t)=>e.tick-t));if(c<0){c=-c-1;const e={tick:n,transitionIds:[]};s.splice(c,0,e)}const l=s[c].transitionIds.slice();l.push(i),s[c]=Object.assign({},s[c],{transitionIds:l});const a=Object.assign({},e.transitionsById,{[i]:o});return Object.assign({},e,{transitionsById:a,transitionWindows:s})}(e,t,c,o)}(e,t,n,0===r?"replace":"append")),e)),e}const Cs=rs(((e,t,n)=>{if(!(0,ls.Vj)(t))return e;const{elementIdPath:r,data:i}=t.payload,o=((e,t)=>{const{evolverIdsByElementId:n}=gs(e);return as(n,t)})(n,r);if(!o)return e;const s=Is(n,o);if(!s)return e;const c=cs[s];if(!c||!c.interact)return e;const l=e.evolverStatesByEvolverId[o];return xs(e,o,c.interact(l,i))})),Bs="@sim/start",Ps=()=>({type:Bs});function Ns(e){return e.type===Bs}const Ss=rs(((e,t,n)=>Ns(t)?Os(e,n):e)),Ms="@sim/step",Ws=()=>({type:Ms});function zs(e){return e.type===Ms}const Ts="@sim/tick",Ls=e=>({type:Ts,payload:{tickCount:e}}),Rs="@sim/stop",Ds=()=>({type:Rs});function As(e){return e.type===Rs}const Js=Zt(os,Cs,Ss,(function(e=Me,t){if(!zs(t))return e;const{initialized:n}=e.services.simulator;n||(e=M(e,"services","simulator",(t=>Os(t,e))));const{tick:r,transitionWindows:i}=e.services.simulator;if(0===i.length)return e;const o=i[0].tick;return vc(e,Ls(o-r))}),rs(((e,t)=>As(t)?x:e)),rs(((e,t,n)=>{if(!function(e){return e.type===Ts}(t))return e;const{tickCount:r}=t.payload,i=performance.now();e=function(e,t,n){const r=e.tick+t;e=Object.assign({},e,{transitionWindows:e.transitionWindows.slice()});let i=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=r;){if(0==--i)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=ks(e,t,n)}return e.tick!=r&&(e=Object.assign({},e,{tick:r})),e}(e,r,n);const o=performance.now()-i;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:o})}))),Us=Ct("simulatorControl"),Zs=Bt("simulatorControl"),Fs=Us(((e,t)=>wt(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e)),Ks="@sim/pause",$s=e=>({type:Ks,payload:{mode:e}}),Hs=Zs((e=>"edit"!==e.mode)),Vs=Zs((e=>"run"===e.mode)),Gs=Zs((e=>"pause"===e.mode)),qs=Zs((e=>e.ticksPerSecond)),Ys=Zt(Fs,Us(((e,t)=>{if(!function(e){return e.type===Ks}(t))return e;const{mode:n}=t.payload;if(!Hs.local(e))return e;let r=e.mode;switch(n){case!0:r="pause";break;case!1:r="run";break;case"toggle":r="run"==r?"pause":"run"}return Object.assign(Object.assign({},e),{mode:r})})),Us(((e,t)=>Ns(t)?Object.assign(Object.assign({},e),{mode:"run"}):e)),Us(((e,t)=>zs(t)?Object.assign(Object.assign({},e),{mode:"pause"}):e)),Us(((e,t)=>As(t)?Object.assign(Object.assign({},C),{ticksPerSecond:e.ticksPerSecond}):e))),Xs="@tutorial/annotate",_s=e=>({type:Xs,payload:{annotations:e}}),Qs=Co(((e,t)=>{if(!function(e){return e.type===Xs}(t))return e;const{annotations:n}=t.payload;return Object.assign(Object.assign({},e),{annotatedElements:le(n)})})),ec="@tutorial/dismiss",tc=()=>({type:ec}),nc="@tutorial/start",rc=e=>({type:nc,payload:{tutorial:e}}),ic=Zt(Qs,((e=Me,t)=>{var n;return function(e){return e.type===ec}(t)?null!==(n=e.services.tutorial.preTutorialState)&&void 0!==n?n:Me:e}),((e=Me,t)=>{if(!function(e){return e.type===nc}(t))return e;const{tutorial:n}=t.payload;let{preTutorialState:r}=e.services.tutorial;return r||(r=e),e=M(e=Me,"services","project","projectName","Tutorial"),M(e,"services","tutorial",{activeTutorial:n,annotatedElements:[],preTutorialState:r})})),oc=Ct("uiLayout"),sc=Bt("uiLayout"),cc=qi(Yi(ai),oc(((e,t,n)=>{if(!Fe(t))return e;if(!e.layout)return e;const{circuitId:r}=t.payload,i=Lt(n,r),o=ve(e.layout,(e=>!ke(e)||-1===i.indexOf(e.windowProps.editorId)));return Object.assign(Object.assign({},e),{layout:o})}))),lc="@layout/rearrange",ac=oc(((e,t)=>{if(!function(e){return e.type===lc}(t))return e;const{layout:n}=t.payload;return Object.assign(Object.assign({},e),{layout:n})})),uc=oc(((e,t,n)=>{if(!yi(t))return e;const{newWindowId:r}=t.payload;if(!r)return e;const i=Oe(r),o=Wt(n);let s=e.layout;if(null==s)s=i;else{let e=!1;l=t=>{const n=J(t);return ke(n)&&n.windowProps.editorId===o?(e=!0,{direction:"row",division:50,first:t,second:i}):null},s=null!==(a=function e(t){const n=l(t);if(n)return n;const r=J(t);if(Z(r)){const t=e(r.first);if(t)return Object.assign(Object.assign({},r),{first:t});const n=e(r.second);if(n)return Object.assign(Object.assign({},r),{second:n})}return null}(c=s))&&void 0!==a?a:c,e||(s={direction:"row",division:50,first:s,second:i})}var c,l,a;return Object.assign(Object.assign({},e),{layout:s})})),dc="@view/reset",mc=()=>({type:dc}),pc=Zt(cc,ac,uc,oc(((e,t)=>function(e){return e.type===dc}(t)?xe:e))),yc="@view/element-names",fc=e=>({type:yc,payload:{mode:e}}),gc=Ct("uiSettings"),Ic=Bt("uiSettings"),hc=Zt(gc(((e,t)=>{if(!function(e){return e.type===yc}(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{elementNameMode:n})}))),vc=function(e){const t=Ut()(e,(e=>e.weight||0));return(e=Me,n)=>t.reduce(((e,t)=>t(e,n)),e)}(Zt(li,fi,Bi,Di,go,bo,wo,(function(e=Me,t){if(!function(e){return e.type===Oo}(t))return e;const{circuitIds:n,saveData:r}=t.payload;return function(e,t,n){var r,i;const o=Object.keys(e.services.circuitProperties.circuitNamesByCircuitId),s=n.circuits.filter((e=>-1!==t.indexOf(e.circuitId)&&-1===o.indexOf(e.circuitId)));if(0===s.length)return e;try{e=s.reduce(((e,{circuitId:t,circuitName:n})=>vc(e,Je({circuitId:t,circuitName:n}))),e);const t=(null!==(r=n.elements)&&void 0!==r?r:[]).filter((e=>s.some((({circuitId:t})=>t===e.circuitId))));e=t.reduce(((e,t)=>{var n;return vc(e,He(t.elementType,t.circuitId,{x:t.x,y:t.y},{elementId:t.elementId,elementName:null!==(n=t.elementName)&&void 0!==n?n:void 0}))}),e),e=(null!==(i=n.wires)&&void 0!==i?i:[]).filter((function(e){return e.wireSegments.some((e=>{if(!rr(e))return;const{inputPin:n}=e;return t.some((e=>e.elementId===n.elementId))}))})).reduce(((e,t)=>vc(e,vt(t))),e)}catch(e){throw console.error("Failed to import circuit from SaveData:",e),new ko("Failed to import circuit.")}return e}(e,n,r)}),Uo,ns,Js,Ys,ic,pc,hc));const Ec=[Gt,ci,Ts];var bc=n(4970),wc=n(8764),Oc=n(8424);function*kc(e,t){yield(0,bc.gz)(((e,t)=>({type:Ri,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,bc.qn)([Pi,zi]);return n.type===Pi?n.payload.result:null}const jc="@project/export-link",xc=()=>({type:jc});function*Cc(){yield(0,bc.ib)(jc,Bc)}function*Bc(){const e=yield(0,bc.Ys)();try{const t=jo(e),n=JSON.stringify(t),r=(0,Oc.Wt)(n),i=wc.lW.from(r).toString("base64"),o=encodeURIComponent(i),s=Le+u.createHref({pathname:"/import",search:"data="+o});yield(0,bc.RE)(kc,"export-project-link",{projectLink:s})}catch(e){console.error("Failed to export project as link",e)}}var Pc=n(4171),Nc=n.n(Pc);const Sc="@project/import-circuits",Mc=()=>({type:Sc});function*Wc(){yield(0,bc.ib)(Sc,zc)}function*zc(){const[e]=yield(0,bc.RE)(Nc(),{accept:"application/json"}),t=yield(0,bc.RE)(e.text.bind(e)),n=JSON.parse(t),r=yield(0,bc.RE)(kc,"import-project-circuits",{circuits:n.circuits.filter((e=>e.circuitId!==m))});if(!Array.isArray(r))return;const i=r,o=[];let s;for(;s=i.pop();){o.push(s);for(const e of n.elements){const{circuitId:t,elementType:n}=e;if(s!==t)continue;const r=$n(n);null!=r&&i.push(r)}}yield(0,bc.gz)(((e,t)=>({type:Oo,payload:{circuitIds:le(e),saveData:t}}))(o,n))}const Tc="@project/import-link";function*Lc(){yield(0,bc.ib)(Tc,Rc)}function*Rc(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=wc.lW.from(e,"base64"),r=(0,Oc.rr)(n,{to:"string"}),i=JSON.parse(r);yield(0,bc.gz)(ft("Linked Project",i)),u.replace("/")}catch(e){console.error("Failed to import save from link",e)}}const Dc="@project/load",Ac=()=>({type:Dc});function*Jc(){yield(0,bc.ib)(Dc,Uc)}function*Uc(){try{const[e]=yield(0,bc.RE)(Nc(),{accept:"application/json"}),t=yield(0,bc.RE)(e.text.bind(e)),n=JSON.parse(t);let r=e.name;r=r?r.substr(0,r.lastIndexOf(".json")):"Unnamed Project",yield(0,bc.gz)(ft(r,n))}catch(e){console.warn("Failed to load project:",e)}}var Zc=n(3162);const Fc=Wo((e=>e.projectName)),Kc=Wo((e=>e.projectModified));function*$c(){yield(0,bc.ib)(Do,Hc)}function*Hc(){const e=yield(0,bc.Ys)();try{window.showSaveFilePicker?yield(0,bc.RE)(Vc,e):yield(0,bc.RE)(Gc,e),yield(0,bc.gz)({type:Jo})}catch(e){console.warn("Failed to save project",e)}}function*Vc(e){const t=yield(0,bc.Ys)(Fc),n=yield(0,bc.RE)(window.showSaveFilePicker,{suggestedName:t,types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!n)return;let r=n.name;r||(r=n.getFile().name),r&&(r=r.substr(0,r.lastIndexOf(".json")),yield(0,bc.gz)((e=>({type:Lo,payload:{projectName:e}}))(r)));const i=jo(e),o=yield(0,bc.RE)(n.createWritable.bind(n));yield(0,bc.RE)(o.write.bind(o),JSON.stringify(i,null,2)),yield(0,bc.RE)(o.close.bind(o))}function*Gc(e){const t=yield(0,bc.Ys)(Fc),n=jo(e),r=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});(0,Zc.saveAs)(r,t+".json")}function*qc(){yield(0,bc.rM)(Cc),yield(0,bc.rM)(Wc),yield(0,bc.rM)(Lc),yield(0,bc.rM)(Jc),yield(0,bc.rM)($c)}function*Yc(){yield(0,bc.A7)([Bs,Ks,Ms],Xc)}function*Xc(){for(;yield(0,bc.Ys)(Vs);){try{yield(0,bc.gz)(Ls(1))}catch(e){return console.error(e),void(yield(0,bc.gz)($s(!0)))}const e=yield(0,bc.Ys)(qs),t=Math.max(Math.ceil(1e3/e),1);yield(0,bc.gw)(t)}}function*_c(){yield(0,bc.rM)(Yc)}function Qc(e){return"circuit-editor-"+e}function el(e,t){return`editor-${e}--element-${t}`}function tl(e,t,n){return`editor-${e}--element-${t}--pin-${n}`}function nl(e,t){return`editor-${e}--wire-${t}`}function rl(e,t){return`editor-${e}--wire-joint-${t}`}const il="@tutorial/next";function*ol(e,t={}){var n,r;const i=yield(0,bc.Ys)((t=>_n(t,e)));if(!i)return null;const o=yield(0,bc.Ys)(Wt);return o?(yield(0,bc.gz)(_s([{selector:"#element-tray--element-"+e,message:null!==(n=t.trayMessage)&&void 0!==n?n:`This is a ${i.displayName} element`},{selector:"#"+Qc(o),message:null!==(r=t.fieldMessage)&&void 0!==r?r:`Drag the ${i.displayName} element onto the circuit field.`,placement:"top"}])),(yield(0,bc.RE)((()=>ll($e,(({payload:{elementType:t}})=>t===e))))).payload.elementId):null}function*sl(e,t){for(;;){if(yield(0,bc.RE)(cl,e,t))return;yield(0,bc.qn)(it)}}function*cl(e,t){return(yield(0,bc.Ys)(Oi)).some((({inputPin:n,outputPin:r})=>Qn(n,t)&&Qn(r,e)))}function*ll(e,t){let n;for(;(n=yield(0,bc.qn)(e))&&!t(n););return n}function*al(e,t,n={}){var r;yield(0,bc.gz)(_s([{selector:e,message:t,placement:n.placement,action:{name:"Next",action:{type:il}}},...(null!==(r=n.additionalSelectors)&&void 0!==r?r:[]).map((e=>({selector:e})))])),yield(0,bc.qn)(il)}function*ul(){yield(0,bc.RE)(al,"#element-tray","This is where logic elements are stored.");const e=yield(0,bc.RE)(ol,"logic-not");if(!e)return void(yield(0,bc.gz)(tc()));const t=yield(0,bc.RE)(ol,"interaction-momentary");if(!t)return void(yield(0,bc.gz)(tc()));const n=yield(0,bc.RE)(ol,"output-led");if(!n)return void(yield(0,bc.gz)(tc()));const r=yield(0,bc.Ys)(Wt);r?(yield(0,bc.gz)(_s([{selector:"#"+tl(r,t,"OUT"),message:"This is the switch's output pin.",placement:"top"},{selector:"#"+tl(r,e,"IN"),message:"This is the logic gate's input pin.",placement:"bottom"},{selector:"#"+Qc(r),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:t,pinId:"OUT"},{elementId:e,pinId:"IN"}),yield(0,bc.gz)(_s([{selector:"#"+tl(r,e,"OUT"),message:"This is the logic gate's output pin.",placement:"top"},{selector:"#"+tl(r,n,"IN"),message:"This is the LED's input pin.",placement:"bottom"},{selector:"#"+Qc(r),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:e,pinId:"OUT"},{elementId:n,pinId:"IN"}),yield(0,bc.gz)(_s({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,bc.qn)(Bs),yield(0,bc.gz)(_s([{selector:"#"+Qc(r)},{selector:"#"+el(r,t),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,bc.RE)((()=>ll(ls.Tu,(({payload:{elementIdPath:e,data:n}})=>!0===n&&ae(e,[t]))))),yield(0,bc.gz)(_s({selector:"#"+Qc(r),placement:"top",message:"That's it!",action:{name:"End Tutorial",action:tc()}}))):yield(0,bc.gz)(tc())}function dl(e){return"circuit-list--circuit-"+e}function*ml(){yield(0,bc.RE)(al,"#circuit-list-window","Circuits are collections of elements that can be reused as ICs."),yield(0,bc.gz)(_s({selector:"#circuit-list",message:"Right click on the circuit list to create a new circuit."}));const e=yield(0,bc.qn)(Ae),{circuitId:t}=e.payload;yield(0,bc.gz)(_s({selector:"#"+dl(t),message:"Here is your circuit.  Double click it to rename it."})),yield(0,bc.qn)(Ke),yield(0,bc.gz)(_s({selector:"#"+dl(t),message:"Click the circuit to view it in the active editor window."})),yield(0,bc.RE)((()=>ll(mi,(e=>e.payload.circuitId===t))));const n=yield(0,bc.Ys)(Wt);if(!n)return void(yield(0,bc.gz)(tc()));const r=yield(0,bc.RE)(ol,"pin-input");if(!r)return void(yield(0,bc.gz)(tc()));yield(0,bc.RE)(al,"#"+el(n,r),"Input pins take a signal from outside for use in your circuit.",{additionalSelectors:["#"+Qc(n)]}),yield(0,bc.gz)(_s([{selector:"#"+Qc(n)},{selector:"#"+el(n,r),message:"Rename the pin by right clicking it and clicking on the bolded text.  Choose any name you like"}])),yield(0,bc.RE)((()=>ll(Ye,(e=>e.payload.elementId===r)))),yield(0,bc.RE)(al,"#"+el(n,r),"Pin names will appear on the body of the IC when used in other circuits.  Be sure to name your pins!");const i=yield(0,bc.RE)(ol,"pin-output");if(!i)return void(yield(0,bc.gz)(tc()));yield(0,bc.RE)(al,"#"+el(n,i),"Output pins take a signal from your circuit and send it to the outside world.");const o=yield(0,bc.RE)(ol,"pin-output",{trayMessage:"Let's take another output pin",fieldMessage:"When multiple pins are used, the pins will stack in their vertical orientation on the IC"});if(!o)return void(yield(0,bc.gz)(tc()));yield(0,bc.RE)(al,"#"+Qc(n),"Let's put together a simple circuit.",{placement:"top"});const s=yield(0,bc.RE)(ol,"logic-buffer");if(!s)return void(yield(0,bc.gz)(tc()));const c=yield(0,bc.RE)(ol,"logic-not");if(!c)return void(yield(0,bc.gz)(tc()));yield(0,bc.gz)(_s([{selector:"#"+tl(n,r,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+tl(n,s,"IN"),message:"...to the buffer's input.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:r,pinId:"OUT"},{elementId:s,pinId:"IN"}),yield(0,bc.gz)(_s([{selector:"#"+tl(n,s,"OUT"),message:"Connect the buffer's output pin...",placement:"top"},{selector:"#"+tl(n,i,"IN"),message:"...to the IC's first output.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:s,pinId:"OUT"},{elementId:i,pinId:"IN"}),yield(0,bc.gz)(_s([{selector:"#"+tl(n,r,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+tl(n,c,"IN"),message:"...to the NOT's input.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:r,pinId:"OUT"},{elementId:c,pinId:"IN"}),yield(0,bc.gz)(_s([{selector:"#"+tl(n,c,"OUT"),message:"Connect the NOT's output...",placement:"top"},{selector:"#"+tl(n,o,"IN"),message:"...to the second IC output.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:c,pinId:"OUT"},{elementId:o,pinId:"IN"}),yield(0,bc.gz)(_s({selector:"#"+dl(m),message:"We now have a functional IC.  Let's go to the root project and make use of it"})),yield(0,bc.RE)((()=>ll(mi,(e=>e.payload.circuitId===m))));const l=Kn(t),a=yield(0,bc.RE)(ol,l);if(!a)return void(yield(0,bc.gz)(tc()));yield(0,bc.RE)(al,"#"+Qc(n),"Let's connect it up to see it in action.",{placement:"top"});const u=yield(0,bc.RE)(ol,"interaction-momentary");if(!u)return void(yield(0,bc.gz)(tc()));const d=yield(0,bc.RE)(ol,"output-led",{trayMessage:"Make an LED to check the status of the first pin."});if(!d)return void(yield(0,bc.gz)(tc()));const p=yield(0,bc.RE)(ol,"output-led",{trayMessage:"Make an LED to check the status of the second pin."});p?(yield(0,bc.gz)(_s([{selector:"#"+tl(n,u,"OUT"),message:"Connect the switch output...",placement:"top"},{selector:"#"+tl(n,a,r),message:"...to the IC input.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:u,pinId:"OUT"},{elementId:a,pinId:r}),yield(0,bc.gz)(_s([{selector:"#"+tl(n,a,i),message:"Connect the first IC output...",placement:"top"},{selector:"#"+tl(n,d,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:a,pinId:i},{elementId:d,pinId:"IN"}),yield(0,bc.gz)(_s([{selector:"#"+tl(n,a,i),message:"Connect the first IC output...",placement:"top"},{selector:"#"+tl(n,d,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:a,pinId:i},{elementId:d,pinId:"IN"}),yield(0,bc.gz)(_s([{selector:"#"+tl(n,a,o),message:"Connect the second IC output...",placement:"top"},{selector:"#"+tl(n,p,"IN"),message:"...to the second LED.",placement:"bottom"},{selector:"#"+Qc(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,bc.RE)(sl,{elementId:a,pinId:o},{elementId:p,pinId:"IN"}),yield(0,bc.gz)(_s({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,bc.qn)(Bs),yield(0,bc.gz)(_s([{selector:"#"+Qc(n)},{selector:"#"+el(n,u),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,bc.RE)((()=>ll(ls.Tu,(({payload:{elementIdPath:e,data:t}})=>!0===t&&ae(e,[u]))))),yield(0,bc.gz)(_s({selector:"#"+Qc(n),placement:"top",message:"You can place as many copies of an IC as you want.  Circuits can also contain other ICs.",action:{name:"End Tutorial",action:tc()}}))):yield(0,bc.gz)(tc())}function*pl(){yield(0,bc.ib)(nc,yl)}function*yl(e){const{tutorial:t}=e.payload;switch(t){case"basics":return void(yield(0,bc.RE)(ul));case"circuits":yield(0,bc.RE)(ml)}}function*fl(){yield(0,bc.rM)(pl)}const gl=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionSanitizer:function(e){return e},stateSanitizer:function(e){return e},actionsBlacklist:Ec})||We.qC,Il=(0,ze.ZP)(),hl=[!1,Il].filter(T),vl=(0,We.MT)((function(e=Me,t){return e=function(e=Me,t){return function(e=Me,t){if(!ct(t))return e;const{undoStack:n,redoStack:r}=e.undo,i=At()(n);if(!i)return e;const{serviceStates:o,viewCircuitId:s}=i;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...r,Rt(e)]})}),s&&(e=vc(e,pi(s))),e}(e=function(e=Me,t){if(!ut(t))return e;const{undoStack:n,redoStack:r}=e.undo,i=At()(r);if(!i)return e;const{serviceStates:o,viewCircuitId:s}=i;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,Rt(e)],redoStack:r.slice(0,r.length-1)})}),s&&(e=vc(e,pi(s))),e}(e=function(e=Me,t){return!wt(t)||ct(t)||ut(t)?e:M(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),Rt(e)],redoStack:[]})))}(e,t),t),t)}(e,t),vc(e,t)}),gl((0,We.md)(...hl)));function El(e){return(0,s.v9)(e)}function bl(e,t,n,i){r.useEffect((()=>{if(!e.current)return;const r=e.current;return r.addEventListener(t,n,i),()=>{r.removeEventListener(t,n,i)}}),[t,n,e,i])}Il.run((function*(){yield(0,bc.rM)(qc),yield(0,bc.rM)(_c),yield(0,bc.rM)(fl)})),vl.dispatch({type:Re});const wl=sc((e=>e.layout)),Ol=({className:e,title:t,children:n})=>r.createElement("div",{className:S("titlebar--3-TCE",e)},r.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),r.createElement("div",{className:"titlebar-divider--Wl_27"}),t&&r.createElement("div",{className:"titlebar-title--HXGig"},t),n);var kl=n(1935);function jl(){}const xl={registerPopoverChild:jl,unregisterPopoverChild:jl},Cl=r.createContext(null),Bl=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const i=r.useContext(Cl),o=null==i?void 0:i.registerPopoverChild,s=null==i?void 0:i.unregisterPopoverChild,c=r.useCallback((t=>{o&&o(t),e(t)}),[e,o]),l=r.useCallback((e=>{t(e)}),[t,s]),a=r.useMemo((()=>({registerPopoverChild:c,unregisterPopoverChild:l})),[c,l]);return r.createElement(Cl.Provider,{value:a},n)},Pl=()=>{},Nl=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:o=Pl,children:s})=>{const[c,l]=r.useState(null),{attributes:a,styles:u}=(0,kl.D)(e?t:null,c,{placement:n});!function(e){var t;const n=null!==(t=r.useContext(Cl))&&void 0!==t?t:xl,i=r.useRef(n);r.useEffect((()=>{i.current=n})),r.useEffect((()=>{if(e)return i.current.registerPopoverChild(e),()=>i.current.unregisterPopoverChild(e)}),[e])}(c);const[d,m,p]=function(e=[]){const[t,n]=r.useState(e),i=r.useCallback((e=>{n([...t,e])}),[t]),o=r.useCallback((e=>{n(Qt()(t,[e]))}),[t]);return[t,i,o,n]}();return function(e,t,n=!0){const i=r.useCallback((n=>{const r=le(e).filter(T);r.length&&r.every((e=>!e.contains(n.target)))&&t()}),[e,t]);r.useEffect((()=>{if(n)return document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}}),[i,n])}(r.useMemo((()=>[c,...d]),[d,c]),o),e?(0,i.createPortal)(r.createElement(Bl,{registerPopoverChild:m,unregisterPopoverChild:p},r.createElement("div",Object.assign({ref:l,style:Object.assign(Object.assign({},u.popper),{zIndex:10})},a.popper),s)),document.body):null},Sl=r.createContext((function(){}));function Ml(){return r.useContext(Sl)}const Wl=Sl.Provider,zl=({content:e,placement:t,children:n})=>{const i=r.useRef(null),[o,s]=r.useState(!1),c=r.useCallback((()=>{s(!0)}),[]),l=r.useCallback((()=>{s(!1)}),[]);return r.createElement(Wl,{value:l},r.createElement("div",{ref:i,onClick:c},n),r.createElement(Nl,{anchorEl:i.current,isOpen:o,placement:t,onRequestClose:l},o&&e))},Tl={button:"button--Ui3Hp","button--size-small":"button--size-small--289kb","button--variant-primary":"button--variant-primary--2qpAa","button--variant-menu":"button--variant-menu--3lEZ1"};const Ll=e=>{var{variant:t="default",size:n="default"}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["variant","size"]);return r.createElement("button",Object.assign({className:S(Tl.button,Tl["button--variant-"+t],Tl["button--size-"+n]),type:"button"},i),i.children)};function Rl(e,...t){const n=(0,s.I0)();return r.useCallback((()=>{const r=e(...t);r&&n(r)}),[n,e,...t])}function Dl(e,...t){const n=(0,s.I0)();return r.useCallback((r=>{if(r.defaultPrevented)return;r.preventDefault();const i=e(...t);i&&n(i)}),[n,e,...t])}const Al="menu-item--2dcyN",Jl="menu-item--disabled--RJJTK",Ul="menu-item-content--3s1DG",Zl="menu-item-text--1F41V",Fl="menu-item-secondary--2PJLF",Kl=({children:e})=>r.createElement("ul",{className:"menu--3E86w"},e),$l=({disabled:e,onClick:t,secondary:n,children:i})=>{const o=Ml(),s=r.useCallback((e=>{t&&t(e),o()}),[o,t]);return r.createElement("li",{className:S(Al,e&&Jl)},r.createElement("a",{className:Ul,onClick:s},r.createElement("span",{className:Zl},i),n&&r.createElement("span",{className:Fl},n)))},Hl=()=>r.createElement("div",{className:"menu-divider--1QPGp"}),Vl=()=>{const e=Rl(mt),t=Rl(Ao),n=Rl(Ac),i=Rl(Mc),o=Rl(xc);return r.createElement(Kl,null,r.createElement($l,{onClick:e},"New"),r.createElement(Hl,null),r.createElement($l,{onClick:n},"Load"),r.createElement($l,{onClick:t},"Save"),r.createElement(Hl,null),r.createElement($l,{onClick:i},"Import Circuits"),r.createElement(Hl,null),r.createElement($l,{onClick:o},"Export Link"))};var Gl=n(1795);const ql=/(Mac|iOS|OS\ X)/.test((Gl.os||"undefined").toString()),Yl=ql?"command":"ctrl",Xl=e=>e.undo.undoStack.length>0,_l=e=>e.undo.redoStack.length>0,Ql=Ci((e=>e.clipboardElements.length>0)),ea=()=>{const e=El(Xl),t=Rl(st),n=El(_l),i=Rl(at),o=El(Vr).length>0,s=Rl(ts),c=El(Ql),l=Rl(rt);return r.createElement(Kl,null,r.createElement($l,{disabled:!e,secondary:Yl+"+z",onClick:t},"Undo"),r.createElement($l,{disabled:!n,secondary:Yl+"+shift+z",onClick:i},"Redo"),r.createElement(Hl,null),r.createElement($l,{disabled:!o,secondary:Yl+"+c",onClick:s},"Copy"),r.createElement($l,{disabled:!c,secondary:Yl+"+v",onClick:l},"Paste"))},ta=Ic((e=>e.elementNameMode)),na=({className:e,value:t,onChange:n,children:i})=>r.createElement("label",{className:e},r.createElement("span",{className:"checkbox-span--1EWGs"},r.createElement("input",{type:"checkbox",checked:t,onChange:n})),i),ra=({disabled:e,secondary:t,value:n,onChange:i,children:o})=>r.createElement("li",{className:S(Al,e&&Jl)},r.createElement(na,{className:Ul,value:n,onChange:i},r.createElement("span",{className:Zl},o),t&&r.createElement("span",{className:Fl},t))),ia=({disabled:e,secondary:t,content:n,children:i})=>r.createElement("li",{className:S(Al,e&&Jl)},r.createElement(zl,{placement:"right-start",content:n},r.createElement("a",{className:Ul},r.createElement("span",{className:Zl},i),t&&r.createElement("span",{className:Fl},t),r.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},r.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),oa=()=>{const e=El(ta),t=Rl(fc,"all"),n=Rl(fc,"named-only"),i=Rl(fc,"none");return r.createElement(Kl,null,r.createElement(ra,{value:"all"===e,onChange:t},"Always visible"),r.createElement(ra,{value:"named-only"===e,onChange:n},"Named Items Only"),r.createElement(ra,{value:"none"===e,onChange:i},"Hidden"))},sa=()=>{const e=Rl(mc);return r.createElement(Kl,null,r.createElement(ia,{content:r.createElement(oa,null)},"Element Names"),r.createElement(Hl,null),r.createElement($l,{onClick:e},"Reset View"))},ca=()=>{const e=Rl(rc,"basics"),t=Rl(rc,"circuits");return r.createElement(Kl,null,r.createElement($l,{onClick:e},"Basics"),r.createElement($l,{onClick:t},"Circuits"))},la=()=>r.createElement(Kl,null,r.createElement(ia,{content:r.createElement(ca,null)},"Tutorials")),aa=is((e=>e.lastTickProcessingTimeMs)),ua="icon--3Vly6",da=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(ua,e.className)}),r.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),ma=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(ua,e.className)}),r.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),pa=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(ua,e.className)}),r.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),ya=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(ua,e.className)}),r.createElement("path",{d:"M3,0 L13,8 L3,16 z M11,1 l2,0 l0,14 l-2,0 z"})),fa="button--2N_ol",ga=()=>{const e=El(Hs),t=El(Gs),n=El(aa),i=Dl(Ps),o=Dl(Ds),s=Dl($s,"toggle"),c=Dl(Ws),l=r.useCallback((e=>{e.preventDefault()}),[]);return r.createElement("span",null,e&&r.createElement("span",{className:"simrate--NKBi_"},n.toFixed(2)," ms"),e?r.createElement(ma,{id:"simctrl-stop",className:S(fa,"button-stop--1dD4-"),onClick:o,onMouseDown:l}):r.createElement(da,{id:"simctrl-run",className:S(fa,"button-play--1vWfq"),onClick:i,onMouseDown:l}),r.createElement(ya,{id:"simctrl-step",className:S(fa,"button-step--3Fat5"),onClick:c,onMouseDown:l}),r.createElement(pa,{id:"simctrl-pause",className:S(fa,"button-pause--1UoHJ",!e&&"button--disabled--3caLv",t&&"selected--Ev2q8"),onClick:s,onMouseDown:l}))},Ia=({className:e})=>{const t=`${El(Fc)}${El(Kc)?"*":""}`;return r.createElement(Ol,{className:e,title:t},r.createElement(zl,{content:r.createElement(Vl,null),placement:"bottom-start"},r.createElement(Ll,{variant:"menu"},"File")),r.createElement(zl,{content:r.createElement(ea,null),placement:"bottom-start"},r.createElement(Ll,{variant:"menu"},"Edit")),r.createElement(zl,{content:r.createElement(sa,null),placement:"bottom-start"},r.createElement(Ll,{variant:"menu"},"View")),r.createElement(zl,{content:r.createElement(la,null),placement:"bottom-start"},r.createElement(Ll,{variant:"menu"},"Help")),r.createElement("div",{className:"project-titlebar-controls--1c1Qn"},r.createElement(ga,null)))};var ha=n(3274);const va=({circuitId:e,elementIdPath:t})=>{const n=(0,s.I0)(),i=El((e=>Fn(e,m))),o=El((t=>Fn(t,e))),c=r.useCallback((e=>{e.preventDefault(),n(pi(m,[]))}),[n]);return r.createElement(Ll,{size:"small",onClick:c},0===t.length?o:i)},Ea=({elementIdPath:e})=>{const t=(0,s.I0)(),n=At()(e),i=El((e=>bn(e,n))),o=El((e=>Cn(e,n))),c=i?$n(i):null,l=El((e=>c?Fn(e,c):null)),a=r.useCallback((n=>{n.preventDefault(),c&&t(pi(c,e))}),[c,e,t]);return r.createElement(Ll,{size:"small",onClick:a},o," [",l,"]")},ba=({circuitId:e,elementIdPath:t})=>{const n=t.map(((e,n)=>{const i=t.slice(0,n+1);return r.createElement(r.Fragment,{key:e},r.createElement("span",null,">"),r.createElement(Ea,{elementIdPath:i}))}));return r.createElement("div",{className:S("circuit-element-breadcrumb","circuit-element-breadcrumb--1CYNC")},r.createElement(va,{circuitId:e,elementIdPath:t}),n)},wa=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),Oa=(0,an.P1)(_o,Br,((e,t)=>[...lr()(e),...lr()(t).map((e=>({p1:e,p2:e})))].reduce(b.G0,wa))),ka="@element/new",ja=e=>({type:ka,payload:{elementType:e}});function xa(e){return e.type===ka}const Ca=r.createContext({zoomFactor:1,zoom:()=>{}});function Ba(){return r.useContext(Ca)}const Pa=({children:e})=>{const[t,n]=r.useState(1),i=r.useCallback((e=>{n((t=>e>0?t*e*1.03:t/(1.03*-e)))}),[]),o=r.useMemo((()=>({zoomFactor:t,zoom:i})),[i,t]);return r.createElement(Ca.Provider,{value:o},e)},Na={current:null},Sa=r.createContext({svgRef:Na,scalerRef:Na}),Ma=Sa.Provider,Wa=({svgRef:e,scalerRef:t,children:n})=>{const i=r.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return r.createElement(Ma,{value:i},n)},za=pn(((e,t)=>{const{elementIdsByCircuitId:n}=e,r=Object.keys(n);for(const e of r)if(-1!==n[e].indexOf(t))return e;return null})),Ta=(e,t,n)=>{if(!t)return!1;if(t===n)return!0;const r=Kn(n),{elementsById:i}=e.services.circuitGraph;return Object.keys(i).filter((e=>i[e].elementType===r)).some((n=>{const r=za(e,n);return!!r&&Ta(e,t,r)}))},La=r.createContext({editorId:"~none",circuitId:"~none",elementIdPath:[]});function Ra(){return r.useContext(La)}const Da=({editorId:e,children:t})=>{const n=El((t=>St(t,e))),{circuitId:i,elementIdPath:o}=null!=n?n:{circuitId:"~none",elementIdPath:[]},s=r.useMemo((()=>({editorId:e,circuitId:i,elementIdPath:o})),[i,o,e]);return n?r.createElement(La.Provider,{value:s},t):null};function Aa(e,t,n){const r=t.getScreenCTM();if(!r)return n;const i=e.createSVGPoint();i.x=n.x,i.y=n.y;const o=i.matrixTransform(r.inverse());return{x:o.x,y:o.y}}function Ja(){const{svgRef:e,scalerRef:t}=r.useContext(Sa);return r.useCallback((n=>e.current&&t.current?Aa(e.current,t.current,n):n),[e,t])}const Ua="text-unselectable--2tvXe",Za="element-interaction-toggle--1eeE2",Fa={"integrated-circuit":({elementId:e,elementPath:t,circuitId:n,inputPinIds:i,outputPinIds:o})=>{const c=(0,s.I0)(),l=El((e=>Fn(e,n))),a=El(xn),u=Hn(i.length,o.length),d=r.useCallback((r=>{e&&(r.defaultPrevented||(r.preventDefault(),c(pi(n,[...t||[],e]))))}),[e,c,n,t]),m=i.map(((e,t)=>{const n=50*t+25;return r.createElement("g",{key:e},r.createElement("line",{className:"element-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:4,y1:n,x2:10,y2:n}),r.createElement("text",{className:Ua,x:15,y:n,alignmentBaseline:"middle",fontSize:".7em"},a[e]))})),p=o.map(((e,t)=>{const n=50*t+25;return r.createElement("g",{key:e},r.createElement("line",{key:t,className:"element-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:n,x2:100,y2:n}),r.createElement("text",{className:Ua,x:85,y:n,textAnchor:"end",alignmentBaseline:"middle",fontSize:".7em"},a[e]))}));return r.createElement("g",null,r.createElement("text",{className:S(Ua,"element-select-highlight--fill"),textAnchor:"middle",x:50,y:0},l),r.createElement("path",{className:"element-select-highlight--stroke element-select-highlight--fill",stroke:"black",fill:"white",d:u,onDoubleClick:d}),m,p)},"interaction-momentary":({elementId:e,elementPath:t})=>{const n=(0,s.I0)(),i=El(Hs),o=r.useMemo((()=>[...t||[],null!=e?e:"~~none"]),[t,e]),c=El((e=>((e,t)=>{const{evolverIdsByElementId:n}=gs(e),r=e.services.simulator.evolverOutputValuesByEvolverId,i=as(n,t);if(i)return r[i]})(e,o))),l=r.useCallback((e=>{i&&(e.defaultPrevented||(e.preventDefault(),n((0,ls.Xx)(o,!0))))}),[o,n,i]),a=r.useCallback((()=>{i&&n((0,ls.Xx)(o,!1))}),[o,n,i]);let u="darkgreen",d="lightgrey";return c&&c.OUT&&(u="lightgreen",d="black"),r.createElement("g",{onMouseDown:l,onMouseUp:a,onMouseLeave:a,className:Za},r.createElement("rect",{className:"element-select-highlight--stroke element-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),r.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),r.createElement("circle",{cx:25,cy:25,r:17,fill:u}),r.createElement("text",{className:Ua,x:25,y:25,fontSize:".8em",fill:d,textAnchor:"middle",alignmentBaseline:"middle"},"Push"))},"interaction-toggle":({elementId:e,elementPath:t,evolverState:n})=>{const i=(0,s.I0)(),o=r.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),i((0,ls.Xx)([...t||[],e]))))}),[e,i,t]);let c="darkgreen",l="lightgrey",a="darkred";if(n){const{toggleState:e}=n;e?(c="lightgreen",l="black"):a="red"}return r.createElement("g",{onClick:o,className:Za},r.createElement("rect",{className:"element-select-highlight--stroke element-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),r.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),r.createElement("rect",{x:10,y:10,width:30,height:15,strokeWidth:0,fill:c}),r.createElement("text",{className:Ua,x:25,y:19,fontSize:".8em",fill:l,textAnchor:"middle",alignmentBaseline:"middle"},"On"),r.createElement("rect",{x:10,y:25,width:30,height:15,strokeWidth:0,fill:a}),r.createElement("text",{className:Ua,x:25,y:34,fontSize:".8em",fill:"lightgrey",textAnchor:"middle",alignmentBaseline:"middle"},"Off"))}},Ka=({componentName:e})=>r.createElement("g",null,r.createElement("rect",{width:50,height:50,fill:"red"}),r.createElement("text",{x:25,y:25,alignmentBaseline:"middle"},e));function $a(e,t,n,i){const{component:o,componentProps:s}=i,c=Object.assign({elementId:e,elementPath:t,evolverState:n},s);let l;return"string"==typeof o?(l=Fa[o],l||(l=()=>r.createElement(Ka,{componentName:o}))):l=o,r.createElement(l,Object.assign({},c))}const Ha=Object.freeze({}),Va=r.memo((function({className:e,elementId:t,x:n=0,y:i=0,elementType:o}){const s=El((e=>_n(e,o)));let c;c=s?$a(t,[],Ha,s.visual):r.createElement("rect",{x:n,y:i,width:50,height:50,fill:"red"});const l=0!=n||0!=i?`translate(${n}, ${i})`:void 0;return r.createElement("g",{className:S(e,"element-visual"),transform:l},c)})),Ga=r.memo((function(){const e=(0,s.I0)(),{circuitId:t}=Ra(),n=El(on),i=Ja(),{zoomFactor:o}=Ba();function c(e){return e*(1/o)}const[l,a]=r.useState(null),[u,d]=r.useState(null),m=El((e=>Ta(e,$n(l),t))),[,p]=(0,ye.L)({accept:ka,collect:e=>{e.isOver()||(d(null),a(null))},hover:(e,t)=>{if(!xa(e))return d(null),void a(null);const n=t.getClientOffset();if(!n)return;const r=i({x:n.x,y:n.y});a(e.payload.elementType),d(r)},drop:(r,o)=>{if(!xa(r))return;if(m)return;const s=o.getClientOffset();if(!s)return;const c=i({x:s.x,y:s.y});e(He(r.payload.elementType,t,(0,b.R9)(c,n)))}},[t,i,n,m]),y=u&&(0,b.R9)(u,n),f=100*c(1)+"%";return r.createElement("g",{id:"drag-new-element-layer"},!m&&y&&l&&r.createElement("g",{opacity:.5},r.createElement(Va,{x:y.x,y:y.y,elementType:l})),m&&r.createElement("g",{transform:`scale(${c(1)})`},r.createElement("rect",{width:"100%",height:"100%",opacity:.7,fill:"black"}),r.createElement("text",{x:"100",y:"25%",fill:"white"},"The current circuit is already inside the dragged IC.")),r.createElement("rect",{ref:p,width:f,height:f,fill:"transparent"}))})),qa=Ht((e=>e.dragMode)),Ya=Ht(((e,t)=>null!=e.dragMode&&e.dragStartEditorId===e.dragEndEditorId&&e.dragStartEditorId===t)),Xa=Ht((e=>null!=e.dragMode)),_a=Ht((e=>e.dragMode?e.dragStart:null)),Qa=Ht((e=>e.dragMode?e.dragEnd:null));let eu=null;const tu=e=>{const t=e.services.circuitEditorDrag;if("move"!==t.dragMode)return null;let n;n=Vr(e).length>0?on(e):sn(e);const{dragStart:r,dragEnd:i,dragModifierKeys:o}=t;if(!i)return null;let s=(0,b.sj)(i,r);if(o.shiftKey){const e=(0,b.Fv)((0,b.sj)(i,r));s=Math.abs(e.x)>=.5?{x:s.x,y:0}:{x:0,y:s.y}}return o.ctrlMetaKey||(s=(0,b.R9)(s,n)),eu&&(0,b.kg)(s,eu)||(eu=s),eu},nu=e=>{const t=tu(e);if(!t)return null;const n=Vr(e),r=Rn(e),i={};for(const e of n)i[e]=(0,b.ZO)(r[e],t);return i},ru=e=>{const t=tu(e);if(!t)return null;const n=Gr(e),r=Br(e),i={};for(const e of n)i[e]=(0,b.ZO)(r[e],t);return i},iu=e=>{if("move"!==e.services.circuitEditorDrag.dragMode)return de();const t=Gr(e),n=Vr(e),r=tu(e);if(!r)return de();function i(t){let i=or(e,t.elementId,t.pinId);return-1!==n.indexOf(t.elementId)&&(i=(0,b.ZO)(i,r)),i}function o(n){let i=Pr(e,n);return i?(-1!==t.indexOf(n)&&(i=(0,b.ZO)(i,r)),i):b.Ds}function s(e){switch(e.type){case"output":return[i(e.outputPin),o(e.jointId)];case"input":return[o(e.jointId),i(e.inputPin)];case"bridge":return[o(e.jointAId),o(e.jointBId)]}return null}const c=[],l=new Set;for(const n of t){const t=Cr(e,n);for(const n of t){if(l.has(n))continue;l.add(n);const t=s(e.services.circuitGraph.wireSegmentsById[n]);t&&c.push(t)}}return c},ou=r.memo((function(){const{editorId:e}=Ra(),t=El((t=>Ya(t,e))),n=El(nu),i=El(hn),o=El(ru),s=El(iu);if(!t)return null;const c=lr()(dn()(n,((e,t)=>r.createElement(Va,{key:t,elementType:i[t],x:e.x,y:e.y})))),l=lr()(dn()(o,((e,t)=>r.createElement("circle",{key:t,cx:e.x,cy:e.y,r:2,stroke:"none",fill:"black"})))),a=s.map((([e,t],n)=>r.createElement("line",{key:n,x1:e.x,y1:e.y,x2:t.x,y2:t.y,stroke:"black",strokeWidth:2})));return r.createElement("g",{id:"drag-element-move-preview-layer",opacity:.4},c,l,a)}));function su({dragThreshold:e=5,onClick:t,onDragStart:n}){const[i,o]=r.useState(!1),s=r.useRef(null),c=r.useCallback((e=>{e.preventDefault&&(o(!0),s.current={x:e.pageX,y:e.pageY})}),[]),l=r.useCallback((t=>{if(!s.current)return;const r=s.current;(Math.abs(r.x-t.pageX)>=e||Math.abs(r.y-t.pageY)>=e)&&(n&&n(t,s.current),o(!1),s.current=null)}),[e,n]),a=r.useCallback((e=>{s.current&&(t&&t(e),o(!1),s.current=null)}),[t]);return r.useEffect((()=>{if(i)return document.addEventListener("mousemove",l),document.addEventListener("mouseup",a),()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a)}}),[i,l,a]),{startTracking:c}}function cu(e){const{ctrlKey:t,altKey:n,shiftKey:r,metaKey:i}=e;return{ctrlMetaKey:ql?i:t,altKey:n,shiftKey:r}}Object.freeze({});const lu=Ht((0,an.P1)(qa.local,_a.local,Qa.local,((e,t,n)=>"select"===e&&t&&n?(0,b.Qu)(t,n):null))),au=({x:e,y:t,open:n,onRequestClose:i,children:o})=>{const s=r.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return r.createElement(Wl,{value:i},r.createElement(Nl,{isOpen:n,onRequestClose:i,anchorEl:s,placement:"bottom-start"},o))};function uu(){const[e,t]=r.useState(null),n=r.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),i=r.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:r.useCallback((t=>e?("function"==typeof t&&(t=t({point:e})),r.createElement(au,{open:!0,onRequestClose:i,x:e.x,y:e.y},t)):null),[e,i])}}const du=({fieldPosition:e})=>{const t=Rl(_e),n=El(Vr).length>0,i=Rl(ts),o=El(Ql),s=Rl(rt,{pastePosition:e}),c=Rl(et);return r.createElement(r.Fragment,null,r.createElement($l,{onClick:t},"Align Selection To Grid"),r.createElement(Hl,null),r.createElement($l,{disabled:!n,secondary:Yl+"+c",onClick:i},"Copy"),r.createElement($l,{disabled:!o,secondary:Yl+"+v",onClick:s},"Paste"),r.createElement(Hl,null),r.createElement($l,{onClick:c},"Delete Selected"))},mu=({fieldPosition:e})=>r.createElement(Kl,null,r.createElement(du,{fieldPosition:e})),pu=r.memo((function(){const e=(0,s.I0)(),{editorId:t}=Ra(),{zoomFactor:n}=Ba(),i=El((e=>Ya(e,t))),o=El(lu);function c(e){return e*(1/n)}const l=Ja(),{openContextMenu:a,renderContextMenu:u}=uu(),d=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),a(e))}),[a]),m=r.useCallback((t=>{if(0!==t.button)return;const n=cu(t);n.ctrlMetaKey||n.shiftKey||e({type:Ho})}),[e]),p=r.useCallback(((n,r)=>{const i=l(r),o=cu(n);e(((e,t,n)=>({type:Xr,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(i,o,t))}),[e,t,l]),{startTracking:y}=su({onClick:m,onDragStart:p});return r.createElement("g",{className:"circuit-editor-mouse-layer"},r.createElement("rect",{width:100*c(1)+"%",height:100*c(1)+"%",fill:"transparent",onMouseDown:y,onContextMenu:d}),i&&o&&r.createElement("g",{transform:`translate(${o.p1.x}, ${o.p1.y})`},r.createElement("rect",{width:o.p2.x-o.p1.x,height:o.p2.y-o.p1.y,strokeWidth:c(2),strokeDasharray:`${c(5)} ${c(3)}`,stroke:"skyblue",fill:"transparent"})),u((({point:e})=>r.createElement(mu,{fieldPosition:l(e)}))))})),yu=r.memo((function(){const[e]=r.useState("grid-"+(0,De.Z)()),{zoomFactor:t}=Ba(),n=50*t;return r.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("pattern",{id:e,width:n,height:n,patternUnits:"userSpaceOnUse"},r.createElement("path",{d:`M ${n} 0 L 0 0 0 ${n}`,fill:"none",stroke:"gray",strokeWidth:.5}))),r.createElement("rect",{width:"100%",height:"100%",fill:`url(#${e})`}))})),fu=r.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:i,onChange:o,onBeginEdit:s,onCommit:c,onCancel:l,onBlur:a,onKeyUp:u},d)=>{const[m,p]=r.useState(null),y=r.useCallback((e=>{null==m&&s&&s(),p(e.target.value),o&&o(e)}),[m,s,o]),f=r.useCallback((e=>{u&&u(e),e.defaultPrevented||null!=m&&("Escape"===e.key?(e.preventDefault(),l&&l()):"Enter"===e.key&&(e.preventDefault(),c&&c(m)))}),[u,m,l,c]),g=r.useCallback((e=>{a&&a(e),null!=m&&c&&c(m)}),[a,m,c]);return r.createElement("input",{ref:d,className:e,autoFocus:t,defaultValue:n,value:i,type:"text",onChange:y,onKeyUp:f,onBlur:g})})),gu=({className:e,textClassname:t,inputClassname:n,label:i,defaultValue:o,isEditing:s,onRequestEdit:c,onCommit:l,onCancel:a})=>{const u=r.useRef(null),d=r.useCallback((e=>{c&&(e.defaultPrevented||(e.preventDefault(),c()))}),[c]),m=r.useCallback((e=>{"Escape"===e.key&&s&&a()}),[s,a]),p=r.useCallback((()=>{s&&a()}),[s,a]);return r.useEffect((()=>{s&&u.current&&u.current.select()}),[s]),s?r.createElement(fu,{ref:u,className:S(e,n),autoFocus:!0,defaultValue:o,onBlur:p,onKeyUp:m,onCommit:l,onCancel:a}):r.createElement("span",{className:S(e,t),onDoubleClick:d},null!=i?i:o)},Iu=e=>{const{onRequestEdit:t,onCommit:n}=e,i=Ml(),o=r.useCallback((()=>{t&&t()}),[t]),s=r.useCallback((e=>{n(e),i()}),[n,i]);return r.createElement("li",{className:Al,onClick:o},r.createElement(gu,Object.assign({},e,{onCommit:s})))},hu=({elementId:e,fieldPosition:t})=>{const n=(0,s.I0)(),{elementIdPath:i}=Ra(),o=El((t=>Cn(t,e))),c=El((t=>bn(t,e))),l=c?$n(c):null,[a,u]=r.useState(!1),d=r.useCallback((()=>{u(!0)}),[]),m=r.useCallback((()=>{u(!1)}),[]),p=r.useCallback((t=>{u(!1),n(((e,t)=>({type:Ye,payload:{elementId:e,elementName:t}}))(e,t))}),[n,e]),y=r.useCallback((()=>{l&&n(pi(l,[...i,e],{newWindow:!0}))}),[i,n,l,e]);return r.createElement(Kl,null,r.createElement(Iu,{defaultValue:null!=o?o:"<unknown>",label:r.createElement("span",{style:{fontWeight:"bold"}},o),isEditing:a,onRequestEdit:d,onCommit:p,onCancel:m}),r.createElement(Hl,null),l&&r.createElement(r.Fragment,null,r.createElement($l,{onClick:y},"Open in New Window"),r.createElement(Hl,null)),r.createElement(du,{fieldPosition:t}))},vu=r.memo((function({elementId:e}){const t=(0,s.I0)(),{editorId:n,elementIdPath:i}=Ra(),o=El(Hs),{openContextMenu:c,renderContextMenu:l}=uu(),a=El((t=>ki(t,e))),{x:u,y:d}=El((t=>Dn(t,e))),m=El((t=>((e,t)=>{const{evolverIdsByElementId:n}=gs(e),r=e.services.simulator.evolverStatesByEvolverId,i=as(n,t);if(i)return r[i]})(t,[...i,e]))),p=El((t=>qr(t,e))),y=Ja(),f=r.useCallback((n=>{if(o)return;if(n.defaultPrevented)return;if(0!==n.button)return;n.preventDefault();const r=en(cu(n));t(Kr(e,r))}),[t,o,e]),g=r.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const r=en(cu(n),"set-if-unselected");t(Kr(e,r)),c(n)}),[t,e,c]),I=r.useCallback(((r,i)=>{const o=y(i),s=cu(r);t(((e,t,n,r)=>({type:Zr,payload:Object.assign(Object.assign({},t),{elementId:e,modifierKeys:n,editorId:r})}))(e,o,s,n))}),[y,t,e,n]),{startTracking:h}=su({onClick:f,onDragStart:I}),v=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),o||0===e.button&&h(e))}),[o,h]);let E,w;if(a){const{hitRect:t}=a.visual;E=$a(e,i,m,a.visual),w=t}else E=r.createElement("rect",{x:u,y:d,width:50,height:50,fill:p?"goldenrod":"red"}),w={p1:b.Ds,p2:{x:50,y:50}};const O=0!=u||0!=d?`translate(${u}, ${d})`:void 0;return r.createElement("g",{transform:O},r.createElement("g",{id:el(n,e),className:S("circuit-field-element",p&&"element-selected"),onMouseDown:v,onContextMenu:g},E),r.createElement(Eu,{elementId:e,hitRect:w}),l((({point:t})=>r.createElement(hu,{elementId:e,fieldPosition:y(t)}))))})),Eu=r.memo((function({elementId:e,hitRect:t}){const{zoomFactor:n}=Ba(),i=El((t=>((e,t)=>{switch(e.services.uiSettings.elementNameMode){case"all":default:return Cn(e,t);case"named-only":return Bn(e,t);case"none":return null}})(t,e))),o=Math.max(.7,n);let s=15;return o>1?s-=2*o:s+=1/o*7,i?r.createElement("text",{fontSize:1.2/o+"em",className:Ua,textAnchor:"middle",x:t.p1.x+(t.p2.x-t.p1.x)/2,y:t.p2.y+s},i):null})),bu=vu,wu=r.memo((function(){const{circuitId:e}=Ra(),t=El((t=>kn(t,e))).map((e=>r.createElement(bu,{key:e,elementId:e})));return r.createElement("g",null,t)}));var Ou=n(784);const ku="highlight--Q2iLD",ju="is-drag-target--1NYuw",xu=r.memo((function({elementId:e,pinId:t}){const{editorId:n}=Ra(),i=Ja(),[o,c]=r.useState(!1),l=(0,s.I0)(),a=El((n=>or(n,e,t))),u=El((n=>ji(n,e,t))),d=El(Tr),m=r.useCallback(((r,o)=>{const s=i(o),c=cu(r);l(oi(s,{type:"pin",pin:{elementId:e,pinId:t}},c,n))}),[l,n,i,e,t]),{startTracking:p}=su({onDragStart:m}),y=r.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),p(e)))}),[p]),f=r.useCallback((()=>{c(!0)}),[]),g=r.useCallback((()=>{c(!1)}),[]);if(!a)return null;const I=null!=d&&d.elementId===e&&d.pinId===t,{x:h,y:v}=a;let E;return E="input"===u?r.createElement("path",{d:(0,Ou.x)(h,v,4,-45,225),strokeWidth:2,className:S("element-pin-input--1urBY",I&&ju,o&&ku)}):r.createElement("circle",{className:S("element-pin-output--1jFy-",I&&ju,o&&ku),cx:h,cy:v,r:3}),r.createElement("g",{id:tl(n,e,t),onMouseEnter:f,onMouseLeave:g},E,r.createElement("circle",{stroke:"none",fill:"transparent",cx:h,cy:v,r:5,onMouseDown:y}))})),Cu=r.memo((function({elementId:e}){var t;const n=El((t=>ki(t,e))),i=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},o=Object.keys(i).map((t=>r.createElement(xu,{key:t,elementId:e,pinId:t})));return r.createElement(r.Fragment,null,o)})),Bu=r.memo((function(){const{circuitId:e}=Ra(),t=El((t=>kn(t,e))).map((e=>r.createElement(Cu,{key:e,elementId:e})));return r.createElement("g",null,t)})),Pu=()=>{const e=(0,s.I0)(),{editorId:t}=Ra(),{zoomFactor:n}=Ba(),i=El(Xa);function o(e){return e*(1/n)}const c=function(){const{svgRef:e,scalerRef:t}=r.useContext(Sa);return r.useCallback((n=>{if(!e.current||!t.current)return b.Ds;const r={x:n.pageX,y:n.pageY};return Aa(e.current,t.current,r)}),[e,t])}(),l=r.useCallback((n=>{if(0===n.buttons)return void e(Kt());const r=c(n),i=cu(n);e(((e,t,n)=>({type:Gt,payload:{dragPos:e,modifierKeys:t,editorId:n}}))(r,i,t))}),[e,t,c]),a=r.useCallback((n=>{const r=c(n),i=cu(n);e(((e,t,n)=>({type:it,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(r,i,t))}),[e,t,c]);return i?r.createElement("rect",{width:100*o(1)+"%",height:100*o(1)+"%",fill:"transparent",onMouseMove:l,onMouseUp:a}):null},Nu=({wireId:e,wireSegmentId:t})=>{const n=(0,s.I0)(),{editorId:i}=Ra(),o=Ja(),c=r.useRef(!1),[l,a]=r.useState(null),u=El(Hs),d=El(Xa),m=El(sn),p=El((e=>Er(e,t))),y=El((e=>Nr(e,t))),f=El((e=>Sr(e,t))),g=r.useCallback((r=>{if(c.current=!1,!l)return;const o=cu(r);n(((e,t,n,r,i)=>({type:ni,payload:Object.assign(Object.assign({},e),{wireId:t,wireSegmentId:n,modifierKeys:r,editorId:i})}))(l,e,t,o,i)),a(null)}),[n,i,l,e,t]),I=r.useCallback((()=>{c.current=!1,a(null)}),[]),{startTracking:h}=su({onDragStart:g,onClick:I});return r.createElement("g",{onMouseMove:e=>{if(d||u||c.current)return;const t=cu(e),n=o({x:e.pageX,y:e.pageY}),r=(0,b.Fv)((0,b.sj)(f,y)),i=(0,b.sj)(n,y),s=(0,b.Ih)(i,r),l=(0,b.ZO)(y,(0,b.bA)(r,s));t.ctrlMetaKey||(1===Math.abs(r.x)&&(l.x=(0,b.n$)(l.x,m)),1===Math.abs(r.y)&&(l.y=(0,b.n$)(l.y,m))),a(l)},onMouseLeave:()=>{c.current||a(null)},onMouseDown:e=>{e.defaultPrevented||d||u||(c.current=!0,h(e))}},r.createElement("line",{x1:y.x,x2:f.x,y1:y.y,y2:f.y,stroke:"black",strokeWidth:2}),r.createElement("line",{x1:y.x,x2:f.x,y1:y.y,y2:f.y,stroke:"transparent",strokeWidth:4}),"input"===p&&r.createElement("circle",{cx:f.x,cy:f.y,r:2,stroke:"none",fill:"black"}),l&&r.createElement("circle",{cx:l.x,cy:l.y,r:3,fill:"orange",stroke:"none"}))},Su=({wireId:e,jointId:t})=>{const n=(0,s.I0)(),{editorId:i}=Ra(),o=Ja(),c=El((e=>Pr(e,t))),l=El((e=>Yr(e,t))),[a,u]=r.useState(!1),d=r.useCallback((r=>{const s=o({x:r.pageX,y:r.pageY}),c=cu(r);n(((e,t,n,r,i)=>({type:Qr,payload:Object.assign(Object.assign({},e),{wireId:t,jointId:n,modifierKeys:r,editorId:i})}))(s,e,t,c,i))}),[n,i,o,t,e]),m=r.useCallback((e=>{const r=en(cu(e));n(ti(t,r))}),[n,t]),{startTracking:p}=su({onDragStart:d,onClick:m}),y=`${(0,Ou.x)(c.x,c.y,8.5,0,180)} ${(0,Ou.x)(c.x,c.y,8.5,180,0)} z ${(0,Ou.x)(c.x,c.y,5,0,180)} ${(0,Ou.x)(c.x,c.y,5,180,0)}`;return c?r.createElement("g",{id:rl(i,t),onMouseOver:()=>{u(!0)},onMouseLeave:()=>{u(!1)}},r.createElement("circle",{cx:c.x,cy:c.y,r:6,fill:"transparent",stroke:"none"}),r.createElement("circle",{cx:c.x,cy:c.y,r:2,fill:"black",stroke:"none"}),(a||l)&&r.createElement("g",{className:S("wire-joint--interactor--3h5o4",l&&"selected--2L-Hh")},a&&r.createElement("g",{onMouseDown:e=>{const r=o({x:e.pageX,y:e.pageY}),s=cu(e);n(oi(r,{type:"joint",jointId:t},s,i))}},r.createElement("circle",{cx:c.x,cy:c.y,r:8.5,stroke:"none",fill:"transparent",className:"mouse-detector--23NpN"}),r.createElement("path",{shapeRendering:"geometricPrecision",stroke:"none",fill:"black",fillRule:"evenodd",d:y})),r.createElement("circle",{cx:c.x,cy:c.y,r:3,fill:"black",stroke:"none",onMouseDown:p}))):null},Mu=({wireId:e})=>{const{editorId:t}=Ra(),n=El((t=>fr(t,e))),i=El((t=>Ir(t,e))),o=n.map((t=>r.createElement(Nu,{key:t,wireId:e,wireSegmentId:t}))),s=i.map((t=>r.createElement(Su,{key:t,wireId:e,jointId:t})));return r.createElement("g",{id:nl(t,e)},o,s)},Wu=r.memo((function(){const{circuitId:e}=Ra(),t=El((t=>kr(t,e))).map((e=>r.createElement(Mu,{key:e,wireId:e})));return r.createElement("g",{className:"circuit-editor-wires-layer"},t)})),zu=()=>{const e=El(Jr),t=El(Rr),n=El(Ar),i=El(Ur).map((([e,t],n)=>r.createElement("line",{key:n,x1:e.x,y1:e.y,x2:t.x,y2:t.y,stroke:"black",strokeWidth:2,opacity:.4})));return t||n||e||0!==i.length?r.createElement("g",{className:"circuit-editor-drag-wire-preview"},i,e&&r.createElement("circle",{cx:e.x,cy:e.y,r:2,opacity:.4,stroke:"none",fill:"black"}),t&&n&&r.createElement("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"black",strokeWidth:2,opacity:.4})):null},Tu=({width:e,height:t})=>{const n=(0,s.I0)(),{zoomFactor:i}=Ba(),o=r.useRef(null),c=r.useRef(null),l=r.useCallback((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),[]),a=r.useCallback((()=>{n({type:ci})}),[n]),[{isDraggingNewElement:u},d]=(0,ye.L)({accept:ka,collect:e=>({isDraggingNewElement:e.isOver()})});return r.createElement("svg",{tabIndex:-1,ref:e=>{o.current=e,d(e)},width:e,height:t,onMouseDown:l,onMouseLeave:a,className:"circuit-field-svg--o7YIn"},r.createElement(yu,null),r.createElement("g",{ref:c,"transform-origin":"0 0",transform:`scale(${i})`},r.createElement(Wa,{svgRef:o,scalerRef:c},r.createElement(pu,null),r.createElement(wu,null),r.createElement(Wu,null),r.createElement(Bu,null),r.createElement(ou,null),r.createElement(zu,null),u&&r.createElement(Ga,null),r.createElement(Pu,null))))},Lu=({})=>{const e=r.useRef(null),{width:t,height:n}=pe(e),{zoomFactor:i,zoom:o}=Ba(),s=El(Oa),{width:c,height:l}=(0,b.nF)(s),a=Math.max(t,c*i),u=Math.max(n,l*i);return bl(e,"wheel",r.useCallback((e=>{e.defaultPrevented||e.ctrlKey&&(o(e.deltaY>0?-1:1),e.preventDefault(),e.stopPropagation())}),[o]),{passive:!1}),r.createElement("div",{ref:e,style:{width:"100%",height:"100%"}},r.createElement(Tu,{width:a,height:u}))},Ru=({className:e,editorId:t})=>{const n=El(Hs);return r.createElement(Da,{editorId:t},r.createElement("div",{id:Qc(t),className:S("circuit-editor","circuit-editor--2jFUa",n&&"simulator-active",e)},r.createElement("div",{className:"circuit-editor-scrollarea--12k0x"},r.createElement(Pa,null,r.createElement(Lu,null)))))};var Du=n(1474);const Au=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(ua,e.className)}),r.createElement("path",{d:"M4,4 L12,12 M4,12 L12,4"})),Ju=({className:e,id:t,title:n,children:i})=>{const o=Q(),{closeWindow:s}=re(),c=r.useCallback((()=>{s(o)}),[s,o]),[,l]=(0,Du.c)({item:ge(o)});return r.createElement(he,{id:t,className:q["tessel-window"]},r.createElement("div",{ref:l,className:q["tessel-window-titlebar"]},r.createElement("div",{className:q["tessel-window-title"]},n),r.createElement("div",{className:q["tessel-window-controls"]},r.createElement(Au,{className:q["tessel-window-controls-close"],onClick:c}))),r.createElement("div",{className:S(q["tessel-window-content"],e)},i))},Uu="keymap:CircuitEditor/SimStep",Zu="keymap:CircuitEditor/SelectAll",Fu="keymap:CircuitEditor/Copy",Ku="keymap:CircuitEditor/Paste",$u="keymap:CircuitEditor/Delete",Hu="keymap:CircuitEditor/Undo",Vu="keymap:CircuitEditor/Redo",Gu={[Uu]:"space",[Zu]:Yl+"+a",[Fu]:Yl+"+c",[Ku]:Yl+"+v",[$u]:["backspace","del"],[Hu]:Yl+"+z",[Vu]:[Yl+"+y",Yl+"+shift+z"]};const qu=e=>{var{children:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children"]);return r.createElement("div",Object.assign({},n,{className:L}),t)},Yu=({id:e,value:t,label:n,isSelected:i,onItemSelected:o})=>{const s=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),o(t))}),[o,t]);return r.createElement("li",{id:e,className:S("selection-list-item","selection-list-item--errDr",i&&"selection-list-item--selected--3MkqB"),onClick:s},r.createElement("div",{className:S("selection-list-item-content--321YU",Ua)},n))},Xu=({className:e,id:t,items:n,onItemSelected:i})=>r.createElement("ul",{id:t,className:S("selection-list","selection-list--3yujH",e)},n.map((e=>r.createElement(Yu,Object.assign({key:e.value},e,{onItemSelected:i}))))),_u=({circuitId:e})=>{const t=(0,s.I0)(),n=El((t=>Fn(t,e))),[i,o]=r.useState(!1),{openContextMenu:c,renderContextMenu:l}=uu(),a=r.useCallback((()=>{e!==m&&o(!0)}),[e]),u=r.useCallback((()=>{o(!1)}),[]),d=r.useCallback((n=>{t(((e,t)=>({type:Ke,payload:{circuitId:e,circuitName:t}}))(e,n)),o(!1)}),[e,t]),p=r.useCallback((n=>{n.preventDefault(),t(pi(e,null,{newWindow:!0}))}),[e,t]),y=r.useCallback((n=>{n.preventDefault(),t((e=>({type:Ze,payload:{circuitId:e}}))(e))}),[t,e]),f=r.useCallback((e=>{e.preventDefault(),e.stopPropagation(),c(e)}),[c]);return r.createElement("div",{className:"circuitstree-item--22dzG",onContextMenu:f,onDoubleClick:a},r.createElement(gu,{defaultValue:n,isEditing:i,onRequestEdit:a,onCommit:d,onCancel:u}),l(r.createElement(Kl,null,e!==m&&r.createElement(r.Fragment,null,r.createElement($l,{onClick:a},"Rename Circuit"),r.createElement(Hl,null)),r.createElement($l,{onClick:p},"Open in New Window"),e!==m&&r.createElement(r.Fragment,null,r.createElement(Hl,null),r.createElement($l,{onClick:y},"Delete Circuit")))))},Qu=()=>{const e=(0,s.I0)(),t=r.useCallback((()=>{e(Je())}),[e]);return r.createElement(Kl,null,r.createElement($l,{onClick:t},"New Circuit"))},ed=({className:e,isOpen:t,anchorEl:n,placement:o="auto",children:s})=>{const[c,l]=r.useState(null),[a,u]=r.useState(null),{attributes:d,styles:m}=(0,kl.D)(t?n:null,c,{placement:o,modifiers:[{name:"arrow",options:{element:a}},{name:"offset",options:{offset:[0,8]}}]});return t?(0,i.createPortal)(r.createElement("div",Object.assign({ref:l,className:S("tooltip--2yxRI",e),style:m.popper,role:"tooltip"},d.popper),s,r.createElement("div",Object.assign({ref:u,"data-popper-arrow":!0,className:"tooltip-arrow--2mJMo",style:m.arrow},d.arrow))),document.body):null},td={"input-output":"I/O","integrated-circuit":"Integrated Circuits",logic:"Logic"},nd=({category:e,search:t})=>{const n=El(Yn).filter((t=>t.category===e)).filter((function(n){return n.category===e&&(null===t||-1!==n.displayName.toLowerCase().indexOf(t))})).map((e=>r.createElement(rd,{key:e.type,elementType:e.type})));return 0===n.length?null:r.createElement(r.Fragment,null,r.createElement("li",{className:"element-tray-category--3K8sv"},td[e]),n)},rd=({elementType:e})=>{const[t,n]=r.useState(null),i=El((t=>_n(t,e))),[o,s]=r.useState(!1),c=r.useCallback((e=>{e.preventDefault(),s(!0)}),[]),l=r.useCallback((e=>{e.target===t&&s(!1)}),[t]),[,a]=(0,Du.c)({item:ja(e)});let u,d=e,m="0 0 50 50";if(i){const{trayComponent:e,hitRect:t}=i.visual;if(e){const t=e;u=r.createElement(t,null)}else u=$a(void 0,[],void 0,i.visual),m=`${t.p1.x} ${t.p1.y} ${t.p2.x} ${t.p2.y}`;d=i.displayName}else u=r.createElement(id,null);return r.createElement("li",{id:"element-tray--element-"+e,ref:e=>{n(e),a(e)},className:"element-tray-item--32gev",onClick:c,onMouseOut:l},r.createElement(ed,{placement:"top",isOpen:o,anchorEl:t},"Click and drag to create a new circuit element."),r.createElement("span",{className:"element-tray-item-preview--12k1m"},r.createElement("svg",{width:30,height:30,viewBox:m},u)),r.createElement("span",{className:Ua},d))},id=()=>r.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50}),od={"element-tray":()=>{const e=El(Yn),t=ur()(e.map((e=>e.category))),[n,i]=r.useState(""),o=r.useCallback((e=>{i(e.target.value.toLowerCase())}),[]);return r.createElement(Ju,{id:"element-tray",title:"Elements",className:"element-tray--2OmR6"},r.createElement("div",null,r.createElement("input",{className:"element-tray-search--2PYcp",type:"text",value:n,onChange:o,placeholder:"Search"})),r.createElement("div",{className:"element-tray-element-container--1jqen"},r.createElement("ul",{className:"element-tray-element-list--3RXLA"},t.map((e=>r.createElement(nd,{key:e,category:e,search:n}))))))},"circuit-field":({editorId:e})=>{var t,n;const i=(0,s.I0)(),{circuitId:o,elementIdPath:c}=null!==(t=El((t=>St(t,e))))&&void 0!==t?t:{circuitId:null,elementIdPath:[]},l=null!==(n=El((e=>Fn(e,o))))&&void 0!==n?n:"<Circuit Missing>",a=r.useMemo((()=>{function e(e){return t=>{if(t){if(t.defaultPrevented)return;t.preventDefault()}i(e)}}return{[Uu]:e(Ws()),[Zu]:e({type:Ko}),[Fu]:e(ts()),[Ku]:e(rt()),[$u]:e(et()),[Hu]:e(st()),[Vu]:e(at())}}),[i]),u=r.useCallback((()=>{i((e=>({type:ui,payload:{editorId:e}}))(e))}),[i,e]);return r.createElement(Ju,{title:l+" [Circuit]"},r.createElement(ha.HotKeys,{keyMap:Gu,handlers:a,component:qu},r.createElement("div",{onFocus:u,className:S("circuit-field-view",L,R["flex-column"])},r.createElement(ba,{circuitId:o,elementIdPath:c}),r.createElement(Ru,{className:S(L,R["flexitem-shrink"]),editorId:e}))))},"circuits-list":()=>{const e=(0,s.I0)(),t=El(Zn),{openContextMenu:n,renderContextMenu:i}=uu(),o=r.useCallback((t=>{e(pi(t))}),[e]),c=r.useCallback((e=>{e.preventDefault(),n(e)}),[n]),l=r.useMemo((()=>Object.keys(t).map((e=>({id:dl(e),value:e,label:r.createElement(_u,{circuitId:e})})))),[t]);return r.createElement(Ju,{id:"circuit-list-window",title:"Circuits",className:S("circuitstree--QeaI9")},r.createElement("div",{className:L,onContextMenu:c},r.createElement(Xu,{className:L,id:"circuit-list",items:l,onItemSelected:o})),i(r.createElement(Qu,null)))}};function sd(e){const t=od[e.windowId];return t?r.createElement(t,Object.assign({},e.windowProps)):null}const cd=()=>{const e=(0,s.I0)(),t=El(wl),n=r.useCallback((t=>{e((e=>({type:lc,payload:{layout:e}}))(t))}),[e]),i=r.useCallback((t=>{let n=t.target;for(;null!=n;){if(n.classList.contains("circuit-editor"))return;n=n.parentElement}e(Kt())}),[e]);return bl({current:document.body},"mouseup",i),r.createElement("div",{className:S(L,R["flex-column"])},r.createElement(Ia,{className:R["flexitem-fix"]}),r.createElement("div",{className:S(L,R["flexitem-shrink"])},r.createElement(be,{className:S("project-editor",L),rootItem:t,onLayoutChange:n,renderWindow:sd})))},ld=({location:e})=>{const t=(0,s.I0)(),[n,i]=r.useState(!1);return r.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void i(!0)}const r=n.get("data");r?t((e=>({type:Tc,payload:{data:e}}))(r)):i(!0)}),[]),n?r.createElement("div",null,"Failed to import project"):r.createElement("div",null,"Importing Project...")},ad=()=>r.createElement(c.rs,null,r.createElement(c.AW,{exact:!0,path:"/",component:cd}),r.createElement(c.AW,{exact:!0,path:"/import",component:ld})),ud=Mi((e=>e.dialogType)),dd=Mi((e=>e.data));var md=n(227),pd=n(1074);const yd=({className:e,isOpen:t,onRequestClose:n,children:o})=>t?(0,i.createPortal)(r.createElement("div",{className:S("modal","modal--25LBN")},r.createElement(md.Y,{onClickOutside:n,onEscapeKey:n},r.createElement("div",{className:S("modal-content--1H0T_",e)},r.createElement(pd.Z,{className:L},o)))),document.body):null,fd=({isOpen:e,title:t,acceptText:n,cancelText:i,onAccept:o,onCancel:s,footer:c,children:l})=>r.createElement(yd,{className:"dialog--1eQi6",isOpen:e,onRequestClose:s},r.createElement("div",{className:"dialog-title--1DWsL"},t),r.createElement("div",null,l),r.createElement("div",{className:"dialog-footer--2hYdr"},c,s&&r.createElement(Ll,{onClick:s},null!=i?i:"Cancel"),o&&r.createElement(Ll,{variant:"primary",onClick:o},null!=n?n:"Accept"))),gd=()=>{const e=Rl(Ni),t=El(dd),n=null==t?void 0:t.projectLink,i=r.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const o=r.createElement(Ll,{onClick:i},"Copy to Clipboard");return r.createElement(fd,{isOpen:!0,title:"Export Project Link",cancelText:"Close",onCancel:e,footer:o},r.createElement("div",{className:"export-link-dialog-link-container--phwUA"},r.createElement("code",{className:"export-link-dialog-link--1dOdK"},n)))},Id=({circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:i})=>{const o=r.useCallback((t=>{t.target.checked&&i(ur()([...n,e]))}),[e,i,n]);return r.createElement(na,{onChange:o,value:-1!==n.indexOf(e)},t)},hd=()=>{const e=(0,s.I0)(),t=El(dd),[n,i]=r.useState([]),o=Rl(Ti),c=r.useCallback((()=>{e(Ni(n))}),[e,n]);if(!t)return null;const{circuits:l}=t;return r.createElement(fd,{isOpen:!0,title:"Import Circuits",onAccept:c,onCancel:o,acceptText:"Import Circuits"},r.createElement("div",null,r.createElement("p",null,"Choose the circuits to import."),r.createElement("p",null,"Any chosen circuits that depend on other circuits will import their dependencies automatically."),r.createElement("p",null,"If any circuits already exist in your project, they will not be re-imported.")),r.createElement("ul",{className:"import-project-circuits-list--2ODCz"},l.map((({circuitId:e,circuitName:t})=>r.createElement("li",{key:e},r.createElement(Id,{circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:i}))))))};const vd=()=>{const e=El(ud);if(!e)return null;const t=function(e){switch(e){case"export-project-link":return gd;case"import-project-circuits":return hd;default:return function(e){throw new Error("Unknown dialog type "+e)}(e)}}(e);return r.createElement(t,null)},Ed=({selector:e,message:t,placement:n,action:i=[]})=>{const o=(0,s.I0)(),c=function(e){const[t,n]=r.useState(null);return r.useEffect((()=>{const t=new MutationObserver((()=>{n(document.querySelector(e))}));return t.observe(document.body,{childList:!0,subtree:!0}),n(document.querySelector(e)),()=>{t.disconnect()}}),[e]),t}(e);r.useEffect((()=>{c&&c.scrollIntoView()}),[c]);const l=le(i);if(!c||!t&&!l.length)return null;const a=l.map((({name:e,action:t})=>r.createElement(Ll,{key:e,size:"small",onClick:()=>o(t)},e)));return r.createElement(ed,{className:"tutorial-tooltip--3gwli",anchorEl:c,placement:n,isOpen:!0},t,a&&r.createElement("div",{className:"tutorial-tooltip-actions--ENkg1"},a))},bd=()=>{const e=El(Po),t=El(No);if(!e)return null;const n=t.map((e=>r.createElement(Ed,Object.assign({key:e.selector},e)))),o=t.map((({selector:e})=>`\n    ${e} {\n      position: relative;\n      z-index: 10;\n    }\n  `)).join("\n");return(0,i.createPortal)(r.createElement("div",{className:"tutorial--jscuw"},r.createElement("div",{className:"tutorial-backdrop--3I0WR"}),r.createElement("style",null,o),n),document.body)},wd=document.getElementById("root");i.render(r.createElement(l.W,{backend:a.PD},r.createElement(c.F0,{history:u},r.createElement(s.zt,{store:vl},r.createElement((()=>r.createElement(r.Fragment,null,r.createElement(ad,null),r.createElement(vd,null),r.createElement(bd,null))),null)))),wd)},784:(e,t,n)=>{"use strict";function r(e,t,n,r,o){const s=i(e,t,n,o),c=i(e,t,n,r),l=o-r<=180?"0":"1";return["M",s.x,s.y,"A",n,n,0,l,0,c.x,c.y].join(" ")}function i(e,t,n,r){const i=(r-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}n.d(t,{x:()=>r})}},0,[[7800,1,956,874,90,80,744,845,105,699,547]]]);
//# sourceMappingURL=client.e1f2c9f6ad70d8053c61.bundle.js.map