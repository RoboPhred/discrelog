(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{2334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={"text-unselectable":"text-unselectable--2tvXe"}},7252:(e,t,n)=>{"use strict";n.d(t,{q6:()=>o,_Y:()=>i,U_:()=>s});var r=n(4586);const o="@circuit/add",i=({circuitName:e,circuitId:t,edit:n}={})=>({type:o,payload:{circuitId:null!=t?t:(0,r.Z)(),circuitName:e,edit:n}});function s(e){return e.type===o}},5984:(e,t,n)=>{"use strict";n.d(t,{JP:()=>r,Zj:()=>o,Q$:()=>i});const r="@circuit/delete",o=e=>({type:r,payload:{circuitId:e}});function i(e){return e.type===r}},1314:(e,t,n)=>{"use strict";n.d(t,{QM:()=>r,U3:()=>o,lp:()=>i});const r="@circuit/rename",o=(e,t)=>({type:r,payload:{circuitId:e,circuitName:t}});function i(e){return e.type===r}},7930:(e,t,n)=>{"use strict";n.d(t,{_A:()=>o,k5:()=>i});const r="@circuit/view",o=(e,t=null)=>({type:r,payload:{circuitId:e,circuitNodeIdPath:t}});function i(e){return e.type===r}},5621:(e,t,n)=>{"use strict";n.d(t,{Fb:()=>r,v:()=>o,Ff:()=>i});const r="@clipboard/paste",o=()=>({type:r});function i(e){return e.type===r}},5222:(e,t,n)=>{"use strict";n.d(t,{pR:()=>r,GA:()=>o,W2:()=>i});const r="@dialog/response/accept",o=e=>({type:r,payload:{result:e}});function i(e){return e.type===r}},8177:(e,t,n)=>{"use strict";n.d(t,{NQ:()=>r,ey:()=>o,Xm:()=>i});const r="@field/drag/continue",o=(e,t)=>({type:r,payload:{dragPos:e,modifierKeys:t}});function i(e){return e.type===r}},4:(e,t,n)=>{"use strict";n.d(t,{cN:()=>r,k4:()=>o,$V:()=>i});const r="@field/drag/end",o=(e,t)=>({type:r,payload:Object.assign(Object.assign({},e),{modifierKeys:t})});function i(e){return e.type===r}},713:(e,t,n)=>{"use strict";n.d(t,{R4:()=>o,Vl:()=>i});const r="@field/drag/start/joint",o=(e,t,n)=>({type:r,payload:Object.assign(Object.assign({},t),{jointId:e,modifierKeys:n})});function i(e){return e.type===r}},1883:(e,t,n)=>{"use strict";n.d(t,{gM:()=>o,xl:()=>i});const r="@field/drag/start/new-joint",o=(e,t,n,o)=>({type:r,payload:Object.assign(Object.assign({},n),{connectionId:e,addAfterJointId:t,modifierKeys:o})});function i(e){return e.type===r}},8554:(e,t,n)=>{"use strict";n.d(t,{Yf:()=>o,Q6:()=>i});const r="@field/drag/start/new-element",o=e=>({type:r,payload:{nodeType:e}});function i(e){return e.type===r}},8198:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>o,KH:()=>i});const r="@field/drag/start/node",o=(e,t,n)=>({type:r,payload:Object.assign(Object.assign({},t),{nodeId:e,modifierKeys:n})});function i(e){return e.type===r}},853:(e,t,n)=>{"use strict";n.d(t,{wZ:()=>o,dx:()=>i});const r="@field/drag/start/select",o=e=>({type:r,payload:Object.assign({},e)});function i(e){return e.type===r}},4206:(e,t,n)=>{"use strict";n.d(t,{V:()=>o,Zr:()=>i});const r="@field/drag/start/wire",o=(e,t)=>({type:r,payload:{dragStart:e,pin:t}});function i(e){return e.type===r}},1387:(e,t,n)=>{"use strict";n.d(t,{Cq:()=>r,xr:()=>o,hG:()=>i});const r="@field/mouse/leave",o=()=>({type:r});function i(e){return e.type===r}},5273:(e,t,n)=>{"use strict";n.d(t,{dd:()=>o,gz:()=>i,g0:()=>s});var r=n(4586);const o="@node/add",i=(e,t)=>({type:o,payload:Object.assign({nodeId:(0,r.Z)(),nodeType:e},t||{})});function s(e){return e.type===o}},1235:(e,t,n)=>{"use strict";n.d(t,{zN:()=>o,ke:()=>i});const r="@node/interact",o=e=>({type:r,payload:{circuitNodeIdPath:e}});function i(e){return e.type===r}},4443:(e,t,n)=>{"use strict";n.d(t,{XT:()=>r,w:()=>o,HH:()=>i});const r="@node/rename",o=(e,t)=>({type:r,payload:{nodeId:e,nodeName:t}});function i(e){return e.type===r}},4505:(e,t,n)=>{"use strict";n.d(t,{WG:()=>r,C9:()=>o});const r="@project/export-link",o=()=>({type:r})},7198:(e,t,n)=>{"use strict";n.d(t,{Yk:()=>r,vP:()=>o});const r="@project/import-link",o=e=>({type:r,payload:{data:e}})},6577:(e,t,n)=>{"use strict";n.d(t,{Wx:()=>r,Cb:()=>o});const r="@project/load",o=()=>({type:r})},38:(e,t,n)=>{"use strict";n.d(t,{Ny:()=>r,o9:()=>o,Tp:()=>i});const r="@project/new",o=()=>({type:r});function i(e){return e.type===r}},3069:(e,t,n)=>{"use strict";n.d(t,{hq:()=>r,UI:()=>o});const r="@project/save",o=()=>({type:r})},5758:(e,t,n)=>{"use strict";n.d(t,{Nz:()=>r,KX:()=>o,rA:()=>i});const r="@undo/redo",o=()=>({type:r});function i(e){return e.type===r}},7243:(e,t,n)=>{"use strict";n.d(t,{td:()=>o,ov:()=>i});const r="@select/all",o=()=>({type:r});function i(e){return e.type===r}},1578:(e,t,n)=>{"use strict";n.d(t,{MO:()=>o,CH:()=>i});const r="@select/clear",o=()=>({type:r});function i(e){return e.type===r}},4662:(e,t,n)=>{"use strict";n.d(t,{lF:()=>o,xW:()=>i});const r="@select/nodes",o=(e,t="set")=>({type:r,payload:{nodeIds:Array.isArray(e)?e:[e],mode:t}});function i(e){return e.type===r}},2571:(e,t,n)=>{"use strict";n.d(t,{a2:()=>o,p6:()=>i});const r="@select/wire-joints",o=(e,t="set")=>({type:r,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}});function i(e){return e.type===r}},4691:(e,t,n)=>{"use strict";n.d(t,{Rp:()=>o,GT:()=>i});const r="@select/wires",o=(e,t="set")=>({type:r,payload:{connectionIds:Array.isArray(e)?e:[e],mode:t}});function i(e){return e.type===r}},5409:(e,t,n)=>{"use strict";n.d(t,{R9:()=>r,Fs:()=>o,wr:()=>i});const r="@selection/align-to-grid",o=()=>({type:r});function i(e){return e.type===r}},4484:(e,t,n)=>{"use strict";n.d(t,{qn:()=>o,ww:()=>i});const r="@selection/copy",o=()=>({type:r});function i(e){return e.type===r}},2165:(e,t,n)=>{"use strict";n.d(t,{XE:()=>r,NE:()=>o,SB:()=>i});const r="@selection/delete",o=()=>({type:r});function i(e){return e.type===r}},7366:(e,t,n)=>{"use strict";n.d(t,{C2:()=>o,RC:()=>i});const r="@sim/fastforward",o=()=>({type:r});function i(e){return e.type===r}},8261:(e,t,n)=>{"use strict";n.d(t,{l2:()=>r,ri:()=>o,Ie:()=>i});const r="@sim/pause",o=e=>({type:r,payload:{mode:e}});function i(e){return e.type===r}},8910:(e,t,n)=>{"use strict";n.d(t,{pu:()=>r,Fr:()=>o,NL:()=>i});const r="@sim/start",o=()=>({type:r});function i(e){return e.type===r}},737:(e,t,n)=>{"use strict";n.d(t,{Sk:()=>o,qf:()=>i});const r="@sim/stop",o=()=>({type:r});function i(e){return e.type===r}},152:(e,t,n)=>{"use strict";n.d(t,{rZ:()=>r,jf:()=>o,FD:()=>i});const r="@sim/tick",o=e=>({type:r,payload:{tickCount:e}});function i(e){return e.type===r}},3634:(e,t,n)=>{"use strict";n.d(t,{Um:()=>r,Yw:()=>o,Qy:()=>i});const r="@undo/undo",o=()=>({type:r});function i(e){return e.type===r}},5842:(e,t,n)=>{"use strict";n.d(t,{pi:()=>o,RD:()=>i});const r="@view/node-names",o=e=>({type:r,payload:{mode:e}});function i(e){return e.type===r}},4882:(e,t,n)=>{"use strict";n.d(t,{Sh:()=>r,iM:()=>o,UO:()=>i});const r="@view/zoom",o=e=>({type:r,payload:{delta:e}});function i(e){return e.type===r}},5054:(e,t,n)=>{"use strict";function r(e){return Array.isArray(e)?e:[e]}n.d(t,{_2:()=>r,fb:()=>i,O_:()=>s});const o=Object.freeze([]);function i(){return o}function s(e,t){const n=e.slice(0,t);for(let r=t+1;r<e.length;r++)n.push(e[t]);return n}},5766:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});const r=1},2954:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:t.A&&t.B}}})}},5562:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:t.IN}}})}},2603:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},7814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:!(t.A||t.B)}}})}},50:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:!t.IN}}})}},1652:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:t.A||t.B}}})}},9684:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},9896:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const r={toggleState:!1},o={inputPins:[],outputPins:["OUT"],interact(e=r){const t=!e.toggleState;return{state:Object.assign({},e,{toggleState:t}),transitions:{tickOffset:1,valuesByPin:{OUT:t}}}},evolve:(e=r)=>({transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},5978:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5766);const o={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.v,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{tQ:()=>o,Ds:()=>i,rG:()=>s,NG:()=>c,VE:()=>a,Fv:()=>l,Ih:()=>d,bA:()=>u,Qu:()=>p,gQ:()=>y,ZO:()=>m,sj:()=>f,kg:()=>g,PL:()=>I,nF:()=>v,G0:()=>h,kK:()=>b});var r=n(7516);const o=r.Ry().shape({x:r.Rx().required(),y:r.Rx().required()}),i=Object.freeze({x:0,y:0}),s=Object.freeze({p1:i,p2:i});function c(e){return{p1:{x:e[0],y:e[1]},p2:{x:e[2],y:e[3]}}}function a(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function l(e){const t=a(e);return{x:e.x/t,y:e.y/t}}function d(e,t){return e.x*t.x+e.y*t.y}function u(e,t){return{x:e.x*t,y:e.y*t}}function p(...e){let t,n;if(1===e.length){const r=e[0];t=r.p1,n=r.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function y(e,t){return{p1:m(e.p1,t),p2:m(e.p2,t)}}function m(e,t){return{x:e.x+t.x,y:e.y+t.y}}function f(e,t){return{x:e.x-t.x,y:e.y-t.y}}function g(e,t){return e.x===t.x&&e.y===t.y}function I(e,t){return!((t=p(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function v(e){return{width:(e=p(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function h(e,t){return e=p(e),t=p(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function b(e,t){return e=p(e),t=p(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}},4875:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(7531).q_)()},7165:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9242);function o(e){return(0,r.v9)(e)}},800:(e,t,n)=>{"use strict";var r=n(7294),o=n(3935),i=(n(1033),n(9242)),s=n(5977),c=n(4875),a=n(5974),l=n(6600);const d={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"},u="fill-parent--3pw6U";var p=n(8721),y=n.n(p);function m(e){return"number"==typeof e?{firstPercent:e}:e}function f(e){return y()(e,"firstPercent")}function g(e){return y()(e,"firstSize")||y()(e,"secondSize")}var I=n(3493),v=n.n(I);function h(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),t}const b={tessel:"tessel--2Q3Xd","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C"},k=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),E=({direction:e,onChangePercentage:t})=>{const n=r.useRef(null),o=r.useRef(null),i=h(e),s=h(t),c=r.useMemo((()=>v()((e=>{var t,r;if(null==o.current||null==n.current)return;const c=null!==(r=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==r?r:k;let a=0,l=0;"row"===i.current?(l=e.pageX-c.left,a=l/c.width,isNaN(a)?(a=0,l=c.left):a>1&&(a=1,l=c.right)):(l=e.pageY-c.top,a=l/c.height,isNaN(a)?(a=0,l=c.top):a>1&&(a=1,l=c.bottom)),s.current(100*a,l)}),1e3/60,{leading:!0})),[i,s]),a=r.useCallback((e=>{e.persist(),c(e)}),[c]),d=r.useCallback((e=>{!e.defaultPrevented&&n.current&&(o.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),o.current=e.pointerId))}),[]),u=r.useCallback((()=>{n.current&&o.current&&(n.current.releasePointerCapture(o.current),o.current=null)}),[]);return r.createElement("div",{ref:n,className:(0,l.yI)("tessel-split",b["tessel-split"],b["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:d,onPointerMove:a,onPointerUp:u})};function O(e,t,n){return f(e)?{firstPercent:t}:g(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const N=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:o,first:i,second:s,division:c}=e,a="row"===o?"width":"height",p=r.useCallback(((t,r)=>{const o=m(e.division);n(Object.assign(Object.assign({},e),{division:O(o,t,r)}))}),[e,n]),y=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),I=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),v=m(c);let h="50%",b="50%",k=!1,N=!1;if(f(v)){const{firstPercent:e}=v;h=e+"%",b=100-e+"%"}else if(g(v)){const{firstSize:e,secondSize:t}=v;e?(h=e+"px",k=!0,b="100%"):(h="100%",b=t+"px",N=!0)}return r.createElement("div",{className:(0,l.yI)(u,d["row"===o?"flex-row":"flex-column"])},r.createElement("div",{className:(0,l.yI)(k?d["flexitem-fix"]:d["flexitem-shrink"]),style:{[a]:h}},r.createElement(j,{value:i,renderWindow:t,onLayoutChange:y})),r.createElement(E,{direction:o,onChangePercentage:p}),r.createElement("div",{className:(0,l.yI)(N?d["flexitem-fix"]:d["flexitem-shrink"]),style:{[a]:b}},r.createElement(j,{value:s,renderWindow:t,onLayoutChange:I})))},j=({value:e,renderWindow:t,onLayoutChange:n})=>{const o=function(e){return"string"==typeof e?{windowId:e}:e}(e);return function(e){return y()(e,"windowId")}(o)?t(o):function(e){return y()(e,"first")&&y()(e,"second")&&y()(e,"direction")}(o)?r.createElement(N,{item:o,renderWindow:t,onLayoutChange:n}):null},C=({className:e,rootItem:t,renderWindow:n,onLayoutChange:o})=>r.createElement("div",{className:(0,l.yI)("tessel",b.tessel,e)},r.createElement(j,{value:t,renderWindow:n,onLayoutChange:o}));var x=n(3274),w=n(152),P=n(7366),B=n(5621),M=n(4484),S=n(2165),Z=n(7243),R=n(3634),J=n(5758),D=n(928),T=n.n(D),L=n(7165),z=n(7930),A=n(961),U=n(5213),W=n(1089);var F=n(6222);const G=e=>r.createElement("button",Object.assign({className:"button--Ui3Hp",type:"button"},e),e.children);var _=n(9977);const H=()=>{const e=(0,i.I0)(),t=(0,L.Z)(A.se),n=(0,L.Z)((e=>(0,_.w)(e,F.u))),o=(0,L.Z)(A.WU),s=r.useCallback((t=>{t.preventDefault(),e((0,z._A)(F.u,[]))}),[e]);return r.createElement(G,{onClick:s},0===t.length?o:n)},K=({circuitNodeIdPath:e})=>{const t=(0,i.I0)(),n=T()(e),o=(0,L.Z)((e=>(0,U.og)(e,n))),s=(0,L.Z)((e=>(0,U.uk)(e,n))),c=o?(0,W.X)(o):null,a=(0,L.Z)((e=>c?(0,_.w)(e,c):null)),l=r.useCallback((n=>{n.preventDefault(),c&&t((0,z._A)(c,e))}),[c,e,t]);return r.createElement(G,{onClick:l},s," [",a,"]")},q=()=>{const e=(0,L.Z)(A.se),t=e.map(((t,n)=>{const o=e.slice(0,n+1);return r.createElement(r.Fragment,{key:t},r.createElement("span",null,">"),r.createElement(K,{circuitNodeIdPath:o}))}));return r.createElement("div",{className:(0,l.yI)("circuit-node-breadcrumb","circuit-node-breadcrumb--3Rx3N")},r.createElement(H,null),t)};var V=n(3092),X=n.n(V),Q=n(8370),Y=n(2222),$=n(2628),ee=n.n($),te=n(4150),ne=n(5393);const re=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),oe=(0,Y.createSelector)(te.g,ne.v5,((e,t)=>[...ee()(e),...ee()(t).map((e=>({p1:e,p2:e})))].reduce(Q.G0,re))),ie=(0,n(9990).u)((e=>e.viewScale));var se=n(1387),ce=n(4882);const ae=r.createContext((function(){}));function le(){return r.useContext(ae)}const de=ae.Provider;var ue=n(1935),pe=n(5054);function ye(){}const me={registerPopoverChild:ye,unregisterPopoverChild:ye},fe=r.createContext(null),ge=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const o=r.useContext(fe),i=null==o?void 0:o.registerPopoverChild,s=null==o?void 0:o.unregisterPopoverChild,c=r.useCallback((t=>{i&&i(t),e(t)}),[e,i]),a=r.useCallback((e=>{t(e)}),[t,s]),l=r.useMemo((()=>({registerPopoverChild:c,unregisterPopoverChild:a})),[c,a]);return r.createElement(fe.Provider,{value:l},n)};var Ie=n(1966),ve=n.n(Ie);const he=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:i,children:s})=>{const[c,a]=r.useState(null),{attributes:d,styles:u}=(0,ue.D)(e?t:null,c,{placement:n});!function(e){var t;const n=null!==(t=r.useContext(fe))&&void 0!==t?t:me,o=r.useRef(n);r.useEffect((()=>{o.current=n})),r.useEffect((()=>{if(e)return o.current.registerPopoverChild(e),()=>o.current.unregisterPopoverChild(e)}),[e])}(c);const[p,y,m]=function(e=[]){const[t,n]=r.useState(e),o=r.useCallback((e=>{n([...t,e])}),[t]),i=r.useCallback((e=>{n(ve()(t,[e]))}),[t]);return[t,o,i,n]}();return function(e,t,n=!0){const o=r.useCallback((n=>{const r=(0,pe._2)(e).filter(l.fQ);r.length&&r.every((e=>!e.contains(n.target)))&&t()}),[e,t]);r.useEffect((()=>{if(n)return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}}),[o,n])}(r.useMemo((()=>[c,...p]),[p,c]),i),e?(0,o.createPortal)(r.createElement(ge,{registerPopoverChild:y,unregisterPopoverChild:m},r.createElement("div",Object.assign({ref:a,style:u.popper},d.popper),s)),document.body):null},be=({x:e,y:t,open:n,onRequestClose:o,children:i})=>{const s=r.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return r.createElement(de,{value:o},r.createElement(he,{isOpen:n,onRequestClose:o,anchorEl:s,placement:"bottom-start"},i))};function ke(){const[e,t]=r.useState(null),n=r.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),o=r.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:r.useCallback((t=>e?r.createElement(be,{open:!0,onRequestClose:o,x:e.x,y:e.y},t):null),[e,o])}}const Ee={current:null},Oe=r.createContext({svgRef:Ee,scalerRef:Ee}),Ne=Oe.Provider,je=({svgRef:e,scalerRef:t,children:n})=>{const o=r.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return r.createElement(Ne,{value:o},n)};var Ce=n(2550),xe=n(6773),we=n(8177);function Pe(){const{svgRef:e,scalerRef:t}=r.useContext(Oe);return r.useCallback((n=>{if(!e.current||!t.current)return Q.Ds;const r={x:n.pageX,y:n.pageY};return function(e,t,n){const r=t.getScreenCTM();if(!r)return n;const o=e.createSVGPoint();o.x=n.x,o.y=n.y;const i=o.matrixTransform(r.inverse());return{x:i.x,y:i.y}}(e.current,t.current,r)}),[e,t])}var Be=n(3304);const Me=Object.freeze({}),Se=r.memo((function({className:e,circuitNodeId:t,x:n=0,y:o=0,nodeType:i}){const s=(0,L.Z)((e=>(0,Be.yP)(e,i)));let c;if(s){const{component:e}=s.visual;c=r.createElement(e,{circuitNodeId:t,elementState:Me})}else c=r.createElement("rect",{x:n,y:o,width:50,height:50,fill:"red"});const a=0!=n||0!=o?`translate(${n}, ${o})`:void 0;return r.createElement("g",{className:(0,l.yI)(e,"node-visual"),transform:a},c)})),Ze=r.memo((function(){const e=(0,i.I0)(),t=Pe(),n=(0,L.Z)(xe.y_),o=(0,L.Z)(xe.Ll),s=(0,L.Z)(xe.Ny),c=r.useCallback((n=>{const r=t(n),o=(0,Ce.h)(n);e((0,we.ey)(r,o))}),[t,e]);return n&&s?r.createElement(r.Fragment,null,o&&r.createElement("g",{opacity:.5},r.createElement(Se,{x:o.x,y:o.y,nodeType:s})),r.createElement("rect",{width:"100%",height:"100%",fill:"transparent",onMouseMove:c})):null}));var Re=n(8718),Je=n.n(Re),De=n(6604),Te=n.n(De),Le=n(1486),ze=n(7836);const Ae=(0,Y.createSelector)(ze.d4,Le.T,((e,t)=>Je()(t,e))),Ue=(0,Y.createSelector)(ze.d4,U.KO,((e,t)=>Je()(t,e))),We=r.memo((function(){const e=(0,L.Z)(Ae),t=(0,L.Z)(Ue),n=(0,L.Z)(xe.KQ);let o=null;return n&&(o=ee()(Te()(e,((e,o)=>r.createElement(Se,{key:o,nodeType:t[o],x:e.x+n.x,y:e.y+n.y}))))),r.createElement("g",{id:"drag-node-preview-layer",opacity:.3},o)}));const Fe=e=>{var{x:t,y:n,interactable:o=!0,selected:i=!1}=e,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["x","y","interactable","selected"]);const[c,a]=r.useState(!1),d=r.useCallback((()=>{o&&a(!0)}),[o]),u=r.useCallback((()=>{a(!1)}),[]);return r.createElement("circle",Object.assign({className:(0,l.yI)("wire-joint--DrAWT",i&&"selected--1I6Un"),cx:t,cy:n,r:o&&c||i?4:2,onMouseOver:d,onMouseOut:u},s))},Ge=(0,Y.createSelector)(ze.O5,ne.v5,((e,t)=>Je()(t,e))),_e=r.memo((function(){const e=(0,L.Z)(xe.KQ),t=(0,L.Z)(Ge),n=(0,L.Z)(xe.pc);let o=null;e&&(o=ee()(t).map(((t,n)=>r.createElement(Fe,{key:n,interactable:!1,x:t.x+e.x,y:t.y+e.y,opacity:.5}))));let i=null;return n&&(i=r.createElement(Fe,{interactable:!1,x:n.x,y:n.y,opacity:.5})),r.createElement("g",{id:"drag-joint-preview-layer",opacity:.3},o,i)}));function He(e){const{dragThreshold:t=5,onClick:n,onDragStart:o,onDragMove:i,onDragEnd:s}=e,[c,a]=r.useState(!1),l=r.useRef(!1),d=r.useRef(!1),u=r.useRef(Q.Ds),p=r.useCallback((e=>{l.current||(l.current=!0,a(!0),u.current={x:e.pageX,y:e.pageY})}),[]),y=r.useCallback((()=>{l.current=!1,a(!1),d.current=!1,u.current=Q.Ds}),[]),m=r.useCallback((e=>{if(l.current)if(d.current){if(i){const t=(0,Q.sj)({x:e.pageX,y:e.pageY},u.current);i(t,e)}}else{const n=u.current;(Math.abs(n.x-e.pageX)>=t||Math.abs(n.y-e.pageY)>=t)&&(d.current=!0,o&&o(e))}}),[t,i,o]),f=r.useCallback((e=>{if(l.current){if(d.current){if(s){const t=(0,Q.sj)({x:e.pageX,y:e.pageY},u.current);s(t,e)}}else n&&n(e);y()}}),[y,n,s]);return r.useEffect((()=>{if(c)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)}}),[c,m,f]),{startTracking:p,cancelTracking:y}}var Ke=n(1578),qe=n(853),Ve=n(4);const Xe=r.memo((function(){const e=(0,i.I0)(),t=(0,i.v9)(xe.xn),n=(0,i.v9)(ie);function o(e){return e*(1/n)}const s=Pe(),c=r.useCallback((t=>{if(0!==t.button)return;const n=(0,Ce.h)(t);n.ctrlMetaKey||n.shiftKey||e((0,Ke.MO)())}),[e]),a=r.useCallback((t=>{const n=s(t);e((0,qe.wZ)(n))}),[e,s]),l=r.useCallback(((t,n)=>{const r=s(n),o=(0,Ce.h)(n);e((0,we.ey)(r,o))}),[e,s]),d=r.useCallback(((t,n)=>{const r=s(n),o=(0,Ce.h)(n);e((0,Ve.k4)(r,o))}),[e,s]),{startTracking:u}=He({onClick:c,onDragStart:a,onDragMove:l,onDragEnd:d}),p=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),u(e))}),[u]);return r.createElement("g",{id:"drag-select-layer"},r.createElement("rect",{width:100*o(1)+"%",height:100*o(1)+"%",fill:"transparent",onMouseDown:p}),t&&r.createElement("g",{transform:`translate(${t.p1.x}, ${t.p1.y})`},r.createElement("rect",{width:t.p2.x-t.p1.x,height:t.p2.y-t.p1.y,strokeWidth:o(2),strokeDasharray:`${o(5)} ${o(3)}`,stroke:"skyblue",fill:"transparent"})))})),Qe=r.memo((function(){const e=50*(0,L.Z)(ie);return r.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("pattern",{id:"grid",width:e,height:e,patternUnits:"userSpaceOnUse"},r.createElement("path",{d:`M ${e} 0 L 0 0 0 ${e}`,fill:"none",stroke:"gray",strokeWidth:.5}))),r.createElement("rect",{width:"100%",height:"100%",fill:"url(#grid)"}))}));var Ye=n(5878),$e=n(3871),et=n(2334),tt=n(1755);const nt=Object.freeze({});var rt=n(2619),ot=n(4368);const it=(0,n(6147).h)((e=>e.nodeNameMode));var st=n(8198),ct=n(4662),at=n(4443);const lt="menu-item--2dcyN",dt="menu-item--disabled--RJJTK",ut="menu-item-content--3s1DG",pt="menu-item-text--1F41V",yt="menu-item-secondary--2PJLF",mt=({children:e})=>r.createElement("ul",{className:"menu--3E86w"},e),ft=()=>r.createElement("div",{className:"menu-divider--1QPGp"}),gt=r.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:o,onChange:i,onBeginEdit:s,onCommit:c,onCancel:a,onBlur:l,onKeyUp:d},u)=>{const[p,y]=r.useState(null),m=r.useCallback((e=>{null==p&&s&&s(),y(e.target.value),i&&i(e)}),[p,s,i]),f=r.useCallback((e=>{d&&d(e),e.defaultPrevented||null!=p&&("Escape"===e.key?(e.preventDefault(),a&&a()):"Enter"===e.key&&(e.preventDefault(),c&&c(p)))}),[d,p,a,c]),g=r.useCallback((e=>{l&&l(e),null!=p&&c&&c(p)}),[l,p,c]);return r.createElement("input",{ref:u,className:e,autoFocus:t,defaultValue:n,value:o,type:"text",onChange:m,onKeyUp:f,onBlur:g})})),It=({className:e,textClassname:t,inputClassname:n,label:o,defaultValue:i,isEditing:s,onRequestEdit:c,onCommit:a,onCancel:d})=>{const u=r.useRef(null),p=r.useCallback((e=>{c&&(e.defaultPrevented||(e.preventDefault(),c()))}),[c]),y=r.useCallback((e=>{"Escape"===e.key&&s&&d()}),[s,d]),m=r.useCallback((()=>{s&&d()}),[s,d]);return r.useEffect((()=>{s&&u.current&&u.current.select()}),[s]),s?r.createElement(gt,{ref:u,className:(0,l.yI)(e,n),autoFocus:!0,defaultValue:i,onBlur:m,onKeyUp:y,onCommit:a,onCancel:d}):r.createElement("span",{className:(0,l.yI)(e,t),onDoubleClick:p},null!=o?o:i)},vt=e=>{const{onRequestEdit:t,onCommit:n}=e,o=le(),i=r.useCallback((()=>{t&&t()}),[t]),s=r.useCallback((e=>{n(e),o()}),[n,o]);return r.createElement("li",{className:lt,onClick:i},r.createElement(It,Object.assign({},e,{onCommit:s})))},ht=({disabled:e,onClick:t,secondary:n,children:o})=>{const i=le(),s=r.useCallback((e=>{t&&t(e),i()}),[i,t]);return r.createElement("li",{className:(0,l.yI)(lt,e&&dt)},r.createElement("a",{className:ut,onClick:s},r.createElement("span",{className:pt},o),n&&r.createElement("span",{className:yt},n)))};var bt=n(5409);const kt=()=>{const e=(0,i.I0)(),t=r.useCallback((()=>{e((0,bt.Fs)())}),[e]),n=r.useCallback((()=>{e((0,S.NE)())}),[e]);return r.createElement(r.Fragment,null,r.createElement(ht,{onClick:t},"Align Selection To Grid"),r.createElement(ft,null),r.createElement(ht,{onClick:n},"Delete Selected"))},Et=({nodeId:e})=>{const t=(0,i.I0)(),n=(0,L.Z)((t=>(0,U.uk)(t,e))),[o,s]=r.useState(!1),c=r.useCallback((()=>{s(!0)}),[]),a=r.useCallback((()=>{s(!1)}),[]),l=r.useCallback((n=>{s(!1),t((0,at.w)(e,n))}),[t,e]);return r.createElement(mt,null,r.createElement(vt,{defaultValue:null!=n?n:"<unknown>",label:r.createElement("span",{style:{fontWeight:"bold"}},n),isEditing:o,onRequestEdit:c,onCommit:l,onCancel:a}),r.createElement(ft,null),r.createElement(kt,null))},Ot=r.memo((function({nodeId:e}){const t=(0,i.I0)(),n=(0,L.Z)(rt.D7),o=(0,L.Z)(A.se),{openContextMenu:s,renderContextMenu:c}=ke(),a=(0,L.Z)((t=>(0,ot.m)(t,e))),{x:d,y:u}=(0,L.Z)((t=>(0,Le.e)(t,e))),p=(0,L.Z)((t=>((e,t)=>{const n=e.services.simulatorGraph.simulatorNodeIdsByCircuitNodeId,r=e.services.simulator.nodeStatesByNodeId,o=(0,tt.F9)(n,t);return o?r[o]:nt})(t,[...o,e]))),y=(0,L.Z)((t=>(0,ze.CP)(t,e))),m=Pe(),f=r.useCallback((r=>{if(n)return;if(r.defaultPrevented)return;if(0!==r.button)return;r.preventDefault();const o=(0,Ce.h)(r),i=(0,$e.t)(o);t((0,ct.lF)(e,i))}),[t,n,e]),g=r.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const r=(0,Ce.h)(n),o=(0,$e.t)(r,"set-if-unselected");t((0,ct.lF)(e,o)),s(n)}),[t,e,s]),I=r.useCallback((n=>{const r=m(n),o=(0,Ce.h)(n);t((0,st.hZ)(e,r,o))}),[m,t,e]),v=r.useCallback(((e,n)=>{const r=m(n),o=(0,Ce.h)(n);t((0,we.ey)(r,o))}),[t,m]),h=r.useCallback(((e,n)=>{const r=m(n),o=(0,Ce.h)(n);t((0,Ve.k4)(r,o))}),[t,m]),{startTracking:b}=He({onClick:f,onDragStart:I,onDragMove:v,onDragEnd:h}),k=r.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),b(e)))}),[b]);if(!a)return null;let E,O;if(a){const{component:t,hitRect:n}=a.visual;E=r.createElement(t,{circuitNodeId:e,elementState:p}),O=n}else E=r.createElement("rect",{x:d,y:u,width:50,height:50,fill:y?"goldenrod":"red"}),O={p1:Q.Ds,p2:{x:50,y:50}};const N=0!=d||0!=u?`translate(${d}, ${u})`:void 0;return r.createElement("g",{transform:N},r.createElement("g",{className:(0,l.yI)("circuit-field-node",y&&"node-selected"),onMouseDown:k,onContextMenu:g},E),r.createElement(Nt,{nodeId:e,hitRect:O}),c(r.createElement(Et,{nodeId:e})))})),Nt=r.memo((function({nodeId:e,hitRect:t}){const n=(0,L.Z)(ie),o=(0,L.Z)((t=>((e,t)=>{switch(e.services.circuitEditorUiSettings.nodeNameMode){case"all":default:return(0,U.uk)(e,t);case"named-only":return(0,U.p2)(e,t);case"none":return null}})(t,e))),i=Math.max(.7,n);let s=15;return i>1?s-=2*i:s+=1/i*7,o?r.createElement("text",{fontSize:1.2/i+"em",className:et.Z["text-unselectable"],textAnchor:"middle",x:t.p1.x+(t.p2.x-t.p1.x)/2,y:t.p2.y+s},o):null})),jt=Ot,Ct=r.memo((function(){const e=(0,L.Z)(Ye.f).map((e=>r.createElement(jt,{key:e,nodeId:e})));return r.createElement("g",{id:"nodes-layer"},e)}));var xt=n(5879);const wt=n.n(xt)()(((e,t,n)=>e.services.nodeGraph.connectionsById[n]),((e,t)=>t),(e=>e.services.simulatorGraph.simulatorNodeIdsByCircuitNodeId),(e=>e.services.simulator.nodeOutputValuesByNodeId),((e,t,n,r)=>{var o;if(!e)return!1;const{outputPin:{nodeId:i,pinId:s}}=e,c=(0,tt.F9)(n,[...t,i]);return c&&(null===(o=r[c])||void 0===o?void 0:o[s])||!1}))(((e,t,n)=>t.join(".")+"::"+n));var Pt=n(1883),Bt=n(4691);const Mt=r.memo((function({connectionId:e,startJointId:t,endJointId:n}){const o=(0,i.I0)(),s=Pe(),c=(0,L.Z)((n=>null==t?(0,ne.qX)(n,e):(0,ne.oW)(n,t))),a=(0,L.Z)((t=>null==n?(0,ne.wR)(t,e):(0,ne.oW)(t,n))),[l,d]=r.useState(null),u=r.useCallback((e=>{const t=s(e);d(t)}),[s]),p=r.useCallback((()=>{d(null)}),[]),y=r.useCallback((n=>{const r=s(n),i=(0,Ce.h)(n);o((0,Pt.gM)(e,t,r,i))}),[s,o,e,t]),m=r.useCallback(((e,t)=>{const n=s(t),r=(0,Ce.h)(t);o((0,we.ey)(n,r))}),[o,s]),f=r.useCallback((e=>{const t=s(e),n=(0,Ce.h)(e);o((0,Ve.k4)(t,n))}),[o,s]),g=r.useCallback((t=>{const n=(0,Ce.h)(t),r=(0,$e.t)(n);o((0,Bt.Rp)(e,r))}),[e,o]),{startTracking:I}=He({onClick:g,onDragStart:y,onDragMove:m,onDragEnd:f}),v=r.useCallback((e=>{e.preventDefault(),I(e)}),[I]);let h;if(l){const e=(0,Q.Fv)((0,Q.sj)(a,c)),t=(0,Q.sj)(l,c),n=(0,Q.Ih)(t,e);h=(0,Q.ZO)(c,(0,Q.bA)(e,n))}return r.createElement("g",{onMouseMove:u,onMouseLeave:p},r.createElement("line",{x1:c.x,y1:c.y,x2:a.x,y2:a.y,strokeWidth:2}),h&&r.createElement("circle",{cx:h.x,cy:h.y,r:3,stroke:"none",fill:"red",onMouseDown:v}))}));var St=n(2571),Zt=n(713);const Rt=r.memo((function({jointId:e}){const t=Pe(),n=(0,i.I0)(),o=(0,L.Z)((t=>(0,ze.g7)(t,e))),s=(0,L.Z)((t=>(0,ne.oW)(t,e))),c=r.useCallback((r=>{const o=t(r),i=(0,Ce.h)(r);n((0,Zt.R4)(e,o,i))}),[n,t,e]),a=r.useCallback(((e,r)=>{const o=t(r),i=(0,Ce.h)(r);n((0,we.ey)(o,i))}),[n,t]),l=r.useCallback(((e,r)=>{const o=t(r),i=(0,Ce.h)(r);n((0,Ve.k4)(o,i))}),[n,t]),d=r.useCallback((t=>{const r=(0,Ce.h)(t),o=(0,$e.t)(r);n((0,St.a2)(e,o))}),[n,e]),{startTracking:u}=He({onClick:d,onDragStart:c,onDragMove:a,onDragEnd:l}),p=r.useCallback((e=>{e.preventDefault(),u(e)}),[u]);return r.createElement(Fe,{selected:o,x:s.x,y:s.y,onMouseDown:p})})),Jt=r.memo((function({connectionId:e}){const t=(0,L.Z)(A.se),n=(0,L.Z)((t=>(0,ne.qq)(t,e))),o=(0,L.Z)((n=>wt(n,t,e))),i=(0,L.Z)((t=>(0,ze.nG)(t,e))),s=[...n,null].map(((t,o)=>{const i=o>0?n[o-1]:null;return r.createElement(Mt,{key:o,connectionId:e,startJointId:i,endJointId:t})})),c=n.map((e=>r.createElement(Rt,{key:e,jointId:e})));return r.createElement("g",{className:(0,l.yI)("wire--3TtqK",o&&"powered--3lHhu",i&&"selected--3qbV0")},s,c)})),Dt=r.memo((function(){const e=(0,L.Z)(Ye.G).map((e=>r.createElement(Jt,{key:e,connectionId:e})));return r.createElement("g",{id:"wires-layer"},e)}));var Tt=n(9203),Lt=n(3065),zt=n(4206);const At="is-drag-target--1_8nq";function Ut(e,t,n,r,o){const i=Wt(e,t,n,o),s=Wt(e,t,n,r),c=o-r<=180?"0":"1";return["M",i.x,i.y,"A",n,n,0,c,0,s.x,s.y].join(" ")}function Wt(e,t,n,r){const o=(r-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}}const Ft=r.memo((function({nodeId:e,pinId:t}){const n=Pe(),o=(0,i.I0)(),s=(0,L.Z)((n=>(0,Tt.G)(n,e,t))),c=(0,L.Z)((n=>(0,Lt.k_)(n,e,t))),a=(0,L.Z)(xe.qO),d=r.useCallback((r=>{const i=n(r);o((0,zt.V)(i,{nodeId:e,pinId:t}))}),[o,n,e,t]),u=r.useCallback(((e,t)=>{const r=n(t),i=(0,Ce.h)(t);o((0,we.ey)(r,i))}),[o,n]),p=r.useCallback(((e,t)=>{const r=n(t),i=(0,Ce.h)(t);o((0,Ve.k4)(r,i))}),[o,n]),{startTracking:y}=He({onDragStart:d,onDragMove:u,onDragEnd:p}),m=r.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),y(e)))}),[y]);if(!s)return null;const f=null!=a&&a.nodeId===e&&a.pinId===t,{x:g,y:I}=s;let v;return v="input"===c?r.createElement("path",{d:Ut(g,I,3,-45,225),className:(0,l.yI)("node-pin-input--2bnnb",f&&At)}):r.createElement("circle",{className:(0,l.yI)("node-pin-output--Okd03",f&&At),cx:g,cy:I,r:3}),r.createElement("g",null,v,r.createElement("circle",{stroke:"none",fill:"transparent",cx:g,cy:I,r:3,onMouseDown:m}))})),Gt=r.memo((function({nodeId:e}){var t;const n=(0,L.Z)((t=>(0,ot.m)(t,e))),o=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},i=Object.keys(o).map((t=>r.createElement(Ft,{key:t,nodeId:e,pinId:t})));return r.createElement(r.Fragment,null,i)})),_t=r.memo((function(){const e=(0,L.Z)(Ye.f).map((e=>r.createElement(Gt,{key:e,nodeId:e})));return r.createElement("g",{id:"node-pins-layer"},e)})),Ht=r.memo((function(){const e=(0,L.Z)(xe.rC),t=(0,L.Z)(xe.zL),n=(0,L.Z)(xe.Ll);return"wire"==e&&t&&n?r.createElement("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"black",strokeWidth:1}):null})),Kt=()=>r.createElement(mt,null,r.createElement(kt,null)),qt=({className:e})=>{const t=(0,i.I0)(),n=r.useRef(null),o=r.useRef(null),s=r.useRef(null),{openContextMenu:c,renderContextMenu:a}=ke(),{width:d,height:u}=X()(n),p=(0,L.Z)(oe),{width:y,height:m}=(0,Q.nF)(p),f=(0,L.Z)(ie),g=Math.max(d,y*f),I=Math.max(u,m*f),v=r.useCallback((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),[]),h=r.useCallback((()=>{t((0,se.xr)())}),[t]),b=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),c(e))}),[c]),k=r.useCallback((e=>{e.defaultPrevented||e.ctrlKey&&(t((0,ce.iM)(e.deltaY>0?-1:1)),e.preventDefault(),e.stopPropagation())}),[t]);var E,O,N,j;return E=n,O="wheel",N=k,j={passive:!1},r.useEffect((()=>{if(!E.current)return;const e=E.current;return e.addEventListener(O,N,j),()=>{e.removeEventListener(O,N,j)}}),[O,N,E,j]),r.createElement("div",{className:(0,l.yI)("circuit-field","circuit-field--3PQBN",e)},r.createElement("div",{className:"circuit-field-scrollarea--vyu82"},r.createElement("div",{ref:n,style:{width:"100%",height:"100%"}},r.createElement("svg",{tabIndex:-1,ref:o,width:g,height:I,onMouseDown:v,onMouseLeave:h,onContextMenu:b},r.createElement(Qe,null),r.createElement("g",{ref:s,"transform-origin":"0 0",transform:`scale(${f})`},r.createElement(je,{svgRef:o,scalerRef:s},r.createElement(Xe,null),r.createElement(Ct,null),r.createElement(Dt,null),r.createElement(_t,null),r.createElement(Ht,null),r.createElement(We,null),r.createElement(_e,null),r.createElement(Ze,null)))))),a(r.createElement(Kt,null)))};var Vt=n(5667);const Xt="keymap:CircuitEditor/SimStep",Qt="keymap:CircuitEditor/SimFastForward",Yt="keymap:CircuitEditor/SelectAll",$t="keymap:CircuitEditor/Copy",en="keymap:CircuitEditor/Paste",tn="keymap:CircuitEditor/Delete",nn="keymap:CircuitEditor/Undo",rn="keymap:CircuitEditor/Redo",on={[Xt]:"space",[Qt]:"shift+space",[Yt]:Vt.t+"+a",[$t]:Vt.t+"+c",[en]:Vt.t+"+v",[tn]:["backspace","del"],[nn]:Vt.t+"+z",[rn]:[Vt.t+"+y",Vt.t+"+shift+z"]};const sn=e=>{var{children:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["children"]);return r.createElement("div",Object.assign({},n,{className:u}),t)};var cn=n(5984),an=n(7252),ln=n(1314);const dn=({value:e,label:t,isSelected:n,onItemSelected:o})=>{const i=r.useCallback((t=>{t.defaultPrevented||(t.preventDefault(),o(e))}),[o,e]);return r.createElement("li",{className:(0,l.yI)("selection-list-item","selection-list-item--errDr",n&&"selection-list-item--selected--3MkqB"),onClick:i},r.createElement("div",{className:(0,l.yI)("selection-list-item-content--321YU",et.Z["text-unselectable"])},t))},un=({className:e,items:t,onItemSelected:n})=>r.createElement("ul",{className:(0,l.yI)("selection-list","selection-list--3yujH",e)},t.map((e=>r.createElement(dn,Object.assign({key:e.value},e,{onItemSelected:n}))))),pn=({circuitId:e})=>{const t=(0,i.I0)(),n=(0,L.Z)((t=>(0,_.w)(t,e))),[o,s]=r.useState(!1),{openContextMenu:c,renderContextMenu:a}=ke(),l=r.useCallback((()=>{e!==F.u&&s(!0)}),[e]),d=r.useCallback((()=>{s(!1)}),[]),u=r.useCallback((n=>{t((0,ln.U3)(e,n)),s(!1)}),[e,t]),p=r.useCallback((n=>{n.preventDefault(),t((0,cn.Zj)(e))}),[t,e]),y=r.useCallback((t=>{e!==F.u&&(t.preventDefault(),t.stopPropagation(),c(t))}),[e,c]);return r.createElement("div",{style:{width:"100%"},onContextMenu:y,onDoubleClick:l},r.createElement(It,{defaultValue:n,isEditing:o,onRequestEdit:l,onCommit:u,onCancel:d}),a(r.createElement(mt,null,r.createElement(ht,{onClick:l},"Rename Circuit"),r.createElement(ft,null),r.createElement(ht,{onClick:p},"Delete Circuit"))))},yn=()=>{const e=(0,i.I0)(),t=r.useCallback((()=>{e((0,an._Y)())}),[e]);return r.createElement(mt,null,r.createElement(ht,{onClick:t},"New Circuit"))},mn=({className:e})=>{const t=(0,i.I0)(),n=(0,L.Z)(A.Gl),o=(0,L.Z)(_.nR),{openContextMenu:s,renderContextMenu:c}=ke(),a=r.useCallback((e=>{t((0,z._A)(e))}),[t]),d=r.useCallback((e=>{e.preventDefault(),s(e)}),[s]),p=r.useMemo((()=>Object.keys(o).map((e=>({value:e,label:r.createElement(pn,{circuitId:e}),isSelected:e===n})))),[o,n]);return r.createElement("div",{className:(0,l.yI)("circuitstree--1eZ0Q",e),onContextMenu:d},r.createElement(un,{className:u,items:p,onItemSelected:a}),c(r.createElement(yn,null)))};var fn=n(4908),gn=n.n(fn),In=n(5273),vn=n(8554);const hn=({category:e})=>{const t=(0,L.Z)(Be.NJ),n=(0,L.Z)(A.Gl);let o=t.filter((t=>t.category===e));if("ic"===e){const e=(0,W.u)(n);o=o.filter((t=>t.type!==e))}const i=o.filter((t=>t.category===e)).map((e=>r.createElement(bn,{key:e.type,nodeType:e.type})));return r.createElement(r.Fragment,null,r.createElement("li",{className:"node-tray-category---Phmh"},e),i)},bn=({nodeType:e})=>{const t=(0,i.I0)(),n=r.useCallback((n=>{n.defaultPrevented||(n.preventDefault(),t((0,In.gz)(e)))}),[t,e]),o=r.useCallback((()=>{t((0,vn.Yf)(e))}),[t,e]),s=r.useCallback((()=>{t((0,Ve.k4)({x:-1,y:-1},Ce.J))}),[t]),{startTracking:c}=He({onClick:n,onDragStart:o,onDragEnd:s}),a=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),c(e))}),[c]),l=(0,L.Z)((t=>(0,Be.yP)(t,e)));let d,u=e,p="0 0 50 50";if(l){const{trayComponent:e,component:t,hitRect:n}=l.visual;if(e){const t=e;d=r.createElement(t,null)}else d=r.createElement(kn,{component:t}),p=`${n.p1.x} ${n.p1.y} ${n.p2.x} ${n.p2.y}`;u=l.displayName}else d=r.createElement(En,null);return r.createElement("li",{className:"node-tray-item--2_AyH",onMouseDown:a},r.createElement("span",{className:"node-tray-item-preview--2QFhF"},r.createElement("svg",{width:30,height:30,viewBox:p},d)),r.createElement("span",{className:et.Z["text-unselectable"]},u))},kn=({component:e})=>{const t=e;return r.createElement(t,{elementState:{}})},En=()=>r.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50}),On={"node-tray":({className:e})=>{const t=(0,L.Z)(Be.NJ),n=gn()(t.map((e=>e.category)));return r.createElement("div",{className:(0,l.yI)("node-tray--1uIvj",e)},r.createElement("ul",{className:"node-tray-elements--KiJGM"},n.map((e=>r.createElement(hn,{key:e,category:e})))))},"circuit-field":({className:e})=>{const t=(0,i.I0)(),n=r.useMemo((()=>{function e(e){return n=>{if(n){if(n.defaultPrevented)return;n.preventDefault()}t(e)}}return{[Xt]:e((0,w.jf)(1)),[Qt]:e((0,P.C2)()),[Yt]:e((0,Z.td)()),[$t]:e((0,M.qn)()),[en]:e((0,B.v)()),[tn]:e((0,S.NE)()),[nn]:e((0,R.Yw)()),[rn]:e((0,J.KX)())}}),[t]);return r.createElement(x.HotKeys,{keyMap:on,handlers:n,component:sn},r.createElement("div",{className:(0,l.yI)("circuit-field-view",u,d["flex-column"],e)},r.createElement(q,null),r.createElement(qt,{className:(0,l.yI)(u,d["flexitem-shrink"])})))},"circuits-list":mn};function Nn(e){const t=On[e.windowId];return t?r.createElement(t,Object.assign({},e.windowProps)):null}const jn=()=>{const[e,t]=r.useState({direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"node-tray"},second:"circuit-field"});return r.createElement(C,{className:(0,l.yI)("circuit-editor",u),rootItem:e,onLayoutChange:t,renderWindow:Nn})};var Cn=n(7198);const xn=({location:e})=>{const t=(0,i.I0)(),[n,o]=r.useState(!1);return r.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void o(!0)}const r=n.get("data");r?t((0,Cn.vP)(r)):o(!0)}),[]),n?r.createElement("div",null,"Failed to import project"):r.createElement("div",null,"Importing Project...")},wn=()=>r.createElement(s.rs,null,r.createElement(s.AW,{exact:!0,path:"/",component:jn}),r.createElement(s.AW,{exact:!0,path:"/import",component:xn}));var Pn=n(8473);const Bn=({content:e,placement:t,children:n})=>{const o=r.useRef(null),[i,s]=r.useState(!1),c=r.useCallback((()=>{s(!0)}),[]),a=r.useCallback((()=>{s(!1)}),[]);return r.createElement(de,{value:a},r.createElement("div",{ref:o,onClick:c},n),r.createElement(he,{anchorEl:o.current,isOpen:i,placement:t,onRequestClose:a},i&&e))};function Mn(e,...t){const n=(0,i.I0)();return r.useCallback(((...r)=>{const o=e(...t,...r);o&&n(o)}),[n,e,...t])}var Sn=n(38),Zn=n(3069),Rn=n(6577),Jn=n(4505);const Dn=()=>{const e=Mn(Sn.o9),t=Mn(Zn.UI),n=Mn(Rn.Cb),o=Mn(Jn.C9);return r.createElement(mt,null,r.createElement(ht,{onClick:e},"New"),r.createElement(ft,null),r.createElement(ht,{onClick:n},"Load"),r.createElement(ht,{onClick:t},"Save"),r.createElement(ft,null),r.createElement(ht,{onClick:o},"Export Link"))},Tn=e=>e.undo.undoStack.length>0,Ln=e=>e.undo.redoStack.length>0,zn=()=>{const e=(0,L.Z)(Tn),t=Mn(R.Yw),n=(0,L.Z)(Ln),o=Mn(J.KX);return r.createElement(mt,null,r.createElement(ht,{disabled:!e,secondary:Vt.t+"+z",onClick:t},"Undo"),r.createElement(ht,{disabled:!n,secondary:Vt.t+"+shift+z",onClick:o},"Redo"))};var An=n(5842);const Un=({className:e,value:t,onChange:n,children:o})=>r.createElement("label",{className:e},r.createElement("span",{className:"checkbox-span--1EWGs"},r.createElement("input",{type:"checkbox",checked:t,onChange:n})),o),Wn=({disabled:e,secondary:t,value:n,onChange:o,children:i})=>r.createElement("li",{className:(0,l.yI)(lt,e&&dt)},r.createElement(Un,{className:ut,value:n,onChange:o},r.createElement("span",{className:pt},i),t&&r.createElement("span",{className:yt},t))),Fn=({disabled:e,secondary:t,content:n,children:o})=>r.createElement("li",{className:(0,l.yI)(lt,e&&dt)},r.createElement(Bn,{placement:"right-start",content:n},r.createElement("a",{className:ut},r.createElement("span",{className:pt},o),t&&r.createElement("span",{className:yt},t),r.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},r.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),Gn=()=>{const e=(0,L.Z)(it),t=Mn(An.pi,"all"),n=Mn(An.pi,"named-only"),o=Mn(An.pi,"none");return r.createElement(mt,null,r.createElement(Wn,{value:"all"===e,onChange:t},"Always visible"),r.createElement(Wn,{value:"named-only"===e,onChange:n},"Named Items Only"),r.createElement(Wn,{value:"none"===e,onChange:o},"Hidden"))},_n=()=>r.createElement(mt,null,r.createElement(Fn,{content:r.createElement(Gn,null)},"Element Names"));var Hn=n(8910),Kn=n(737),qn=n(8261);const Vn=(0,n(6036).g)((e=>e.lastTickProcessingTimeMs)),Xn=e=>r.createElement("svg",Object.assign({width:16,height:16},e),r.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),Qn=e=>r.createElement("svg",Object.assign({width:16,height:16},e),r.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),Yn=e=>r.createElement("svg",Object.assign({width:16,height:16},e),r.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),$n="button--1Syge",er=()=>{const e=(0,L.Z)(rt.D7),t=(0,L.Z)(rt.Ro),n=(0,L.Z)(Vn),o=Mn(Hn.Fr),i=Mn(Kn.Sk),s=Mn(qn.ri,"toggle");return r.createElement("span",null,e&&r.createElement("span",{className:"simrate--1LNMp"},n.toFixed(2)," ms"),e?r.createElement(Qn,{className:(0,l.yI)($n,"button-stop--264bH"),onClick:i}):r.createElement(Xn,{className:(0,l.yI)($n,"button-play--3gVDD"),onClick:o}),r.createElement(Yn,{className:(0,l.yI)($n,"button-pause--YWEL8",!e&&"button--disabled--2BVJb",t&&"selected--QetqX"),onClick:s}))},tr=({className:e})=>{const t=(0,L.Z)(Pn._),n=(0,L.Z)(Pn.P);return r.createElement("div",{className:(0,l.yI)("titlebar--3-TCE",e)},r.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),r.createElement("div",{className:"titlebar-divider--Wl_27"}),r.createElement(Bn,{content:r.createElement(Dn,null),placement:"bottom-start"},r.createElement(G,null,"File")),r.createElement(Bn,{content:r.createElement(zn,null),placement:"bottom-start"},r.createElement(G,null,"Edit")),r.createElement(Bn,{content:r.createElement(_n,null),placement:"bottom-start"},r.createElement(G,null,"View")),r.createElement("div",{className:"titlebar-projectname--1vIUJ"},t,n&&"*"),r.createElement("div",{className:"titlebar-controls--1R_l6"},r.createElement(er,null)))};var nr=n(2047);const rr=(0,nr.m)((e=>e.dialogType)),or=(0,nr.m)((e=>e.data));var ir=n(5222),sr=n(227),cr=n(1074);const ar=({className:e,isOpen:t,onRequestClose:n,children:i})=>t?(0,o.createPortal)(r.createElement("div",{className:(0,l.yI)("modal","modal--25LBN")},r.createElement(sr.Y,{onClickOutside:n,onEscapeKey:n},r.createElement("div",{className:(0,l.yI)("modal-content--1H0T_",e)},r.createElement(cr.Z,{className:u},i)))),document.body):null,lr=({isOpen:e,acceptText:t,cancelText:n,onAccept:o,onCancel:i,footer:s,children:c})=>r.createElement(ar,{className:"dialog--1eQi6",isOpen:e,onRequestClose:i},r.createElement("div",null,c),r.createElement("div",{className:"dialog-footer--2hYdr"},s,i&&r.createElement(G,{onClick:i},null!=n?n:"Cancel"),o&&r.createElement(G,{onClick:o},null!=t?t:"Accept"))),dr=()=>{const e=Mn(ir.GA),t=(0,L.Z)(or),n=null==t?void 0:t.projectLink,o=r.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const i=r.createElement(G,{onClick:o},"Copy to Clipboard");return r.createElement(lr,{isOpen:!0,cancelText:"Close",onCancel:e,footer:i},r.createElement("div",{className:"export-link-dialog-link-container--Zas2L"},r.createElement("code",{className:"export-link-dialog-link--7r7uE"},n)))},ur=()=>{switch((0,L.Z)(rr)){default:return null;case"export-project-link":return r.createElement(dr,null)}},pr=document.getElementById("root");o.render(r.createElement(s.F0,{history:c.Z},r.createElement(i.zt,{store:a.h},r.createElement((()=>r.createElement("div",{className:(0,l.yI)(u,d["flex-column"])},r.createElement(tr,{className:d["flexitem-fix"]}),r.createElement("div",{className:(0,l.yI)(u,d["flexitem-shrink"])},r.createElement(wn,null)),r.createElement(ur,null))),null))),pr)},2550:(e,t,n)=>{"use strict";n.d(t,{J:()=>o,h:()=>i});var r=n(5667);const o=Object.freeze({});function i(e){const{ctrlKey:t,altKey:n,shiftKey:o,metaKey:i}=e;return{ctrlMetaKey:r.f?i:t,altKey:n,shiftKey:o}}},5667:(e,t,n)=>{"use strict";n.d(t,{f:()=>o,t:()=>i});var r=n(1795);const o=/(Mac|iOS|OS\ X)/.test((r.os||"undefined").toString()),i=o?"command":"ctrl"},3871:(e,t,n)=>{"use strict";n.d(t,{t:()=>c,a:()=>a});var r=n(3386),o=n.n(r),i=n(1966),s=n.n(i);function c(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function a(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return o()(e,t);case"remove":return s()(e,t);case"toggle":return s()(e,t).concat(s()(t,e))}return t}},6773:(e,t,n)=>{"use strict";n.d(t,{rC:()=>u,zL:()=>p,Ll:()=>y,xn:()=>f,KQ:()=>g,pc:()=>I,y_:()=>v,Ny:()=>h,qO:()=>b});var r=n(2222),o=n(8370),i=n(2550),s=n(9203),c=n(7836),a=n(5878),l=n(2951),d=n(1556);const u=(0,l.k)((e=>e.dragMode)),p=(0,l.k)((e=>e.dragStart)),y=(0,l.k)((e=>e.dragEnd)),m=(0,l.k)((e=>{var t;return null!==(t=e.dragModifierKeys)&&void 0!==t?t:i.J})),f=(0,l.k)((0,r.createSelector)(u.local,p.local,y.local,((e,t,n)=>"select"===e&&t&&n?(0,o.Qu)(t,n):null))),g=(0,r.createSelector)(u,c.d4,m,p,y,d.pf,d.Fv,((e,t,n,r,i,s,c)=>{if("move"!==e||!r||!i)return null;let a=c;t.length>0&&(a=s);const l=(0,o.sj)(i,r);return n.ctrlMetaKey||(l.x=Math.round(l.x/a)*a,l.y=Math.round(l.y/a)*a),l})),I=(0,l.k)((e=>{const t=d.Fv.local(e),{dragMode:n,dragEnd:r,dragModifierKeys:o}=e;if("new-joint"!==n||!r||!o)return null;const i=Object.assign({},r);return o.ctrlMetaKey||(i.x=Math.round(i.x/t)*t,i.y=Math.round(i.y/t)*t),i})),v=(0,l.k)((e=>"new-node"===e.dragMode)),h=(0,l.k)((e=>"new-node"===e.dragMode?e.dragNewNodeType:null)),b=(0,r.createSelector)(u,y,a.f,s.x,((e,t,n,r)=>{var i;if("wire"!==e||!t)return null;for(const e of n){const n=null!==(i=r[e])&&void 0!==i?i:o.Ds,s=Object.keys(n);for(const r of s){const i=n[r],s=(0,o.sj)(t,i);if((0,o.VE)(s)<=6)return{nodeId:e,pinId:r}}}return null}))},1556:(e,t,n)=>{"use strict";n.d(t,{pf:()=>o,Fv:()=>i,ph:()=>s,aj:()=>c});var r=n(2951);const o=(0,r.k)((()=>50)),i=(0,r.k)((()=>5)),s=(e,t)=>{const n=o(e);return{x:Math.round(t.x/n)*n,y:Math.round(t.y/n)*n}},c=(e,t)=>{const n=i(e);return{x:Math.round(t.x/n)*n,y:Math.round(t.y/n)*n}}},2951:(e,t,n)=>{"use strict";n.d(t,{N:()=>o,k:()=>i});var r=n(9963);const o=(0,r.R)("circuitEditorUiDrag"),i=(0,r.e)("circuitEditorUiDrag")},6147:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,h:()=>i});var r=n(9963);const o=(0,r.R)("circuitEditorUiSettings"),i=(0,r.e)("circuitEditorUiSettings")},961:(e,t,n)=>{"use strict";n.d(t,{Gl:()=>s,se:()=>c,WU:()=>a});var r=n(5054),o=n(9977),i=n(9990);const s=(0,i.u)((e=>e.editingCircuitId)),c=(0,i.u)((e=>{var t;return null!==(t=e.editingCircuitNodeIdPath)&&void 0!==t?t:(0,r.fb)()})),a=e=>(0,o.w)(e,s(e))},5878:(e,t,n)=>{"use strict";n.d(t,{G:()=>l,f:()=>a});var r=n(8133),o=n(2222),i=n(6486);const s=(0,o.createSelector)(((e,t)=>(0,r.U4)(e,t)),(e=>e.services.nodeGraph.connectionsById),((e,t)=>Object.keys(t).filter((n=>{const{inputPin:r,outputPin:o}=t[n];return!!(0,i.includes)(e,r.nodeId)&&!!(0,i.includes)(e,o.nodeId)}))));var c=n(961);const a=e=>{const t=(0,c.Gl)(e);return(0,r.U4)(e,t)},l=e=>{const t=(0,c.Gl)(e);return s(e,t)}},9990:(e,t,n)=>{"use strict";n.d(t,{b:()=>o,u:()=>i});var r=n(9963);const o=(0,r.R)("circuitEditorUiViewport"),i=(0,r.e)("circuitEditorUiViewport")},6222:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});const r="root"},9977:(e,t,n)=>{"use strict";n.d(t,{Nd:()=>o,nR:()=>i,w:()=>s});var r=n(8628);const o=(0,r.b)((e=>Object.keys(e.circuitNamesByCircuitId))),i=(0,r.b)((e=>e.circuitNamesByCircuitId)),s=(0,r.b)(((e,t)=>e.circuitNamesByCircuitId[t]))},8133:(e,t,n)=>{"use strict";n.d(t,{oh:()=>o,U4:()=>i,RW:()=>s});var r=n(8628);const o=(0,r.b)((e=>e.nodeIdsByCircuitId)),i=(0,r.b)(((e,t)=>e.nodeIdsByCircuitId[t])),s=(0,r.b)(((e,t)=>{for(const n of Object.keys(e.nodeIdsByCircuitId))if(-1!==e.nodeIdsByCircuitId[n].indexOf(t))return n;return null}))},8628:(e,t,n)=>{"use strict";n.d(t,{v:()=>o,b:()=>i});var r=n(9963);const o=(0,r.R)("circuits"),i=(0,r.e)("circuits")},2047:(e,t,n)=>{"use strict";n.d(t,{L:()=>o,m:()=>i});var r=n(9963);const o=(0,r.R)("dialog"),i=(0,r.e)("dialog")},5637:(e,t,n)=>{"use strict";n.d(t,{DH:()=>l,PB:()=>d,rl:()=>u,ij:()=>p,Me:()=>y,lZ:()=>m,p:()=>f});var r=n(2628),o=n.n(r),i=n(4908),s=n.n(i),c=n(2222),a=n(3562);const l=(0,a.Z)((e=>e.connectionsById)),d=(0,a.Z)((0,c.createSelector)((e=>e.connectionsById),(e=>Object.keys(e)))),u=(0,a.Z)(((e,t)=>e.connectionsById[t])),p=(0,a.Z)((0,c.createSelector)((e=>e.connectionsById),(e=>o()(e)))),y=(0,a.Z)(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].inputPin.nodeId===t)))),m=(0,a.Z)(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].outputPin.nodeId===t)))),f=(0,a.Z)(((e,t)=>{const n=y.local(e,t),r=m.local(e,t);return s()([...n,...r])}))},4368:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=n(3304),o=n(5213);const i=(e,t)=>{const n=(0,o.og)(e,t);return n?(0,r.yP)(e,n):null}},5213:(e,t,n)=>{"use strict";n.d(t,{Xi:()=>c,Fm:()=>a,KO:()=>l,yX:()=>d,M6:()=>u,og:()=>p,uk:()=>y,p2:()=>m});var r=n(2222),o=n(6604),i=n.n(o),s=n(3562);const c=(0,s.Z)((e=>e.nodesById)),a=(0,s.Z)((0,r.createSelector)(c.local,(e=>Object.keys(e)))),l=(0,s.Z)((0,r.createSelector)(c.local,(e=>i()(e,(e=>e.nodeType))))),d=(0,s.Z)(((e,t)=>e.nodesById[t]||null)),u=(0,s.Z)(((e,t)=>{const n=[];for(const r of Object.keys(e.nodesById)){const{nodeType:o}=e.nodesById[r];o===t&&n.push(r)}return n})),p=(0,s.Z)(((e,t)=>{const n=d.local(e,t);return n?n.nodeType:null})),y=(0,s.Z)(((e,t)=>{var n;const r=d.local(e,t);return r?null!==(n=r.nodeName)&&void 0!==n?n:t.substr(0,4):null})),m=(0,s.Z)(((e,t)=>{const n=d.local(e,t);return n?n.nodeName:null}))},3065:(e,t,n)=>{"use strict";n.d(t,{k_:()=>a,LK:()=>l,Su:()=>d});var r=n(8133),o=n(1089),i=n(5637),s=n(4368),c=n(5213);const a=(e,t,n)=>{const r=(0,s.m)(e,t);if(!r)return null;const o=r.pins[n];return o?o.direction:null},l=(e,t)=>{const n=(0,i.ij)(e),r=(0,s.m)(e,t);if(!r)return{};let o=[];o=Object.keys(r.pins).filter((e=>"output"===r.pins[e].direction));const c=n.filter((e=>e.outputPin.nodeId===t)),a={};for(const e of o)a[e]=[];for(const e of c){const{outputPin:t,inputPin:n}=e;a[t.pinId].push(n)}return a},d=(e,t)=>{const n=(0,c.og)(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const i=(0,r.RW)(e,t);if(!i)return[];const s=(0,o.u)(i);return(0,c.M6)(e,s).map((e=>({nodeId:e,pinId:t})))}},3562:(e,t,n)=>{"use strict";n.d(t,{s:()=>o,Z:()=>i});var r=n(9963);const o=(0,r.R)("nodeGraph"),i=(0,r.e)("nodeGraph")},4150:(e,t,n)=>{"use strict";n.d(t,{g:()=>d});var r=n(2222),o=n(6604),i=n.n(o),s=n(8370),c=n(5213),a=n(3304),l=n(1486);const d=(0,r.createSelector)(l.T,a.MW,c.KO,((e,t,n)=>i()(e,((e,r)=>{const o=n[r];if(!o)return s.rG;const i=t[o];return i?(0,s.gQ)(i.visual.hitRect,e):s.rG}))))},9203:(e,t,n)=>{"use strict";n.d(t,{x:()=>a,G:()=>l});var r=n(2222),o=n(8370),i=n(5213),s=n(3304),c=n(1486);const a=(0,r.createSelector)(s.MW,c.T,i.KO,((e,t,n)=>{var r;const i={},s=Object.keys(n);for(const c of s){const s={};i[c]=s;const a=null!==(r=t[c])&&void 0!==r?r:o.Ds,l=n[c];if(!l)continue;const d=e[l];if(!d)continue;const u=Object.keys(d.pins);for(const e of u){const t=d.pins[e],n=(0,o.ZO)(a,t);s[e]=n}}return i})),l=(e,t,n)=>{var r;const i=a(e)[t];return i&&null!==(r=i[n])&&void 0!==r?r:o.Ds}},1486:(e,t,n)=>{"use strict";n.d(t,{T:()=>i,e:()=>s});var r=n(8370),o=n(2179);const i=(0,o.J)((e=>e.nodePositionsById)),s=(0,o.J)(((e,t)=>{var n;return null!==(n=e.nodePositionsById[t])&&void 0!==n?n:r.Ds}))},5393:(e,t,n)=>{"use strict";n.d(t,{qX:()=>f,wR:()=>g,gl:()=>I,II:()=>v,qq:()=>h,oW:()=>b,v5:()=>k});var r=n(4654),o=n.n(r),i=n(4908),s=n.n(i),c=n(8370),a=n(4368),l=n(5878),d=n(5637),u=n(2179),p=n(1486);const y={},m={},f=(e,t)=>{const{outputPin:{nodeId:n,pinId:r}}=e.services.nodeGraph.connectionsById[t],o=(0,a.m)(e,n);if(!o)return c.Ds;const i=(0,p.e)(e,n),s=y[t];if(s&&s.inputNodeDef===o&&s.inputNodePosition.x===i.x&&s.inputNodePosition.y===i.y)return s.outputPosition;let l=c.Ds;o&&o.pins[r]&&(l=o.pins[r]);const d=(0,c.ZO)(i,l);return y[t]={inputNodeDef:o,inputNodePosition:i,outputPosition:d},d},g=(e,t)=>{const{inputPin:{nodeId:n,pinId:r}}=e.services.nodeGraph.connectionsById[t],o=(0,a.m)(e,n);if(!o)return c.Ds;const i=(0,p.e)(e,n),s=m[t];if(s&&s.inputNodeDef===o&&s.inputNodePosition.x===i.x&&s.inputNodePosition.y===i.y)return s.outputPosition;let l=c.Ds;o&&o.pins[r]&&(l=o.pins[r]);const d=(0,c.ZO)(i,l);return m[t]={inputNodeDef:o,inputNodePosition:i,outputPosition:d},d},I=((0,u.J)((e=>Object.keys(e.wireJointPositionsByJointId))),e=>{const t=(0,l.f)(e),n=o()(t,(t=>(0,d.p)(e,t))),r=o()(n,(t=>h(e,t)));return s()(r)}),v=(0,u.J)((e=>e.wireJointIdsByConnectionId)),h=(0,u.J)(((e,t)=>e.wireJointIdsByConnectionId[t])),b=(0,u.J)(((e,t)=>e.wireJointPositionsByJointId[t])),k=(0,u.J)((e=>e.wireJointPositionsByJointId))},2179:(e,t,n)=>{"use strict";n.d(t,{S:()=>o,J:()=>i});var r=n(9963);const o=(0,r.R)("nodeLayout"),i=(0,r.e)("nodeLayout")},4944:(e,t,n)=>{"use strict";n.d(t,{J:()=>p});var r=n(7294),o=n(9242),i=n(669),s=n.n(i),c=n(8370),a=n(7165),l=n(1235),d=n(961);const u=({circuitNodeId:e,shapePath:t,hitPath:n,elementState:i})=>{const s=(0,o.I0)(),c=(0,a.Z)(d.se),u=r.useCallback((t=>{e&&(t.defaultPrevented||(t.preventDefault(),s((0,l.zN)([...c,e]))))}),[e,s,c]);var p,y;const m=(p=t,y=i,(Array.isArray(p)?p:[p]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const t="function"==typeof e.fill?e.fill(y||{}):e.fill,n="function"==typeof e.stroke?e.stroke(y||{}):e.stroke,r="function"==typeof e.strokeWidth?e.strokeWidth(y||{}):e.strokeWidth;return{path:e.path,fill:t,stroke:n,strokeWidth:r}}))).map(((e,t)=>r.createElement("path",{key:t,d:e.path,className:"node-select-highlight--stroke node-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return r.createElement("g",{onClick:u},r.createElement("path",{d:n,fill:"transparent",stroke:"none"}),m)};function p(e,t){return{component:n=>r.createElement(u,Object.assign({shapePath:t,hitPath:e},n)),hitRect:(0,c.NG)(s()(e))}}},1089:(e,t,n)=>{"use strict";function r(e){return"ic-"+e}function o(e){return e.startsWith("ic-")?e.substr(3):null}n.d(t,{u:()=>r,X:()=>o})},1186:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={type:"interaction-toggle",category:"i/o",displayName:"Toggle Switch",elementProduction:"toggle",visual:(0,n(4944).J)("M5,5 L45,5 L45,45 L5,45 z",[{path:"M5,5 L45,5 L45,45 L5,45 z",fill:"#AFAFAF",stroke:"black"},{path:"M10,10 L40,10 L40,40 L10,40 z",fill:e=>e.toggleState?"lightgreen":"darkgreen",stroke:"black"}]),pins:{OUT:{direction:"output",x:45,y:25}}}},1894:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",a={type:"logic-and",category:"logic",displayName:"AND",elementProduction:"and",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M31 15H5M32 35H5"}),r.createElement("path",{className:"node-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},357:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",a={type:"logic-buffer",category:"logic",displayName:"Buffer",elementProduction:"buffer",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 72,25 L 95.085706,25"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),r.createElement("path",{className:"node-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))},pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},2074:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",a={type:"logic-nor",category:"logic",displayName:"NOR",elementProduction:"nor",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25h16M31 15H5M32 35H5"}),r.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"3",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},8061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z",a={type:"logic-not",category:"logic",displayName:"NOT",elementProduction:"not",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79.15691 25H95M29.043478 25h-24"}),r.createElement("path",{className:"node-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"3",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))},pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},6246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",a={type:"logic-or",category:"logic",displayName:"OR",elementProduction:"or",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M31 15H5M32 35H5"}),r.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2356:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",a={type:"logic-xor",category:"logic",displayName:"XOR",elementProduction:"xor",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M30.38572 15H5M31.3621 35H5"}),r.createElement("g",{fillRule:"evenodd",className:"node-select-highlight--fill"},r.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),r.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))},pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2944:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const r=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const o={type:"output-led",category:"i/o",displayName:"Indicator Light",elementProduction:"led",visual:(0,n(4944).J)(r,{path:r,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},1460:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(4944);const o=[15,0];function i(e,t){const n=t[0];let r=`M${3*n[0]+o[0]},${3*n[1]+o[1]}`;for(const e of t.slice(1)){const[t,n]=e;r+=`L${3*t+o[0]},${3*n+o[1]}`}return r+="z",{path:r,fill:t=>t[e]?"red":"gray",strokeWidth:0}}const s={type:"output-seg7",category:"i/o",displayName:"7-Segment Display",elementProduction:"seg7",visual:(0,r.J)("M15,0 V63 H45 V0 z",[i("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),i("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),i("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),i("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),i("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),i("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),i("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},2554:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-input",category:"i/o",displayName:"Input Pin",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h5",stroke:"black",fill:"none"}))},pins:{OUT:{direction:"output",x:40,y:25}}}},8420:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),o=n(669),i=n.n(o),s=n(8370);const c="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-output",category:"i/o",displayName:"Output Pin",visual:{hitRect:(0,s.NG)(i()(c)),component:()=>r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-5",stroke:"black",fill:"none"}))},pins:{IN:{direction:"input",x:10,y:25}}}},3304:(e,t,n)=>{"use strict";n.d(t,{yP:()=>J,MW:()=>R,NJ:()=>Z});var r=n(4654),o=n.n(r),i=n(3311),s=n.n(i),c=n(5054),a=n(2222),l=n(9734),d=n.n(l),u=n(8133),p=n(6222),y=n(5213),m=n(1486),f=n(7294),g=n(9242),I=n(669),v=n.n(I),h=n(8370),b=n(2334),k=n(7165),E=n(7930),O=n(9977),N=n(961);function j(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}const C=({circuitNodeId:e,circuitId:t,inputPinCount:n,outputPinCount:r})=>{const o=(0,g.I0)(),i=(0,k.Z)((e=>(0,O.w)(e,t))),s=j(n,r),c=(0,k.Z)(N.se),a=f.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),o((0,E._A)(t,[...c,e]))))}),[t,e,o,c]),l=[];for(let e=0;e<n;e++){const t=50*e+25;l.push(f.createElement("line",{key:e,className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:0,y1:t,x2:10,y2:t}))}const d=[];for(let e=0;e<r;e++){const t=50*e+25;d.push(f.createElement("line",{key:e,className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:t,x2:100,y2:t}))}return f.createElement("g",null,f.createElement("path",{className:"node-select-highlight--stroke",stroke:"black",fill:"transparent",d:s,onDoubleClick:a}),f.createElement("text",{className:b.Z["text-unselectable"],textAnchor:"middle",x:50,y:30},i),l,d)},x=()=>f.createElement("g",{stroke:"black",strokeWidth:1},f.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),f.createElement("line",{x1:10,y1:15,x2:5,y2:15}),f.createElement("line",{x1:40,y1:15,x2:45,y2:15}),f.createElement("line",{x1:10,y1:35,x2:5,y2:35}),f.createElement("line",{x1:40,y1:35,x2:45,y2:35}));function w(e,t,n){const r={circuitId:e,inputPinCount:t,outputPinCount:n};return{hitRect:(0,h.NG)(v()(j(t,n))),trayComponent:e=>f.createElement(x,Object.assign({},r,e)),component:e=>f.createElement(C,Object.assign({},r,e))}}function P(e,t){return{x:"input"===t?0:100,y:50*e+25}}var B=n(1089);const M=[(0,a.createSelector)(u.oh,y.KO,m.T,O.nR,((e,t,n,r)=>Object.keys(e).filter((e=>e!==p.u)).map((o=>{var i,s;const c=null!==(i=e[o])&&void 0!==i?i:[],a=null!==(s=r[o])&&void 0!==s?s:o.substr(0,5);let l=c.filter((e=>t[e].startsWith("pin-")));l=d()(l,(e=>n[e].y),(e=>n[e].x));const u={};let p=0,y=0;for(const e of l){const n=t[e];"pin-input"===n?(u[e]=Object.assign({direction:"input"},P(p,"input")),p++):"pin-output"===n&&(u[e]=Object.assign({direction:"output"},P(y,"output")),y++)}return{type:(0,B.u)(o),category:"ic",displayName:a,elementProduction:{type:"circuit",circuitId:o},visual:w(o,p,y),pins:u}})))),n(1186).Z,n(1894).Z,n(357).Z,n(2074).Z,n(8061).Z,n(6246).Z,n(2356).Z,n(2944).Z,n(1460).Z,n(2554).Z,n(8420).Z];let S=[];const Z=e=>{const t=o()(M,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,(0,c._2)(n)}(t,e)));return t.every(((e,t)=>e===S[t]))?S:(S=t,t)},R=(0,a.createSelector)(Z,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),J=(e,t)=>{var n;const r=Z(e);return null!==(n=s()(r,(e=>e.type===t)))&&void 0!==n?n:null}},8473:(e,t,n)=>{"use strict";n.d(t,{_:()=>o,P:()=>i});var r=n(7038);const o=(0,r.G)((e=>e.projectName)),i=(0,r.G)((e=>e.projectModified))},7038:(e,t,n)=>{"use strict";n.d(t,{t:()=>o,G:()=>i});var r=n(9963);const o=(0,r.R)("project"),i=(0,r.e)("project")},7836:(e,t,n)=>{"use strict";n.d(t,{d4:()=>a,CP:()=>l,nG:()=>d,O5:()=>u,g7:()=>p});var r=n(2222),o=n(8718),i=n.n(o),s=n(5213),c=n(9286);const a=(0,c.m)((e=>e.selectedNodeIds)),l=(0,c.m)(((e,t)=>-1!==e.selectedNodeIds.indexOf(t))),d=((0,r.createSelector)(s.Xi,a,((e,t)=>i()(e,t))),(0,c.m)((e=>e.selectedConnectionIds)),(0,c.m)(((e,t)=>-1!==e.selectedConnectionIds.indexOf(t)))),u=(0,c.m)((e=>e.selectedJointIds)),p=(0,c.m)(((e,t)=>-1!==e.selectedJointIds.indexOf(t)))},9286:(e,t,n)=>{"use strict";n.d(t,{V:()=>o,m:()=>i});var r=n(9963);const o=(0,r.R)("selection"),i=(0,r.e)("selection")},9963:(e,t,n)=>{"use strict";n.d(t,{R:()=>i,e:()=>s});var r=n(5974),o=n(6600);function i(e){return t=>(n=r._,i)=>{const s=t(n.services[e],i,n);return n.services[e]!=s?(0,o.cA)(n,"services",e,s):n}}function s(e){return t=>{const n=(n,...r)=>t(n.services[e],...r);return n.local=t,n}}},2619:(e,t,n)=>{"use strict";n.d(t,{D7:()=>o,yU:()=>i,Ro:()=>s,bg:()=>c});var r=n(4389);const o=(0,r.x)((e=>"edit"!==e.mode)),i=(0,r.x)((e=>"run"===e.mode)),s=(0,r.x)((e=>"pause"===e.mode)),c=(0,r.x)((e=>e.ticksPerSecond))},4389:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,x:()=>i});var r=n(9963);const o=(0,r.R)("simulatorControl"),i=(0,r.e)("simulatorControl")},1755:(e,t,n)=>{"use strict";n.d(t,{Ac:()=>a,OF:()=>l,F9:()=>d});var r=n(4654),o=n.n(r),i=n(7361),s=n.n(i),c=n(9963);const a=(0,c.R)("simulatorGraph"),l=(0,c.e)("simulatorGraph");function d(e,t){const n=o()(t,(e=>[e,"subCircuitIds"]));n.pop();const r=s()(e,n);if(!r)return null;const{simulatorNodeId:i}=r;return null!=i?i:null}},6036:(e,t,n)=>{"use strict";n.d(t,{X:()=>o,g:()=>i});var r=n(9963);const o=(0,r.R)("simulator"),i=(0,r.e)("simulator")},5974:(e,t,n)=>{"use strict";n.d(t,{_:()=>N,h:()=>no});const r=Object.freeze({dragMode:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewNodeType:null,dragNewJointConnectionId:null,dragNewJointAfterJointId:null,dragWireSource:null}),o=Object.freeze({nodeNameMode:"named-only"});var i=n(6222);const s={editingCircuitId:i.u,editingCircuitNodeIdPath:null,viewScale:1},c=Object.freeze(s),a={circuitNamesByCircuitId:{[i.u]:"Root"},nodeIdsByCircuitId:{[i.u]:[]}},l=Object.freeze(a);var d=n(8370);const u=Object.freeze({clipboardNodes:[],clipboardPasteOrigin:d.Ds}),p=Object.freeze({dialogType:null,data:null}),y=Object.freeze({nodesById:{},connectionsById:{}}),m=Object.freeze({nodePositionsById:{},wireJointIdsByConnectionId:{},wireJointPositionsByJointId:{}}),f=Object.freeze({projectName:"New Project",projectModified:!1}),g=Object.freeze({selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}),I=Object.freeze({tick:0,lastTickProcessingTimeMs:0,nodeStatesByNodeId:{},nodeOutputValuesByNodeId:{},transitionsById:{},transitionWindows:[]}),v=Object.freeze({mode:"edit",ticksPerSecond:1e3}),h=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{}}),b={circuitEditorUiDrag:r,circuitEditorUiSettings:o,circuitEditorUiViewport:c,nodeGraph:y,nodeLayout:m,circuits:l,clipboard:u,dialog:p,project:f,selection:g,simulator:I,simulatorControl:v,simulatorGraph:h},k=Object.freeze(b),E=["circuitEditorUiViewport","circuits","nodeGraph","nodeLayout"],O={services:k,undo:Object.freeze({undoStack:[],redoStack:[]})},N=Object.freeze(O);var j=n(4890),C=(n(2729),n(7172)),x=n(6600);const w=new URL(window.location.origin);w.pathname=n.p;const P=w.toString(),B="@init";var M=n(7252),S=n(5984),Z=n(1314),R=n(5273),J=n(5054);const D="@node/delete";function T(e){return e.type===D}var L=n(4443),z=n(5409),A=n(2165);const U="@selection/move";var W=n(4586);const F="@wire/attach",G=(e,t,n)=>({type:F,payload:{connectionId:(0,W.Z)(),p1:e,p2:t,joints:(null==n?void 0:n.joints)||[]}});function _(e){return e.type===F}const H="@wire/detatch";function K(e){return e.type===H}const q="@wire/joint/add",V="@wire/joint/move",X=(e,t,n={})=>{var r,o;return{type:V,payload:{jointIds:(0,J._2)(e),position:t,relative:null!==(r=n.relative)&&void 0!==r&&r,snapMode:null!==(o=n.snapMode)&&void 0!==o?o:"none"}}},Q="@wire/joint/delete";var Y=n(5621),$=n(4),ee=n(3634),te=n(5758),ne=n(38);const re="@project/receive",oe=(e,t)=>({type:re,payload:{fileName:e,saveData:t}}),ie=[M.q6,S.JP,Z.QM,R.dd,D,L.XT,z.R9,A.XE,U,F,H,q,Q,V,ee.Um,te.Nz,Y.Fb,$.cN];function se(e){return-1!==ie.indexOf(e.type)}ne.Ny;var ce=n(8718),ae=n.n(ce);function le(e){return ae()(e.services,E)}var de=n(928),ue=n.n(de);var pe=n(8177),ye=n(1387),me=n(152),fe=n(4882);const ge=[pe.NQ,ye.Cq,V,me.rZ,fe.Sh];var Ie=n(4970),ve=n(8764),he=n(8424),be=n(4875);const ke="@dialog/show";var Ee=n(5222);const Oe="@dialog/response/cancel";function*Ne(e,t){yield(0,Ie.gz)(((e,t)=>({type:ke,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,Ie.qn)([Ee.pR,Oe]);return n.type===Ee.pR?n.payload.result:null}var je=n(4505),Ce=n(7516);const xe=Ce.Ry().shape({nodeId:Ce.Z_().required().min(1),pinId:Ce.Z_().required().min(1)});function we(e,t){return e.nodeId===t.nodeId&&e.pinId===t.pinId}const Pe=Ce.Ry().shape({circuitId:Ce.Z_().required().min(1),circuitName:Ce.Z_().required().min(1)}),Be=Ce.Ry().shape({nodeId:Ce.Z_().required().min(1),nodeType:Ce.Z_().required().min(1),nodeName:Ce.Z_().nullable().min(1),circuitId:Ce.Z_().required().min(1),x:Ce.Rx().required(),y:Ce.Rx().required()}),Me=Ce.Ry().shape({output:xe.required(),input:xe.required(),joints:Ce.IX().of(d.tQ)}),Se=Ce.Ry().shape({circuits:Ce.IX().of(Pe).min(0),nodes:Ce.IX().of(Be).min(0),wires:Ce.IX().of(Me).min(0)});var Ze=n(9734),Re=n.n(Ze);function Je(...e){return[].concat(...e)}var De=n(2951);const Te=(0,De.N)(((e,t)=>{if(!(0,pe.Xm)(t))return e;const{dragPos:n,modifierKeys:r}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragModifierKeys:r})}));var Le=n(3871);const ze="@select/region";var Ae=n(1556),Ue=n(6773),We=n(713),Fe=n(2571),Ge=n(7836),_e=n(1883);const He=(0,De.N)(((e,t)=>{if(!(0,_e.xl)(t))return e;const{connectionId:n,addAfterJointId:r,modifierKeys:o,x:i,y:s}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"new-joint",dragStart:{x:i,y:s},dragNewJointConnectionId:n,dragNewJointAfterJointId:r,dragModifierKeys:o})}));var Ke=n(8554);const qe=(0,De.N)(((e,t)=>{if(!(0,Ke.Q6)(t))return e;const{nodeType:n}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"new-node",dragNewNodeType:n})}));var Ve=n(8198),Xe=n(4662),Qe=n(853);const Ye=(0,De.N)(((e,t)=>{if(!(0,Qe.dx)(t))return e;const{x:n,y:r}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragStart:{x:n,y:r}})}));var $e=n(4206);const et=Je(Te,(function(e=N,t){if(!(0,$.$V)(t))return e;const{x:n,y:r,modifierKeys:o}=t.payload,{dragMode:i,dragStart:s,dragEnd:c,dragNewNodeType:a,dragNewJointAfterJointId:l,dragNewJointConnectionId:u,dragWireSource:p}=e.services.circuitEditorUiDrag;switch(i){case"select":if(s){const t=(0,Le.t)(o),i=(0,d.Qu)(s,{x:n,y:r});e=wr(e,((e,t="set")=>({type:ze,payload:{region:e,mode:t}}))(i,t))}break;case"move":if(s){let t=(0,d.sj)({x:n,y:r},s);const i=e.services.selection.selectedNodeIds.length>0;o.ctrlMetaKey||(t=i?(0,Ae.ph)(e,t):(0,Ae.aj)(e,t)),e=wr(e,((e,t,n={})=>{var r;return{type:U,payload:{offsetX:e,offsetY:t,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}})(t.x,t.y))}break;case"new-node":if(c){const t=(0,Ae.ph)(e,c);e=wr(e,(0,R.gz)(a,{position:t}))}break;case"new-joint":{const t=(0,Ae.aj)(e,{x:n,y:r});e=wr(e,((e,t,n,r)=>({type:q,payload:{connectionId:e,jointId:(0,W.Z)(),addAfterJointId:t,position:n}}))(u,l,t));break}case"wire":{const t=(0,x.cA)(e,"services","circuitEditorUiDrag","dragEnd",{x:n,y:r}),o=(0,Ue.qO)(t);p&&o&&(e=wr(e,G(p,o)));break}}return(0,x.cA)(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewNodeType:null,dragWireSource:null})))}),(function(e=N,t){if(!(0,We.Vl)(t))return e;const{jointId:n,x:r,y:o,modifierKeys:i}=t.payload;if(e=(0,x.cA)(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:r,y:o}}))),!(0,Ge.g7)(e,n)){const t=(0,Le.t)(i);e=wr(e,(0,Fe.a2)(n,t))}return e}),He,qe,(function(e=N,t){if(!(0,Ve.KH)(t))return e;const{nodeId:n,x:r,y:o,modifierKeys:i}=t.payload;if(e=(0,x.cA)(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:r,y:o}}))),!(0,Ge.CP)(e,n)){const t=(0,Le.t)(i);e=wr(e,(0,Xe.lF)(n,t))}return e}),Ye,(0,De.N)(((e,t)=>{if(!(0,$e.Zr)(t))return e;const{dragStart:n,pin:r}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"wire",dragStart:n,dragWireSource:r})})),(0,De.N)(((e,t)=>(0,ye.hG)(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e)));var tt=n(5842);const nt=Je((0,n(6147).D)(((e,t)=>{if(!(0,tt.RD)(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{nodeNameMode:n})})));var rt=n(9990);const ot=(0,rt.b)(((e,t)=>{if(!(0,S.Q$)(t))return e;const{circuitId:n}=t.payload;return e.editingCircuitId!==n?e:Object.assign(Object.assign({},e),{editingCircuitId:i.u})})),it=(0,rt.b)(((e,t)=>{if(!(0,M.U_)(t))return e;const{circuitId:n,edit:r}=t.payload;return r?Object.assign(Object.assign({},e),{editingCircuitId:n}):e}));var st=n(7930),ct=n(9977);const at=Je(ot,it,(0,rt.b)(((e,t,n)=>{if(!(0,st.k5)(t))return e;const{circuitId:r,circuitNodeIdPath:o}=t.payload;return-1===(0,ct.Nd)(n).indexOf(r)?e:Object.assign(Object.assign({},e),{editingCircuitId:r,editingCircuitNodeIdPath:o})})),(0,rt.b)(((e,t)=>{if(!(0,fe.UO)(t))return e;const{viewScale:n}=e,{delta:r}=t.payload;return Object.assign(Object.assign({},e),{viewScale:r>0?n*r*1.03:n/(1.03*-r)})})));var lt=n(8628);const dt=(0,lt.v)(((e,t)=>{if(!(0,M.U_)(t))return e;const n=t.payload.circuitId;let r=t.payload.circuitName;return r||(r="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:r}),nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[n]:[]})})}));var ut=n(6604),pt=n.n(ut),yt=n(1966),mt=n.n(yt),ft=n(5213),gt=n(1089);const It=(0,lt.v)(((e,t,n)=>{if(!(0,S.Q$)(t))return e;const{circuitId:r}=t.payload,o=Object.keys(e.circuitNamesByCircuitId).filter((e=>e!==r)),i=(0,ft.M6)(n,(0,gt.u)(r));let s=ae()(e.nodeIdsByCircuitId,o);return s=pt()(s,(e=>mt()(e,i))),Object.assign(Object.assign({},e),{nodeIdsByCircuitId:s,circuitNamesByCircuitId:ae()(e.circuitNamesByCircuitId,o)})})),vt=(0,lt.v)(((e,t)=>{if(!(0,Z.lp)(t))return e;const{circuitId:n,circuitName:r}=t.payload,o=r.trim();return""===o?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:o})})}));var ht=n(961);const bt=(0,lt.v)(((e,t,n)=>{if(!(0,R.g0)(t))return e;const{nodeId:r,circuitId:o}=t.payload,i=null!=o?o:(0,ht.Gl)(n);return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[i]:[...e.nodeIdsByCircuitId[i],r]})})})),kt=(0,lt.v)(((e,t)=>{if(!T(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:pt()(e.nodeIdsByCircuitId,(e=>e.filter((e=>-1===n.indexOf(e)))))})})),Et=Je(dt,It,vt,bt,kt,(0,lt.v)(((e,t)=>(0,ne.Tp)(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[i.u]:"Root"},nodeIdsByCircuitId:{[i.u]:[]}}):e)));var Ot=n(5161),Nt=n.n(Ot),jt=n(998),Ct=n.n(jt),xt=n(7287),wt=n.n(xt);const Pt="@clipboard/copy";var Bt=n(3065),Mt=n(1486),St=n(9963);const Zt=(0,St.R)("clipboard"),Rt=((0,St.e)("clipboard"),Zt(((e,t,n)=>{if(!function(e){return e.type===Pt}(t))return e;const{nodeIds:r}=t.payload;if(0===r.length)return e;const o=(0,Mt.T)(n),i=wt()(r,Nt()(r,(()=>(0,W.Z)()))),s=o[r[0]],c=r.map((e=>{const t=(0,ft.yX)(n,e),c=(0,Bt.LK)(n,e);return{id:i[e],nodeType:t.nodeType,offset:(0,d.sj)(o[e],s),outputs:pt()(c,(e=>e.filter((e=>{return t=e.nodeId,-1!==Ct()(r,(e=>e===t));var t})).map((e=>({nodeId:i[e.nodeId],pinId:e.pinId})))))}}));return Object.assign(Object.assign({},e),{clipboardNodes:c,clipboardPasteOrigin:s})})));var Jt=n(2628),Dt=n.n(Jt);const Tt=Je(Rt,(function(e=N,t){if(!(0,Y.Ff)(t))return e;const{clipboardNodes:n,clipboardPasteOrigin:r}=e.services.clipboard,o=(0,Ae.pf)(e),i=(0,d.ZO)(r,{x:o,y:o}),s=wt()(n.map((e=>e.id)),Nt()(n,(()=>(0,W.Z)())));for(const t of n){const{id:n,nodeType:r,offset:o}=t,c=(0,d.ZO)(i,o);e=wr(e,(0,R.gz)(r,{position:c,nodeId:s[n]}))}for(const t of n){const{id:n,outputs:r}=t,o=s[n];for(const t of Object.keys(r))for(const n of r[t]){const{nodeId:r,pinId:i}=n,c=s[r];e=wr(e,G({nodeId:o,pinId:t},{nodeId:c,pinId:i}))}}return e=(0,x.cA)(e,"services","clipboard","clipboardPasteOrigin",i),wr(e,(0,Xe.lF)(Dt()(s)))}));var Lt=n(2047);const zt=Je((0,Lt.L)(((e,t)=>(0,Ee.W2)(t)?p:e)),(0,Lt.L)(((e,t)=>function(e){return e.type===Oe}(t)?p:e)),(0,Lt.L)(((e,t)=>{if(!function(e){return e.type===ke}(t))return e;const{dialogType:n,data:r}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:r})})));function At(e,t){return t.weight=e,t}function Ut(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}var Wt=n(8133),Ft=n(3562),Gt=n(5937),_t=n.n(Gt),Ht=n(4654),Kt=n.n(Ht);function qt(e,t,n){const r=mt()(Object.keys(e.nodesById),t),o=Kt()(t,(e=>(0,Bt.Su)(n,e)));return Object.assign(Object.assign({},e),{nodesById:ae()(e.nodesById,r),connectionsById:_t()(e.connectionsById,(function({inputPin:e,outputPin:n}){return-1===t.indexOf(e.nodeId)&&-1===t.indexOf(n.nodeId)&&!o.some((t=>we(t,e)||we(t,n)))}))})}const Vt=At(Ut(It),(0,Ft.s)(((e,t,n)=>{if(!(0,S.Q$)(t))return e;const{circuitId:r}=t.payload;return qt(e,[...(0,Wt.U4)(n,r),...(0,ft.M6)(n,(0,gt.u)(r))],n)}))),Xt=At(-10,(0,Ft.s)(((e,t)=>{if(!(0,R.g0)(t))return e;const{nodeId:n,nodeType:r,nodeName:o}=t.payload;return Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:{nodeType:r,nodeName:null!=o?o:null}})})}))),Qt=At(Ut(kt),(0,Ft.s)(((e,t,n)=>{if(!T(t))return e;const{nodeIds:r}=t.payload;return qt(e,r,n)}))),Yt=(0,Ft.s)(((e,t)=>{if(!(0,L.HH)(t))return e;const{nodeId:n}=t.payload;if(!e.nodesById[n])return e;let r=t.payload.nodeName;return r||""!==r.trim()||(r=null),Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:Object.assign(Object.assign({},e.nodesById[n]),{nodeName:r})})})})),$t=(0,Ft.s)(((e,t)=>(0,ne.Tp)(t)?y:e));var en=n(3311),tn=n.n(en),nn=n(3304);const rn=Je(Vt,Xt,$t,Qt,Yt,(0,Ft.s)(((e,t,n)=>{if(!_(t))return e;const{connectionId:r,p1:o,p2:i}=t.payload,s=function(e,t,n,r){const o=e.nodesById[t.nodeId],i=e.nodesById[n.nodeId];if(!o||!i)return null;const s=(0,nn.yP)(r,o.nodeType),c=(0,nn.yP)(r,i.nodeType);if(!s||!c)return null;const a=s.pins[t.pinId],l=c.pins[n.pinId];if(!a||!l)return null;if(a.direction===l.direction)return null;return{outputPin:"output"===a.direction?t:n,inputPin:"input"===a.direction?t:n}}(e,o,i,n);if(!s)return e;const{inputPin:c}=s;return tn()(e.connectionsById,(e=>we(e.inputPin,c)))?e:Object.assign(Object.assign({},e),{connectionsById:Object.assign(Object.assign({},e.connectionsById),{[r]:Object.assign({id:r},s)})})})),(0,Ft.s)(((e,t)=>{if(!K(t))return e;const{connectionId:n}=t.payload,r=Object.keys(e.connectionsById).filter((e=>e!==n));return Object.assign(Object.assign({},e),{connectionsById:ae()(e.connectionsById,r)})})));var on=n(2179),sn=n(5637);function cn(e,t,n){const r=t.reduce(((e,t)=>{const r=(0,sn.Me)(n,t),o=(0,sn.lZ)(n,t);return e.push(...r,...o),e}),[]),o=Kt()(t,(e=>(0,Bt.Su)(n,e))),i=(0,sn.DH)(n),s=Object.keys(i).filter((e=>{const{inputPin:t,outputPin:n}=i[e];return o.some((e=>we(e,t)||we(e,n)))})),c=[...r,...s].reduce(((t,n)=>(t.push(...e.wireJointIdsByConnectionId[n]),t)),[]),a=mt()(Object.keys(e.wireJointIdsByConnectionId),r),l=mt()(Object.keys(e.wireJointPositionsByJointId),c),d=mt()(Object.keys(e.nodePositionsById),t);return Object.assign(Object.assign({},e),{nodePositionsById:ae()(e.nodePositionsById,d),wireJointIdsByConnectionId:ae()(e.wireJointIdsByConnectionId,a),wireJointPositionsByJointId:ae()(e.wireJointPositionsByJointId,l)})}const an=At(Ut(Vt),(0,on.S)(((e,t,n)=>{if(!(0,S.Q$)(t))return e;const{circuitId:r}=t.payload;return e=cn(e,(0,Wt.U4)(n,r),n),cn(e,(0,ft.M6)(n,(0,gt.u)(r)),n)}))),ln=(0,on.S)(((e,t)=>{if(!(0,R.g0)(t))return e;const{nodeId:n,position:r=d.Ds}=t.payload;return(0,x.cA)(e,"nodePositionsById",n,r)})),dn=At(Ut(Qt),(0,on.S)(((e,t,n)=>{if(!T(t))return e;const{nodeIds:r}=t.payload;return cn(e,r,n)}))),un="@node/move",pn=(e,t,n={})=>{var r,o;return{type:un,payload:{nodeIds:(0,J._2)(e),position:t,relative:null!==(r=n.relative)&&void 0!==r&&r,snapMode:null!==(o=n.snapMode)&&void 0!==o?o:"none"}}},yn=(0,on.S)(((e,t,n)=>{if(!function(e){return e.type===un}(t))return e;const{nodeIds:r,position:o,relative:i,snapMode:s}=t.payload,c=pt()(ae()(e.nodePositionsById,r),(e=>{let t={x:i?e.x+o.x:o.x,y:i?e.y+o.y:o.y};return"node"===s&&(t=(0,Ae.ph)(n,t)),t}));return Object.assign(Object.assign({},e),{nodePositionsById:Object.assign(Object.assign({},e.nodePositionsById),c)})})),mn=Je(an,ln,(0,on.S)(((e,t)=>(0,ne.Tp)(t)?m:e)),dn,yn,(0,on.S)(((e,t)=>{if(!_(t))return e;const{connectionId:n,joints:r}=t.payload;if(r.length>0){const t=r.map((()=>(0,W.Z)()));e=(0,x.cA)(e,"wireJointIdsByConnectionId",n,t),e=(0,x.cA)(e,"wireJointPositionsByJointId",(e=>Object.assign(Object.assign({},e),wt()(t,r))))}else e=(0,x.cA)(e,"wireJointIdsByConnectionId",n,[]);return e})),(0,on.S)(((e,t)=>{if(!K(t))return e;const{connectionId:n}=t.payload,r=Object.keys(e.wireJointIdsByConnectionId).filter((e=>e!=n)),o=mt()(Object.keys(e.wireJointPositionsByJointId),e.wireJointIdsByConnectionId[n]);return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:ae()(e.wireJointIdsByConnectionId,r),wireJointPositionsByJointId:ae()(e.wireJointPositionsByJointId,o)})})),(0,on.S)(((e,t)=>{if(!function(e){return e.type===q}(t))return e;const{connectionId:n,addAfterJointId:r,position:o,jointId:i}=t.payload;let s=e.wireJointIdsByConnectionId[n];const c=r?s.indexOf(r)+1:0;return s=[...s.slice(0,c),i,...s.slice(c)],Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:Object.assign(Object.assign({},e.wireJointIdsByConnectionId),{[n]:s}),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),{[i]:o})})})),(0,on.S)(((e,t)=>{if(!function(e){return e.type===Q}(t))return e;const{jointId:n}=t.payload,r=Object.keys(e.wireJointPositionsByJointId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:pt()(e.wireJointIdsByConnectionId,(e=>e.filter((e=>e!==n)))),wireJointPositionsByJointId:ae()(e.wireJointPositionsByJointId,r)})})),(0,on.S)(((e,t,n)=>{if(!function(e){return e.type===V}(t))return e;const{jointIds:r,position:o,relative:i,snapMode:s}=t.payload,c=pt()(ae()(e.wireJointPositionsByJointId,r),(e=>{let t={x:i?e.x+o.x:o.x,y:i?e.y+o.y:o.y};return"node"===s?t=(0,Ae.ph)(n,t):"joint"===s&&(t=(0,Ae.aj)(n,t)),t}));return Object.assign(Object.assign({},e),{wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),c)})}))),fn=At(50,((e=N,t)=>{return se(t)?(n=Br(e),localStorage.setItem("autosave",JSON.stringify(n)),e):e;var n}));var gn=n(7038);const In=(0,gn.t)(((e,t)=>se(t)?Object.assign(Object.assign({},e),{projectModified:!0}):e)),vn=(0,gn.t)(((e,t)=>(0,ne.Tp)(t)?(localStorage.removeItem("autosave"),Object.assign(Object.assign({},e),{projectName:"New Project",projectModified:!1})):e)),hn="@project/rename",bn=Je(fn,(function(e=N,t){if(!function(e){return e.type===B}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{e=Mr(e,n),e=(0,x.cA)(e,"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"Previous Project",projectModified:!0})))}catch(e){}return e}),In,vn,(function(e=N,t){if(!function(e){return e.type===re}(t))return e;const{fileName:n,saveData:r}=t.payload;try{e=Mr(e,r),e=(0,x.cA)(e,"services","project",(e=>Object.assign(Object.assign({},e),{projectName:n,projectModified:!1})))}catch(e){console.error("Failed to load save",e)}return e}),(0,gn.t)(((e,t)=>{if(!function(e){return e.type===hn}(t))return e;let{projectName:n}=t.payload;return n=n.trim(),""===n?e:Object.assign(Object.assign({},e),{projectName:n})})));var kn=n(9286);const En=(0,kn.V)(((e,t)=>{if(!T(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:mt()(e.selectedNodeIds,n),selectedConnectionIds:[]})})),On=(0,kn.V)(((e,t)=>(0,ne.Tp)(t)?g:e));var Nn=n(5564),jn=n.n(Nn),Cn=n(7243),xn=n(5878),wn=n(5393);const Pn=(0,kn.V)(((e,t,n)=>{if(!(0,Cn.ov)(t))return e;const r=(0,xn.f)(n);let o=(0,sn.PB)(n);const i=(0,sn.DH)(n);o=o.filter((e=>{const{inputPin:t,outputPin:n}=i[e];return-1!==r.indexOf(t.nodeId)&&-1!==r.indexOf(n.nodeId)}));const s=(0,wn.II)(n),c=jn()(o.map((e=>s[e])));return Object.assign(Object.assign({},e),{selectedNodeIds:r,selectedConnectionIds:o,selectedJointIds:c})}));var Bn=n(1578);const Mn=(0,kn.V)(((e,t)=>(0,Bn.CH)(t)?Object.assign(Object.assign({},e),{selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}):e)),Sn=(0,kn.V)(((e,t)=>{if(!(0,Fe.p6)(t))return e;const{jointIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===r?[]:e.selectedNodeIds,selectedConnectionIds:"set"===r?[]:e.selectedConnectionIds,selectedJointIds:(0,Le.a)(e.selectedJointIds,n,r)})})),Zn=(0,kn.V)(((e,t)=>{if(!(0,Xe.xW)(t))return e;const{nodeIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:(0,Le.a)(e.selectedNodeIds,n,r),selectedConnectionIds:"set"===r?[]:e.selectedConnectionIds,selectedJointIds:"set"===r?[]:e.selectedJointIds})}));var Rn=n(2525),Jn=n.n(Rn),Dn=n(4150);const Tn=(0,kn.V)(((e,t,n)=>{if(!function(e){return e.type===ze}(t))return e;const{region:r,mode:o}=t.payload,i=(0,xn.f)(n),s=ae()((0,Dn.g)(n),i),c=[];Jn()(s,((e,t)=>{(0,d.kK)(e,r)&&c.push(t)}));const a=(0,wn.v5)(n),l=(0,wn.gl)(n).filter((e=>{const t=a[e];return(0,d.PL)(t,r)}));return Object.assign(Object.assign({},e),{selectedNodeIds:(0,Le.a)(e.selectedNodeIds,c,o),selectedConnectionIds:"set"===o?[]:e.selectedConnectionIds,selectedJointIds:(0,Le.a)(e.selectedJointIds,l,o)})}));var Ln=n(4691);const zn=(0,kn.V)(((e,t)=>{if(!(0,Ln.GT)(t))return e;const{connectionIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===r?[]:e.selectedNodeIds,selectedConnectionIds:(0,Le.a)(e.selectedConnectionIds,n,r),selectedJointIds:"set"===r?[]:e.selectedJointIds})}));var An=n(4484);const Un=Je(On,En,Pn,Mn,Sn,Zn,Tn,zn,(function(e=N,t){if(!(0,z.wr)(t))return e;const{selectedNodeIds:n,selectedJointIds:r}=e.services.selection,o=(0,Mt.T)(e);for(const t of n){const n=o[t];if(!n)continue;const r=(0,Ae.ph)(e,n);(0,d.kg)(n,r)||(e=wr(e,pn(t,r)))}const i=(0,wn.v5)(e);for(const t of r){const n=i[t];if(!n)continue;const r=(0,Ae.aj)(e,n);(0,d.kg)(n,r)||(e=wr(e,X(t,r)))}return e}),(function(e=N,t){if(!(0,An.ww)(t))return e;const n=(0,Ge.d4)(e);return 0===n.length?e:wr(e,(r=n,{type:Pt,payload:{nodeIds:Array.isArray(r)?r:[r]}}));var r}),(function(e=N,t){if(!(0,A.SB)(t))return e;const{selectedNodeIds:n,selectedConnectionIds:r,selectedJointIds:o}=e.services.selection;var i;return n.length>0&&(e=wr(e,(i=n,{type:D,payload:{nodeIds:(0,J._2)(i)}}))),e=r.reduce(((e,t)=>wr(e,(e=>({type:H,payload:{connectionId:e}}))(t))),e),o.reduce(((e,t)=>wr(e,(e=>({type:Q,payload:{jointId:e}}))(t))),e)}),(function(e=N,t){if(!function(e){return e.type===U}(t))return e;const{offsetX:n,offsetY:r,snapMode:o}=t.payload,i=(0,Ge.d4)(e),s=(0,Ge.O5)(e),c={x:n,y:r};let a="none";"node"!==o&&"by-type"!==o||(a="node");let l="none";return l="by-type"===o?"joint":o,e=wr(e,pn(i,c,{relative:!0,snapMode:a})),wr(e,X(s,c,{relative:!0,snapMode:l}))}),(0,kn.V)(((e,t)=>{if(!K(t))return e;const{connectionId:n}=t.payload;return Object.assign(Object.assign({},e),{selectedConnectionIds:e.selectedConnectionIds.filter((e=>e!==n))})})));var Wn=n(6036);const Fn=(0,Wn.X)(((e,t)=>se(t)?I:e));n(2603),n(9896);const Gn={and:n(2954).Z,or:n(1652).Z,nor:n(7814).Z,not:n(50).Z,buffer:n(5562).Z,led:n(2603).Z,toggle:n(9896).Z,seg7:n(9684).Z,xor:n(5978).Z};var _n=n(1235),Hn=n(1755);const Kn=(0,Hn.OF)(((e,t)=>(0,Hn.F9)(e.simulatorNodeIdsByCircuitNodeId,t))),qn=(0,Hn.OF)((e=>Object.keys(e.simulatorNodesById))),Vn=(0,Hn.OF)(((e,t)=>{const n=e.simulatorNodesById[t];return n?n.elementType:null})),Xn=(e,t)=>{var n;const r=Vn(e,t);return r&&null!==(n=Gn[r])&&void 0!==n?n:null};var Qn=n(7513),Yn=n.n(Qn);const $n=(0,Hn.OF)(((e,t)=>{const n=e.simulatorNodesById[t];return n?Kt()(Dt()(n.outputsByPin),(e=>e.map((e=>e.simulatorNodeId)))):[]})),er=(0,Hn.OF)(((e,t)=>{const n=e.simulatorNodesById[t];return n?n.inputsByPin:{}}));function tr(e,t,n){const r=e.tick+t;e=Object.assign({},e,{transitionWindows:e.transitionWindows.slice()});let o=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=r;){if(0==--o)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=nr(e,t,n)}return e.tick!=r&&(e=Object.assign({},e,{tick:r})),e}function nr(e,t,n){if(0===t.transitionIds.length)return e;let r=Object.assign({},e,{tick:t.tick,nodeOutputValuesByNodeId:Object.assign({},e.nodeOutputValuesByNodeId)});const o=new Set;t.transitionIds.forEach((e=>{const{nodeId:t,valuesByOutputPin:i}=r.transitionsById[e];var s,c;(s=r.nodeOutputValuesByNodeId[t],c=i,Object.keys(c).some((e=>s[e]!==c[e])))&&(r.nodeOutputValuesByNodeId[t]=Object.assign({},r.nodeOutputValuesByNodeId[t],i),$n(n,t).forEach((e=>o.add(e))))})),r.transitionsById=ae()(r.transitionsById,mt()(Object.keys(r.transitionsById),t.transitionIds));for(const e of o)r=rr(r,e,n);return r}function rr(e,t,n){const r=Xn(n,t);if(!r||!r.evolve)return e;const o=function(e,t,n){const r={},o=er(n,t);return Object.keys(o).forEach((t=>{var n;const i=o[t];if(!i)return void(r[t]=!1);const{simulatorNodeId:s,pinId:c}=i;r[t]=(null===(n=e.nodeOutputValuesByNodeId[s])||void 0===n?void 0:n[c])||!1})),r}(e,t,n);return or(e,t,r.evolve(e.nodeStatesByNodeId[t],o,e.tick))}function or(e,t,n){const{state:r,transitions:o}=n;return r&&(e=(0,x.cA)(e,"nodeStatesByNodeId",t,r)),o&&(e=(0,J._2)(o).reduce(((e,n)=>function(e,t,n){const{tickOffset:r,valuesByPin:o,transitionMerger:i="replace"}=n,s=e.tick+(r>0?r:1);return"replace"===i&&(e=function(e,t){return Object.keys(e.transitionsById).filter((n=>function(e){return e.nodeId===t}(e.transitionsById[n]))).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const r=ae()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let o=e.transitionWindows;const i=Yn()(o,n.tick,((e,t)=>e.tick-t));if(i>=0){const e=o[i],n=e.transitionIds.indexOf(t);if(-1!==n)if(1===e.transitionIds.length)o=(0,J.O_)(o,i);else{o=o.slice();const{transitionIds:e}=o[i];o[i]=Object.assign({},o[i],{transitionIds:(0,J.O_)(e,n)})}}return Object.assign({},e,{transitionsById:r,transitionWindows:o})}(e,t)),e)}(e,t)),function(e,t,n,r){const o=(0,W.Z)(),i={nodeId:t,tick:n,valuesByOutputPin:r},s=e.transitionWindows.slice();let c=Yn()(s,n,((e,t)=>e.tick-t));if(c<0){c=-c-1;const e={tick:n,transitionIds:[]};s.splice(c,0,e)}const a=s[c].transitionIds.slice();a.push(o),s[c]=Object.assign({},s[c],{transitionIds:a});const l=Object.assign({},e.transitionsById,{[o]:i});return Object.assign({},e,{transitionsById:l,transitionWindows:s})}(e,t,s,o)}(e,t,n)),e)),e}const ir=(0,Wn.X)(((e,t,n)=>{if(!(0,_n.ke)(t))return e;const{circuitNodeIdPath:r}=t.payload,o=Kn(n,r);if(!o)return e;const i=Vn(n,o);if(!i)return e;const s=Gn[i];if(!s||!s.interact)return e;const c=e.nodeStatesByNodeId[o];return or(e,o,s.interact(c))}));var sr=n(7366);const cr=(0,Wn.X)(((e,t,n)=>{if(!(0,sr.RC)(t))return e;const{tick:r,transitionWindows:o}=e;return 0===o.length?e:tr(e,o[0].tick-r,n)}));var ar=n(8910);const lr=Je(Fn,ir,cr,(0,Wn.X)(((e,t,n)=>(0,ar.NL)(t)?function(e,t){const n=qn(t);return e=I,e=n.reduce(((e,n)=>function(e,t,n){const r=Xn(n,t);if(!r)return e;const o={};return r.outputPins.forEach((e=>{o[e]=!1})),(0,x.cA)(e,"nodeOutputValuesByNodeId",t,o)}(e,n,t)),e),n.reduce(((e,n)=>rr(e,n,t)),e)}(e,n):e)),(0,Wn.X)(((e,t,n)=>{if(!(0,me.FD)(t))return e;const{tickCount:r}=t.payload,o=performance.now();e=tr(e,r,n);const i=performance.now()-o;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:i})})));var dr=n(4389);const ur=(0,dr.G)(((e,t)=>se(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e));var pr=n(8261),yr=n(2619);const mr=(0,dr.G)(((e,t)=>{if(!(0,pr.Ie)(t))return e;const{mode:n}=t.payload;if(!yr.D7.local(e))return e;let r=e.mode;switch(n){case!0:r="pause";break;case!1:r="run";break;case"toggle":r="run"==r?"pause":"run"}return Object.assign(Object.assign({},e),{mode:r})})),fr=(0,dr.G)(((e,t)=>(0,ar.NL)(t)?Object.assign(Object.assign({},e),{mode:"run"}):e));var gr=n(737);const Ir=Je(ur,mr,fr,(0,dr.G)(((e,t)=>(0,gr.qf)(t)?Object.assign(Object.assign({},v),{ticksPerSecond:e.ticksPerSecond}):e)));var vr=n(3857),hr=n.n(vr),br=n(7361),kr=n.n(br),Er=n(4368);const Or=At(-10,(0,Hn.Ac)(((e,t,n)=>{if(!(0,ar.NL)(t))return e;const{simulatorNodesById:r,simulatorNodeIdsByCircuitNodeId:o}=jr(i.u,n);return Object.assign(Object.assign({},e),{simulatorNodesById:r,simulatorNodeIdsByCircuitNodeId:o})}))),Nr=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function jr(e,t){const n={},r={},o={},i={},s=[],c=[],a={},l={},d=(0,Wt.U4)(t,e);for(const e of d){const i=(0,ft.og)(t,e);if(!i)continue;if("pin-input"===i){s.push(e),o[e]=[];continue}if("pin-output"===i){c.push(e);continue}const d=Cr(e,t);hr()(n,d.simulatorNodesById),hr()(r,d.simulatorNodeIdsByCircuitNodeId),a[e]=d.inputElementPinsByCircuitPinId,l[e]=d.outputElementPinsByCircuitPinId}const u=(0,sn.DH)(t);for(const e of Object.keys(u)){const{inputPin:t,outputPin:r}=u[e];if(-1===d.indexOf(t.nodeId)||-1===d.indexOf(r.nodeId))continue;const p=kr()(l,[r.nodeId,r.pinId]),y=kr()(a,[t.nodeId,t.pinId]);if(-1!==s.indexOf(r.nodeId)&&y){o[r.nodeId].push(...y);continue}if(-1!==c.indexOf(t.nodeId)&&p){i[t.nodeId]=p;continue}if(!p||!y)continue;const m=n[p.simulatorNodeId];let f=m.outputsByPin[p.pinId];null==f&&(m.outputsByPin[p.pinId]=f=[]);for(const e of y)f.push({simulatorNodeId:e.simulatorNodeId,pinId:e.pinId}),n[e.simulatorNodeId].inputsByPin[e.pinId]={simulatorNodeId:p.simulatorNodeId,pinId:p.pinId}}return{simulatorNodesById:n,simulatorNodeIdsByCircuitNodeId:r,inputElementPinsByCircuitPinId:o,outputElementPinsByCircuitPinId:i}}function Cr(e,t){const n=(0,ft.og)(t,e);if(!n)return Nr;const r=(0,nn.yP)(t,n);if(!r||!r.elementProduction)return Nr;const o="string"==typeof(i=r.elementProduction)?{type:"element",elementType:i}:i;var i;switch(o.type){case"element":return function(e,t,n){const r=(0,Er.m)(n,e);if(!r)return Nr;const o={},i={},s=(0,W.Z)();o[s]={elementType:t.elementType,inputsByPin:{},outputsByPin:{}},i[e]={simulatorNodeId:s,subCircuitIds:{}};const c={},a={};for(const e of Object.keys(r.pins)){const{direction:t}=r.pins[e];"input"===t?c[e]=[{pinId:e,simulatorNodeId:s}]:"output"===t&&(a[e]={pinId:e,simulatorNodeId:s})}return{simulatorNodesById:o,simulatorNodeIdsByCircuitNodeId:i,inputElementPinsByCircuitPinId:c,outputElementPinsByCircuitPinId:a}}(e,o,t);case"circuit":return function(e,t,n){const r=jr(t.circuitId,n);return Object.assign(Object.assign({},r),{simulatorNodeIdsByCircuitNodeId:{[e]:{simulatorNodeId:null,subCircuitIds:r.simulatorNodeIdsByCircuitNodeId}}})}(e,o,t);default:throw new Error("Unsupported production type "+o.type)}}const xr=Je(Or,(0,Hn.Ac)(((e,t)=>(0,gr.qf)(t)?Object.assign({},h):e))),wr=function(e){const t=Re()(e,(e=>e.weight||0));return(e=N,n)=>t.reduce(((e,t)=>t(e,n)),e)}(Je(et,nt,at,Et,Tt,zt,rn,mn,bn,Un,lr,Ir,xr));class Pr extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function Br(e){const t=(0,wn.v5)(e);return{circuits:(0,ct.Nd)(e).map((t=>({circuitId:t,circuitName:(0,ct.w)(e,t)}))),nodes:(0,ft.Fm)(e).map((t=>{const n=(0,ft.yX)(e,t),r=(0,Mt.e)(e,t),o=(0,Wt.RW)(e,t);return{nodeId:t,nodeType:n.nodeType,nodeName:n.nodeName,circuitId:null!=o?o:i.u,x:r.x,y:r.y}})),wires:(0,sn.PB)(e).map((n=>{const r=(0,sn.rl)(e,n),o=(0,wn.qq)(e,n);return{input:r.inputPin,output:r.outputPin,joints:o.map((e=>t[e]))}}))}}function Mr(e,t){var n,r,o;try{Se.validateSync(t)}catch(e){throw new Pr(e.message)}e=N;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>wr(e,(0,M._Y)({circuitId:t,circuitName:n}))),e),e=(null!==(r=t.nodes)&&void 0!==r?r:[]).reduce(((e,t)=>{var n;return wr(e,(0,R.gz)(t.nodeType,{nodeId:t.nodeId,circuitId:t.circuitId,position:{x:t.x,y:t.y},nodeName:null!==(n=t.nodeName)&&void 0!==n?n:void 0}))}),e),e=(null!==(o=t.wires)&&void 0!==o?o:[]).reduce(((e,t)=>wr(e,G(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new Pr("Failed to load project.")}return e}function*Sr(){yield(0,Ie.ib)(je.WG,Zr)}function*Zr(){const e=yield(0,Ie.Ys)();try{const t=Br(e),n=JSON.stringify(t),r=(0,he.Wt)(n),o=ve.lW.from(r).toString("base64"),i=encodeURIComponent(o),s=P+be.Z.createHref({pathname:"/import",search:"data="+i});yield(0,Ie.RE)(Ne,"export-project-link",{projectLink:s})}catch(e){console.error("Failed to export project as link",e)}}var Rr=n(7198);function*Jr(){yield(0,Ie.ib)(Rr.Yk,Dr)}function*Dr(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=ve.lW.from(e,"base64"),r=(0,he.rr)(n,{to:"string"}),o=JSON.parse(r);yield(0,Ie.gz)(oe("Linked Project",o)),be.Z.push("/")}catch(e){console.error("Failed to import save from link",e)}}var Tr=n(4171),Lr=n.n(Tr),zr=n(6577);function*Ar(){yield(0,Ie.ib)(zr.Wx,Ur)}function*Ur(){try{const[e]=yield(0,Ie.RE)(Lr(),{accept:"application/json"}),t=yield(0,Ie.RE)(e.text.bind(e)),n=JSON.parse(t);let r=e.name;r=r?r.substr(0,r.lastIndexOf(".json")):"Unnamed Project",yield(0,Ie.gz)(oe(r,n))}catch(e){console.warn("Failed to load project:",e)}}var Wr=n(3162),Fr=n(3069),Gr=n(8473);function*_r(){yield(0,Ie.ib)(Fr.hq,Hr)}function*Hr(){const e=yield(0,Ie.Ys)();try{window.showSaveFilePicker?yield(0,Ie.RE)(Kr,e):yield(0,Ie.RE)(qr,e)}catch(e){console.warn("Failed to save project",e)}}function*Kr(e){const t=yield(0,Ie.Ys)(Gr._),n=yield(0,Ie.RE)(window.showSaveFilePicker,{suggestedName:t,types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!n)return;let r=n.name;r||(r=n.getFile().name),r&&(yield(0,Ie.gz)((e=>({type:hn,payload:{projectName:e}}))(r)));const o=Br(e),i=yield(0,Ie.RE)(n.createWritable.bind(n));yield(0,Ie.RE)(i.write.bind(i),JSON.stringify(o,null,2)),yield(0,Ie.RE)(i.close.bind(i))}function*qr(e){const t=yield(0,Ie.Ys)(Gr._),n=Br(e),r=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});(0,Wr.saveAs)(r,t+".json")}function*Vr(){yield(0,Ie.rM)(Sr),yield(0,Ie.rM)(Jr),yield(0,Ie.rM)(Ar),yield(0,Ie.rM)(_r)}function*Xr(){yield(0,Ie.A7)([ar.pu,pr.l2],Qr)}function*Qr(){for(;yield(0,Ie.Ys)(yr.yU);){yield(0,Ie.gz)((0,me.jf)(1));const e=yield(0,Ie.Ys)(yr.bg),t=Math.max(Math.ceil(1e3/e),1);yield(0,Ie.gw)(t)}}function*Yr(){yield(0,Ie.rM)(Xr)}const $r=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionSanitizer:function(e){return e},stateSanitizer:function(e){return e},actionsBlacklist:ge})||j.qC,eo=(0,C.ZP)(),to=[!1,eo].filter(x.fQ),no=(0,j.MT)((function(e=N,t){return e=function(e=N,t){return function(e=N,t){if(!(0,ee.Qy)(t))return e;const{undoStack:n,redoStack:r}=e.undo,o=ue()(n);return o?Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...r,le(e)]})}):e}(e=function(e=N,t){if(!(0,te.rA)(t))return e;const{undoStack:n,redoStack:r}=e.undo,o=ue()(r);return o?Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,le(e)],redoStack:r.slice(0,r.length-1)})}):e}(e=function(e=N,t){return!se(t)||(0,ee.Qy)(t)||(0,te.rA)(t)?e:(0,x.cA)(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),le(e)],redoStack:[]})))}(e,t),t),t)}(e,t),wr(e,t)}),$r((0,j.md)(...to)));eo.run((function*(){yield(0,Ie.rM)(Vr),yield(0,Ie.rM)(Yr)})),no.dispatch({type:B})},6600:(e,t,n)=>{"use strict";function r(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function o(...e){let t=e[0];const n=e.slice(1,e.length-2).map(String),r=e[e.length-2],o=e[e.length-1],s=i(t);t=s;for(const e of n)t[e]=i(t[e]),t=t[e];return t[r]="function"==typeof o?o(t[r]):o,s}function i(e){return Array.isArray(e)?e.slice():Object.assign({},e)}function s(e){return Boolean(e)}n.d(t,{yI:()=>r,cA:()=>o,fQ:()=>s})}},0,[[800,1,956,874,14,80,744,845,105,699,937]]]);
//# sourceMappingURL=client.bf2f8f2746b9c2c20d3c.bundle.js.map