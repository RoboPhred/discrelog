(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{2846:(e,t,n)=>{"use strict";n.d(t,{Tu:()=>r,Xx:()=>i,Vj:()=>o});const r="@element/interact",i=(e,t)=>({type:r,payload:{elementIdPath:e,data:t}});function o(e){return e.type===r}},6319:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={type:"interaction-momentary",category:"input-output",displayName:"Momentary Switch",elementProduction:"input-momentary",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-momentary"},pins:{OUT:{direction:"output",x:50,y:25}}}},8891:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={type:"interaction-toggle",category:"input-output",displayName:"Toggle Switch",elementProduction:"input-toggle",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-toggle"},pins:{OUT:{direction:"output",x:50,y:25}}}},4409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",l={type:"logic-and",category:"logic",displayName:"AND",elementProduction:"logic-and",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),r.createElement("path",{className:"element-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3013:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",l={type:"logic-buffer",category:"logic",displayName:"Buffer",elementProduction:"logic-buffer",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M72,25 L 100,25"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),r.createElement("path",{className:"element-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},2050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i={type:"logic-nand",category:"logic",displayName:"NAND",elementProduction:"logic-nand",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},r.createElement("g",{transform:"translate(-10,0)"},r.createElement("path",{d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z",stroke:"none",fill:"transparent"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 88,25 H110"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 41,15 L 15,15"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 42,35 L 15,35"}),r.createElement("path",{className:"element-select-highlight--fill",d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z M 42.857143,7.8571429 C 50.834264,7.8571429 55.918368,7.8571429 58.095238,7.8571429 C 59.285714,7.8571429 59.880952,7.8571429 60.178571,7.8571429 C 60.327381,7.8571429 60.409227,7.8571429 60.446429,7.8571429 C 60.465029,7.8571429 60.471543,7.8571429 60.47619,7.8571429 C 70.236853,7.857143 77.142857,15.497098 77.142857,25 C 77.142857,34.502902 69.760662,42.142857 60,42.142857 L 42.857143,42.142857 L 42.857143,7.8571429 z"}),r.createElement("path",{className:"element-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 79,25 A 4,4 0 1 1 71,25 A 4,4 0 1 1 79,25 z",transform:"translate(9,0)"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6583:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i={type:"logic-nor",category:"logic",displayName:"NOR",elementProduction:"logic-nor",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},r.createElement("g",null,r.createElement("path",{fill:"transparent",stroke:"none",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 h21 M31,15 H5 M32,35 H5"}),r.createElement("path",{className:"element-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6524:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294);const i={type:"logic-not",category:"logic",displayName:"NOT",elementProduction:"logic-not",visual:(0,n(7806).v)({p1:{x:24,y:5},p2:{x:80,y:45}},r.createElement("g",null,r.createElement("path",{fill:"transparent",stroke:"none",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79,25 H100 M29,25 h-24"}),r.createElement("path",{className:"element-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},3183:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",l={type:"logic-or",category:"logic",displayName:"OR",elementProduction:"logic-or",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M31,15 H5 M32,35 H5"}),r.createElement("path",{className:"element-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},1454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",l={type:"logic-xor",category:"logic",displayName:"XOR",elementProduction:"logic-xor",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70,25 h30 M30,15 H5 M31,35 H5"}),r.createElement("g",{fillRule:"evenodd",className:"element-select-highlight--fill"},r.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),r.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3532:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const i={type:"output-led",category:"input-output",displayName:"Indicator Light",elementProduction:"output-led",visual:(0,n(6816).J)(r,{path:r,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},8112:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(6816);const i=[15,0];function o(e,t){const n=t[0];let r=`M${3*n[0]+i[0]},${3*n[1]+i[1]}`;for(const e of t.slice(1)){const[t,n]=e;r+=`L${3*t+i[0]},${3*n+i[1]}`}return r+="z",{path:r,fill:t=>t[e]?"red":"gray",strokeWidth:0}}const s={type:"output-seg7",category:"input-output",displayName:"7-Segment Display",elementProduction:"output-seg7",visual:(0,r.J)("M15,0 V63 H45 V0 z",[o("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),o("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),o("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),o("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),o("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),o("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),o("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},5148:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-high",category:"input-output",elementProduction:"pin-high",displayName:"High Pin",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M25,20 v10 M20,25 h10",fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},2380:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7294),i=n(669),o=n.n(i),s=n(8370),c=n(784);const l="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-input",category:"input-output",displayName:"Input Pin",visual:(0,n(7806).v)((0,s.NG)(o()(l)),r.createElement("g",null,r.createElement("path",{d:l,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h15",stroke:"black",strokeWidth:2,fill:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:(0,c.x)(25,25,3,-45,225),fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:50,y:25}}}},1615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7294),i=n(669),o=n.n(i),s=n(8370);const c="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-output",category:"input-output",displayName:"Output Pin",visual:(0,n(7806).v)((0,s.NG)(o()(c)),r.createElement("g",null,r.createElement("path",{d:c,fill:"transparent",stroke:"none"}),r.createElement("path",{className:"element-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-12",stroke:"black",strokeWidth:2,fill:"none"}),r.createElement("circle",{className:"element-select-highlight--fill",cx:25,cy:25,r:3,fill:"black",stroke:"none"}))),pins:{IN:{direction:"input",x:0,y:25}}}},6816:(e,t,n)=>{"use strict";n.d(t,{J:()=>d});var r=n(7294),i=n(9242),o=n(669),s=n.n(o),c=n(8370),l=n(2846);const a=({elementId:e,elementPath:t,shapePath:n,hitPath:o,evolverState:s})=>{const c=(0,i.I0)(),a=r.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),c((0,l.Xx)([...t||[],e]))))}),[e,c,t]),u=m(n,s).map(((e,t)=>r.createElement("path",{key:t,d:e.path,className:"element-select-highlight--stroke element-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return r.createElement("g",{onClick:a},r.createElement("path",{d:o,fill:"transparent",stroke:"none"}),u)},u=({shapePath:e,hitRect:t})=>{const n=m(e,{}).map(((e,t)=>r.createElement("path",{key:t,d:e.path,className:"element-select-highlight--stroke element-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return r.createElement("svg",{width:50,height:50,viewBox:`${t.p1.x-5} ${t.p1.y-5} ${t.p2.x-t.p1.x+10} ${t.p2.y-t.p1.y+10}`},n)};function d(e,t){const n=(0,c.NG)(s()(e));return{trayComponent:()=>r.createElement(u,{shapePath:t,hitRect:n}),component:n=>r.createElement(a,Object.assign({shapePath:t,hitPath:e},n)),hitRect:n}}function m(e,t){return(Array.isArray(e)?e:[e]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const n="function"==typeof e.fill?e.fill(t||{}):e.fill,r="function"==typeof e.stroke?e.stroke(t||{}):e.stroke,i="function"==typeof e.strokeWidth?e.strokeWidth(t||{}):e.strokeWidth;return{path:e.path,fill:n,stroke:r,strokeWidth:i}}))}},7806:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(7294);function i(e,t){return{hitRect:e,trayComponent:()=>r.createElement("svg",{width:50,height:50,viewBox:`${e.p1.x-5} ${e.p1.y-5} ${e.p2.x-e.p1.x+10} ${e.p2.y-e.p1.y+10}`},t),component:()=>t}}},6503:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});const r=4},4263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:[],outputPins:["OUT"],interact:(e,t)=>void 0===t?{transitions:[{tickOffset:1,valuesByPin:{OUT:!0}},{tickOffset:1+Math.round(1.5*r.f),valuesByPin:{OUT:!1}}]}:t?{transitions:{tickOffset:1,valuesByPin:{OUT:!0}}}:{transitions:{tickOffset:1,valuesByPin:{OUT:!1}}}}},9028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const r={toggleState:!1},i={inputPins:[],outputPins:["OUT"],interact(e=r){const t=!e.toggleState;return{state:Object.assign({},e,{toggleState:t}),transitions:{tickOffset:1,valuesByPin:{OUT:t}}}},evolve:(e=r)=>({state:e,transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},2404:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:t.A&&t.B}}})}},3880:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:t.IN}}})}},5813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:!(t.A&&t.B)}}})}},2791:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:!(t.A||t.B)}}})}},6139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:!t.IN}}})}},1868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:t.A||t.B}}})}},6259:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6503);const i={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:r.f,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},9480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},4303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={inputPins:[],outputPins:["OUT"],evolve:()=>({transitions:{tickOffset:1,valuesByPin:{OUT:!0}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>r,rG:()=>i,NG:()=>o,n$:()=>s,R9:()=>c,VE:()=>l,Fv:()=>a,Ih:()=>u,bA:()=>d,Qu:()=>m,gQ:()=>p,ZO:()=>y,sj:()=>f,kg:()=>g,is:()=>I,nF:()=>h,G0:()=>v,jR:()=>E,Lv:()=>b});const r=Object.freeze({x:0,y:0}),i=Object.freeze({p1:r,p2:r});function o(e){return{p1:{x:e[0],y:e[1]},p2:{x:e[2],y:e[3]}}}function s(e,t){return Math.round(e/t)*t}function c(e,t){return{x:s(e.x,t),y:s(e.y,t)}}function l(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function a(e){const t=l(e);return{x:e.x/t,y:e.y/t}}function u(e,t){return e.x*t.x+e.y*t.y}function d(e,t){return{x:e.x*t,y:e.y*t}}function m(...e){let t,n;if(1===e.length){const r=e[0];t=r.p1,n=r.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function p(e,t){return{p1:y(e.p1,t),p2:y(e.p2,t)}}function y(e,t){return{x:e.x+t.x,y:e.y+t.y}}function f(e,t){return{x:e.x-t.x,y:e.y-t.y}}function g(e,t){return e.x===t.x&&e.y===t.y}function I(e,t){return!((t=m(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function h(e){return{width:(e=m(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function v(e,t){return e=m(e),t=m(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function E(e,t){return e=m(e),t=m(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}function b(e,t,n,{threshhold:r=4,axialGridSnap:i=0}){const o=f(t,e),c=l(o),m=a(o);if(Number.isNaN(m.x)||Number.isNaN(m.y))return null;const p=u(f(n,e),m);if(p<0||p>c)return null;const g=y(e,d(m,p));i>0&&(1===Math.abs(m.x)&&(g.x=s(g.x,i)),1===Math.abs(m.y)&&(g.y=s(g.y,i)));const I=l(f(n,g));return I>r?null:{interceptPoint:g,interceptLineLengthDistance:l(f(g,e)),interceptLinePointDistance:I}}},7947:(e,t,n)=>{"use strict";var r=n(7294),i=n(3935),o=n(1033),s=n(9242),c=n(6550),l=n(862),a=n(7865);const u=(0,n(9731).q_)(),d=Object.freeze({dragMode:null}),m="root",p="root-editor",y={circucitEditorsById:{[p]:{circuitId:m,elementIdPath:[]}},activeEditorId:null},f=Object.freeze(y),g={elementIdsByCircuitId:{[m]:[]},elementsById:{},wireIdsByCircuitId:{[m]:[]},wiresByWireId:{},wireSegmentsById:{},wireJointPositionsByJointId:{}},I=Object.freeze(g),h=Object.freeze({elementPositionsById:{}}),v={circuitNamesByCircuitId:{[m]:"Root"}},E=Object.freeze(v);var b=n(8370);const w=Object.freeze({clipboardElements:[],clipboardPasteOrigin:b.Ds}),O=Object.freeze({dialogType:null,data:null}),j=Object.freeze({projectName:"New Project",projectModified:!1,isLoading:!1}),k=Object.freeze({selectedElementIds:[],selectedWireJointIds:[],selectedWireSegmentIds:[]}),x=Object.freeze({initialized:!1,tick:0,lastTickProcessingTimeMs:0,evolverStatesByEvolverId:{},evolverOutputValuesByEvolverId:{},transitionsById:{},transitionWindows:[]}),C=Object.freeze({mode:"edit",ticksPerSecond:1e3}),B=Object.freeze({activeTutorial:null,annotatedElements:[],preTutorialState:null});var P=n(7361),N=n.n(P);function S(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function M(...e){return W(e[0],e.slice(1,e.length-1).map(String),e[e.length-1])}function W(e,t,n){if(0===t.length)return"function"==typeof n?n(e):n;const r=t.slice(0,t.length-1).map(String),i=t[t.length-1],o=z(e);let s=o;for(const e of r)s[e]=z(s[e]),s=s[e];return s[i]="function"==typeof n?n(s[i]):n,o}function z(e){return Array.isArray(e)?e.slice():Object.assign({},e)}function T(e){return Boolean(e)}const L="fill-parent--3pw6U",R={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"};var D=n(8721),A=n.n(D);function J(e){return"string"==typeof e?{windowId:e}:e}function U(e){return A()(e,"windowId")}function Z(e){return A()(e,"first")&&A()(e,"second")&&A()(e,"direction")}function F(e){return"number"==typeof e?{firstPercent:e}:e}function K(e){return A()(e,"firstPercent")}function $(e){return A()(e,"firstSize")||A()(e,"secondSize")}var H=n(3493),G=n.n(H);function V(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),t}const q={tessel:"tessel--2Q3Xd","tessel-content":"tessel-content--3-kEA","tessel-drop-capture":"tessel-drop-capture--3TbuI","tessel-drop-capture--dragging":"tessel-drop-capture--dragging--Ihwyz","tessel-drop-marker":"tessel-drop-marker--1cqr2","drop-left":"drop-left--wqP1V","drop-right":"drop-right--2MyGz","drop-top":"drop-top--1S0co","drop-bottom":"drop-bottom--2f330","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C","tessel-window":"tessel-window--1qDgp","tessel-window-titlebar":"tessel-window-titlebar--uHBdn","tessel-window-title":"tessel-window-title--2v0hT","tessel-window-controls":"tessel-window-controls--3i3ou","tessel-window-controls-close":"tessel-window-controls-close--2O8Zs","tessel-window-content":"tessel-window-content--sOnG-"},Y=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),X=({direction:e,onChangePercentage:t})=>{const n=r.useRef(null),i=r.useRef(null),o=V(e),s=V(t),c=r.useMemo((()=>G()((e=>{var t,r;if(null==i.current||null==n.current)return;const c=null!==(r=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==r?r:Y;let l=0,a=0;"row"===o.current?(a=e.pageX-c.left,l=a/c.width,isNaN(l)?(l=0,a=c.left):l>1&&(l=1,a=c.right)):(a=e.pageY-c.top,l=a/c.height,isNaN(l)?(l=0,a=c.top):l>1&&(l=1,a=c.bottom)),s.current(100*l,a)}),1e3/60,{leading:!0})),[o,s]),l=r.useCallback((e=>{e.persist(),c(e)}),[c]),a=r.useCallback((e=>{!e.defaultPrevented&&n.current&&(i.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),i.current=e.pointerId))}),[]),u=r.useCallback((()=>{n.current&&i.current&&(n.current.releasePointerCapture(i.current),i.current=null)}),[]);return r.createElement("div",{ref:n,className:S("tessel-split",q["tessel-split"],q["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:a,onPointerMove:l,onPointerUp:u})},Q=r.createContext([]);function _(){return r.useContext(Q)}const ee=({pathKey:e,children:t})=>{const n=_(),i=r.useMemo((()=>[...n,e]),[n,e]);return r.createElement(Q.Provider,{value:i},t)};function te(){}const ne=r.createContext({moveWindow:te,closeWindow:te});function re(){return r.useContext(ne)}const ie=({moveWindow:e,closeWindow:t,children:n})=>{const i=r.useMemo((()=>({moveWindow:e,closeWindow:t})),[e,t]);return r.createElement(ne.Provider,{value:i},n)};function oe(e,t,n){return K(e)?{firstPercent:t}:$(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const se=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:i,first:o,second:s,division:c}=e,l="row"===i?"width":"height",a=r.useCallback(((t,r)=>{const i=F(e.division);n(Object.assign(Object.assign({},e),{division:oe(i,t,r)}))}),[e,n]),u=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),d=r.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),m=F(c);let p="50%",y="50%",f=!1,g=!1;if(K(m)){const{firstPercent:e}=m;p=e+"%",y=100-e+"%"}else if($(m)){const{firstSize:e,secondSize:t}=m;e?(p=e+"px",f=!0,y="100%"):(p="100%",y=t+"px",g=!0)}return r.createElement("div",{className:S(L,R["row"===i?"flex-row":"flex-column"])},r.createElement("div",{className:S(f?R["flexitem-fix"]:R["flexitem-shrink"]),style:{[l]:p}},r.createElement(ee,{pathKey:"first"},r.createElement(ce,{value:o,renderWindow:t,onLayoutChange:u}))),r.createElement(X,{direction:i,onChangePercentage:a}),r.createElement("div",{className:S(g?R["flexitem-fix"]:R["flexitem-shrink"]),style:{[l]:y}},r.createElement(ee,{pathKey:"second"},r.createElement(ce,{value:s,renderWindow:t,onLayoutChange:d}))))},ce=({value:e,renderWindow:t,onLayoutChange:n})=>{const i=J(e);return U(i)?t(i):Z(i)?r.createElement(se,{item:i,renderWindow:t,onLayoutChange:n}):null};function le(e){return Array.isArray(e)?e:[e]}function ae(e,t){return e===t||e.length===t.length&&e.every(((e,n)=>t[n]===e))}const ue=Object.freeze([]);function de(){return ue}function me(e,t){const n=e.slice(0,t);for(let r=t+1;r<e.length;r++)n.push(e[r]);return n}function pe(e){const[t,n]=r.useState({left:0,top:0,right:0,bottom:0,width:0,height:0});return r.useLayoutEffect((()=>{if(!e.current)return;const t=new o.Z((()=>{const t=e.current;if(!t)return;const r=t.getBoundingClientRect();n({top:r.top,left:r.left,right:r.right,bottom:r.bottom,width:r.width,height:r.height})}));return t.observe(e.current),()=>{t.disconnect()}}),[e]),t}var ye=n(9240);const fe="@tessel/window",ge=e=>({type:fe,payload:{path:e}});function Ie(e){return e.type===fe}const he=r.forwardRef((({className:e,id:t,children:n},i)=>{const o=_(),{moveWindow:s}=re(),c=r.useRef(null),{top:l,left:a,right:u,bottom:d}=pe(c),[m,p]=r.useState(null),y=r.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return void p(null);const n=t.getClientOffset();if(null==e||null==n||!Ie(e))return void p(null);if(n.x<a||n.x>u)return void p(null);if(n.y<l||n.y>d)return void p(null);const r=(n.x-a)/(u-a);if(r<=.3)return void p("left");if(r>=.6)return void p("right");const i=(n.y-l)/(d-l);p(i<=.3?"top":i>=.6?"bottom":null)}),[l,a,u,d]),f=r.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return;if(!Ie(e))return;const{path:n}=e.payload;ae(n,o)||null!=m&&s(n,o,m)}),[o,m,s]),[{draggingSelf:g},I]=(0,ye.L)({accept:fe,collect:e=>{e.isOver({shallow:!0})||p(null);const t=e.getItem();return t&&Ie(t)?{draggingSelf:ae(t.payload.path,o)}:{}},hover:y,drop:f},[y,f]);let h=q["tessel-drop-marker"]+" ";if(null!=m&&!g)switch(m){case"bottom":h+=q["drop-bottom"];break;case"top":h+=q["drop-top"];break;case"left":h+=q["drop-left"];break;case"right":h+=q["drop-right"]}return r.createElement("div",{id:t,ref:e=>{c.current=e,I(e),"function"==typeof i?i(e):i&&(i.current=e)},className:S(q["tessel-drop-capture"],g&&q["tessel-drop-capture--dragging"],e)},n,r.createElement("div",{className:h}))}));function ve(e,t){var n;if(!t(e))return null;const r=J(e);if(Z(r)){const i=ve(r.first,t),o=ve(r.second,t);return i&&o?e:null!==(n=null!=i?i:o)&&void 0!==n?n:null}return e}function Ee(e){return"string"==typeof e?e:Z(e)?null==e.first?Ee(e.second):null==e.second?Ee(e.first):Object.assign(Object.assign({},e),{first:Ee(e.first),second:Ee(e.second)}):e}const be=({className:e,rootItem:t,renderWindow:n,onLayoutChange:i})=>{const o=r.useCallback(((e,n,r)=>{if(0===e.length)return;let o=t;const s=N()(o,e);o&&"string"!=typeof o&&s&&(n.length>0&&!N()(o,n)||(o=W(o,e,null),o=W(o,n,(e=>{let t;if("left"===r||"right"===r)t={direction:"row",division:50,first:"left"===r?s:e,second:"right"===r?s:e};else{if("top"!==r&&"bottom"!==r)throw new Error("Unknown tessel position: "+r);t={direction:"column",division:50,first:"top"===r?s:e,second:"bottom"===r?s:e}}return t})),o=Ee(o),i(o)))}),[t,i]),s=r.useCallback((e=>{let n=t;n&&("string"!=typeof n?(n=W(n,e,null),n=Ee(n),i(n)):0===e.length&&i(null))}),[i,t]);return r.createElement("div",{className:S("tessel",q.tessel,e)},r.createElement(ie,{moveWindow:o,closeWindow:s},r.createElement(he,null,r.createElement("div",{className:q["tessel-content"]},t&&r.createElement(ce,{value:t,renderWindow:n,onLayoutChange:i})))))},we="circuit-field",Oe=e=>({windowId:we,windowProps:{editorId:e}});function je(e){return"string"!=typeof e&&!!U(e)&&e.windowId===we}const ke={layout:{direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"element-tray"},second:Oe(p)}},xe=Object.freeze(ke),Ce=Object.freeze({elementNameMode:"named-only"}),Be={circuitEditorDrag:d,circuitEditors:f,circuitGraph:I,circuitLayout:h,circuitProperties:E,clipboard:w,dialog:O,project:j,selection:k,simulator:x,simulatorControl:C,tutorial:B,uiLayout:xe,uiSettings:Ce},Pe=Object.freeze(Be),Ne=["circuitProperties","circuitGraph","circuitLayout"],Se={services:Pe,undo:Object.freeze({undoStack:[],redoStack:[]})},Me=Object.freeze(Se);var We=n(4890),ze=(n(2729),n(7172));const Te=new URL(window.location.origin);Te.pathname=n.p;const Le=Te.toString(),Re="@init";var De=n(4586);const Ae="@circuit/add",Je=({circuitName:e,circuitId:t,edit:n}={})=>({type:Ae,payload:{circuitId:null!=t?t:(0,De.Z)(),circuitName:e,edit:n}});function Ue(e){return e.type===Ae}const Ze="@circuit/delete";function Fe(e){return e.type===Ze}const Ke="@circuit/rename",$e="@element/add",He=(e,t,n,r)=>({type:$e,payload:Object.assign({elementId:(0,De.Z)(),elementType:e,circuitId:t,position:n},r||{})});function Ge(e){return e.type===$e}const Ve="@element/delete";function qe(e){return e.type===Ve}const Ye="@element/rename",Xe="@selection/align-to-grid",Qe=()=>({type:Xe}),_e="@selection/delete",et=()=>({type:_e}),tt="@selection/move",nt="@clipboard/paste",rt=(e={})=>({type:nt,payload:Object.assign({},e)}),it="@circuit-editor/drag/end",ot="@undo/undo",st=()=>({type:ot});function ct(e){return e.type===ot}const lt="@undo/redo",at=()=>({type:lt});function ut(e){return e.type===lt}const dt="@project/new",mt=()=>({type:dt});function pt(e){return e.type===dt}const yt="@project/receive",ft=(e,t)=>({type:yt,payload:{fileName:e,saveData:t}}),gt="@wire/connect",It=(e,t,n)=>({type:gt,payload:{circuitId:e,from:t,to:n}}),ht="@wire/hydrate",vt=e=>({type:ht,payload:e}),Et="@wire/joint/move",bt=(e,t,{relative:n=!1,snapMode:r="none"}={})=>({type:Et,payload:{jointIds:le(e),position:t,relative:n,snapMode:r}}),wt="@wire/joint/delete";function Ot(e){return e.type===wt}const jt="@wire/segment/insert-joint",kt="@wire/segment/set-line",xt=(e,t)=>({type:kt,payload:{wireSegmentId:e,lineId:t}}),Ct=[Ae,Ze,Ke,$e,Ve,Ye,Xe,_e,tt,ot,lt,gt,ht,Et,wt,jt,kt,nt,it];function Bt(e){return-1!==Ct.indexOf(e.type)}var Pt=n(8718),Nt=n.n(Pt),St=n(8804),Mt=n.n(St);function Wt(e){return t=>(n=Me,r)=>{const i=t(n.services[e],r,n);return n.services[e]!=i?M(n,"services",e,i):n}}function zt(e){return t=>{const n=(n,...r)=>t(n.services[e],...r);return n.local=t,n}}const Tt=Wt("circuitEditors"),Lt=zt("circuitEditors"),Rt=Lt(((e,t)=>e.circucitEditorsById[t])),Dt=(e,t)=>{const n=Rt(e,t);return n?n.circuitId:null},At=Lt((e=>{if(e.activeEditorId)return e.activeEditorId;const t=Object.keys(e.circucitEditorsById);return t.length>0?t[0]:null})),Jt=Lt((e=>e.activeEditorId?e.circucitEditorsById[e.activeEditorId]:null)),Ut=Lt((e=>{if(!e.activeEditorId)return null;const t=e.circucitEditorsById[e.activeEditorId];return t?t.circuitId:null})),Zt=Lt(((e,t)=>Object.keys(e.circucitEditorsById).filter((n=>e.circucitEditorsById[n].circuitId===t))));function Ft(e){let t=null;const n=Jt(e);return n&&(t=n.circuitId),{serviceStates:Nt()(e.services,Ne),viewCircuitId:t}}var Kt=n(928),$t=n.n(Kt),Ht=n(9734),Gt=n.n(Ht);function Vt(...e){return[].concat(...e)}const qt="@circuit-editor/drag/abort",Yt=()=>({type:qt}),Xt=Wt("circuitEditorDrag"),Qt=zt("circuitEditorDrag"),_t=Xt(((e,t)=>function(e){return e.type===qt}(t)?d:e)),en="@circuit-editor/drag/continue",tn=Xt(((e,t)=>{if(!function(e){return e.type===en}(t))return e;const{dragPos:n,modifierKeys:r,editorId:i}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragEndEditorId:i,dragModifierKeys:r})}));var nn=n(3386),rn=n.n(nn),on=n(1966),sn=n.n(on);function cn(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function ln(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return rn()(e,t);case"remove":return sn()(e,t);case"toggle":return sn()(e,t).concat(sn()(t,e))}return t}function an(e,t){switch(t){case"append":case"remove":return e}return[]}const un="@select/region",dn=Qt((()=>50)),mn=Qt((()=>5)),pn=(e,t)=>{const n=dn(e);return(0,b.R9)(t,n)},yn=(e,t)=>{const n=mn(e);return(0,b.R9)(t,n)};var fn=n(2222),gn=n(6604),In=n.n(gn);const hn=Wt("circuitGraph"),vn=zt("circuitGraph");function En(e,t,n){const r=e.wiresByWireId[t],i=new Set;for(const t of r.wireSegmentIds){const r=e.wireSegmentsById[t];switch(r.type){case"input":case"output":r.jointId===n&&i.add(t);break;case"bridge":r.jointAId!==n&&r.jointBId!==n||i.add(t)}}return Array.from(i)}function bn(e){switch(e.type){case"bridge":return[e.jointAId,e.jointBId];case"input":case"output":return[e.jointId];default:return[]}}function wn(e,t){const n=e.wiresByWireId[t];if(!n)return[[],[]];const r=new Set,i=new Set;for(const t of n.wireSegmentIds){const n=e.wireSegmentsById[t];"input"===n.type?r.add(n.lineId):"output"===n.type&&i.add(n.lineId)}return[Array.from(r),Array.from(i)]}const On=vn((e=>e.elementsById)),jn=vn((0,fn.P1)(On.local,(e=>Object.keys(e)))),kn=vn((0,fn.P1)(On.local,(e=>In()(e,(e=>e.elementType))))),xn=vn(((e,t)=>e.elementsById[t]||null)),Cn=vn(((e,t)=>{const n=[];for(const r of Object.keys(e.elementsById)){const{elementType:i}=e.elementsById[r];i===t&&n.push(r)}return n})),Bn=vn(((e,t)=>{const n=xn.local(e,t);return n?n.elementType:null})),Pn=vn((e=>e.elementIdsByCircuitId)),Nn=Object.freeze([]),Sn=vn(((e,t)=>{var n;return null!==(n=e.elementIdsByCircuitId[t])&&void 0!==n?n:Nn})),Mn=vn(((e,t)=>{for(const n of Object.keys(e.elementIdsByCircuitId))if(-1!==e.elementIdsByCircuitId[n].indexOf(t))return n;return null})),Wn=vn((0,fn.P1)((e=>e.elementsById),(e=>In()(e,(e=>e.elementName))))),zn=vn(((e,t)=>{var n;const r=xn.local(e,t);return r?null!==(n=r.elementName)&&void 0!==n?n:t.substr(0,4):null})),Tn=vn(((e,t)=>{const n=xn.local(e,t);return n?n.elementName:null}));var Ln=n(4654),Rn=n.n(Ln),Dn=n(3311),An=n.n(Dn),Jn=n(669),Un=n.n(Jn);const Zn=Wt("circuitLayout"),Fn=zt("circuitLayout"),Kn=Fn((e=>e.elementPositionsById)),$n=Fn(((e,t)=>{var n;return null!==(n=e.elementPositionsById[t])&&void 0!==n?n:b.Ds})),Hn=Wt("circuitProperties"),Gn=zt("circuitProperties"),Vn=Gn((e=>Object.keys(e.circuitNamesByCircuitId))),qn=Gn((e=>e.circuitNamesByCircuitId)),Yn=Gn(((e,t)=>e.circuitNamesByCircuitId[t]));function Xn(e){return"ic-"+e}function Qn(e){return e&&e.startsWith("ic-")?e.substr(3):null}function _n(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}function er(e,t){return{x:"input"===t?0:100,y:50*e+25}}const tr=[(0,fn.P1)(Pn,kn,Kn,qn,((e,t,n,i)=>Object.keys(e).filter((e=>e!==m)).map((o=>{var s,c;const l=null!==(s=e[o])&&void 0!==s?s:[],a=null!==(c=i[o])&&void 0!==c?c:o.substr(0,5);let u=l.filter((e=>t[e].startsWith("pin-")));u=Gt()(u,(e=>n[e].y),(e=>n[e].x));const d={},m=[],p=[];for(const e of u){const n=t[e];"pin-input"===n?(d[e]=Object.assign({direction:"input"},er(m.length,"input")),m.push(e)):"pin-output"===n&&(d[e]=Object.assign({direction:"output"},er(p.length,"output")),p.push(e))}const y={circuitId:o,inputPinIds:m,outputPinIds:p};return{type:Xn(o),category:"integrated-circuit",displayName:a,elementProduction:{type:"circuit",circuitId:o},visual:{hitRect:(0,b.NG)(Un()(_n(m.length,p.length))),trayComponent:()=>r.createElement("g",{stroke:"black",strokeWidth:1},r.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),r.createElement("line",{x1:10,y1:15,x2:5,y2:15}),r.createElement("line",{x1:40,y1:15,x2:45,y2:15}),r.createElement("line",{x1:10,y1:35,x2:5,y2:35}),r.createElement("line",{x1:40,y1:35,x2:45,y2:35})),component:"integrated-circuit",componentProps:y},pins:d}})))),n(6319).Z,n(8891).Z,n(4409).Z,n(3013).Z,n(2050).Z,n(6583).Z,n(6524).Z,n(3183).Z,n(1454).Z,n(3532).Z,n(8112).Z,n(5148).Z,n(2380).Z,n(1615).Z];let nr=[];const rr=e=>{const t=Rn()(tr,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,le(n)}(t,e)));return t.every(((e,t)=>e===nr[t]))?nr:(nr=t,t)},ir=(0,fn.P1)(rr,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),or=(e,t)=>{var n;const r=rr(e);return null!==(n=An()(r,(e=>e.type===t)))&&void 0!==n?n:null};function sr(e,t){return e.elementId===t.elementId&&e.pinId===t.pinId}function cr(e){return"output"===e.type}function lr(e){return"input"===e.type}function ar(e){return"input-output"===e.type}function ur(e){return"input"===e.type||"input-output"===e.type}const dr=(0,fn.P1)(ir,Kn,kn,((e,t,n)=>{var r;const i={},o=Object.keys(n);for(const s of o){const o={};i[s]=o;const c=null!==(r=t[s])&&void 0!==r?r:b.Ds,l=n[s];if(!l)continue;const a=e[l];if(!a)continue;const u=Object.keys(a.pins);for(const e of u){const t=a.pins[e],n=(0,b.ZO)(c,t);o[e]=n}}return i})),mr=(e,t,n)=>{var r;const i=dr(e)[t];return i&&null!==(r=i[n])&&void 0!==r?r:b.Ds};let pr=null;var yr=n(2628),fr=n.n(yr),gr=n(4908),Ir=n.n(gr);function hr(e,t){const n=Rn()(t,(e=>[e,"subElementIds"]));n.pop();const r=N()(e,n);if(!r)return null;const{evolverId:i}=r;return null!=i?i:null}const vr=vn((0,fn.P1)((e=>e.wiresByWireId),(e=>e.wireSegmentsById),((e,t)=>{const n=[],r=Object.keys(e);for(const i of r){const{wireSegmentIds:r}=e[i],o=r.map((e=>t[e]));for(const e of o)if(ar(e))n.push({inputPin:e.inputPin,outputPin:e.outputPin});else if(cr(e)){const t=o.filter(lr).filter((({lineId:t})=>t===e.lineId));for(const r of t)n.push({outputPin:e.outputPin,inputPin:r.inputPin})}}return n})));var Er=n(3857),br=n.n(Er);const wr=Object.freeze({evolversById:{},evolverIdsByElementId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function Or(e,t,n=[]){var r;if(-1!==n.indexOf(e))throw new Error(`Circuit graph encountered loop on ${n.join(" => ")} while trying to add circuit ${e}`);n=[...n,e];const i={},o={},s={},c={},l=[],a=[],u={},d={},m=null!==(r=t.elementIdsByCircuitId[e])&&void 0!==r?r:[];for(const e of m){const r=t.elementTypesByElementId[e];if(!r)continue;if("pin-input"===r){l.push(e),s[e]=[];continue}if("pin-output"===r){a.push(e);continue}const c=jr(e,t,n);br()(i,c.evolversById),br()(o,c.evolverIdsByElementId),u[e]=c.inputElementPinsByCircuitPinId,d[e]=c.outputElementPinsByCircuitPinId}for(const{inputPin:e,outputPin:n}of t.connections){if(-1===m.indexOf(e.elementId)||-1===m.indexOf(n.elementId))continue;const t=N()(d,[n.elementId,n.pinId]),r=N()(u,[e.elementId,e.pinId]);if(-1!==l.indexOf(n.elementId)&&r){s[n.elementId].push(...r);continue}if(-1!==a.indexOf(e.elementId)&&t){c[e.elementId]=t;continue}if(!t||!r)continue;const o=i[t.evolverId];let p=o.outputsByPin[t.pinId];null==p&&(o.outputsByPin[t.pinId]=p=[]);for(const e of r)p.push({evolverId:e.evolverId,pinId:e.pinId}),i[e.evolverId].inputsByPin[e.pinId]={evolverId:t.evolverId,pinId:t.pinId}}return{evolversById:i,evolverIdsByElementId:o,inputElementPinsByCircuitPinId:s,outputElementPinsByCircuitPinId:c}}function jr(e,t,n){const r=t.elementTypesByElementId[e];if(!r)return wr;const i=t.elementDefsByElementType[r];if(!i||!i.elementProduction)return wr;const o="string"==typeof(s=i.elementProduction)?{type:"element",evolverType:s}:s;var s;switch(o.type){case"element":return function(e,t,{elementTypesByElementId:n,elementDefsByElementType:r}){const i=r[n[e]];if(!i)return wr;const o={},s={},c=(0,De.Z)();o[c]={evolverType:t.evolverType,inputsByPin:{},outputsByPin:{}},s[e]={evolverId:c,subElementIds:{}};const l={},a={};for(const e of Object.keys(i.pins)){const{direction:t}=i.pins[e];"input"===t?l[e]=[{pinId:e,evolverId:c}]:"output"===t&&(a[e]={pinId:e,evolverId:c})}return{evolversById:o,evolverIdsByElementId:s,inputElementPinsByCircuitPinId:l,outputElementPinsByCircuitPinId:a}}(e,o,t);case"circuit":return function(e,t,n,r){const i=Or(t.circuitId,n,r);return Object.assign(Object.assign({},i),{evolverIdsByElementId:{[e]:{evolverId:null,subElementIds:i.evolverIdsByElementId}}})}(e,o,t,n);default:throw new Error("Unsupported production type "+o.type)}}const kr=Object.freeze({evolversById:{},evolverIdsByElementId:{}}),xr=(0,fn.P1)(Pn,kn,vr,ir,((e,t,n,r)=>{try{return Or(m,{elementIdsByCircuitId:e,elementTypesByElementId:t,connections:n,elementDefsByElementType:r})}catch(e){return console.error(e),kr}})),Cr=(e,t)=>{const{evolverIdsByElementId:n}=xr(e),r=e.services.simulator.evolverOutputValuesByEvolverId,i=hr(n,t);if(i)return r[i]},Br=vn((e=>e.wiresByWireId)),Pr=(0,fn.P1)(Br,(e=>Object.keys(e))),Nr=vn((e=>e.wireSegmentsById)),Sr=(vn((0,fn.P1)(Nr.local,(e=>fr()(e)))),vn(((e,t)=>{const n=e.wiresByWireId[t];return n?n.wireSegmentIds:de()}))),Mr=vn(((e,t)=>{for(const n of Object.keys(e.wiresByWireId)){const{wireSegmentIds:r}=e.wiresByWireId[n];if(-1!==r.indexOf(t))return n}return null})),Wr=vn(((e,t)=>{const n=e.wiresByWireId[t];return n?n.wireJointIds:de()})),zr=vn(((e,t)=>{const n=Tr.local(e,t);if(!n)return null;for(const t of Object.keys(e.wireIdsByCircuitId))if(-1!==e.wireIdsByCircuitId[t].indexOf(n))return t;return null})),Tr=vn(((e,t)=>{for(const n of Object.keys(e.wiresByWireId)){const{wireJointIds:r}=e.wiresByWireId[n];if(-1!==r.indexOf(t))return n}return null})),Lr=vn(((e,t)=>{const n=e.wireSegmentsById[t];return n?n.type:null})),Rr=vn(((e,t)=>{const n=Sr.local(e,t),r=Rn()(n,(t=>bn(Dr.local(e,t))));return Ir()(r)})),Dr=vn(((e,t)=>{var n;return null!==(n=e.wireSegmentsById[t])&&void 0!==n?n:null})),Ar=vn(((e,t,n)=>{const r=Object.keys(e.wiresByWireId);for(const i of r){const r=e.wiresByWireId[i];for(const i of r.wireSegmentIds){const r=e.wireSegmentsById[i];if(ur(r)&&sr(r.inputPin,{elementId:t,pinId:n}))return i;if(cr(r)&&sr(r.outputPin,{elementId:t,pinId:n}))return i}}return null})),Jr=vn(((e,t,n)=>{const r=Ar.local(e,t,n);return!!r&&ur(e.wireSegmentsById[r])})),Ur=vn(((e,t)=>{var n;return null!==(n=e.wireIdsByCircuitId[t])&&void 0!==n?n:de()})),Zr=vn(((e,t)=>{for(const n of Object.keys(e.wireIdsByCircuitId))if(-1!==e.wireIdsByCircuitId[n].indexOf(t))return n;return null})),Fr=vn(((e,t)=>{const n=e.wireIdsByCircuitId[t];return Rn()(n,(t=>e.wiresByWireId[t].wireJointIds))})),Kr=vn(((e,t)=>{const n=e.wireIdsByCircuitId[t];return Rn()(n,(t=>e.wiresByWireId[t].wireSegmentIds))})),$r=vn(((e,t)=>{const n=Tr.local(e,t);if(!n)return de();const r=e.wiresByWireId[n],i=[];for(const n of r.wireSegmentIds)-1!==bn(e.wireSegmentsById[n]).indexOf(t)&&i.push(n);return i})),Hr=(0,fn.P1)((e=>e.services.circuitGraph),(e=>{const t={};for(const n of Object.keys(e.wiresByWireId))Gr(n,t,e);return t}));function Gr(e,t,n){const r=n.wiresByWireId[e];if(r)for(const i of r.wireSegmentIds){const r=n.wireSegmentsById[i];ar(r)?qr(t,i,r.outputPin):cr(r)&&Vr(e,i,null,r,t,n)}}function Vr(e,t,n,r,i,o){const s=o.wireSegmentsById[t];if(lr(s))return s.lineId===r.lineId&&(qr(i,t,r.outputPin),!0);const c=Mt()(bn(s).filter((e=>e!==n)));if(!c)return!1;const l=En(o,e,c).filter((e=>e!==t));let a=!1;for(const t of l)Vr(e,t,c,r,i,o)&&(a=!0);return a&&qr(i,t,r.outputPin),a}function qr(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}const Yr=(e,t,n)=>{const r=Hr(e)[n];return!!r&&r.some((n=>function(e,t,n){const r=Xr(e,t,n);return!!r&&((e,t,n)=>{var r;const i=Cr(e,t);return!!i&&null!==(r=i[n])&&void 0!==r&&r})(e,[...r.elementIdPath,r.elementPin.elementId],r.elementPin.pinId)}(e,t,n)))};function Xr(e,t,n){const r=Bn(e,n.elementId);if("pin-input"===r){const r=t[t.length-1],i=t.slice(0,t.length-1),o=Qr(e,{elementId:r,pinId:n.elementId});return o?Xr(e,i,o):null}if(null!=Qn(r)){const r=[...t,n.elementId],i=Qr(e,{elementId:n.pinId,pinId:"IN"});return i?Xr(e,r,i):null}return{elementIdPath:t,elementPin:n}}function Qr(e,t){const{wiresByWireId:n,wireSegmentsById:r}=e.services.circuitGraph,i=Object.keys(n);for(const e of i){const i=n[e];for(const e of i.wireSegmentIds){const n=r[e];if(ur(n)&&sr(n.inputPin,t)){if("input-output"===n.type)return n.outputPin;{const e=An()(i.wireSegmentIds.map((e=>r[e])).filter(cr),(e=>n.lineId===e.lineId));return e?e.outputPin:null}}}}return null}const _r=vn((e=>e.wireJointPositionsByJointId)),ei=vn(((e,t)=>{var n;return null!==(n=e.wireJointPositionsByJointId[t])&&void 0!==n?n:b.Ds})),ti=(e,t)=>{const n=Dr(e,t);switch(n.type){case"output":case"input-output":{const{outputPin:t}=n;return mr(e,t.elementId,t.pinId)}case"input":{const{jointId:t}=n;return ei(e,t)}case"bridge":{const{jointAId:t}=n;return ei(e,t)}}},ni=(e,t)=>{const n=Dr(e,t);switch(n.type){case"output":{const{jointId:t}=n;return ei(e,t)}case"input":case"input-output":{const{inputPin:t}=n;return mr(e,t.elementId,t.pinId)}case"bridge":{const{jointBId:t}=n;return ei(e,t)}}},ri=(e,t)=>{const n=e.services.circuitEditorDrag;if("wire"!==n.dragMode)return null;const{dragStartEditorId:r,dragModifierKeys:i}=n,o=!i.ctrlMetaKey,s=Dt(e,r);if(!s)return null;const c=((e,t,n)=>{var r;const i=dr(e),o=Sn(e,n);if(!o)return null;for(const e of o){const n=null!==(r=i[e])&&void 0!==r?r:b.Ds,o=Object.keys(n);for(const r of o){const i=n[r],o=(0,b.sj)(t,i);if((0,b.VE)(o)>6)continue;const s={elementId:e,pinId:r};return pr&&sr(s,pr)||(pr=s),pr}}return null})(e,t,s);if(c)return{type:"pin",pin:c};const l=function(e,t,n){const r=Ur(e,t);for(const t of r){const r=Wr(e,t);for(const t of r){const r=ei(e,t);if(!((0,b.VE)((0,b.sj)(n,r))>4))return{type:"joint",jointId:t}}}return null}(e,s,t);if(l)return l;const a=function(e,t,n,r){const i=mn(e),o=Ur(e,t);for(const t of o){const o=Sr(e,t);for(const t of o){const o=ti(e,t),s=ni(e,t),c=(0,b.Lv)(o,s,n,{axialGridSnap:r?i:void 0});if(c)return{type:"segment",segmentId:t,segmentInsertLength:c.interceptLineLengthDistance}}}return null}(e,s,t,o);if(a)return a;const u=mn(e);if(i.shiftKey)o&&(t=yn(e,t));else{const n=li(e);if(n){const e=(0,b.Fv)((0,b.sj)(t,n));t=Math.abs(e.x)>=.5?{x:o?(0,b.n$)(t.x,u):t.x,y:n.y}:{x:n.x,y:o?(0,b.n$)(t.y,u):t.y}}}return{type:"floating",point:t}},ii=e=>{const t=e.services.circuitEditorDrag;if("wire"!==t.dragMode)return null;const{dragEnd:n}=t;return n?ri(e,n):null};let oi=null;const si=e=>{const t=ii(e);if(!t||"pin"!==t.type)return null;const n=t.pin;return oi&&sr(oi,n)||(oi=n),oi};function ci(e,t){switch(t.type){case"floating":return t.point;case"pin":return mr(e,t.pin.elementId,t.pin.pinId);case"segment":{const{segmentId:n,segmentInsertLength:r}=t,i=ti(e,n),o=ni(e,n),s=(0,b.Fv)((0,b.sj)(o,i));return(0,b.ZO)(i,(0,b.bA)(s,r))}case"joint":return ei(e,t.jointId)}return null}const li=e=>{const t=e.services.circuitEditorDrag;return"wire"!==t.dragMode?null:ci(e,t.dragStartTarget)};let ai=b.Ds;const ui=e=>{const t=ii(e);if(!t)return null;const n=ci(e,t);return n?((0,b.kg)(n,ai)||(ai=n),ai):null},di=e=>{const t=e.services.circuitEditorDrag;if("wire-segment-new-joint"!==t.dragMode)return null;let n=t.dragEnd;return n?(t.dragModifierKeys.ctrlMetaKey||(n=yn(e,n)),n):null},mi=e=>{const t=e.services.circuitEditorDrag;if("wire-segment-new-joint"!==t.dragMode)return de();const{dragWireSegmentId:n}=t,r=di(e);if(!n||!r)return de();const i=ti(e,n),o=ni(e,n);return i&&o?[[i,r],[r,o]]:de()},pi="@field/drag/start/element",yi="@select/elements",fi=(e,t="set")=>({type:yi,payload:{elementIds:Array.isArray(e)?e:[e],mode:t}}),gi=Wt("selection"),Ii=zt("selection"),hi=Ii((e=>e.selectedElementIds)),vi=Ii((e=>e.selectedWireJointIds)),Ei=Ii(((e,t)=>-1!==e.selectedElementIds.indexOf(t))),bi=Ii(((e,t)=>-1!==e.selectedWireJointIds.indexOf(t))),wi=Ii(((e,t)=>-1!==e.selectedWireSegmentIds.indexOf(t)));(0,fn.P1)(On,hi,((e,t)=>Nt()(e,t)));const Oi="@circuit-editor/drag/start/select",ji=Xt(((e,t)=>{if(!function(e){return e.type===Oi}(t))return e;const{x:n,y:r,modifierKeys:i,editorId:o}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragStart:{x:n,y:r},dragStartEditorId:o,dragModifierKeys:i,dragEnd:null,dragEndEditorId:null})})),ki="@circuit-editor/drag/start/wire-joint",xi="@select/wire-joints",Ci=(e,t="set")=>({type:xi,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}}),Bi="@circuit-editor/drag/start/wire-segment",Pi=Xt(((e,t,n)=>{if(!function(e){return e.type===Bi}(t))return e;const{x:r,y:i,editorId:o,modifierKeys:s,wireId:c,wireSegmentId:l}=t.payload;if(s.ctrlMetaKey){const e=ti(n,l),t=ni(n,l),c=(0,b.Fv)((0,b.sj)(t,e)),a=(0,b.sj)({x:r,y:i},e);return{dragMode:"wire",dragStart:{x:r,y:i},dragStartEditorId:o,dragModifierKeys:s,dragStartTarget:{type:"segment",segmentId:l,segmentInsertLength:(0,b.Ih)(a,c)},dragEnd:null,dragEndEditorId:null}}return{dragMode:"wire-segment-new-joint",dragStart:{x:r,y:i},dragStartEditorId:o,dragModifierKeys:s,dragWireId:c,dragWireSegmentId:l,dragEnd:null,dragEndEditorId:null}})),Ni="@circuit-editor/drag/start/wire",Si=(e,t,n,r)=>({type:Ni,payload:Object.assign(Object.assign({},e),{target:t,modifierKeys:n,editorId:r})}),Mi=Xt(((e,t)=>{if(!function(e){return e.type===Ni}(t))return e;const{x:n,y:r,target:i,editorId:o,modifierKeys:s}=t.payload;return{dragMode:"wire",dragStartEditorId:o,dragStart:{x:n,y:r},dragStartTarget:i,dragModifierKeys:s,dragEndEditorId:null,dragEnd:null}})),Wi="@circuit-editor/mouse/leave",zi=Vt(_t,tn,(function(e=Me,t){return function(e){return e.type===it}(t)?e=M(e=function(e,t){const{dragMode:n}=e.services.circuitEditorDrag;switch(n){case"select":return function(e,t){const n=e.services.circuitEditorDrag;if("select"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const{dragModifierKeys:o,dragStart:s}=n,{x:c,y:l}=t.payload,a=Dt(e,r);if(!a)return e;const u=cn(o),d=(0,b.Qu)(s,{x:c,y:l});return Ac(e,((e,t,n="set")=>({type:un,payload:{region:e,circuitId:t,mode:n}}))(d,a,u))}(e,t);case"move":return function(e,t){const n=e.services.circuitEditorDrag;if("move"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const{dragStart:o,dragModifierKeys:s}=n,{x:c,y:l}=t.payload;let a=(0,b.sj)({x:c,y:l},o);const u=e.services.selection.selectedElementIds.length>0;return s.ctrlMetaKey||(a=u?pn(e,a):yn(e,a)),Ac(e,((e,t,n={})=>{var r;return{type:tt,payload:{offsetX:e,offsetY:t,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}})(a.x,a.y))}(e,t);case"wire":return function(e,t){const n=e.services.circuitEditorDrag;if("wire"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const o=Dt(e,r);if(!o)return e;const{dragStartTarget:s}=n,{x:c,y:l}=t.payload,a=ri(e,{x:c,y:l});return a?Ac(e,It(o,s,a)):e}(e,t);case"wire-segment-new-joint":return function(e,t){const n=e.services.circuitEditorDrag;if("wire-segment-new-joint"!==n.dragMode)return e;const{dragStartEditorId:r,dragEndEditorId:i}=n;if(r!=i)return e;const{dragWireId:o,dragWireSegmentId:s}=n,{x:c,y:l}=t.payload;return Ac(e,{type:jt,payload:{wireId:o,wireSegmentId:s,jointPos:{x:c,y:l}}})}(e,t)}return e}(e,t),"services","circuitEditorDrag",d):e}),(function(e=Me,t){if(!function(e){return e.type===pi}(t))return e;const{elementId:n,x:r,y:i,modifierKeys:o,editorId:s}=t.payload;if(e=M(e,"services","circuitEditorDrag",(()=>({dragMode:"move",dragStart:{x:r,y:i},dragStartEditorId:s,dragModifierKeys:o,dragEnd:null,dragEndEditorId:null}))),!Ei(e,n)){const t=cn(o);e=Ac(e,fi(n,t))}return e}),ji,((e=Me,t)=>{if(!function(e){return e.type===ki}(t))return e;const{x:n,y:r,editorId:i,wireId:o,jointId:s,modifierKeys:c}=t.payload;if(c.ctrlMetaKey)e=M(e,"services","circuitEditorDrag",(()=>({dragMode:"wire",dragStart:{x:n,y:r},dragStartEditorId:i,dragStartTarget:{type:"joint",wireId:o,jointId:s},dragModifierKeys:c,dragEnd:null,dragEndEditorId:null})));else if(e=M(e,"services","circuitEditorDrag",(()=>({dragMode:"move",dragStart:{x:n,y:r},dragStartEditorId:i,dragModifierKeys:c,dragEnd:null,dragEndEditorId:null}))),!bi(e,s)){const t=cn(c);e=Ac(e,Ci(s,t))}return e}),Pi,Mi,Xt(((e,t)=>function(e){return e.type===Wi}(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e))),Ti=Tt(((e,t)=>{if(!Fe(t))return e;const{circuitId:n}=t.payload,r=Object.keys(e.circucitEditorsById).filter((t=>e.circucitEditorsById[t].circuitId!==n));let i=e.activeEditorId;return i&&-1!==r.indexOf(i)||(i=null),Object.assign(Object.assign({},e),{circucitEditorsById:Nt()(e.circucitEditorsById,r),activeEditorId:i})})),Li="@circuit-editor/receive-focus",Ri=Tt(((e,t)=>{if(!function(e){return e.type===Li}(t))return e;const{editorId:n}=t.payload;return-1===Object.keys(e.circucitEditorsById).indexOf(n)?e:Object.assign(Object.assign({},e),{activeEditorId:n})})),Di="@view/circuit",Ai=(e,t=null,n={})=>({type:Di,payload:{circuitId:e,elementIdPath:t,newWindowId:n.newWindow?(0,De.Z)():null}});function Ji(e){return e.type===Di}const Ui=Vt(Ti,Ri,Tt(((e,t,n)=>{if(!Ji(t))return e;const{circuitId:r,elementIdPath:i,newWindowId:o}=t.payload;if(-1===Vn(n).indexOf(r))return e;let s=o;return s||(s=function(e){var t;return e.activeEditorId?e.activeEditorId:null!==(t=Mt()(Object.keys(e.circucitEditorsById)))&&void 0!==t?t:null}(e)),s?Object.assign(Object.assign({},e),{circucitEditorsById:Object.assign(Object.assign({},e.circucitEditorsById),{[s]:{circuitId:r,elementIdPath:null!=i?i:[]}}),activeEditorId:s}):e})));var Zi=n(5161),Fi=n.n(Zi),Ki=n(998),$i=n.n(Ki),Hi=n(7287),Gi=n.n(Hi);const Vi="@clipboard/copy-elements",qi=(e,t)=>{var n;const r=null===(n=e.services.circuitGraph.elementsById[t])||void 0===n?void 0:n.elementType;return r?or(e,r):null},Yi=(e,t,n)=>{const r=qi(e,t);if(!r)return null;const i=r.pins[n];return i?i.direction:null},Xi=vn(((e,t,n)=>Qn(Bn.local(e,t))?zn.local(e,n):n)),Qi=Wt("clipboard"),_i=zt("clipboard"),eo=Vt(Qi(((e,t,n)=>{if(!function(e){return e.type===Vi}(t))return e;const{elementIds:r}=t.payload;if(0===r.length)return e;const i=Kn(n),o=Gi()(r,Fi()(r,(()=>(0,De.Z)()))),s=i[r[0]],c=r.map((e=>{const t=xn(n,e),c=((e,t)=>{const n=vr(e),r=qi(e,t);if(!r)return{};let i=[];i=Object.keys(r.pins).filter((e=>"output"===r.pins[e].direction));const o=n.filter((e=>e.outputPin.elementId===t)),s={};for(const e of i)s[e]=[];for(const e of o){const{outputPin:t,inputPin:n}=e;s[t.pinId].push(n)}return s})(n,e);return{id:o[e],elementType:t.elementType,offset:(0,b.sj)(i[e],s),outputs:In()(c,(e=>e.filter((e=>{return t=e.elementId,-1!==$i()(r,(e=>e===t));var t})).map((e=>({pin:{elementId:o[e.elementId],pinId:e.pinId}})))))}}));return Object.assign(Object.assign({},e),{clipboardElements:c,clipboardPasteOrigin:s})})),(function(e=Me,t){if(!function(e){return e.type===nt}(t))return e;const n=Ut(e);if(!n)return e;const{clipboardElements:r,clipboardPasteOrigin:i}=e.services.clipboard;if(!r.length)return e;let{pastePosition:o}=t.payload;const s=dn(e);o=o?(0,b.R9)(o,s):(0,b.ZO)(i,{x:s,y:s});const c=Gi()(r.map((e=>e.id)),Fi()(r,(()=>(0,De.Z)())));for(const t of r){const{id:r,elementType:i,offset:s}=t,l=(0,b.ZO)(o,s);e=Ac(e,He(i,n,l,{elementId:c[r]}))}for(const t of r){const{id:r,outputs:i}=t,o=c[r];for(const t of Object.keys(i))for(const r of i[t]){const{pin:{elementId:i,pinId:s}}=r,l=c[i];e=Ac(e,It(n,{type:"pin",pin:{elementId:o,pinId:t}},{type:"pin",pin:{elementId:l,pinId:s}}))}}return e=M(e,"services","clipboard","clipboardPasteOrigin",o),Ac(e,fi(fr()(c)))})),to="@dialog/response/accept",no=e=>({type:to,payload:{result:e}}),ro=Wt("dialog"),io=zt("dialog"),oo=ro(((e,t)=>function(e){return e.type===to}(t)?O:e)),so="@dialog/response/cancel",co=()=>({type:so}),lo=ro(((e,t)=>function(e){return e.type===so}(t)?O:e)),ao="@dialog/show",uo=Vt(oo,lo,ro(((e,t)=>{if(!function(e){return e.type===ao}(t))return e;const{dialogType:n,data:r}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:r})}))),mo=hn(((e,t)=>{if(!Ue(t))return e;const{circuitId:n}=t.payload;return Object.assign(Object.assign({},e),{elementIdsByCircuitId:Object.assign(Object.assign({},e.elementIdsByCircuitId),{[n]:[]}),wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[n]:[]})})}));var po=n(4721),yo=n.n(po);function fo(e,t){const n=e.wiresByWireId[t];if(!n)return e;const{wireSegmentIds:r,wireJointIds:i}=n;return Object.assign(Object.assign({},e),{wireIdsByCircuitId:In()(e.wireIdsByCircuitId,(e=>e.filter((e=>e!==t)))),wireSegmentsById:Nt()(e.wireSegmentsById,sn()(Object.keys(e.wireSegmentsById),r)),wiresByWireId:Nt()(e.wiresByWireId,Object.keys(e.wiresByWireId).filter((e=>e!==t))),wireJointPositionsByJointId:Nt()(e.wireJointPositionsByJointId,sn()(Object.keys(e.wireJointPositionsByJointId),i))})}class go extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype)}}function Io(e,t,n,r){return Object.assign(Object.assign({},e),{wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[t]:[...e.wireIdsByCircuitId[t],n]}),wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[n]:null!=r?r:{wireSegmentIds:[],wireJointIds:[]}})})}function ho(e,t){const n=Tr.local(e,t);if(!n)throw new go("Wire for joint id not found.");const r=e.wiresByWireId[n],i=Object.assign(Object.assign({},e.wiresByWireId),{[n]:Object.assign(Object.assign({},r),{wireJointIds:[...r.wireJointIds.filter((e=>e!==t))]})}),o=Nt()(e.wireJointPositionsByJointId,Object.keys(e.wireJointPositionsByJointId).filter((e=>e!==t)));return Object.assign(Object.assign({},e),{wiresByWireId:i,wireJointPositionsByJointId:o})}function vo(e,t,{deleteWireIfLastSegment:n=!0,removeOrphanJoints:r=!0}={}){const i=Mr.local(e,t);if(!i)throw new go("Wire for segment not found.");const o=e.wireSegmentsById[t];if(!o)throw new go("Segment not found");const s=e.wiresByWireId[i].wireSegmentIds.filter((e=>e!==t));if(n&&0===s.length)return fo(e,i);if(r){const t=bn(o);for(const n of t)s.every((t=>-1===bn(e.wireSegmentsById[t]).indexOf(n)))&&(e=ho(e,n))}return Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[i]:Object.assign(Object.assign({},e.wiresByWireId[i]),{wireSegmentIds:s})}),wireSegmentsById:Nt()(e.wireSegmentsById,Object.keys(e.wireSegmentsById).filter((e=>e!==t)))})}function Eo(e,t){const n=Mr.local(e,t);if(!n)return e;const r=e.wiresByWireId[n];if(-1===r.wireSegmentIds.indexOf(t))return e;const i=e.wireSegmentsById[t];if(!i)return e;if("input-output"===i.type||1===r.wireSegmentIds.length)return fo(e,n);if("bridge"===i.type){const r=(e=vo(e,t,{removeOrphanJoints:!0})).wiresByWireId[n],{jointAId:o,jointBId:s}=i;return r&&-1!==r.wireJointIds.indexOf(o)&&-1!==r.wireJointIds.indexOf(s)&&(e=function(e,t){const n=Tr.local(e,t);if(!n)throw new go("Wire id for joint not found.");const r=Zr.local(e,n);if(!r)throw new go("Circuit id for joint not found.");const{jointIds:i,segmentIds:o}=function(e,t,n){const r=new Set,i=new Set;function o(t){if(i.has(t))return;const n=e.wireSegmentsById[t];n&&(i.add(t),bn(n).forEach(s))}function s(n){r.has(n)||(r.add(n),En(e,t,n).forEach(o))}return s(n),{jointIds:Array.from(r),segmentIds:Array.from(i)}}(e,n,t);if(0===i.length||0===o.length)return e;const s=e.wiresByWireId[n],c=sn()(s.wireSegmentIds,o),l=sn()(s.wireJointIds,i);if(0===l.length||0===c.length)return e;e=Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[n]:Object.assign(Object.assign({},s),{wireSegmentIds:c,wireJointIds:l})})});const a={};return Io(e=Object.assign(Object.assign({},e),{wireSegmentsById:In()(e.wireSegmentsById,((e,t)=>{return-1===o.indexOf(t)?e:cr(e)||lr(e)?Object.assign(Object.assign({},e),{lineId:(n=e.lineId,a[n]||(a[n]=(0,De.Z)()),a[n])}):e;var n}))}),r,(0,De.Z)(),{wireJointIds:i,wireSegmentIds:o})}(e,i.jointAId)),e}return vo(e,t)}function bo(e,t,n){const r=sn()(Object.keys(e.elementsById),t),i=In()(e.elementIdsByCircuitId,(e=>sn()(e,t)));e=Object.assign(Object.assign({},e),{elementsById:Nt()(e.elementsById,r),elementIdsByCircuitId:i});const o=Rn()(t,(e=>((e,t)=>{const n=Bn(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const r=Mn(e,t);if(!r)return[];const i=Xn(r);return Cn(e,i).map((e=>({elementId:e,pinId:t})))})(n,e))),s=Object.keys(e.wireSegmentsById).filter((n=>{const r=e.wireSegmentsById[n];return function(e){switch(e.type){case"input-output":return yo()(t,e.inputPin.elementId)||yo()(t,e.outputPin.elementId);case"input":return yo()(t,e.inputPin.elementId);case"output":return yo()(t,e.outputPin.elementId)}return!1}(r)||function(e){switch(e.type){case"input-output":return Boolean(An()(o,(t=>sr(t,e.inputPin)))||An()(o,(t=>sr(t,e.outputPin))));case"input":return Boolean(An()(o,(t=>sr(t,e.inputPin))));case"output":return Boolean(An()(o,(t=>sr(t,e.outputPin))))}return!1}(r)}));return e=s.reduce(((e,t)=>Eo(e,t)),e)}const wo=hn(((e,t,n)=>{var r;if(!Fe(t))return e;const{circuitId:i}=t.payload,o=Object.keys(e.elementIdsByCircuitId).filter((e=>e!==i)),s=null!==(r=e.elementIdsByCircuitId[i])&&void 0!==r?r:[],c=Xn(i),l=[...s,...Object.keys(e.elementsById).filter((t=>e.elementsById[t].elementType===c))];return e=bo(e,l,n),Object.assign(Object.assign({},e),{elementIdsByCircuitId:Nt()(e.elementIdsByCircuitId,o),wireIdsByCircuitId:Nt()(e.wireIdsByCircuitId,o)})}));function Oo(e,t){return t.weight=e,t}function jo(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}const ko=Oo(-10,hn(((e,t)=>{if(!Ge(t))return e;const{elementId:n,elementType:r,elementName:i,circuitId:o}=t.payload;return Object.assign(Object.assign({},e),{elementsById:Object.assign(Object.assign({},e.elementsById),{[n]:{elementType:r,elementName:null!=i?i:null}}),elementIdsByCircuitId:Object.assign(Object.assign({},e.elementIdsByCircuitId),{[o]:[...e.elementIdsByCircuitId[o],n]})})}))),xo=hn(((e,t,n)=>{if(!qe(t))return e;const{elementIds:r}=t.payload;return bo(e,r,n)})),Co=hn(((e,t)=>{if(!function(e){return e.type===Ye}(t))return e;const{elementId:n}=t.payload;if(!e.elementsById[n])return e;let r=t.payload.elementName;return r||""!==r.trim()||(r=null),Object.assign(Object.assign({},e),{elementsById:Object.assign(Object.assign({},e.elementsById),{[n]:Object.assign(Object.assign({},e.elementsById[n]),{elementName:r})})})})),Bo=hn(((e,t)=>pt(t)?I:e));function Po(e,t,n,r){return Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[t]:Object.assign(Object.assign({},e.wiresByWireId[t]),{wireSegmentIds:[...e.wiresByWireId[t].wireSegmentIds,n]})}),wireSegmentsById:Object.assign(Object.assign({},e.wireSegmentsById),{[n]:r})})}function No(e,t,n,r){return Object.assign(Object.assign({},e),{wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[t]:Object.assign(Object.assign({},e.wiresByWireId[t]),{wireJointIds:[...e.wiresByWireId[t].wireJointIds,n]})}),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),{[n]:r})})}function So(e,t,n){const r=e.wiresByWireId[t];if(!r)return e;const i=Object.assign({},e.wireSegmentsById);for(const t of r.wireSegmentIds){const r=e.wireSegmentsById[t];"input"!==r.type&&"output"!==r.type||(i[t]=Object.assign(Object.assign({},r),{lineId:n}))}return Object.assign(Object.assign({},e),{wireSegmentsById:i})}const Mo=hn(((e,t,n)=>{if(!function(e){return e.type===gt}(t))return e;const r=e,{circuitId:i,from:o,to:s}=t.payload,{state:c,jointId:l,pin:a,circuitId:u}=Wo(e,i,o,n);e=c;const{state:d,jointId:m,pin:p,circuitId:y}=Wo(e,i,s,n);if(e=d,!u||!y||u!==y)return r;if(a&&p){const t=function(e,t,n,r,i){const o=Yi(i,t.elementId,t.pinId),s=Yi(i,n.elementId,n.pinId);if(!o||!s||o===s)return null;const c="input"===o?t:n,l="input"===o?n:t;if(Jr(i,c.elementId,c.pinId))return null;const a=(0,De.Z)();return Po(e=Io(e,r,a),a,(0,De.Z)(),{type:"input-output",inputPin:c,outputPin:l})}(e,a,p,u,n);return null!=t?t:r}if(l&&m){const t=function(e,t,n){const r=Tr.local(e,t),i=Tr.local(e,n);if(!r||!i)return null;if(r!==i){const t=function(e,t,n){const r=Zr.local(e,t),i=Zr.local(e,n);if(!r||!i)throw new Error("Unable to determine circuit id for wire.");if(r!==i)throw new Error("Unable to merge wires in different circuits.");const o=e.wiresByWireId[t],s=e.wiresByWireId[n];if(!o||!s)throw new Error("Wire not found.");const[c,l]=wn(e,t),[a,u]=wn(e,n);if(l.length+u.length<=1&&c.length<=1&&a.length<=1){const r=(0,De.Z)();e=So(e,t,r),e=So(e,n,r)}const d=Object.keys(e.wiresByWireId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[r]:e.wireIdsByCircuitId[r].filter((e=>e!==n))}),wiresByWireId:Object.assign(Object.assign({},Nt()(e.wiresByWireId,d)),{[t]:Object.assign(Object.assign({},o),{wireSegmentIds:[...o.wireSegmentIds,...s.wireSegmentIds],wireJointIds:[...o.wireJointIds,...s.wireJointIds]})})})}(e,r,i);if(!t)return null;e=t}return Po(e,r,(0,De.Z)(),{type:"bridge",jointAId:t,jointBId:n})}(e,l,m);return null!=t?t:r}const f=null!=l?l:m,g=null!=a?a:p;if(f&&g){const t=function(e,t,n,r){const i=Tr.local(e,t);if(!i)return null;const o=Yi(r,n.elementId,n.pinId);if(!o)return null;const s=function(e,t,n,r){var i;const o=Yi(r,n.elementId,n.pinId),[s,c]=wn(e,t);return"output"===o&&c.length>0?(0,De.Z)():1===s.length&&0===c.length||0===s.length&&1===c.length||1===s.length&&1===c.length&&s[0]===c[0]?null!==(i=s[0])&&void 0!==i?i:c[0]:(0,De.Z)()}(e,i,n,r);let c;if("input"===o){if(Jr(r,n.elementId,n.pinId))return null;c={type:"input",inputPin:n,jointId:t,lineId:s}}else{if("output"!==o)throw new go("Unknown pin direction");c={type:"output",outputPin:n,jointId:t,lineId:s}}return Po(e,i,(0,De.Z)(),c)}(e,f,g,n);return null!=t?t:r}return r}));function Wo(e,t,n,r){switch(n.type){case"pin":return{state:e,jointId:null,pin:n.pin,circuitId:Mn.local(e,n.pin.elementId)};case"joint":return{state:e,jointId:n.jointId,pin:null,circuitId:zr.local(e,n.jointId)};case"floating":{const r=(0,De.Z)();e=Io(e,t,r);const i=(0,De.Z)();return{state:e=No(e,r,i,n.point),jointId:i,pin:null,circuitId:t}}case"segment":{const i=(0,De.Z)();return{state:e=function(e,t,n,r,i){const o=Mr.local(e,t);if(!o)throw new go("Wire segment parent wire not found.");const s=e.wireSegmentsById[t];if(!s)throw new go("Wire segment not found.");const c=ti(i,t),l=ni(i,t),a=(0,b.Fv)((0,b.sj)(l,c));e=No(e,o,r,(0,b.ZO)(c,(0,b.bA)(a,n)));const u=(0,De.Z)(),d=(0,De.Z)();let m,p;switch(s.type){case"bridge":m={type:"bridge",jointAId:s.jointAId,jointBId:r},p={type:"bridge",jointAId:r,jointBId:s.jointBId};break;case"input":case"output":m=Object.assign(Object.assign({},s),{jointId:r}),p={type:"bridge",jointAId:r,jointBId:s.jointId};break;case"input-output":{const e=(0,De.Z)();m={type:"output",outputPin:s.outputPin,jointId:r,lineId:e},p={type:"input",inputPin:s.inputPin,jointId:r,lineId:e}}break;default:throw new go("Unknown segment type.")}return e=Po(e=vo(e,t,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),o,u,m),Po(e,o,d,p)}(e,n.segmentId,n.segmentInsertLength,i,r),jointId:i,pin:null,circuitId:t}}}throw new go("Unknown wire connect target")}var zo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const To=hn(((e,t)=>{if(!function(e){return e.type===ht}(t))return e;const{wireId:n,circuitId:r,wireSegments:i,wireJoints:o}=t.payload,s={};for(const e of i){const{wireSegmentId:t}=e,n=zo(e,["wireSegmentId"]);s[t]=n}const c={};for(const e of o){const{jointId:t}=e,n=zo(e,["jointId"]);c[t]=n}return Object.assign(Object.assign({},e),{wireIdsByCircuitId:Object.assign(Object.assign({},e.wireIdsByCircuitId),{[r]:[...e.wireIdsByCircuitId[r],n]}),wiresByWireId:Object.assign(Object.assign({},e.wiresByWireId),{[n]:{wireSegmentIds:Object.keys(s),wireJointIds:Object.keys(c)}}),wireSegmentsById:Object.assign(Object.assign({},e.wireSegmentsById),s),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),c)})})),Lo=hn(((e,t)=>{if(!function(e){return e.type===jt}(t))return e;const{wireId:n,wireSegmentId:r,jointPos:i}=t.payload;if(!e.wiresByWireId[n])return e;const o=e.wireSegmentsById[r];if(!o)return e;const s=(0,De.Z)();let c,l;switch(o.type){case"bridge":c={type:"bridge",jointAId:o.jointAId,jointBId:s},l={type:"bridge",jointAId:s,jointBId:o.jointBId};break;case"input":case"output":c=Object.assign(Object.assign({},o),{jointId:s}),l={type:"bridge",jointAId:s,jointBId:o.jointId};break;case"input-output":{const e=(0,De.Z)();c={type:"output",outputPin:o.outputPin,jointId:s,lineId:e},l={type:"input",inputPin:o.inputPin,jointId:s,lineId:e}}break;default:return e}return e=Po(e=vo(e=No(e,n,s,i),r,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),n,(0,De.Z)(),c),Po(e,n,(0,De.Z)(),l)}));const Ro=hn(((e,t)=>{if(!Ot(t))return e;const{jointIds:n}=t.payload;return n.reduce(((e,t)=>{try{return function(e,t){const n=Tr.local(e,t);if(!n)throw new go("Wire for joint not found");const r=En(e,n,t);if(2===r.length)try{return function(e,t,n,r){const i=Mr.local(e,t),o=Mr.local(e,n);if(!i||!o)throw new go("Wire for segment not found.");if(i!==o)throw new go("Merging segments from different wires is not supported.");const s=e.wireSegmentsById[t],c=e.wireSegmentsById[n];if(!s||!c)throw new go("Wire segment not found.");if("input-output"===s.type||"input-output"===c.type)throw new go("Cannot merge input-output segments.");if(!("input"!==s.type&&"output"!==s.type||"input"!==c.type&&"output"!==c.type)){if(s.type===c.type)throw new go("Cannot merge two inputs or two outputs.");if(s.jointId!==r||c.jointId!==r)throw new go("Segments do not share the given joint.");const o="input"===s.type?s:c,l="output"===s.type?s:c;return e=vo(e=ho(e,r),t,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),Po(e=vo(e,n,{deleteWireIfLastSegment:!1,removeOrphanJoints:!1}),i,(0,De.Z)(),{type:"input-output",inputPin:o.inputPin,outputPin:l.outputPin})}const l="bridge"===s.type?s:"bridge"===c.type?c:null;if(!l)throw new go("Cannot merge segment configuration.");const a=s===l?c:s,u=bn(l).filter((e=>e!==r)).pop();if(!u)throw new go("Cannot merge segment configuration.");switch(e=vo(e=ho(e,r),t,{removeOrphanJoints:!1,deleteWireIfLastSegment:!1}),e=vo(e,n,{removeOrphanJoints:!1,deleteWireIfLastSegment:!1}),a.type){case"bridge":{const t=a.jointAId===r?a.jointBId:a.jointBId===r?a.jointAId:null;if(!t)throw new go("Segments do not share the given joint.");return Po(e,i,(0,De.Z)(),{type:"bridge",jointAId:u,jointBId:t})}case"input":case"output":if(a.jointId!==r)throw new go("Segments do not share the given joint.");return Po(e,i,(0,De.Z)(),Object.assign(Object.assign({},a),{jointId:u}))}throw new go("Cannot merge segment configuration.")}(e,r[0],r[1],t)}catch(e){if(e instanceof go==0)throw e}return r.reduce(((e,t)=>Eo(e,t)),e)}(e,t)}catch(t){if(t instanceof go==0)throw t;return e}}),e)})),Do=hn(((e,t,n)=>{if(!function(e){return e.type===Et}(t))return e;const{jointIds:r,position:i,relative:o,snapMode:s}=t.payload,c=In()(Nt()(e.wireJointPositionsByJointId,r),(e=>{let t={x:o?e.x+i.x:i.x,y:o?e.y+i.y:i.y};switch(s){case"element":t=pn(n,t);break;case"joint":t=yn(n,t)}return t}));return Object.assign(Object.assign({},e),{wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),c)})})),Ao="@wire/segment/delete",Jo=Vt(mo,wo,ko,xo,Co,Bo,Mo,To,Lo,Ro,Do,hn(((e,t)=>{if(!function(e){return e.type===Ao}(t))return e;const{segmentIds:n}=t.payload;return n.reduce(((e,t)=>Eo(e,t)),e)})),hn(((e,t)=>{if(!function(e){return e.type===kt}(t))return e;const{wireSegmentId:n,lineId:r}=t.payload,i=e.wireSegmentsById[n];return i&&(lr(i)||cr(i))?Object.assign(Object.assign({},e),{wireSegmentsById:Object.assign(Object.assign({},e.wireSegmentsById),{[n]:Object.assign(Object.assign({},i),{lineId:r})})}):e}))),Uo=Zn(((e,t)=>{if(!Ge(t))return e;const{elementId:n,position:r=b.Ds}=t.payload;return M(e,"elementPositionsById",n,r)})),Zo=Oo(jo(xo),Zn(((e,t)=>{if(!qe(t))return e;const{elementIds:n}=t.payload,r=sn()(Object.keys(e.elementPositionsById),n);return Object.assign(Object.assign({},e),{elementPositionsById:Nt()(e.elementPositionsById,r)})}))),Fo="@element/move",Ko=(e,t,n={})=>{var r,i;return{type:Fo,payload:{elementIds:le(e),position:t,relative:null!==(r=n.relative)&&void 0!==r&&r,snapMode:null!==(i=n.snapMode)&&void 0!==i?i:"none"}}},$o=Vt(Uo,Zo,Zn(((e,t,n)=>{if(!function(e){return e.type===Fo}(t))return e;const{elementIds:r,position:i,relative:o,snapMode:s}=t.payload,c=In()(Nt()(e.elementPositionsById,r),(e=>{let t={x:o?e.x+i.x:i.x,y:o?e.y+i.y:i.y};return"element"===s&&(t=pn(n,t)),t}));return Object.assign(Object.assign({},e),{elementPositionsById:Object.assign(Object.assign({},e.elementPositionsById),c)})})),Zn(((e,t)=>pt(t)?h:e))),Ho=Vt(Hn(((e,t)=>{if(!Ue(t))return e;const{circuitId:n}=t.payload;let r=t.payload.circuitName;return r||(r="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:r})})})),Hn(((e,t)=>{if(!Fe(t))return e;const{circuitId:n}=t.payload,r=Object.keys(e.circuitNamesByCircuitId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Nt()(e.circuitNamesByCircuitId,r)})})),Hn(((e,t)=>{if(!function(e){return e.type===Ke}(t))return e;const{circuitId:n,circuitName:r}=t.payload,i=r.trim();return""===i?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:i})})})),Hn(((e,t)=>pt(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[m]:"Root"},elementIdsByCircuitId:{[m]:[]}}):e))),Go="@circuit/import";class Vo extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function qo(e){const t=_r(e);return{circuits:Vn(e).map((t=>({circuitId:t,circuitName:Yn(e,t)}))),elements:jn(e).map((t=>{const n=xn(e,t),r=$n(e,t),i=Mn(e,t);return{elementId:t,elementType:n.elementType,elementName:n.elementName,circuitId:null!=i?i:m,x:r.x,y:r.y}})),wires:Pr(e).map((n=>{const r=Rr(e,n),i=Zr(e,n);return i?{wireId:n,circuitId:i,wireSegments:Sr(e,n).map((t=>{const n=Dr(e,t);return Object.assign({wireSegmentId:t},n)})),wireJoints:r.map((e=>Object.assign({jointId:e},t[e])))}:null})).filter(T)}}function Yo(e,t){var n,r,i;e=Me;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>Ac(e,Je({circuitId:t,circuitName:n}))),e),e=(null!==(r=t.elements)&&void 0!==r?r:[]).reduce(((e,t)=>{var n;return Ac(e,He(t.elementType,t.circuitId,{x:t.x,y:t.y},{elementId:t.elementId,elementName:null!==(n=t.elementName)&&void 0!==n?n:void 0}))}),e),e=(null!==(i=t.wires)&&void 0!==i?i:[]).reduce(((e,t)=>Ac(e,vt(t))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new Vo("Failed to load project.")}return e}const Xo=Wt("tutorial"),Qo=zt("tutorial"),_o=Qo((e=>null!=e.activeTutorial)),es=Qo((e=>e.annotatedElements)),ts=Oo(50,((e=Me,t)=>{return Bt(t)?(_o(e)||e.services.project.isLoading||(n=qo(e),localStorage.setItem("autosave",JSON.stringify(n))),e):e;var n})),ns=Wt("project"),rs=zt("project"),is=ns(((e,t)=>Bt(t)?Object.assign(Object.assign({},e),{projectModified:!0}):e)),os=ns(((e,t)=>pt(t)?(localStorage.removeItem("autosave"),Object.assign(Object.assign({},e),{projectName:"New Project",projectModified:!1})):e)),ss="@project/rename",cs=ns(((e,t)=>{if(!function(e){return e.type===ss}(t))return e;let{projectName:n}=t.payload;return n=n.trim(),""===n?e:Object.assign(Object.assign({},e),{projectName:n})})),ls="@project/save",as=()=>({type:ls}),us="@project/save:success",ds=Vt(ts,(function(e=Me,t){if(!function(e){return e.type===Re}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{e=M(e=Yo(e,n),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"Previous Project",projectModified:!0})))}catch(e){}return e}),is,os,(function(e=Me,t){if(!function(e){return e.type===yt}(t))return e;const{fileName:n,saveData:r}=t.payload;try{e=M(e,"services","project","isLoading",!0),e=M(e=Yo(e,r),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:n,projectModified:!1,isLoading:!1})))}catch(t){console.error("Failed to load save",t),e=M(e,"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"",projectModified:!1,isLoading:!1})))}return e}),cs,ns(((e,t)=>function(e){return e.type===us}(t)?Object.assign(Object.assign({},e),{projectModified:!1}):e))),ms=gi(((e,t)=>{if(!qe(t))return e;const{elementIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:sn()(e.selectedElementIds,n),selectedConnectionIds:[]})})),ps=gi(((e,t)=>pt(t)?k:e)),ys="@select/all",fs=gi(((e,t,n)=>{if(!function(e){return e.type===ys}(t))return e;const r=Ut(n);if(!r)return e;const i=Sn(n,r),o=Fr(n,r),s=Kr(n,r);return Object.assign(Object.assign({},e),{selectedElementIds:i,selectedWireJointIds:o,selectedWireSegmentIds:s})})),gs="@select/clear",Is=gi(((e,t)=>function(e){return e.type===gs}(t)?Object.assign(Object.assign({},e),{selectedElementIds:[],selectedWireJointIds:[],selectedWireSegmentIds:[]}):e)),hs=gi(((e,t)=>{if(!function(e){return e.type===yi}(t))return e;const{elementIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:ln(e.selectedElementIds,n,r),selectedWireJointIds:an(e.selectedWireJointIds,r),selectedWireSegmentIds:an(e.selectedWireSegmentIds,r)})}));var vs=n(2525),Es=n.n(vs);const bs=(0,fn.P1)(Kn,ir,kn,((e,t,n)=>In()(e,((e,r)=>{const i=n[r];if(!i)return b.rG;const o=t[i];return o?(0,b.gQ)(o.visual.hitRect,e):b.rG})))),ws=gi(((e,t,n)=>{if(!function(e){return e.type===un}(t))return e;const{region:r,circuitId:i,mode:o}=t.payload,s=Sn(n,i),c=Nt()(bs(n),s),l=[];Es()(c,((e,t)=>{(0,b.jR)(e,r)&&l.push(t)}));const a=Fr(n,i),u=Nt()(_r(n),a),d=[];return Es()(u,((e,t)=>{(0,b.is)(e,r)&&d.push(t)})),Object.assign(Object.assign({},e),{selectedElementIds:ln(e.selectedElementIds,l,o),selectedWireJointIds:ln(e.selectedWireJointIds,d,o)})})),Os=gi(((e,t)=>{if(!function(e){return e.type===xi}(t))return e;const{jointIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:an(e.selectedElementIds,r),selectedWireJointIds:ln(e.selectedWireJointIds,n,r),selectedWireSegmentIds:an(e.selectedWireSegmentIds,r)})})),js="@select/wire-segments",ks=gi(((e,t)=>{if(!function(e){return e.type===js}(t))return e;const{segmentIds:n,mode:r}=t.payload;return Object.assign(Object.assign({},e),{selectedElementIds:an(e.selectedElementIds,r),selectedWireJointIds:an(e.selectedWireJointIds,r),selectedWireSegmentIds:ln(e.selectedWireSegmentIds,n,r)})})),xs="@selection/copy",Cs=()=>({type:xs});var Bs=n(5325),Ps=n.n(Bs);const Ns=Vt(ps,ms,fs,Is,hs,ws,Os,ks,(function(e=Me,t){if(!function(e){return e.type===Xe}(t))return e;const{selectedElementIds:n,selectedWireJointIds:r}=e.services.selection,i=Kn(e);for(const t of n){const n=i[t];if(!n)continue;const r=pn(e,n);(0,b.kg)(n,r)||(e=Ac(e,Ko(t,r)))}const o=_r(e);for(const t of r){const n=o[t];if(!n)continue;const r=yn(e,n);(0,b.kg)(n,r)||(e=Ac(e,bt(t,r)))}return e}),(function(e=Me,t){if(!function(e){return e.type===xs}(t))return e;const n=hi(e);return 0===n.length?e:Ac(e,(r=n,{type:Vi,payload:{elementIds:Array.isArray(r)?r:[r]}}));var r}),(function(e=Me,t){if(!function(e){return e.type===_e}(t))return e;const{selectedElementIds:n,selectedWireJointIds:r,selectedWireSegmentIds:i}=e.services.selection;return n.length>0&&(e=Ac(e,{type:Ve,payload:{elementIds:le(n)}})),r.length>0&&(e=Ac(e,{type:wt,payload:{jointIds:le(r)}})),i.length>0&&(e=Ac(e,{type:Ao,payload:{segmentIds:le(i)}})),e}),(function(e=Me,t){if(!function(e){return e.type===tt}(t))return e;const{offsetX:n,offsetY:r,snapMode:i}=t.payload,o=hi(e),s=vi(e),c={x:n,y:r};let l="none";"element"!==i&&"by-type"!==i||(l="element");let a="none";return a="by-type"===i?"joint":i,e=Ac(e,Ko(o,c,{relative:!0,snapMode:l})),Ac(e,bt(s,c,{relative:!0,snapMode:a}))}),Oo(10,gi(((e,t,n)=>{if(!Ot(t))return e;const{wireJointPositionsByJointId:r,wireSegmentsById:i}=n.services.circuitGraph;return Object.assign(Object.assign({},e),{selectedWireJointIds:Ps()(e.selectedWireJointIds,Object.keys(r)),selectedWireSegmentIds:Ps()(e.selectedWireSegmentIds,Object.keys(i))})})))),Ss=Wt("simulator"),Ms=zt("simulator"),Ws=Ss(((e,t)=>Bt(t)?x:e));function zs(e){return e.default}const Ts={"input-momentary":zs(n(4263)),"input-toggle":zs(n(9028)),"logic-and":zs(n(2404)),"logic-buffer":zs(n(3880)),"logic-nand":zs(n(5813)),"logic-nor":zs(n(2791)),"logic-not":zs(n(6139)),"logic-or":zs(n(1868)),"logic-xor":zs(n(6259)),"output-led":zs(n(9480)),"output-seg7":zs(n(136)),"pin-high":zs(n(4303))};var Ls=n(2846);const Rs=(e,t)=>{const{evolversById:n}=xr(e),r=n[t];return r?r.evolverType:null},Ds=(e,t)=>{var n;const r=Rs(e,t);return r&&null!==(n=Ts[r])&&void 0!==n?n:null};var As=n(7513),Js=n.n(As);const Us=Object.freeze([]),Zs=Object.freeze({});function Fs(e,t){const n=(e=>{const{evolversById:t}=xr(e);return Object.keys(t)})(t);return e=x,e=n.reduce(((e,n)=>function(e,t,n){const r=Ds(n,t);if(!r)return e;const i={};return r.outputPins.forEach((e=>{i[e]=!1})),M(e,"evolverOutputValuesByEvolverId",t,i)}(e,n,t)),e),e=n.reduce(((e,n)=>$s(e,n,t)),e),Object.assign({},e,{initialized:!0})}function Ks(e,t,n){if(0===t.transitionIds.length)return e;let r=Object.assign({},e,{tick:t.tick,evolverOutputValuesByEvolverId:Object.assign({},e.evolverOutputValuesByEvolverId)});const i=new Set;t.transitionIds.forEach((e=>{const{elementId:t,valuesByOutputPin:o}=r.transitionsById[e];var s,c;(s=r.evolverOutputValuesByEvolverId[t],c=o,Object.keys(c).some((e=>s[e]!==c[e])))&&(r.evolverOutputValuesByEvolverId[t]=Object.assign({},r.evolverOutputValuesByEvolverId[t],o),((e,t)=>{const{evolversById:n}=xr(e),r=n[t];return r?Rn()(fr()(r.outputsByPin),(e=>e.map((e=>e.evolverId)))):Us})(n,t).forEach((e=>i.add(e))))})),r.transitionsById=Nt()(r.transitionsById,sn()(Object.keys(r.transitionsById),t.transitionIds));for(const e of i)r=$s(r,e,n);return r}function $s(e,t,n){const r=Ds(n,t);if(!r||!r.evolve)return e;const i=function(e,t,n){const r={},i=((e,t)=>{const{evolversById:n}=xr(e),r=n[t];return r?r.inputsByPin:Zs})(n,t);return Object.keys(i).forEach((t=>{var n;const o=i[t];if(!o)return void(r[t]=!1);const{evolverId:s,pinId:c}=o;r[t]=(null===(n=e.evolverOutputValuesByEvolverId[s])||void 0===n?void 0:n[c])||!1})),r}(e,t,n);return Hs(e,t,r.evolve(e.evolverStatesByEvolverId[t],i,e.tick))}function Hs(e,t,n){const{state:r,transitions:i}=n;return r&&(e=M(e,"evolverStatesByEvolverId",t,r)),i&&(e=le(i).reduce(((e,n,r)=>function(e,t,n,r="replace"){const{tickOffset:i,valuesByPin:o,transitionMerger:s=r}=n,c=e.tick+(i>0?i:1);return"replace"===s&&(e=function(e,t){return Object.keys(e.transitionsById).filter((n=>function(e){return e.elementId===t}(e.transitionsById[n]))).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const r=Nt()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let i=e.transitionWindows;const o=Js()(i,n.tick,((e,t)=>e.tick-t));if(o>=0){const e=i[o],{transitionIds:n}=e,r=e.transitionIds.indexOf(t);-1!==r&&(1===e.transitionIds.length?i=me(i,o):(i=i.slice(),i[o]=Object.assign({},i[o],{transitionIds:me(n,r)})))}return Object.assign({},e,{transitionsById:r,transitionWindows:i})}(e,t)),e)}(e,t)),function(e,t,n,r){const i=(0,De.Z)(),o={elementId:t,tick:n,valuesByOutputPin:r},s=e.transitionWindows.slice();let c=Js()(s,n,((e,t)=>e.tick-t));if(c<0){c=-c-1;const e={tick:n,transitionIds:[]};s.splice(c,0,e)}const l=s[c].transitionIds.slice();l.push(i),s[c]=Object.assign({},s[c],{transitionIds:l});const a=Object.assign({},e.transitionsById,{[i]:o});return Object.assign({},e,{transitionsById:a,transitionWindows:s})}(e,t,c,o)}(e,t,n,0===r?"replace":"append")),e)),e}const Gs=Ss(((e,t,n)=>{if(!(0,Ls.Vj)(t))return e;const{elementIdPath:r,data:i}=t.payload,o=((e,t)=>{const{evolverIdsByElementId:n}=xr(e);return hr(n,t)})(n,r);if(!o)return e;const s=Rs(n,o);if(!s)return e;const c=Ts[s];if(!c||!c.interact)return e;const l=e.evolverStatesByEvolverId[o];return Hs(e,o,c.interact(l,i))})),Vs="@sim/start",qs=()=>({type:Vs});function Ys(e){return e.type===Vs}const Xs=Ss(((e,t,n)=>Ys(t)?Fs(e,n):e)),Qs="@sim/step",_s=()=>({type:Qs});function ec(e){return e.type===Qs}const tc="@sim/tick",nc=e=>({type:tc,payload:{tickCount:e}}),rc="@sim/stop",ic=()=>({type:rc});function oc(e){return e.type===rc}const sc=Vt(Ws,Gs,Xs,(function(e=Me,t){if(!ec(t))return e;const{initialized:n}=e.services.simulator;n||(e=M(e,"services","simulator",(t=>Fs(t,e))));const{tick:r,transitionWindows:i}=e.services.simulator;if(0===i.length)return e;const o=i[0].tick;return Ac(e,nc(o-r))}),Ss(((e,t)=>oc(t)?x:e)),Ss(((e,t,n)=>{if(!function(e){return e.type===tc}(t))return e;const{tickCount:r}=t.payload,i=performance.now();e=function(e,t,n){const r=e.tick+t;e=Object.assign({},e,{transitionWindows:e.transitionWindows.slice()});let i=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=r;){if(0==--i)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=Ks(e,t,n)}return e.tick!=r&&(e=Object.assign({},e,{tick:r})),e}(e,r,n);const o=performance.now()-i;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:o})}))),cc=Wt("simulatorControl"),lc=zt("simulatorControl"),ac=cc(((e,t)=>Bt(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e)),uc="@sim/pause",dc=e=>({type:uc,payload:{mode:e}}),mc=lc((e=>"edit"!==e.mode)),pc=lc((e=>"run"===e.mode)),yc=lc((e=>"pause"===e.mode)),fc=lc((e=>e.ticksPerSecond)),gc=Vt(ac,cc(((e,t)=>{if(!function(e){return e.type===uc}(t))return e;const{mode:n}=t.payload;if(!mc.local(e))return e;let r=e.mode;switch(n){case!0:r="pause";break;case!1:r="run";break;case"toggle":r="run"==r?"pause":"run"}return Object.assign(Object.assign({},e),{mode:r})})),cc(((e,t)=>Ys(t)?Object.assign(Object.assign({},e),{mode:"run"}):e)),cc(((e,t)=>ec(t)?Object.assign(Object.assign({},e),{mode:"pause"}):e)),cc(((e,t)=>oc(t)?Object.assign(Object.assign({},C),{ticksPerSecond:e.ticksPerSecond}):e))),Ic="@tutorial/annotate",hc=e=>({type:Ic,payload:{annotations:e}}),vc=Xo(((e,t)=>{if(!function(e){return e.type===Ic}(t))return e;const{annotations:n}=t.payload;return Object.assign(Object.assign({},e),{annotatedElements:le(n)})})),Ec="@tutorial/dismiss",bc=()=>({type:Ec}),wc="@tutorial/start",Oc=e=>({type:wc,payload:{tutorial:e}}),jc=Vt(vc,((e=Me,t)=>{var n;return function(e){return e.type===Ec}(t)?null!==(n=e.services.tutorial.preTutorialState)&&void 0!==n?n:Me:e}),((e=Me,t)=>{if(!function(e){return e.type===wc}(t))return e;const{tutorial:n}=t.payload;let{preTutorialState:r}=e.services.tutorial;return r||(r=e),e=M(e=Me,"services","project","projectName","Tutorial"),M(e,"services","tutorial",{activeTutorial:n,annotatedElements:[],preTutorialState:r})})),kc=Wt("uiLayout"),xc=zt("uiLayout"),Cc=Oo(jo(Ti),kc(((e,t,n)=>{if(!Fe(t))return e;if(!e.layout)return e;const{circuitId:r}=t.payload,i=Zt(n,r),o=ve(e.layout,(e=>!je(e)||-1===i.indexOf(e.windowProps.editorId)));return Object.assign(Object.assign({},e),{layout:o})}))),Bc="@layout/rearrange",Pc=kc(((e,t)=>{if(!function(e){return e.type===Bc}(t))return e;const{layout:n}=t.payload;return Object.assign(Object.assign({},e),{layout:n})})),Nc=kc(((e,t,n)=>{if(!Ji(t))return e;const{newWindowId:r}=t.payload;if(!r)return e;const i=Oe(r),o=At(n);let s=e.layout;if(null==s)s=i;else{let e=!1;l=t=>{const n=J(t);return je(n)&&n.windowProps.editorId===o?(e=!0,{direction:"row",division:50,first:t,second:i}):null},s=null!==(a=function e(t){const n=l(t);if(n)return n;const r=J(t);if(Z(r)){const t=e(r.first);if(t)return Object.assign(Object.assign({},r),{first:t});const n=e(r.second);if(n)return Object.assign(Object.assign({},r),{second:n})}return null}(c=s))&&void 0!==a?a:c,e||(s={direction:"row",division:50,first:s,second:i})}var c,l,a;return Object.assign(Object.assign({},e),{layout:s})})),Sc="@view/reset",Mc=()=>({type:Sc}),Wc=Vt(Cc,Pc,Nc,kc(((e,t)=>function(e){return e.type===Sc}(t)?xe:e))),zc="@view/element-names",Tc=e=>({type:zc,payload:{mode:e}}),Lc=Wt("uiSettings"),Rc=zt("uiSettings"),Dc=Vt(Lc(((e,t)=>{if(!function(e){return e.type===zc}(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{elementNameMode:n})}))),Ac=function(e){const t=Gt()(e,(e=>e.weight||0));return(e=Me,n)=>t.reduce(((e,t)=>t(e,n)),e)}(Vt(zi,Ui,eo,uo,Jo,$o,Ho,(function(e=Me,t){if(!function(e){return e.type===Go}(t))return e;const{circuitIds:n,saveData:r}=t.payload;return function(e,t,n){var r,i;const o=Object.keys(e.services.circuitProperties.circuitNamesByCircuitId),s=n.circuits.filter((e=>-1!==t.indexOf(e.circuitId)&&-1===o.indexOf(e.circuitId)));if(0===s.length)return e;try{e=s.reduce(((e,{circuitId:t,circuitName:n})=>Ac(e,Je({circuitId:t,circuitName:n}))),e);const t=(null!==(r=n.elements)&&void 0!==r?r:[]).filter((e=>s.some((({circuitId:t})=>t===e.circuitId))));e=t.reduce(((e,t)=>{var n;return Ac(e,He(t.elementType,t.circuitId,{x:t.x,y:t.y},{elementId:t.elementId,elementName:null!==(n=t.elementName)&&void 0!==n?n:void 0}))}),e),e=(null!==(i=n.wires)&&void 0!==i?i:[]).filter((function(e){return e.wireSegments.some((e=>{if(!ur(e))return;const{inputPin:n}=e;return t.some((e=>e.elementId===n.elementId))}))})).reduce(((e,t)=>Ac(e,vt(t))),e)}catch(e){throw console.error("Failed to import circuit from SaveData:",e),new Vo("Failed to import circuit.")}return e}(e,n,r)}),ds,Ns,sc,gc,jc,Wc,Dc));var Jc=n(4970),Uc=n(8764),Zc=n(8424);function*Fc(e,t){yield(0,Jc.gz)(((e,t)=>({type:ao,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,Jc.qn)([to,so]);return n.type===to?n.payload.result:null}const Kc="@project/export-link",$c=()=>({type:Kc});function*Hc(){yield(0,Jc.ib)(Kc,Gc)}function*Gc(){const e=yield(0,Jc.Ys)();try{const t=qo(e),n=JSON.stringify(t),r=(0,Zc.Wt)(n),i=Uc.lW.from(r).toString("base64"),o=encodeURIComponent(i),s=Le+u.createHref({pathname:"/import",search:"data="+o});yield(0,Jc.RE)(Fc,"export-project-link",{projectLink:s})}catch(e){console.error("Failed to export project as link",e)}}var Vc=n(4171),qc=n.n(Vc);const Yc="@project/import-circuits",Xc=()=>({type:Yc});function*Qc(){yield(0,Jc.ib)(Yc,_c)}function*_c(){const[e]=yield(0,Jc.RE)(qc(),{accept:"application/json"}),t=yield(0,Jc.RE)(e.text.bind(e)),n=JSON.parse(t),r=yield(0,Jc.RE)(Fc,"import-project-circuits",{circuits:n.circuits.filter((e=>e.circuitId!==m))});if(!Array.isArray(r))return;const i=r,o=[];let s;for(;s=i.pop();){o.push(s);for(const e of n.elements){const{circuitId:t,elementType:n}=e;if(s!==t)continue;const r=Qn(n);null!=r&&i.push(r)}}yield(0,Jc.gz)(((e,t)=>({type:Go,payload:{circuitIds:le(e),saveData:t}}))(o,n))}const el="@project/import-link";function*tl(){yield(0,Jc.ib)(el,nl)}function*nl(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=Uc.lW.from(e,"base64"),r=(0,Zc.rr)(n,{to:"string"}),i=JSON.parse(r);yield(0,Jc.gz)(ft("Linked Project",i)),u.replace("/")}catch(e){console.error("Failed to import save from link",e)}}const rl="@project/load",il=()=>({type:rl});function*ol(){yield(0,Jc.ib)(rl,sl)}function*sl(){try{const[e]=yield(0,Jc.RE)(qc(),{accept:"application/json"}),t=yield(0,Jc.RE)(e.text.bind(e)),n=JSON.parse(t);let r=e.name;r=r?r.substr(0,r.lastIndexOf(".json")):"Unnamed Project",yield(0,Jc.gz)(ft(r,n))}catch(e){console.warn("Failed to load project:",e)}}var cl=n(3162);const ll=rs((e=>e.projectName)),al=rs((e=>e.projectModified));function*ul(){yield(0,Jc.ib)(ls,dl)}function*dl(){const e=yield(0,Jc.Ys)();try{window.showSaveFilePicker?yield(0,Jc.RE)(ml,e):yield(0,Jc.RE)(pl,e),yield(0,Jc.gz)({type:us})}catch(e){console.warn("Failed to save project",e)}}function*ml(e){const t=yield(0,Jc.Ys)(ll),n=yield(0,Jc.RE)(window.showSaveFilePicker,{suggestedName:t,types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!n)return;let r=n.name;r||(r=n.getFile().name),r&&(r=r.substr(0,r.lastIndexOf(".json")),yield(0,Jc.gz)((e=>({type:ss,payload:{projectName:e}}))(r)));const i=qo(e),o=yield(0,Jc.RE)(n.createWritable.bind(n));yield(0,Jc.RE)(o.write.bind(o),JSON.stringify(i,null,2)),yield(0,Jc.RE)(o.close.bind(o))}function*pl(e){const t=yield(0,Jc.Ys)(ll),n=qo(e),r=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});(0,cl.saveAs)(r,t+".json")}function*yl(){yield(0,Jc.rM)(Hc),yield(0,Jc.rM)(Qc),yield(0,Jc.rM)(tl),yield(0,Jc.rM)(ol),yield(0,Jc.rM)(ul)}function*fl(){yield(0,Jc.A7)([Vs,uc,Qs],gl)}function*gl(){for(;yield(0,Jc.Ys)(pc);){try{yield(0,Jc.gz)(nc(1))}catch(e){return console.error(e),void(yield(0,Jc.gz)(dc(!0)))}const e=yield(0,Jc.Ys)(fc),t=Math.max(Math.ceil(1e3/e),1);yield(0,Jc.gw)(t)}}function*Il(){yield(0,Jc.rM)(fl)}function hl(e){return"circuit-editor-"+e}function vl(e,t){return`editor-${e}--element-${t}`}function El(e,t,n){return`editor-${e}--element-${t}--pin-${n}`}function bl(e,t){return`editor-${e}--wire-${t}`}function wl(e,t){return`editor-${e}--wire-joint-${t}`}const Ol="@tutorial/next";function*jl(e,t={}){var n,r;const i=yield(0,Jc.Ys)((t=>or(t,e)));if(!i)return null;const o=yield(0,Jc.Ys)(At);return o?(yield(0,Jc.gz)(hc([{selector:"#element-tray--element-"+e,message:null!==(n=t.trayMessage)&&void 0!==n?n:`This is a ${i.displayName} element`},{selector:"#"+hl(o),message:null!==(r=t.fieldMessage)&&void 0!==r?r:`Drag the ${i.displayName} element onto the circuit field.`,placement:"top"}])),(yield(0,Jc.RE)((()=>Cl($e,(({payload:{elementType:t}})=>t===e))))).payload.elementId):null}function*kl(e,t){for(;;){if(yield(0,Jc.RE)(xl,e,t))return;yield(0,Jc.qn)(it)}}function*xl(e,t){return(yield(0,Jc.Ys)(vr)).some((({inputPin:n,outputPin:r})=>sr(n,t)&&sr(r,e)))}function*Cl(e,t){let n;for(;(n=yield(0,Jc.qn)(e))&&!t(n););return n}function*Bl(e,t,n={}){var r;yield(0,Jc.gz)(hc([{selector:e,message:t,placement:n.placement,action:{name:"Next",action:{type:Ol}}},...(null!==(r=n.additionalSelectors)&&void 0!==r?r:[]).map((e=>({selector:e})))])),yield(0,Jc.qn)(Ol)}function*Pl(){yield(0,Jc.RE)(Bl,"#element-tray","This is where logic elements are stored.");const e=yield(0,Jc.RE)(jl,"logic-not");if(!e)return void(yield(0,Jc.gz)(bc()));const t=yield(0,Jc.RE)(jl,"interaction-momentary");if(!t)return void(yield(0,Jc.gz)(bc()));const n=yield(0,Jc.RE)(jl,"output-led");if(!n)return void(yield(0,Jc.gz)(bc()));const r=yield(0,Jc.Ys)(At);r?(yield(0,Jc.gz)(hc([{selector:"#"+El(r,t,"OUT"),message:"This is the switch's output pin.",placement:"top"},{selector:"#"+El(r,e,"IN"),message:"This is the logic gate's input pin.",placement:"bottom"},{selector:"#"+hl(r),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:t,pinId:"OUT"},{elementId:e,pinId:"IN"}),yield(0,Jc.gz)(hc([{selector:"#"+El(r,e,"OUT"),message:"This is the logic gate's output pin.",placement:"top"},{selector:"#"+El(r,n,"IN"),message:"This is the LED's input pin.",placement:"bottom"},{selector:"#"+hl(r),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:e,pinId:"OUT"},{elementId:n,pinId:"IN"}),yield(0,Jc.gz)(hc({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,Jc.qn)(Vs),yield(0,Jc.gz)(hc([{selector:"#"+hl(r)},{selector:"#"+vl(r,t),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,Jc.RE)((()=>Cl(Ls.Tu,(({payload:{elementIdPath:e,data:n}})=>!0===n&&ae(e,[t]))))),yield(0,Jc.gz)(hc({selector:"#"+hl(r),placement:"top",message:"That's it!",action:{name:"End Tutorial",action:bc()}}))):yield(0,Jc.gz)(bc())}function Nl(e){return"circuit-list--circuit-"+e}function*Sl(){yield(0,Jc.RE)(Bl,"#circuit-list-window","Circuits are collections of elements that can be reused as ICs."),yield(0,Jc.gz)(hc({selector:"#circuit-list",message:"Right click on the circuit list to create a new circuit."}));const e=yield(0,Jc.qn)(Ae),{circuitId:t}=e.payload;yield(0,Jc.gz)(hc({selector:"#"+Nl(t),message:"Here is your circuit.  Double click it to rename it."})),yield(0,Jc.qn)(Ke),yield(0,Jc.gz)(hc({selector:"#"+Nl(t),message:"Click the circuit to view it in the active editor window."})),yield(0,Jc.RE)((()=>Cl(Di,(e=>e.payload.circuitId===t))));const n=yield(0,Jc.Ys)(At);if(!n)return void(yield(0,Jc.gz)(bc()));const r=yield(0,Jc.RE)(jl,"pin-input");if(!r)return void(yield(0,Jc.gz)(bc()));yield(0,Jc.RE)(Bl,"#"+vl(n,r),"Input pins take a signal from outside for use in your circuit.",{additionalSelectors:["#"+hl(n)]}),yield(0,Jc.gz)(hc([{selector:"#"+hl(n)},{selector:"#"+vl(n,r),message:"Rename the pin by right clicking it and clicking on the bolded text.  Choose any name you like"}])),yield(0,Jc.RE)((()=>Cl(Ye,(e=>e.payload.elementId===r)))),yield(0,Jc.RE)(Bl,"#"+vl(n,r),"Pin names will appear on the body of the IC when used in other circuits.  Be sure to name your pins!");const i=yield(0,Jc.RE)(jl,"pin-output");if(!i)return void(yield(0,Jc.gz)(bc()));yield(0,Jc.RE)(Bl,"#"+vl(n,i),"Output pins take a signal from your circuit and send it to the outside world.");const o=yield(0,Jc.RE)(jl,"pin-output",{trayMessage:"Let's take another output pin",fieldMessage:"When multiple pins are used, the pins will stack in their vertical orientation on the IC"});if(!o)return void(yield(0,Jc.gz)(bc()));yield(0,Jc.RE)(Bl,"#"+hl(n),"Let's put together a simple circuit.",{placement:"top"});const s=yield(0,Jc.RE)(jl,"logic-buffer");if(!s)return void(yield(0,Jc.gz)(bc()));const c=yield(0,Jc.RE)(jl,"logic-not");if(!c)return void(yield(0,Jc.gz)(bc()));yield(0,Jc.gz)(hc([{selector:"#"+El(n,r,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+El(n,s,"IN"),message:"...to the buffer's input.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:r,pinId:"OUT"},{elementId:s,pinId:"IN"}),yield(0,Jc.gz)(hc([{selector:"#"+El(n,s,"OUT"),message:"Connect the buffer's output pin...",placement:"top"},{selector:"#"+El(n,i,"IN"),message:"...to the IC's first output.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:s,pinId:"OUT"},{elementId:i,pinId:"IN"}),yield(0,Jc.gz)(hc([{selector:"#"+El(n,r,"OUT"),message:"Connect the input signal pin...",placement:"top"},{selector:"#"+El(n,c,"IN"),message:"...to the NOT's input.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:r,pinId:"OUT"},{elementId:c,pinId:"IN"}),yield(0,Jc.gz)(hc([{selector:"#"+El(n,c,"OUT"),message:"Connect the NOT's output...",placement:"top"},{selector:"#"+El(n,o,"IN"),message:"...to the second IC output.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:c,pinId:"OUT"},{elementId:o,pinId:"IN"}),yield(0,Jc.gz)(hc({selector:"#"+Nl(m),message:"We now have a functional IC.  Let's go to the root project and make use of it"})),yield(0,Jc.RE)((()=>Cl(Di,(e=>e.payload.circuitId===m))));const l=Xn(t),a=yield(0,Jc.RE)(jl,l);if(!a)return void(yield(0,Jc.gz)(bc()));yield(0,Jc.RE)(Bl,"#"+hl(n),"Let's connect it up to see it in action.",{placement:"top"});const u=yield(0,Jc.RE)(jl,"interaction-momentary");if(!u)return void(yield(0,Jc.gz)(bc()));const d=yield(0,Jc.RE)(jl,"output-led",{trayMessage:"Make an LED to check the status of the first pin."});if(!d)return void(yield(0,Jc.gz)(bc()));const p=yield(0,Jc.RE)(jl,"output-led",{trayMessage:"Make an LED to check the status of the second pin."});p?(yield(0,Jc.gz)(hc([{selector:"#"+El(n,u,"OUT"),message:"Connect the switch output...",placement:"top"},{selector:"#"+El(n,a,r),message:"...to the IC input.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:u,pinId:"OUT"},{elementId:a,pinId:r}),yield(0,Jc.gz)(hc([{selector:"#"+El(n,a,i),message:"Connect the first IC output...",placement:"top"},{selector:"#"+El(n,d,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:a,pinId:i},{elementId:d,pinId:"IN"}),yield(0,Jc.gz)(hc([{selector:"#"+El(n,a,i),message:"Connect the first IC output...",placement:"top"},{selector:"#"+El(n,d,"IN"),message:"...to the first LED.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:a,pinId:i},{elementId:d,pinId:"IN"}),yield(0,Jc.gz)(hc([{selector:"#"+El(n,a,o),message:"Connect the second IC output...",placement:"top"},{selector:"#"+El(n,p,"IN"),message:"...to the second LED.",placement:"bottom"},{selector:"#"+hl(n),message:"Click and drag from one pin to another to connect them.",placement:"top"}])),yield(0,Jc.RE)(kl,{elementId:a,pinId:o},{elementId:p,pinId:"IN"}),yield(0,Jc.gz)(hc({selector:"#simctrl-run",message:"Click here to run the simulation."})),yield(0,Jc.qn)(Vs),yield(0,Jc.gz)(hc([{selector:"#"+hl(n)},{selector:"#"+vl(n,u),message:"Click the switch to activate it.  Momentary switches need to be held."}])),yield(0,Jc.RE)((()=>Cl(Ls.Tu,(({payload:{elementIdPath:e,data:t}})=>!0===t&&ae(e,[u]))))),yield(0,Jc.gz)(hc({selector:"#"+hl(n),placement:"top",message:"You can place as many copies of an IC as you want.  Circuits can also contain other ICs.",action:{name:"End Tutorial",action:bc()}}))):yield(0,Jc.gz)(bc())}function*Ml(){yield(0,Jc.ib)(wc,Wl)}function*Wl(e){const{tutorial:t}=e.payload;switch(t){case"basics":return void(yield(0,Jc.RE)(Pl));case"circuits":yield(0,Jc.RE)(Sl)}}function*zl(){yield(0,Jc.rM)(Ml)}const Tl=We.qC,Ll=(0,ze.ZP)(),Rl=[!1,Ll].filter(T),Dl=(0,We.MT)((function(e=Me,t){return e=function(e=Me,t){return function(e=Me,t){if(!ct(t))return e;const{undoStack:n,redoStack:r}=e.undo,i=$t()(n);if(!i)return e;const{serviceStates:o,viewCircuitId:s}=i;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...r,Ft(e)]})}),s&&(e=Ac(e,Ai(s))),e}(e=function(e=Me,t){if(!ut(t))return e;const{undoStack:n,redoStack:r}=e.undo,i=$t()(r);if(!i)return e;const{serviceStates:o,viewCircuitId:s}=i;return e=Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),o),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,Ft(e)],redoStack:r.slice(0,r.length-1)})}),s&&(e=Ac(e,Ai(s))),e}(e=function(e=Me,t){return!Bt(t)||ct(t)||ut(t)?e:M(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),Ft(e)],redoStack:[]})))}(e,t),t),t)}(e,t),Ac(e,t)}),Tl((0,We.md)(...Rl)));function Al(e){return(0,s.v9)(e)}function Jl(e,t,n,i){r.useEffect((()=>{if(!e.current)return;const r=e.current;return r.addEventListener(t,n,i),()=>{r.removeEventListener(t,n,i)}}),[t,n,e,i])}Ll.run((function*(){yield(0,Jc.rM)(yl),yield(0,Jc.rM)(Il),yield(0,Jc.rM)(zl)})),Dl.dispatch({type:Re});const Ul=xc((e=>e.layout)),Zl=({className:e,title:t,children:n})=>r.createElement("div",{className:S("titlebar--3-TCE",e)},r.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),r.createElement("div",{className:"titlebar-divider--Wl_27"}),t&&r.createElement("div",{className:"titlebar-title--HXGig"},t),n);var Fl=n(1935);function Kl(){}const $l={registerPopoverChild:Kl,unregisterPopoverChild:Kl},Hl=r.createContext(null),Gl=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const i=r.useContext(Hl),o=null==i?void 0:i.registerPopoverChild,s=null==i?void 0:i.unregisterPopoverChild,c=r.useCallback((t=>{o&&o(t),e(t)}),[e,o]),l=r.useCallback((e=>{t(e)}),[t,s]),a=r.useMemo((()=>({registerPopoverChild:c,unregisterPopoverChild:l})),[c,l]);return r.createElement(Hl.Provider,{value:a},n)},Vl=()=>{},ql=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:o=Vl,children:s})=>{const[c,l]=r.useState(null),{attributes:a,styles:u}=(0,Fl.D)(e?t:null,c,{placement:n});!function(e){var t;const n=null!==(t=r.useContext(Hl))&&void 0!==t?t:$l,i=r.useRef(n);r.useEffect((()=>{i.current=n})),r.useEffect((()=>{if(e)return i.current.registerPopoverChild(e),()=>i.current.unregisterPopoverChild(e)}),[e])}(c);const[d,m,p]=function(e=[]){const[t,n]=r.useState(e),i=r.useCallback((e=>{n([...t,e])}),[t]),o=r.useCallback((e=>{n(sn()(t,[e]))}),[t]);return[t,i,o,n]}();return function(e,t,n=!0){const i=r.useCallback((n=>{const r=le(e).filter(T);r.length&&r.every((e=>!e.contains(n.target)))&&t()}),[e,t]);r.useEffect((()=>{if(n)return document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}}),[i,n])}(r.useMemo((()=>[c,...d]),[d,c]),o),e?(0,i.createPortal)(r.createElement(Gl,{registerPopoverChild:m,unregisterPopoverChild:p},r.createElement("div",Object.assign({ref:l,style:Object.assign(Object.assign({},u.popper),{zIndex:10})},a.popper),s)),document.body):null},Yl=r.createContext((function(){}));function Xl(){return r.useContext(Yl)}const Ql=Yl.Provider,_l=({content:e,placement:t,children:n})=>{const i=r.useRef(null),[o,s]=r.useState(!1),c=r.useCallback((()=>{s(!0)}),[]),l=r.useCallback((()=>{s(!1)}),[]);return r.createElement(Ql,{value:l},r.createElement("div",{ref:i,onClick:c},n),r.createElement(ql,{anchorEl:i.current,isOpen:o,placement:t,onRequestClose:l},o&&e))},ea={button:"button--Ui3Hp","button--size-small":"button--size-small--289kb","button--variant-primary":"button--variant-primary--2qpAa","button--variant-menu":"button--variant-menu--3lEZ1"};const ta=e=>{var{variant:t="default",size:n="default"}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["variant","size"]);return r.createElement("button",Object.assign({className:S(ea.button,ea["button--variant-"+t],ea["button--size-"+n]),type:"button"},i),i.children)};function na(e,...t){const n=(0,s.I0)();return r.useCallback((()=>{const r=e(...t);r&&n(r)}),[n,e,...t])}function ra(e,...t){const n=(0,s.I0)();return r.useCallback((r=>{if(r.defaultPrevented)return;r.preventDefault();const i=e(...t);i&&n(i)}),[n,e,...t])}const ia="menu-item--2dcyN",oa="menu-item--disabled--RJJTK",sa="menu-item-content--3s1DG",ca="menu-item-text--1F41V",la="menu-item-secondary--2PJLF",aa=({children:e})=>r.createElement("ul",{className:"menu--3E86w"},e),ua=({disabled:e,onClick:t,secondary:n,children:i})=>{const o=Xl(),s=r.useCallback((e=>{t&&t(e),o()}),[o,t]);return r.createElement("li",{className:S(ia,e&&oa)},r.createElement("a",{className:sa,onClick:s},r.createElement("span",{className:ca},i),n&&r.createElement("span",{className:la},n)))},da=()=>r.createElement("div",{className:"menu-divider--1QPGp"}),ma=()=>{const e=na(mt),t=na(as),n=na(il),i=na(Xc),o=na($c);return r.createElement(aa,null,r.createElement(ua,{onClick:e},"New"),r.createElement(da,null),r.createElement(ua,{onClick:n},"Load"),r.createElement(ua,{onClick:t},"Save"),r.createElement(da,null),r.createElement(ua,{onClick:i},"Import Circuits"),r.createElement(da,null),r.createElement(ua,{onClick:o},"Export Link"))};var pa=n(1795);const ya=/(Mac|iOS|OS\ X)/.test((pa.os||"undefined").toString()),fa=ya?"command":"ctrl",ga=e=>e.undo.undoStack.length>0,Ia=e=>e.undo.redoStack.length>0,ha=_i((e=>e.clipboardElements.length>0)),va=()=>{const e=Al(ga),t=na(st),n=Al(Ia),i=na(at),o=Al(hi).length>0,s=na(Cs),c=Al(ha),l=na(rt);return r.createElement(aa,null,r.createElement(ua,{disabled:!e,secondary:fa+"+z",onClick:t},"Undo"),r.createElement(ua,{disabled:!n,secondary:fa+"+shift+z",onClick:i},"Redo"),r.createElement(da,null),r.createElement(ua,{disabled:!o,secondary:fa+"+c",onClick:s},"Copy"),r.createElement(ua,{disabled:!c,secondary:fa+"+v",onClick:l},"Paste"))},Ea=Rc((e=>e.elementNameMode)),ba=({className:e,value:t,onChange:n,children:i})=>r.createElement("label",{className:e},r.createElement("span",{className:"checkbox-span--1EWGs"},r.createElement("input",{type:"checkbox",checked:t,onChange:n})),i),wa=({disabled:e,secondary:t,value:n,onChange:i,children:o})=>r.createElement("li",{className:S(ia,e&&oa)},r.createElement(ba,{className:sa,value:n,onChange:i},r.createElement("span",{className:ca},o),t&&r.createElement("span",{className:la},t))),Oa=({disabled:e,secondary:t,content:n,children:i})=>r.createElement("li",{className:S(ia,e&&oa)},r.createElement(_l,{placement:"right-start",content:n},r.createElement("a",{className:sa},r.createElement("span",{className:ca},i),t&&r.createElement("span",{className:la},t),r.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},r.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),ja=()=>{const e=Al(Ea),t=na(Tc,"all"),n=na(Tc,"named-only"),i=na(Tc,"none");return r.createElement(aa,null,r.createElement(wa,{value:"all"===e,onChange:t},"Always visible"),r.createElement(wa,{value:"named-only"===e,onChange:n},"Named Items Only"),r.createElement(wa,{value:"none"===e,onChange:i},"Hidden"))},ka=()=>{const e=na(Mc);return r.createElement(aa,null,r.createElement(Oa,{content:r.createElement(ja,null)},"Element Names"),r.createElement(da,null),r.createElement(ua,{onClick:e},"Reset View"))},xa=()=>{const e=na(Oc,"basics"),t=na(Oc,"circuits");return r.createElement(aa,null,r.createElement(ua,{onClick:e},"Basics"),r.createElement(ua,{onClick:t},"Circuits"))},Ca=()=>r.createElement(aa,null,r.createElement(Oa,{content:r.createElement(xa,null)},"Tutorials")),Ba=Ms((e=>e.lastTickProcessingTimeMs)),Pa="icon--3Vly6",Na=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(Pa,e.className)}),r.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),Sa=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(Pa,e.className)}),r.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),Ma=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(Pa,e.className)}),r.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),Wa=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(Pa,e.className)}),r.createElement("path",{d:"M3,0 L13,8 L3,16 z M11,1 l2,0 l0,14 l-2,0 z"})),za="button--2N_ol",Ta=()=>{const e=Al(mc),t=Al(yc),n=Al(Ba),i=ra(qs),o=ra(ic),s=ra(dc,"toggle"),c=ra(_s),l=r.useCallback((e=>{e.preventDefault()}),[]);return r.createElement("span",null,e&&r.createElement("span",{className:"simrate--NKBi_"},n.toFixed(2)," ms"),e?r.createElement(Sa,{id:"simctrl-stop",className:S(za,"button-stop--1dD4-"),onClick:o,onMouseDown:l}):r.createElement(Na,{id:"simctrl-run",className:S(za,"button-play--1vWfq"),onClick:i,onMouseDown:l}),r.createElement(Wa,{id:"simctrl-step",className:S(za,"button-step--3Fat5"),onClick:c,onMouseDown:l}),r.createElement(Ma,{id:"simctrl-pause",className:S(za,"button-pause--1UoHJ",!e&&"button--disabled--3caLv",t&&"selected--Ev2q8"),onClick:s,onMouseDown:l}))},La=({className:e})=>{const t=`${Al(ll)}${Al(al)?"*":""}`;return r.createElement(Zl,{className:e,title:t},r.createElement(_l,{content:r.createElement(ma,null),placement:"bottom-start"},r.createElement(ta,{variant:"menu"},"File")),r.createElement(_l,{content:r.createElement(va,null),placement:"bottom-start"},r.createElement(ta,{variant:"menu"},"Edit")),r.createElement(_l,{content:r.createElement(ka,null),placement:"bottom-start"},r.createElement(ta,{variant:"menu"},"View")),r.createElement(_l,{content:r.createElement(Ca,null),placement:"bottom-start"},r.createElement(ta,{variant:"menu"},"Help")),r.createElement("div",{className:"project-titlebar-controls--1c1Qn"},r.createElement(Ta,null)))};var Ra=n(3274);const Da=({circuitId:e,elementIdPath:t})=>{const n=(0,s.I0)(),i=Al((e=>Yn(e,m))),o=Al((t=>Yn(t,e))),c=r.useCallback((e=>{e.preventDefault(),n(Ai(m,[]))}),[n]);return r.createElement(ta,{size:"small",onClick:c},0===t.length?o:i)},Aa=({elementIdPath:e})=>{const t=(0,s.I0)(),n=$t()(e),i=Al((e=>Bn(e,n))),o=Al((e=>zn(e,n))),c=i?Qn(i):null,l=Al((e=>c?Yn(e,c):null)),a=r.useCallback((n=>{n.preventDefault(),c&&t(Ai(c,e))}),[c,e,t]);return r.createElement(ta,{size:"small",onClick:a},o," [",l,"]")},Ja=({circuitId:e,elementIdPath:t})=>{const n=t.map(((e,n)=>{const i=t.slice(0,n+1);return r.createElement(r.Fragment,{key:e},r.createElement("span",null,">"),r.createElement(Aa,{elementIdPath:i}))}));return r.createElement("div",{className:S("circuit-element-breadcrumb","circuit-element-breadcrumb--1CYNC")},r.createElement(Da,{circuitId:e,elementIdPath:t}),n)},Ua=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),Za=(0,fn.P1)(bs,_r,((e,t)=>[...fr()(e),...fr()(t).map((e=>({p1:e,p2:e})))].reduce(b.G0,Ua))),Fa="@element/new",Ka=e=>({type:Fa,payload:{elementType:e}});function $a(e){return e.type===Fa}const Ha=r.createContext({zoomFactor:1,zoom:()=>{}});function Ga(){return r.useContext(Ha)}const Va=({children:e})=>{const[t,n]=r.useState(1),i=r.useCallback((e=>{n((t=>e>0?t*e*1.03:t/(1.03*-e)))}),[]),o=r.useMemo((()=>({zoomFactor:t,zoom:i})),[i,t]);return r.createElement(Ha.Provider,{value:o},e)},qa={current:null},Ya=r.createContext({svgRef:qa,scalerRef:qa}),Xa=Ya.Provider,Qa=({svgRef:e,scalerRef:t,children:n})=>{const i=r.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return r.createElement(Xa,{value:i},n)},_a=vn(((e,t)=>{const{elementIdsByCircuitId:n}=e,r=Object.keys(n);for(const e of r)if(-1!==n[e].indexOf(t))return e;return null})),eu=(e,t,n)=>{if(!t)return!1;if(t===n)return!0;const r=Xn(n),{elementsById:i}=e.services.circuitGraph;return Object.keys(i).filter((e=>i[e].elementType===r)).some((n=>{const r=_a(e,n);return!!r&&eu(e,t,r)}))},tu=r.createContext({editorId:"~none",circuitId:"~none",elementIdPath:[]});function nu(){return r.useContext(tu)}const ru=({editorId:e,children:t})=>{const n=Al((t=>Rt(t,e))),{circuitId:i,elementIdPath:o}=null!=n?n:{circuitId:"~none",elementIdPath:[]},s=r.useMemo((()=>({editorId:e,circuitId:i,elementIdPath:o})),[i,o,e]);return n?r.createElement(tu.Provider,{value:s},t):null};function iu(e,t,n){const r=t.getScreenCTM();if(!r)return n;const i=e.createSVGPoint();i.x=n.x,i.y=n.y;const o=i.matrixTransform(r.inverse());return{x:o.x,y:o.y}}function ou(){const{svgRef:e,scalerRef:t}=r.useContext(Ya);return r.useCallback((n=>e.current&&t.current?iu(e.current,t.current,n):n),[e,t])}const su="text-unselectable--2tvXe",cu="element-interaction-toggle--1eeE2",lu={"integrated-circuit":({elementId:e,elementPath:t,circuitId:n,inputPinIds:i,outputPinIds:o})=>{const c=(0,s.I0)(),l=Al((e=>Yn(e,n))),a=Al(Wn),u=_n(i.length,o.length),d=r.useCallback((r=>{e&&(r.defaultPrevented||(r.preventDefault(),c(Ai(n,[...t||[],e]))))}),[e,c,n,t]),m=i.map(((e,t)=>{const n=50*t+25;return r.createElement("g",{key:e},r.createElement("line",{className:"element-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:4,y1:n,x2:10,y2:n}),r.createElement("text",{className:su,x:15,y:n,alignmentBaseline:"middle",fontSize:".7em"},a[e]))})),p=o.map(((e,t)=>{const n=50*t+25;return r.createElement("g",{key:e},r.createElement("line",{key:t,className:"element-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:n,x2:100,y2:n}),r.createElement("text",{className:su,x:85,y:n,textAnchor:"end",alignmentBaseline:"middle",fontSize:".7em"},a[e]))}));return r.createElement("g",null,r.createElement("text",{className:S(su,"element-select-highlight--fill"),textAnchor:"middle",x:50,y:0},l),r.createElement("path",{className:"element-select-highlight--stroke element-select-highlight--fill",stroke:"black",fill:"white",d:u,onDoubleClick:d}),m,p)},"interaction-momentary":({elementId:e,elementPath:t})=>{const n=(0,s.I0)(),i=Al(mc),o=r.useMemo((()=>[...t||[],null!=e?e:"~~none"]),[t,e]),c=Al((e=>Cr(e,o))),l=r.useCallback((e=>{i&&0===e.button&&(e.defaultPrevented||(e.preventDefault(),n((0,Ls.Xx)(o,!0))))}),[o,n,i]),a=r.useCallback((()=>{i&&n((0,Ls.Xx)(o,!1))}),[o,n,i]);let u="darkgreen",d="lightgrey";return c&&c.OUT&&(u="lightgreen",d="black"),r.createElement("g",{onMouseDown:l,onMouseUp:a,onMouseLeave:a,className:cu},r.createElement("rect",{className:"element-select-highlight--stroke element-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),r.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),r.createElement("circle",{cx:25,cy:25,r:17,fill:u}),r.createElement("text",{className:su,x:25,y:25,fontSize:".8em",fill:d,textAnchor:"middle",alignmentBaseline:"middle"},"Push"))},"interaction-toggle":({elementId:e,elementPath:t,evolverState:n})=>{const i=(0,s.I0)(),o=r.useCallback((n=>{e&&0===n.button&&(n.defaultPrevented||(n.preventDefault(),i((0,Ls.Xx)([...t||[],e]))))}),[e,i,t]);let c="darkgreen",l="lightgrey",a="darkred";if(n){const{toggleState:e}=n;e?(c="lightgreen",l="black"):a="red"}return r.createElement("g",{onClick:o,className:cu},r.createElement("rect",{className:"element-select-highlight--stroke element-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),r.createElement("line",{x1:45,y1:25,x2:50,y2:25,stroke:"black",strokeWidth:2}),r.createElement("rect",{x:10,y:10,width:30,height:15,strokeWidth:0,fill:c}),r.createElement("text",{className:su,x:25,y:19,fontSize:".8em",fill:l,textAnchor:"middle",alignmentBaseline:"middle"},"On"),r.createElement("rect",{x:10,y:25,width:30,height:15,strokeWidth:0,fill:a}),r.createElement("text",{className:su,x:25,y:34,fontSize:".8em",fill:"lightgrey",textAnchor:"middle",alignmentBaseline:"middle"},"Off"))}},au=({componentName:e})=>r.createElement("g",null,r.createElement("rect",{width:50,height:50,fill:"red"}),r.createElement("text",{x:25,y:25,alignmentBaseline:"middle"},e));function uu(e,t,n,i){const{component:o,componentProps:s}=i,c=Object.assign({elementId:e,elementPath:t,evolverState:n},s);let l;return"string"==typeof o?(l=lu[o],l||(l=()=>r.createElement(au,{componentName:o}))):l=o,r.createElement(l,Object.assign({},c))}const du=Object.freeze({}),mu=r.memo((function({className:e,elementId:t,x:n=0,y:i=0,elementType:o}){const s=Al((e=>or(e,o)));let c;c=s?uu(t,[],du,s.visual):r.createElement("rect",{x:n,y:i,width:50,height:50,fill:"red"});const l=0!=n||0!=i?`translate(${n}, ${i})`:void 0;return r.createElement("g",{className:S(e,"element-visual"),transform:l},c)})),pu=r.memo((function(){const e=(0,s.I0)(),{circuitId:t}=nu(),n=Al(dn),i=ou(),{zoomFactor:o}=Ga();function c(e){return e*(1/o)}const[l,a]=r.useState(null),[u,d]=r.useState(null),m=Al((e=>eu(e,Qn(l),t))),[,p]=(0,ye.L)({accept:Fa,collect:e=>{e.isOver()||(d(null),a(null))},hover:(e,t)=>{if(!$a(e))return d(null),void a(null);const n=t.getClientOffset();if(!n)return;const r=i({x:n.x,y:n.y});a(e.payload.elementType),d(r)},drop:(r,o)=>{if(!$a(r))return;if(m)return;const s=o.getClientOffset();if(!s)return;const c=i({x:s.x,y:s.y});e(He(r.payload.elementType,t,(0,b.R9)(c,n)))}},[t,i,n,m]),y=u&&(0,b.R9)(u,n),f=100*c(1)+"%";return r.createElement("g",{id:"drag-new-element-layer"},!m&&y&&l&&r.createElement("g",{opacity:.5},r.createElement(mu,{x:y.x,y:y.y,elementType:l})),m&&r.createElement("g",{transform:`scale(${c(1)})`},r.createElement("rect",{width:"100%",height:"100%",opacity:.7,fill:"black"}),r.createElement("text",{x:"100",y:"25%",fill:"white"},"The current circuit is already inside the dragged IC.")),r.createElement("rect",{ref:p,width:f,height:f,fill:"transparent"}))})),yu=Qt((e=>e.dragMode)),fu=Qt(((e,t)=>null!=e.dragMode&&e.dragStartEditorId===e.dragEndEditorId&&e.dragStartEditorId===t)),gu=Qt((e=>null!=e.dragMode)),Iu=Qt((e=>e.dragMode?e.dragStart:null)),hu=Qt((e=>e.dragMode?e.dragEnd:null));let vu=null;const Eu=e=>{const t=e.services.circuitEditorDrag;if("move"!==t.dragMode)return null;let n;n=hi(e).length>0?dn(e):mn(e);const{dragStart:r,dragEnd:i,dragModifierKeys:o}=t;if(!i)return null;let s=(0,b.sj)(i,r);if(o.shiftKey){const e=(0,b.Fv)((0,b.sj)(i,r));s=Math.abs(e.x)>=.5?{x:s.x,y:0}:{x:0,y:s.y}}return o.ctrlMetaKey||(s=(0,b.R9)(s,n)),vu&&(0,b.kg)(s,vu)||(vu=s),vu},bu=e=>{const t=Eu(e);if(!t)return null;const n=hi(e),r=Kn(e),i={};for(const e of n)i[e]=(0,b.ZO)(r[e],t);return i},wu=e=>{const t=Eu(e);if(!t)return null;const n=vi(e),r=_r(e),i={};for(const e of n)i[e]=(0,b.ZO)(r[e],t);return i},Ou=e=>{if("move"!==e.services.circuitEditorDrag.dragMode)return de();const t=vi(e),n=hi(e),r=Eu(e);if(!r)return de();function i(t){let i=mr(e,t.elementId,t.pinId);return-1!==n.indexOf(t.elementId)&&(i=(0,b.ZO)(i,r)),i}function o(n){let i=ei(e,n);return i?(-1!==t.indexOf(n)&&(i=(0,b.ZO)(i,r)),i):b.Ds}function s(e){switch(e.type){case"output":return[i(e.outputPin),o(e.jointId)];case"input":return[o(e.jointId),i(e.inputPin)];case"bridge":return[o(e.jointAId),o(e.jointBId)]}return null}const c=[],l=new Set;for(const n of t){const t=$r(e,n);for(const n of t){if(l.has(n))continue;l.add(n);const t=s(e.services.circuitGraph.wireSegmentsById[n]);t&&c.push(t)}}return c},ju=r.memo((function(){const{editorId:e}=nu(),t=Al((t=>fu(t,e))),n=Al(bu),i=Al(kn),o=Al(wu),s=Al(Ou);if(!t)return null;const c=fr()(In()(n,((e,t)=>r.createElement(mu,{key:t,elementType:i[t],x:e.x,y:e.y})))),l=fr()(In()(o,((e,t)=>r.createElement("circle",{key:t,cx:e.x,cy:e.y,r:2,stroke:"none",fill:"black"})))),a=s.map((([e,t],n)=>r.createElement("line",{key:n,x1:e.x,y1:e.y,x2:t.x,y2:t.y,stroke:"black",strokeWidth:2})));return r.createElement("g",{id:"drag-element-move-preview-layer",opacity:.4},c,l,a)}));function ku({dragThreshold:e=5,onClick:t,onDragStart:n}){const[i,o]=r.useState(!1),s=r.useRef(null),c=r.useCallback((e=>{e.preventDefault&&(o(!0),s.current={x:e.pageX,y:e.pageY})}),[]),l=r.useCallback((t=>{if(!s.current)return;const r=s.current;(Math.abs(r.x-t.pageX)>=e||Math.abs(r.y-t.pageY)>=e)&&(n&&n(t,s.current),o(!1),s.current=null)}),[e,n]),a=r.useCallback((e=>{s.current&&(t&&t(e),o(!1),s.current=null)}),[t]);return r.useEffect((()=>{if(i)return document.addEventListener("mousemove",l),document.addEventListener("mouseup",a),()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a)}}),[i,l,a]),{startTracking:c}}function xu(e){const{ctrlKey:t,altKey:n,shiftKey:r,metaKey:i}=e;return{ctrlMetaKey:ya?i:t,altKey:n,shiftKey:r}}Object.freeze({});const Cu=Qt((0,fn.P1)(yu.local,Iu.local,hu.local,((e,t,n)=>"select"===e&&t&&n?(0,b.Qu)(t,n):null))),Bu=({x:e,y:t,open:n,onRequestClose:i,children:o})=>{const s=r.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return r.createElement(Ql,{value:i},r.createElement(ql,{isOpen:n,onRequestClose:i,anchorEl:s,placement:"bottom-start"},o))};function Pu(){const[e,t]=r.useState(null),n=r.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),i=r.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:r.useCallback((t=>e?("function"==typeof t&&(t=t({point:e})),r.createElement(Bu,{open:!0,onRequestClose:i,x:e.x,y:e.y},t)):null),[e,i])}}const Nu=({fieldPosition:e})=>{const t=na(Qe),n=Al(hi).length>0,i=na(Cs),o=Al(ha),s=na(rt,{pastePosition:e}),c=na(et);return r.createElement(r.Fragment,null,r.createElement(ua,{onClick:t},"Align Selection To Grid"),r.createElement(da,null),r.createElement(ua,{disabled:!n,secondary:fa+"+c",onClick:i},"Copy"),r.createElement(ua,{disabled:!o,secondary:fa+"+v",onClick:s},"Paste"),r.createElement(da,null),r.createElement(ua,{onClick:c},"Delete Selected"))},Su=({fieldPosition:e})=>r.createElement(aa,null,r.createElement(Nu,{fieldPosition:e})),Mu=r.memo((function(){const e=(0,s.I0)(),{editorId:t}=nu(),{zoomFactor:n}=Ga(),i=Al((e=>fu(e,t))),o=Al(Cu);function c(e){return e*(1/n)}const l=ou(),{openContextMenu:a,renderContextMenu:u}=Pu(),d=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),a(e))}),[a]),m=r.useCallback((t=>{if(0!==t.button)return;const n=xu(t);n.ctrlMetaKey||n.shiftKey||e({type:gs})}),[e]),p=r.useCallback(((n,r)=>{const i=l(r),o=xu(n);e(((e,t,n)=>({type:Oi,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(i,o,t))}),[e,t,l]),{startTracking:y}=ku({onClick:m,onDragStart:p});return r.createElement("g",{className:"circuit-editor-mouse-layer"},r.createElement("rect",{width:100*c(1)+"%",height:100*c(1)+"%",fill:"transparent",onMouseDown:y,onContextMenu:d}),i&&o&&r.createElement("g",{transform:`translate(${o.p1.x}, ${o.p1.y})`},r.createElement("rect",{width:o.p2.x-o.p1.x,height:o.p2.y-o.p1.y,strokeWidth:c(2),strokeDasharray:`${c(5)} ${c(3)}`,stroke:"skyblue",fill:"transparent"})),u((({point:e})=>r.createElement(Su,{fieldPosition:l(e)}))))})),Wu=r.memo((function(){const[e]=r.useState("grid-"+(0,De.Z)()),{zoomFactor:t}=Ga(),n=50*t;return r.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("pattern",{id:e,width:n,height:n,patternUnits:"userSpaceOnUse"},r.createElement("path",{d:`M ${n} 0 L 0 0 0 ${n}`,fill:"none",stroke:"gray",strokeWidth:.5}))),r.createElement("rect",{width:"100%",height:"100%",fill:`url(#${e})`}))})),zu=r.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:i,onChange:o,onBeginEdit:s,onCommit:c,onCancel:l,onBlur:a,onKeyUp:u},d)=>{const[m,p]=r.useState(null),y=r.useCallback((e=>{null==m&&s&&s(),p(e.target.value),o&&o(e)}),[m,s,o]),f=r.useCallback((e=>{u&&u(e),e.defaultPrevented||null!=m&&("Escape"===e.key?(e.preventDefault(),l&&l()):"Enter"===e.key&&(e.preventDefault(),c&&c(m)))}),[u,m,l,c]),g=r.useCallback((e=>{a&&a(e),null!=m&&c&&c(m)}),[a,m,c]);return r.createElement("input",{ref:d,className:e,autoFocus:t,defaultValue:n,value:i,type:"text",onChange:y,onKeyUp:f,onBlur:g})})),Tu=({className:e,textClassname:t,inputClassname:n,label:i,defaultValue:o,isEditing:s,onRequestEdit:c,onCommit:l,onCancel:a})=>{const u=r.useRef(null),d=r.useCallback((e=>{c&&(e.defaultPrevented||(e.preventDefault(),c()))}),[c]),m=r.useCallback((e=>{"Escape"===e.key&&s&&a()}),[s,a]),p=r.useCallback((()=>{s&&a()}),[s,a]);return r.useEffect((()=>{s&&u.current&&u.current.select()}),[s]),s?r.createElement(zu,{ref:u,className:S(e,n),autoFocus:!0,defaultValue:o,onBlur:p,onKeyUp:m,onCommit:l,onCancel:a}):r.createElement("span",{className:S(e,t),onDoubleClick:d},null!=i?i:o)},Lu=e=>{const{onRequestEdit:t,onCommit:n}=e,i=Xl(),o=r.useCallback((()=>{t&&t()}),[t]),s=r.useCallback((e=>{n(e),i()}),[n,i]);return r.createElement("li",{className:ia,onClick:o},r.createElement(Tu,Object.assign({},e,{onCommit:s})))},Ru=({elementId:e,fieldPosition:t})=>{const n=(0,s.I0)(),{elementIdPath:i}=nu(),o=Al(mc),c=Al((t=>zn(t,e))),l=Al((t=>Bn(t,e))),a=l?Qn(l):null,[u,d]=r.useState(!1),m=r.useCallback((()=>{d(!0)}),[]),p=r.useCallback((()=>{d(!1)}),[]),y=r.useCallback((t=>{d(!1),n(((e,t)=>({type:Ye,payload:{elementId:e,elementName:t}}))(e,t))}),[n,e]),f=r.useCallback((()=>{a&&n(Ai(a,[...i,e],{newWindow:!0}))}),[i,n,a,e]);return o?null:r.createElement(aa,null,r.createElement(Lu,{defaultValue:null!=c?c:"<unknown>",label:r.createElement("span",{style:{fontWeight:"bold"}},c),isEditing:u,onRequestEdit:m,onCommit:y,onCancel:p}),r.createElement(da,null),a&&r.createElement(r.Fragment,null,r.createElement(ua,{onClick:f},"Open in New Window"),r.createElement(da,null)),r.createElement(Nu,{fieldPosition:t}))},Du=r.memo((function({elementId:e}){const t=(0,s.I0)(),{editorId:n,elementIdPath:i}=nu(),o=Al(mc),{openContextMenu:c,renderContextMenu:l}=Pu(),a=Al((t=>qi(t,e))),{x:u,y:d}=Al((t=>$n(t,e))),m=Al((t=>((e,t)=>{const{evolverIdsByElementId:n}=xr(e),r=e.services.simulator.evolverStatesByEvolverId,i=hr(n,t);if(i)return r[i]})(t,[...i,e]))),p=Al((t=>Ei(t,e))),y=ou(),f=r.useCallback((n=>{if(o)return;if(n.defaultPrevented)return;if(0!==n.button)return;n.preventDefault();const r=cn(xu(n));t(fi(e,r))}),[t,o,e]),g=r.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const r=cn(xu(n),"set-if-unselected");t(fi(e,r)),c(n)}),[t,e,c]),I=r.useCallback(((r,i)=>{const o=y(i),s=xu(r);t(((e,t,n,r)=>({type:pi,payload:Object.assign(Object.assign({},t),{elementId:e,modifierKeys:n,editorId:r})}))(e,o,s,n))}),[y,t,e,n]),{startTracking:h}=ku({onClick:f,onDragStart:I}),v=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),o||0===e.button&&h(e))}),[o,h]);let E,w;if(a){const{hitRect:t}=a.visual;E=uu(e,i,m,a.visual),w=t}else E=r.createElement("rect",{x:u,y:d,width:50,height:50,fill:p?"goldenrod":"red"}),w={p1:b.Ds,p2:{x:50,y:50}};const O=0!=u||0!=d?`translate(${u}, ${d})`:void 0;return r.createElement("g",{transform:O},r.createElement("g",{id:vl(n,e),className:S("circuit-field-element",p&&"element-selected"),onMouseDown:v,onContextMenu:g},E),r.createElement(Au,{elementId:e,hitRect:w}),l((({point:t})=>r.createElement(Ru,{elementId:e,fieldPosition:y(t)}))))})),Au=r.memo((function({elementId:e,hitRect:t}){const{zoomFactor:n}=Ga(),i=Al((t=>((e,t)=>{switch(e.services.uiSettings.elementNameMode){case"all":default:return zn(e,t);case"named-only":return Tn(e,t);case"none":return null}})(t,e))),o=Math.max(.7,n);let s=15;return o>1?s-=2*o:s+=1/o*7,i?r.createElement("text",{fontSize:1.2/o+"em",className:su,textAnchor:"middle",x:t.p1.x+(t.p2.x-t.p1.x)/2,y:t.p2.y+s},i):null})),Ju=Du,Uu=r.memo((function(){const{circuitId:e}=nu(),t=Al((t=>Sn(t,e))).map((e=>r.createElement(Ju,{key:e,elementId:e})));return r.createElement("g",null,t)}));var Zu=n(784);const Fu=vn(((e,t)=>{const n=e.wireSegmentsById[t];if(!n||ar(n))return[];const r=Mr.local(e,t);if(!r)return[];const[i,o]=wn(e,r);return lr(n)?o.map((t=>{const r=function(e,t){for(const n of fr()(e.wireSegmentsById))if(cr(n)&&n.lineId===t)return n.outputPin;return null}(e,t);return r?{name:`From [${zn.local(e,r.elementId)}]:[${Xi.local(e,r.elementId,r.pinId)}]`,lineId:t,selected:t===n.lineId}:null})).filter(T):cr(n)?i.filter((t=>!function(e,t,n){for(const r of fr()(e.wireSegmentsById))if(n!==r&&cr(r)&&r.lineId===t)return!0;return!1}(e,t,n))).map((t=>{const r=function(e,t){const n=[];for(const r of fr()(e.wireSegmentsById))lr(r)&&r.lineId===t&&n.push(r.inputPin);return n}(e,t);if(0===r.length)return null;let i=`To [${zn.local(e,r[0].elementId)}]:[${Xi.local(e,r[0].elementId,r[0].pinId)}]`;return r.length>1&&(i+=`(+${r.length-1})`),{name:i,lineId:t,selected:t===n.lineId}})).filter(T):[]})),Ku=({elementId:e,pinId:t})=>{const n=Al(mc),i=Al((n=>Yi(n,e,t))),o=Al((n=>Ar(n,e,t)));return!n&&i&&o?r.createElement(aa,null,r.createElement(Oa,{content:r.createElement($u,{segmentId:o,direction:i})},"Set ","input"===i?"Input":"Output")):null},$u=({segmentId:e,direction:t})=>{const n=(0,s.I0)(),i=Al((t=>Fu(t,e)));return r.createElement(aa,null,r.createElement(wa,{value:!1,onChange:()=>n(xt(e,(0,De.Z)()))},"New ","input"===t?"Input":"Output"),i.map((({lineId:t,name:i,selected:o})=>r.createElement(wa,{key:t,value:o,onChange:()=>n(xt(e,t))},i))))},Hu="highlight--Q2iLD",Gu="is-drag-target--1NYuw",Vu=r.memo((function({elementId:e,pinId:t}){const n=(0,s.I0)(),{editorId:i}=nu(),o=ou(),{openContextMenu:c,renderContextMenu:l}=Pu(),[a,u]=r.useState(!1),d=Al((n=>mr(n,e,t))),m=Al((n=>Yi(n,e,t))),p=Al(si),y=r.useCallback(((r,s)=>{const c=o(s),l=xu(r);n(Si(c,{type:"pin",pin:{elementId:e,pinId:t}},l,i))}),[n,i,o,e,t]),{startTracking:f}=ku({onDragStart:y}),g=r.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),f(e)))}),[f]),I=r.useCallback((()=>{u(!0)}),[]),h=r.useCallback((()=>{u(!1)}),[]),v=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),c(e))}),[c]);if(!d)return null;const E=null!=p&&p.elementId===e&&p.pinId===t,{x:b,y:w}=d;let O;return O="input"===m?r.createElement("path",{d:(0,Zu.x)(b,w,4,-45,225),strokeWidth:2,className:S("element-pin-input--1urBY",E&&Gu,a&&Hu)}):r.createElement("circle",{className:S("element-pin-output--1jFy-",E&&Gu,a&&Hu),cx:b,cy:w,r:3}),r.createElement("g",{id:El(i,e,t),onMouseEnter:I,onMouseLeave:h,onContextMenu:v},O,r.createElement("circle",{stroke:"none",fill:"transparent",cx:b,cy:w,r:5,onMouseDown:g}),l(r.createElement(Ku,{elementId:e,pinId:t})))})),qu=r.memo((function({elementId:e}){var t;const n=Al((t=>qi(t,e))),i=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},o=Object.keys(i).map((t=>r.createElement(Vu,{key:t,elementId:e,pinId:t})));return r.createElement(r.Fragment,null,o)})),Yu=r.memo((function(){const{circuitId:e}=nu(),t=Al((t=>Sn(t,e))).map((e=>r.createElement(qu,{key:e,elementId:e})));return r.createElement("g",null,t)})),Xu=()=>{const e=(0,s.I0)(),{editorId:t}=nu(),{zoomFactor:n}=Ga(),i=Al(gu);function o(e){return e*(1/n)}const c=function(){const{svgRef:e,scalerRef:t}=r.useContext(Ya);return r.useCallback((n=>{if(!e.current||!t.current)return b.Ds;const r={x:n.pageX,y:n.pageY};return iu(e.current,t.current,r)}),[e,t])}(),l=r.useCallback((n=>{if(0===n.buttons)return void e(Yt());const r=c(n),i=xu(n);e(((e,t,n)=>({type:en,payload:{dragPos:e,modifierKeys:t,editorId:n}}))(r,i,t))}),[e,t,c]),a=r.useCallback((n=>{const r=c(n),i=xu(n);e(((e,t,n)=>({type:it,payload:Object.assign(Object.assign({},e),{modifierKeys:t,editorId:n})}))(r,i,t))}),[e,t,c]);return i?r.createElement("rect",{width:100*o(1)+"%",height:100*o(1)+"%",fill:"transparent",onMouseMove:l,onMouseUp:a}):null},Qu=({wireId:e,wireSegmentId:t})=>{const n=(0,s.I0)(),{editorId:i,elementIdPath:o}=nu(),c=ou(),l=r.useRef(!1),[a,u]=r.useState(null),d=Al(mc),m=Al((e=>wi(e,t))),p=Al((e=>Yr(e,o,t))),y=Al(gu),f=Al(mn),g=Al((e=>Lr(e,t))),I=Al((e=>ti(e,t))),h=Al((e=>ni(e,t))),v=r.useCallback((r=>{if(l.current=!1,!a)return;const o=xu(r);n(((e,t,n,r,i)=>({type:Bi,payload:Object.assign(Object.assign({},e),{wireId:t,wireSegmentId:n,modifierKeys:r,editorId:i})}))(a,e,t,o,i)),u(null)}),[n,i,a,e,t]),E=r.useCallback((e=>{if(e.defaultPrevented)return;e.preventDefault(),l.current=!1,u(null);const r=cn(xu(e));n(((e,t="set")=>({type:js,payload:{segmentIds:Array.isArray(e)?e:[e],mode:t}}))(t,r))}),[n,t]),{startTracking:w}=ku({onDragStart:v,onClick:E});return r.createElement("g",{className:S("wire-segment--3ENBk",m&&"selected--1ceWg",p&&"powered--I4EaN"),onMouseMove:e=>{if(y||d||l.current)return;const t=xu(e),n=c({x:e.pageX,y:e.pageY}),r=(0,b.Fv)((0,b.sj)(h,I)),i=(0,b.sj)(n,I),o=(0,b.Ih)(i,r),s=(0,b.ZO)(I,(0,b.bA)(r,o));t.ctrlMetaKey||(1===Math.abs(r.x)&&(s.x=(0,b.n$)(s.x,f)),1===Math.abs(r.y)&&(s.y=(0,b.n$)(s.y,f))),u(s)},onMouseLeave:()=>{l.current||u(null)},onMouseDown:e=>{e.defaultPrevented||y||d||(l.current=!0,w(e))}},r.createElement("line",{x1:I.x,x2:h.x,y1:I.y,y2:h.y,stroke:"inherit",strokeWidth:2}),r.createElement("line",{x1:I.x,x2:h.x,y1:I.y,y2:h.y,stroke:"transparent",strokeWidth:4}),("input"===g||"input-output"===g)&&r.createElement("circle",{cx:h.x,cy:h.y,r:2,stroke:"none",fill:"inherit"}),a&&r.createElement("circle",{cx:a.x,cy:a.y,r:3,fill:"orange",stroke:"none"}))},_u=({wireId:e,jointId:t})=>{const n=(0,s.I0)(),{editorId:i}=nu(),o=ou(),c=Al(mc),l=Al((e=>ei(e,t))),a=Al((e=>bi(e,t))),[u,d]=r.useState(!1),m=r.useCallback((r=>{const s=o({x:r.pageX,y:r.pageY}),c=xu(r);n(((e,t,n,r,i)=>({type:ki,payload:Object.assign(Object.assign({},e),{wireId:t,jointId:n,modifierKeys:r,editorId:i})}))(s,e,t,c,i))}),[n,i,o,t,e]),p=r.useCallback((e=>{if(e.defaultPrevented)return;e.preventDefault();const r=cn(xu(e));n(Ci(t,r))}),[n,t]),{startTracking:y}=ku({onDragStart:m,onClick:p}),f=`${(0,Zu.x)(l.x,l.y,8.5,0,180)} ${(0,Zu.x)(l.x,l.y,8.5,180,0)} z ${(0,Zu.x)(l.x,l.y,5,0,180)} ${(0,Zu.x)(l.x,l.y,5,180,0)}`;return l?r.createElement("g",{id:wl(i,t),onMouseOver:()=>{d(!0)},onMouseLeave:()=>{d(!1)}},r.createElement("circle",{cx:l.x,cy:l.y,r:6,fill:"transparent",stroke:"none"}),r.createElement("circle",{cx:l.x,cy:l.y,r:3,fill:"black",stroke:"none"}),!c&&(u||a)&&r.createElement("g",{className:S("wire-joint--interactor--3h5o4",a&&"selected--2L-Hh")},u&&r.createElement("g",{onMouseDown:e=>{const r=o({x:e.pageX,y:e.pageY}),s=xu(e);n(Si(r,{type:"joint",jointId:t},s,i))}},r.createElement("circle",{cx:l.x,cy:l.y,r:8.5,stroke:"none",fill:"transparent",className:"mouse-detector--23NpN"}),r.createElement("path",{shapeRendering:"geometricPrecision",stroke:"none",fill:"black",fillRule:"evenodd",d:f})),r.createElement("circle",{cx:l.x,cy:l.y,r:3,fill:"black",stroke:"none",onMouseDown:y}))):null},ed=({wireId:e})=>{const{editorId:t}=nu(),n=Al((t=>Sr(t,e))),i=Al((t=>Wr(t,e))),o=n.map((t=>r.createElement(Qu,{key:t,wireId:e,wireSegmentId:t}))),s=i.map((t=>r.createElement(_u,{key:t,wireId:e,jointId:t})));return r.createElement("g",{id:bl(t,e)},o,s)},td=r.memo((function(){const{circuitId:e}=nu(),t=Al((t=>Ur(t,e))).map((e=>r.createElement(ed,{key:e,wireId:e})));return r.createElement("g",{className:"circuit-editor-wires-layer"},t)})),nd=()=>{const e=Al(di),t=Al(li),n=Al(ui),i=Al(mi).map((([e,t],n)=>r.createElement("line",{key:n,x1:e.x,y1:e.y,x2:t.x,y2:t.y,stroke:"black",strokeWidth:2,opacity:.4})));return t||n||e||0!==i.length?r.createElement("g",{className:"circuit-editor-drag-wire-preview"},i,e&&r.createElement("circle",{cx:e.x,cy:e.y,r:2,opacity:.4,stroke:"none",fill:"black"}),t&&n&&r.createElement("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"black",strokeWidth:2,opacity:.4})):null},rd=({width:e,height:t})=>{const n=(0,s.I0)(),{zoomFactor:i}=Ga(),o=r.useRef(null),c=r.useRef(null),l=r.useCallback((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),[]),a=r.useCallback((()=>{n({type:Wi})}),[n]),[{isDraggingNewElement:u},d]=(0,ye.L)({accept:Fa,collect:e=>({isDraggingNewElement:e.isOver()})});return r.createElement("svg",{tabIndex:-1,ref:e=>{o.current=e,d(e)},width:e,height:t,onMouseDown:l,onMouseLeave:a,className:"circuit-field-svg--o7YIn"},r.createElement(Wu,null),r.createElement("g",{ref:c,"transform-origin":"0 0",transform:`scale(${i})`},r.createElement(Qa,{svgRef:o,scalerRef:c},r.createElement(Mu,null),r.createElement(Uu,null),r.createElement(td,null),r.createElement(Yu,null),r.createElement(ju,null),r.createElement(nd,null),u&&r.createElement(pu,null),r.createElement(Xu,null))))},id=({})=>{const e=r.useRef(null),{width:t,height:n}=pe(e),{zoomFactor:i,zoom:o}=Ga(),s=Al(Za),{width:c,height:l}=(0,b.nF)(s),a=Math.max(t,c*i),u=Math.max(n,l*i);return Jl(e,"wheel",r.useCallback((e=>{e.defaultPrevented||e.ctrlKey&&(o(e.deltaY>0?-1:1),e.preventDefault(),e.stopPropagation())}),[o]),{passive:!1}),r.createElement("div",{ref:e,style:{width:"100%",height:"100%"}},r.createElement(rd,{width:a,height:u}))},od=({className:e,editorId:t})=>{const n=Al(mc);return r.createElement(ru,{editorId:t},r.createElement("div",{id:hl(t),className:S("circuit-editor","circuit-editor--2jFUa",n&&"simulator-active",e)},r.createElement("div",{className:"circuit-editor-scrollarea--12k0x"},r.createElement(Va,null,r.createElement(id,null)))))};var sd=n(1474);const cd=e=>r.createElement("svg",Object.assign({width:16,height:16},e,{className:S(Pa,e.className)}),r.createElement("path",{d:"M4,4 L12,12 M4,12 L12,4"})),ld=({className:e,id:t,title:n,children:i})=>{const o=_(),{closeWindow:s}=re(),c=r.useCallback((()=>{s(o)}),[s,o]),[,l]=(0,sd.c)({item:ge(o)});return r.createElement(he,{id:t,className:q["tessel-window"]},r.createElement("div",{ref:l,className:q["tessel-window-titlebar"]},r.createElement("div",{className:q["tessel-window-title"]},n),r.createElement("div",{className:q["tessel-window-controls"]},r.createElement(cd,{className:q["tessel-window-controls-close"],onClick:c}))),r.createElement("div",{className:S(q["tessel-window-content"],e)},i))},ad="keymap:CircuitEditor/SimStep",ud="keymap:CircuitEditor/SelectAll",dd="keymap:CircuitEditor/Copy",md="keymap:CircuitEditor/Paste",pd="keymap:CircuitEditor/Delete",yd="keymap:CircuitEditor/Undo",fd="keymap:CircuitEditor/Redo",gd={[ad]:"space",[ud]:fa+"+a",[dd]:fa+"+c",[md]:fa+"+v",[pd]:["backspace","del"],[yd]:fa+"+z",[fd]:[fa+"+y",fa+"+shift+z"]};const Id=e=>{var{children:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children"]);return r.createElement("div",Object.assign({},n,{className:L}),t)},hd=({id:e,value:t,label:n,isSelected:i,onItemSelected:o})=>{const s=r.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),o(t))}),[o,t]);return r.createElement("li",{id:e,className:S("selection-list-item","selection-list-item--errDr",i&&"selection-list-item--selected--3MkqB"),onClick:s},r.createElement("div",{className:S("selection-list-item-content--321YU",su)},n))},vd=({className:e,id:t,items:n,onItemSelected:i})=>r.createElement("ul",{id:t,className:S("selection-list","selection-list--3yujH",e)},n.map((e=>r.createElement(hd,Object.assign({key:e.value},e,{onItemSelected:i}))))),Ed=({circuitId:e})=>{const t=(0,s.I0)(),n=Al((t=>Yn(t,e))),[i,o]=r.useState(!1),{openContextMenu:c,renderContextMenu:l}=Pu(),a=r.useCallback((()=>{e!==m&&o(!0)}),[e]),u=r.useCallback((()=>{o(!1)}),[]),d=r.useCallback((n=>{t(((e,t)=>({type:Ke,payload:{circuitId:e,circuitName:t}}))(e,n)),o(!1)}),[e,t]),p=r.useCallback((n=>{n.preventDefault(),t(Ai(e,null,{newWindow:!0}))}),[e,t]),y=r.useCallback((n=>{n.preventDefault(),t((e=>({type:Ze,payload:{circuitId:e}}))(e))}),[t,e]),f=r.useCallback((e=>{e.preventDefault(),e.stopPropagation(),c(e)}),[c]);return r.createElement("div",{className:"circuitstree-item--22dzG",onContextMenu:f,onDoubleClick:a},r.createElement(Tu,{defaultValue:n,isEditing:i,onRequestEdit:a,onCommit:d,onCancel:u}),l(r.createElement(aa,null,e!==m&&r.createElement(r.Fragment,null,r.createElement(ua,{onClick:a},"Rename Circuit"),r.createElement(da,null)),r.createElement(ua,{onClick:p},"Open in New Window"),e!==m&&r.createElement(r.Fragment,null,r.createElement(da,null),r.createElement(ua,{onClick:y},"Delete Circuit")))))},bd=()=>{const e=(0,s.I0)(),t=r.useCallback((()=>{e(Je())}),[e]);return r.createElement(aa,null,r.createElement(ua,{onClick:t},"New Circuit"))},wd=({className:e,isOpen:t,anchorEl:n,placement:o="auto",children:s})=>{const[c,l]=r.useState(null),[a,u]=r.useState(null),{attributes:d,styles:m}=(0,Fl.D)(t?n:null,c,{placement:o,modifiers:[{name:"arrow",options:{element:a}},{name:"offset",options:{offset:[0,8]}}]});return t?(0,i.createPortal)(r.createElement("div",Object.assign({ref:l,className:S("tooltip--2yxRI",e),style:m.popper,role:"tooltip"},d.popper),s,r.createElement("div",Object.assign({ref:u,"data-popper-arrow":!0,className:"tooltip-arrow--2mJMo",style:m.arrow},d.arrow))),document.body):null},Od={"input-output":"I/O","integrated-circuit":"Integrated Circuits",logic:"Logic"},jd=({category:e,search:t})=>{const n=Al(rr).filter((t=>t.category===e)).filter((function(n){return n.category===e&&(null===t||-1!==n.displayName.toLowerCase().indexOf(t))})).map((e=>r.createElement(kd,{key:e.type,elementType:e.type})));return 0===n.length?null:r.createElement(r.Fragment,null,r.createElement("li",{className:"element-tray-category--3K8sv"},Od[e]),n)},kd=({elementType:e})=>{const[t,n]=r.useState(null),i=Al((t=>or(t,e))),[o,s]=r.useState(!1),c=r.useCallback((e=>{e.preventDefault(),s(!0)}),[]),l=r.useCallback((e=>{e.target===t&&s(!1)}),[t]),[,a]=(0,sd.c)({item:Ka(e)});let u,d=e,m="0 0 50 50";if(i){const{trayComponent:e,hitRect:t}=i.visual;if(e){const t=e;u=r.createElement(t,null)}else u=uu(void 0,[],void 0,i.visual),m=`${t.p1.x} ${t.p1.y} ${t.p2.x} ${t.p2.y}`;d=i.displayName}else u=r.createElement(xd,null);return r.createElement("li",{id:"element-tray--element-"+e,ref:e=>{n(e),a(e)},className:"element-tray-item--32gev",onClick:c,onMouseOut:l},r.createElement(wd,{placement:"top",isOpen:o,anchorEl:t},"Click and drag to create a new circuit element."),r.createElement("span",{className:"element-tray-item-preview--12k1m"},r.createElement("svg",{width:30,height:30,viewBox:m},u)),r.createElement("span",{className:su},d))},xd=()=>r.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50}),Cd={"element-tray":()=>{const e=Al(rr),t=Ir()(e.map((e=>e.category))),[n,i]=r.useState(""),o=r.useCallback((e=>{i(e.target.value.toLowerCase())}),[]);return r.createElement(ld,{id:"element-tray",title:"Elements",className:"element-tray--2OmR6"},r.createElement("div",null,r.createElement("input",{className:"element-tray-search--2PYcp",type:"text",value:n,onChange:o,placeholder:"Search"})),r.createElement("div",{className:"element-tray-element-container--1jqen"},r.createElement("ul",{className:"element-tray-element-list--3RXLA"},t.map((e=>r.createElement(jd,{key:e,category:e,search:n}))))))},"circuit-field":({editorId:e})=>{var t,n;const i=(0,s.I0)(),{circuitId:o,elementIdPath:c}=null!==(t=Al((t=>Rt(t,e))))&&void 0!==t?t:{circuitId:null,elementIdPath:[]},l=null!==(n=Al((e=>Yn(e,o))))&&void 0!==n?n:"<Circuit Missing>",a=r.useMemo((()=>{function e(e){return t=>{if(t){if(t.defaultPrevented)return;t.preventDefault()}i(e)}}return{[ad]:e(_s()),[ud]:e({type:ys}),[dd]:e(Cs()),[md]:e(rt()),[pd]:e(et()),[yd]:e(st()),[fd]:e(at())}}),[i]),u=r.useCallback((()=>{i((e=>({type:Li,payload:{editorId:e}}))(e))}),[i,e]);return r.createElement(ld,{title:l+" [Circuit]"},r.createElement(Ra.HotKeys,{keyMap:gd,handlers:a,component:Id},r.createElement("div",{onFocus:u,className:S("circuit-field-view",L,R["flex-column"])},r.createElement(Ja,{circuitId:o,elementIdPath:c}),r.createElement(od,{className:S(L,R["flexitem-shrink"]),editorId:e}))))},"circuits-list":()=>{const e=(0,s.I0)(),t=Al(qn),{openContextMenu:n,renderContextMenu:i}=Pu(),o=r.useCallback((t=>{e(Ai(t))}),[e]),c=r.useCallback((e=>{e.preventDefault(),n(e)}),[n]),l=r.useMemo((()=>Object.keys(t).map((e=>({id:Nl(e),value:e,label:r.createElement(Ed,{circuitId:e})})))),[t]);return r.createElement(ld,{id:"circuit-list-window",title:"Circuits",className:S("circuitstree--QeaI9")},r.createElement("div",{className:L,onContextMenu:c},r.createElement(vd,{className:L,id:"circuit-list",items:l,onItemSelected:o})),i(r.createElement(bd,null)))}};function Bd(e){const t=Cd[e.windowId];return t?r.createElement(t,Object.assign({},e.windowProps)):null}const Pd=()=>{const e=(0,s.I0)(),t=Al(Ul),n=r.useCallback((t=>{e((e=>({type:Bc,payload:{layout:e}}))(t))}),[e]),i=r.useCallback((t=>{let n=t.target;for(;null!=n;){if(n.classList.contains("circuit-editor"))return;n=n.parentElement}e(Yt())}),[e]);return Jl({current:document.body},"mouseup",i),r.createElement("div",{className:S(L,R["flex-column"])},r.createElement(La,{className:R["flexitem-fix"]}),r.createElement("div",{className:S(L,R["flexitem-shrink"])},r.createElement(be,{className:S("project-editor",L),rootItem:t,onLayoutChange:n,renderWindow:Bd})))},Nd=({location:e})=>{const t=(0,s.I0)(),[n,i]=r.useState(!1);return r.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void i(!0)}const r=n.get("data");r?t((e=>({type:el,payload:{data:e}}))(r)):i(!0)}),[]),n?r.createElement("div",null,"Failed to import project"):r.createElement("div",null,"Importing Project...")},Sd=()=>r.createElement(c.rs,null,r.createElement(c.AW,{exact:!0,path:"/",component:Pd}),r.createElement(c.AW,{exact:!0,path:"/import",component:Nd})),Md=io((e=>e.dialogType)),Wd=io((e=>e.data));var zd=n(227),Td=n(1074);const Ld=({className:e,isOpen:t,onRequestClose:n,children:o})=>t?(0,i.createPortal)(r.createElement("div",{className:S("modal","modal--25LBN")},r.createElement(zd.Y,{onClickOutside:n,onEscapeKey:n},r.createElement("div",{className:S("modal-content--1H0T_",e)},r.createElement(Td.Z,{className:L},o)))),document.body):null,Rd=({isOpen:e,title:t,acceptText:n,cancelText:i,onAccept:o,onCancel:s,footer:c,children:l})=>r.createElement(Ld,{className:"dialog--1eQi6",isOpen:e,onRequestClose:s},r.createElement("div",{className:"dialog-title--1DWsL"},t),r.createElement("div",null,l),r.createElement("div",{className:"dialog-footer--2hYdr"},c,s&&r.createElement(ta,{onClick:s},null!=i?i:"Cancel"),o&&r.createElement(ta,{variant:"primary",onClick:o},null!=n?n:"Accept"))),Dd=()=>{const e=na(no),t=Al(Wd),n=null==t?void 0:t.projectLink,i=r.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const o=r.createElement(ta,{onClick:i},"Copy to Clipboard");return r.createElement(Rd,{isOpen:!0,title:"Export Project Link",cancelText:"Close",onCancel:e,footer:o},r.createElement("div",{className:"export-link-dialog-link-container--phwUA"},r.createElement("code",{className:"export-link-dialog-link--1dOdK"},n)))},Ad=({circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:i})=>{const o=r.useCallback((t=>{t.target.checked&&i(Ir()([...n,e]))}),[e,i,n]);return r.createElement(ba,{onChange:o,value:-1!==n.indexOf(e)},t)},Jd=()=>{const e=(0,s.I0)(),t=Al(Wd),[n,i]=r.useState([]),o=na(co),c=r.useCallback((()=>{e(no(n))}),[e,n]);if(!t)return null;const{circuits:l}=t;return r.createElement(Rd,{isOpen:!0,title:"Import Circuits",onAccept:c,onCancel:o,acceptText:"Import Circuits"},r.createElement("div",null,r.createElement("p",null,"Choose the circuits to import."),r.createElement("p",null,"Any chosen circuits that depend on other circuits will import their dependencies automatically."),r.createElement("p",null,"If any circuits already exist in your project, they will not be re-imported.")),r.createElement("ul",{className:"import-project-circuits-list--2ODCz"},l.map((({circuitId:e,circuitName:t})=>r.createElement("li",{key:e},r.createElement(Ad,{circuitId:e,circuitName:t,selectedIds:n,onSetSelectedIds:i}))))))};const Ud=()=>{const e=Al(Md);if(!e)return null;const t=function(e){switch(e){case"export-project-link":return Dd;case"import-project-circuits":return Jd;default:return function(e){throw new Error("Unknown dialog type "+e)}(e)}}(e);return r.createElement(t,null)},Zd=({selector:e,message:t,placement:n,action:i=[]})=>{const o=(0,s.I0)(),c=function(e){const[t,n]=r.useState(null);return r.useEffect((()=>{const t=new MutationObserver((()=>{n(document.querySelector(e))}));return t.observe(document.body,{childList:!0,subtree:!0}),n(document.querySelector(e)),()=>{t.disconnect()}}),[e]),t}(e);r.useEffect((()=>{c&&c.scrollIntoView()}),[c]);const l=le(i);if(!c||!t&&!l.length)return null;const a=l.map((({name:e,action:t})=>r.createElement(ta,{key:e,size:"small",onClick:()=>o(t)},e)));return r.createElement(wd,{className:"tutorial-tooltip--3gwli",anchorEl:c,placement:n,isOpen:!0},t,a&&r.createElement("div",{className:"tutorial-tooltip-actions--ENkg1"},a))},Fd=()=>{const e=Al(_o),t=Al(es);if(!e)return null;const n=t.map((e=>r.createElement(Zd,Object.assign({key:e.selector},e)))),o=t.map((({selector:e})=>`\n    ${e} {\n      position: relative;\n      z-index: 10;\n    }\n  `)).join("\n");return(0,i.createPortal)(r.createElement("div",{className:"tutorial--jscuw"},r.createElement("div",{className:"tutorial-backdrop--3I0WR"}),r.createElement("style",null,o),n),document.body)},Kd=document.getElementById("root");i.render(r.createElement(l.W,{backend:a.PD},r.createElement(c.F0,{history:u},r.createElement(s.zt,{store:Dl},r.createElement((()=>r.createElement(r.Fragment,null,r.createElement(Sd,null),r.createElement(Ud,null),r.createElement(Fd,null))),null)))),Kd)},784:(e,t,n)=>{"use strict";function r(e,t,n,r,o){const s=i(e,t,n,o),c=i(e,t,n,r),l=o-r<=180?"0":"1";return["M",s.x,s.y,"A",n,n,0,l,0,c.x,c.y].join(" ")}function i(e,t,n,r){const i=(r-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}n.d(t,{x:()=>r})}},0,[[7947,1,956,874,90,898,794,191,80,744,593,617,29,845,105,699,162,945]]]);
//# sourceMappingURL=client.4ca21ff80229fdaaff6c.bundle.js.map