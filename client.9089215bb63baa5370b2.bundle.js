(self.webpackChunkdiscrelog=self.webpackChunkdiscrelog||[]).push([[47],{1235:(e,t,n)=>{"use strict";n.d(t,{zN:()=>r,ke:()=>o});const i="@node/interact",r=e=>({type:i,payload:{circuitNodeIdPath:e}});function o(e){return e.type===i}},5766:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});const i=4},3667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:[],outputPins:["OUT"],interact:()=>({transitions:[{tickOffset:1,valuesByPin:{OUT:!0}},{tickOffset:1+Math.round(1.5*i.v),valuesByPin:{OUT:!1},transitionMerger:"append"}]})}},2318:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const i={toggleState:!1},r={inputPins:[],outputPins:["OUT"],interact(e=i){const t=!e.toggleState;return{state:Object.assign({},e,{toggleState:t}),transitions:{tickOffset:1,valuesByPin:{OUT:t}}}},evolve:(e=i)=>({state:e,transitions:{tickOffset:1,valuesByPin:{OUT:e.toggleState}}})}},7909:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.A&&t.B}}})}},274:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.IN}}})}},4347:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!(t.A&&t.B)}}})}},8112:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!(t.A||t.B)}}})}},6559:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["IN"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:!t.IN}}})}},2649:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:t.A||t.B}}})}},8881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(5766);const r={inputPins:["A","B"],outputPins:["OUT"],evolve:(e,t)=>({transitions:{tickOffset:i.v,valuesByPin:{OUT:(t.A||t.B)&&t.A!=t.B}}})}},6567:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["IN"],outputPins:[],evolve:(e,t)=>({state:{value:t.IN}})}},4257:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:["A","B","C","D","E","F","G"],outputPins:[],evolve:(e,t)=>({state:Object.assign({},t)})}},4420:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={inputPins:[],outputPins:["OUT"],evolve:()=>({transitions:{tickOffset:1,valuesByPin:{OUT:!0}}})}},8370:(e,t,n)=>{"use strict";n.d(t,{tQ:()=>r,Ds:()=>o,rG:()=>c,NG:()=>s,R9:()=>a,VE:()=>l,Fv:()=>d,Ih:()=>u,bA:()=>p,Qu:()=>m,gQ:()=>y,ZO:()=>f,sj:()=>g,kg:()=>h,PL:()=>I,nF:()=>b,G0:()=>v,kK:()=>E});var i=n(7516);const r=i.Ry().shape({x:i.Rx().required(),y:i.Rx().required()}),o=Object.freeze({x:0,y:0}),c=Object.freeze({p1:o,p2:o});function s(e){return{p1:{x:e[0],y:e[1]},p2:{x:e[2],y:e[3]}}}function a(e,t){return{x:Math.round(e.x/t)*t,y:Math.round(e.y/t)*t}}function l(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function d(e){const t=l(e);return{x:e.x/t,y:e.y/t}}function u(e,t){return e.x*t.x+e.y*t.y}function p(e,t){return{x:e.x*t,y:e.y*t}}function m(...e){let t,n;if(1===e.length){const i=e[0];t=i.p1,n=i.p2}else t=e[0],n=e[1];return{p1:{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)},p2:{x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)}}}function y(e,t){return{p1:f(e.p1,t),p2:f(e.p2,t)}}function f(e,t){return{x:e.x+t.x,y:e.y+t.y}}function g(e,t){return{x:e.x-t.x,y:e.y-t.y}}function h(e,t){return e.x===t.x&&e.y===t.y}function I(e,t){return!((t=m(t)).p1.x>e.x||t.p2.x<e.x||t.p1.y>e.y||t.p2.y<e.y)}function b(e){return{width:(e=m(e)).p2.x-e.p1.x,height:e.p2.y-e.p1.y}}function v(e,t){return e=m(e),t=m(t),{p1:{x:Math.min(e.p1.x,t.p1.x),y:Math.min(e.p1.y,t.p1.y)},p2:{x:Math.max(e.p2.x,t.p2.x),y:Math.max(e.p2.y,t.p2.y)}}}function E(e,t){return e=m(e),t=m(t),!(e.p1.x>t.p2.x||e.p2.x<t.p1.x||e.p1.y>t.p2.y||e.p2.y<t.p1.y)}},7355:(e,t,n)=>{"use strict";var i=n(7294),r=n(3935),o=n(1033),c=n(9242),s=n(5977),a=n(862),l=n(7865);const d=(0,n(7531).q_)(),u=Object.freeze({dragMode:null,dragCircuitId:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewJointConnectionId:null,dragNewJointAfterJointId:null,dragWireSource:null}),p=Object.freeze({viewScale:1}),m="root",y={circuitNamesByCircuitId:{[m]:"Root"},nodeIdsByCircuitId:{[m]:[]}},f=Object.freeze(y);var g=n(8370);const h=Object.freeze({clipboardNodes:[],clipboardPasteOrigin:g.Ds}),I=Object.freeze({dialogType:null,data:null}),b=Object.freeze({nodesById:{},connectionsById:{}}),v=Object.freeze({nodePositionsById:{},wireJointIdsByConnectionId:{},wireJointPositionsByJointId:{}}),E=Object.freeze({projectName:"New Project",projectModified:!1}),k=Object.freeze({selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}),O=Object.freeze({initialized:!1,tick:0,lastTickProcessingTimeMs:0,nodeStatesByNodeId:{},nodeOutputValuesByNodeId:{},transitionsById:{},transitionWindows:[]}),N=Object.freeze({mode:"edit",ticksPerSecond:1e3});var C=n(7361),x=n.n(C);function j(...e){return e.filter((e=>Boolean(e)&&""!=e)).join(" ")}function w(...e){return P(e[0],e.slice(1,e.length-1).map(String),e[e.length-1])}function P(e,t,n){if(0===t.length)return"function"==typeof n?n(e):n;const i=t.slice(0,t.length-1).map(String),r=t[t.length-1],o=B(e);let c=o;for(const e of i)c[e]=B(c[e]),c=c[e];return c[r]="function"==typeof n?n(c[r]):n,o}function B(e){return Array.isArray(e)?e.slice():Object.assign({},e)}function M(e){return Boolean(e)}const S="fill-parent--3pw6U",D={"flex-row":"flex-row--sHjOY","flex-column":"flex-column--2LT64","flex-reverse":"flex-reverse--2Vn7L","flexitem-shrink":"flexitem-shrink--2U9EV","flexitem-fix":"flexitem-fix--1ARxk"};var L=n(8721),T=n.n(L);function J(e){return"string"==typeof e?{windowId:e}:e}function R(e){return T()(e,"windowId")}function z(e){return T()(e,"first")&&T()(e,"second")&&T()(e,"direction")}function W(e){return"number"==typeof e?{firstPercent:e}:e}function A(e){return T()(e,"firstPercent")}function U(e){return T()(e,"firstSize")||T()(e,"secondSize")}var Z=n(3493),H=n.n(Z);function F(e){const t=i.useRef(e);return i.useEffect((()=>{t.current=e})),t}const K={tessel:"tessel--2Q3Xd","tessel-content":"tessel-content--3-kEA","tessel-drop-capture":"tessel-drop-capture--3TbuI","tessel-drop-capture--dragging":"tessel-drop-capture--dragging--Ihwyz","tessel-drop-marker":"tessel-drop-marker--1cqr2","drop-left":"drop-left--wqP1V","drop-right":"drop-right--2MyGz","drop-top":"drop-top--1S0co","drop-bottom":"drop-bottom--2f330","tessel-split":"tessel-split--2gDs5","tessel-split--row":"tessel-split--row--2fC6o","tessel-split--column":"tessel-split--column--1Hl4C","tessel-window":"tessel-window--1qDgp","tessel-window-titlebar":"tessel-window-titlebar--uHBdn","tessel-window-title":"tessel-window-title--2v0hT","tessel-window-controls":"tessel-window-controls--3i3ou","tessel-window-controls-close":"tessel-window-controls-close--2O8Zs","tessel-window-content":"tessel-window-content--sOnG-"},V=Object.freeze({top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0,toJSON:()=>({})}),G=({direction:e,onChangePercentage:t})=>{const n=i.useRef(null),r=i.useRef(null),o=F(e),c=F(t),s=i.useMemo((()=>H()((e=>{var t,i;if(null==r.current||null==n.current)return;const s=null!==(i=null===(t=n.current.parentElement)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==i?i:V;let a=0,l=0;"row"===o.current?(l=e.pageX-s.left,a=l/s.width,isNaN(a)?(a=0,l=s.left):a>1&&(a=1,l=s.right)):(l=e.pageY-s.top,a=l/s.height,isNaN(a)?(a=0,l=s.top):a>1&&(a=1,l=s.bottom)),c.current(100*a,l)}),1e3/60,{leading:!0})),[o,c]),a=i.useCallback((e=>{e.persist(),s(e)}),[s]),l=i.useCallback((e=>{!e.defaultPrevented&&n.current&&(r.current||(e.preventDefault(),n.current.setPointerCapture(e.pointerId),r.current=e.pointerId))}),[]),d=i.useCallback((()=>{n.current&&r.current&&(n.current.releasePointerCapture(r.current),r.current=null)}),[]);return i.createElement("div",{ref:n,className:j("tessel-split",K["tessel-split"],K["row"===e?"tessel-split--row":"tessel-split--column"]),onPointerDown:l,onPointerMove:a,onPointerUp:d})},q=i.createContext([]);function _(){return i.useContext(q)}const $=({pathKey:e,children:t})=>{const n=_(),r=i.useMemo((()=>[...n,e]),[n,e]);return i.createElement(q.Provider,{value:r},t)};function X(){}const Y=i.createContext({moveWindow:X,closeWindow:X});function Q(){return i.useContext(Y)}const ee=({moveWindow:e,closeWindow:t,children:n})=>{const r=i.useMemo((()=>({moveWindow:e,closeWindow:t})),[e,t]);return i.createElement(Y.Provider,{value:r},n)};function te(e,t,n){return A(e)?{firstPercent:t}:U(e)?"number"==typeof e.secondSize?{secondSize:n}:{firstSize:n}:e}const ne=({item:e,renderWindow:t,onLayoutChange:n})=>{const{direction:r,first:o,second:c,division:s}=e,a="row"===r?"width":"height",l=i.useCallback(((t,i)=>{const r=W(e.division);n(Object.assign(Object.assign({},e),{division:te(r,t,i)}))}),[e,n]),d=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{first:t}))}),[e,n]),u=i.useCallback((t=>{n(Object.assign(Object.assign({},e),{second:t}))}),[e,n]),p=W(s);let m="50%",y="50%",f=!1,g=!1;if(A(p)){const{firstPercent:e}=p;m=e+"%",y=100-e+"%"}else if(U(p)){const{firstSize:e,secondSize:t}=p;e?(m=e+"px",f=!0,y="100%"):(m="100%",y=t+"px",g=!0)}return i.createElement("div",{className:j(S,D["row"===r?"flex-row":"flex-column"])},i.createElement("div",{className:j(f?D["flexitem-fix"]:D["flexitem-shrink"]),style:{[a]:m}},i.createElement($,{pathKey:"first"},i.createElement(ie,{value:o,renderWindow:t,onLayoutChange:d}))),i.createElement(G,{direction:r,onChangePercentage:l}),i.createElement("div",{className:j(g?D["flexitem-fix"]:D["flexitem-shrink"]),style:{[a]:y}},i.createElement($,{pathKey:"second"},i.createElement(ie,{value:c,renderWindow:t,onLayoutChange:u}))))},ie=({value:e,renderWindow:t,onLayoutChange:n})=>{const r=J(e);return R(r)?t(r):z(r)?i.createElement(ne,{item:r,renderWindow:t,onLayoutChange:n}):null};function re(e){return Array.isArray(e)?e:[e]}function oe(e,t){return e===t||e.length===t.length&&e.every(((e,n)=>t[n]===e))}function ce(e,t){const n=e.slice(0,t);for(let i=t+1;i<e.length;i++)n.push(e[i]);return n}function se(e){const[t,n]=i.useState({left:0,top:0,right:0,bottom:0,width:0,height:0});return i.useLayoutEffect((()=>{if(!e.current)return;const t=new o.Z((()=>{const t=e.current;if(!t)return;const i=t.getBoundingClientRect();n({top:i.top,left:i.left,right:i.right,bottom:i.bottom,width:i.width,height:i.height})}));return t.observe(e.current),()=>{t.disconnect()}}),[e]),t}Object.freeze([]);var ae=n(9240);const le="@tessel/window",de=e=>({type:le,payload:{path:e}});function ue(e){return e.type===le}const pe=i.forwardRef((({className:e,children:t},n)=>{const r=_(),{moveWindow:o}=Q(),c=i.useRef(null),{top:s,left:a,right:l,bottom:d}=se(c),[u,p]=i.useState(null),m=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return void p(null);const n=t.getClientOffset();if(null==e||null==n||!ue(e))return void p(null);if(n.x<a||n.x>l)return void p(null);if(n.y<s||n.y>d)return void p(null);const i=(n.x-a)/(l-a);if(i<=.3)return void p("left");if(i>=.6)return void p("right");const r=(n.y-s)/(d-s);p(r<=.3?"top":r>=.6?"bottom":null)}),[s,a,l,d]),y=i.useCallback(((e,t)=>{if(!t.isOver({shallow:!0}))return;if(!ue(e))return;const{path:n}=e.payload;oe(n,r)||null!=u&&o(n,r,u)}),[r,u,o]),[{draggingSelf:f},g]=(0,ae.L)({accept:le,collect:e=>{e.isOver({shallow:!0})||p(null);const t=e.getItem();return t&&ue(t)?{draggingSelf:oe(t.payload.path,r)}:{}},hover:m,drop:y},[m,y]);let h=K["tessel-drop-marker"]+" ";if(null!=u&&!f)switch(u){case"bottom":h+=K["drop-bottom"];break;case"top":h+=K["drop-top"];break;case"left":h+=K["drop-left"];break;case"right":h+=K["drop-right"]}return i.createElement("div",{ref:e=>{c.current=e,g(e),"function"==typeof n?n(e):n&&(n.current=e)},className:j(K["tessel-drop-capture"],f&&K["tessel-drop-capture--dragging"],e)},t,i.createElement("div",{className:h}))}));function me(e,t){var n;if(!t(e))return null;const i=J(e);if(z(i)){const r=me(i.first,t),o=me(i.second,t);return r&&o?e:null!==(n=null!=r?r:o)&&void 0!==n?n:null}return e}function ye(e){return"string"==typeof e?e:z(e)?null==e.first?ye(e.second):null==e.second?ye(e.first):Object.assign(Object.assign({},e),{first:ye(e.first),second:ye(e.second)}):e}const fe=({className:e,rootItem:t,renderWindow:n,onLayoutChange:r})=>{const o=i.useCallback(((e,n,i)=>{if(0===e.length)return;let o=t;const c=x()(o,e);o&&"string"!=typeof o&&c&&(n.length>0&&!x()(o,n)||(o=P(o,e,null),o=P(o,n,(e=>{let t;if("left"===i||"right"===i)t={direction:"row",division:50,first:"left"===i?c:e,second:"right"===i?c:e};else{if("top"!==i&&"bottom"!==i)throw new Error("Unknown tessel position: "+i);t={direction:"column",division:50,first:"top"===i?c:e,second:"bottom"===i?c:e}}return t})),o=ye(o),r(o)))}),[t,r]),c=i.useCallback((e=>{let n=t;n&&("string"!=typeof n?(n=P(n,e,null),n=ye(n),r(n)):0===e.length&&r(null))}),[r,t]);return i.createElement("div",{className:j("tessel",K.tessel,e)},i.createElement(ee,{moveWindow:o,closeWindow:c},i.createElement(pe,null,i.createElement("div",{className:K["tessel-content"]},t&&i.createElement(ie,{value:t,renderWindow:n,onLayoutChange:r})))))},ge="circuit-field",he=(e,t)=>({windowId:ge,windowProps:{circuitId:e,circuitNodeIdPath:t}}),Ie={layout:{direction:"row",division:{firstSize:200},first:{direction:"column",division:30,first:"circuits-list",second:"node-tray"},second:he(m,[])},activeCircuitEditorPath:["second"]},be=Object.freeze(Ie),ve=Object.freeze({nodeNameMode:"named-only"}),Ee={circuitEditorUiDrag:u,circuitEditorUiViewport:p,nodeGraph:b,nodeLayout:v,circuits:f,clipboard:h,dialog:I,project:E,selection:k,simulator:O,simulatorControl:N,uiLayout:be,uiSettings:ve},ke=Object.freeze(Ee),Oe=["circuitEditorUiViewport","circuits","nodeGraph","nodeLayout"],Ne={services:ke,undo:Object.freeze({undoStack:[],redoStack:[]})},Ce=Object.freeze(Ne);var xe=n(4890),je=(n(2729),n(7172));const we=new URL(window.location.origin);we.pathname=n.p;const Pe=we.toString(),Be="@init";var Me=n(4586);const Se="@circuit/add",De=({circuitName:e,circuitId:t,edit:n}={})=>({type:Se,payload:{circuitId:null!=t?t:(0,Me.Z)(),circuitName:e,edit:n}});function Le(e){return e.type===Se}const Te="@circuit/delete";function Je(e){return e.type===Te}const Re="@circuit/rename",ze="@node/add",We=(e,t,n,i)=>({type:ze,payload:Object.assign({nodeId:(0,Me.Z)(),nodeType:e,circuitId:t,position:n},i||{})});function Ae(e){return e.type===ze}const Ue="@node/delete";function Ze(e){return e.type===Ue}const He="@node/rename",Fe="@selection/align-to-grid",Ke="@selection/delete",Ve=()=>({type:Ke}),Ge="@selection/move",qe="@wire/attach",_e=(e,t,n)=>({type:qe,payload:{connectionId:(0,Me.Z)(),p1:e,p2:t,joints:(null==n?void 0:n.joints)||[]}});function $e(e){return e.type===qe}const Xe="@wire/detatch";function Ye(e){return e.type===Xe}const Qe="@wire/joint/add",et="@wire/joint/move",tt=(e,t,n={})=>{var i,r;return{type:et,payload:{jointIds:re(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}},nt="@wire/joint/delete",it="@clipboard/paste",rt="@field/drag/end",ot=(e,t)=>({type:rt,payload:Object.assign(Object.assign({},e),{modifierKeys:t})}),ct="@undo/undo",st=()=>({type:ct});function at(e){return e.type===ct}const lt="@undo/redo",dt=()=>({type:lt});function ut(e){return e.type===lt}const pt="@project/new",mt=()=>({type:pt});function yt(e){return e.type===pt}const ft="@project/receive",gt=(e,t)=>({type:ft,payload:{fileName:e,saveData:t}}),ht=[Se,Te,Re,ze,Ue,He,Fe,Ke,Ge,qe,Xe,Qe,nt,et,ct,lt,it,rt];function It(e){return-1!==ht.indexOf(e.type)}var bt=n(8718),vt=n.n(bt);function Et(e){return vt()(e.services,Oe)}var kt=n(928),Ot=n.n(kt);const Nt="@field/drag/continue",Ct=(e,t)=>({type:Nt,payload:{dragPos:e,modifierKeys:t}}),xt="@field/mouse/leave",jt="@sim/tick",wt=e=>({type:jt,payload:{tickCount:e}}),Pt="@view/zoom",Bt=[Nt,xt,et,jt,Pt];var Mt=n(4970),St=n(8764),Dt=n(8424);const Lt="@dialog/show",Tt="@dialog/response/accept",Jt=e=>({type:Tt,payload:{result:e}}),Rt="@dialog/response/cancel";function*zt(e,t){yield(0,Mt.gz)(((e,t)=>({type:Lt,payload:{dialogType:e,data:t}}))(e,t));const n=yield(0,Mt.qn)([Tt,Rt]);return n.type===Tt?n.payload.result:null}const Wt="@project/export-link",At=()=>({type:Wt});var Ut=n(7516);const Zt=Ut.Ry().shape({nodeId:Ut.Z_().required().min(1),pinId:Ut.Z_().required().min(1)});function Ht(e,t){return e.nodeId===t.nodeId&&e.pinId===t.pinId}const Ft=Ut.Ry().shape({circuitId:Ut.Z_().required().min(1),circuitName:Ut.Z_().required().min(1)}),Kt=Ut.Ry().shape({nodeId:Ut.Z_().required().min(1),nodeType:Ut.Z_().required().min(1),nodeName:Ut.Z_().nullable().min(1),circuitId:Ut.Z_().required().min(1),x:Ut.Rx().required(),y:Ut.Rx().required()}),Vt=Ut.Ry().shape({output:Zt.required(),input:Zt.required(),joints:Ut.IX().of(g.tQ)}),Gt=Ut.Ry().shape({circuits:Ut.IX().of(Ft).min(0),nodes:Ut.IX().of(Kt).min(0),wires:Ut.IX().of(Vt).min(0)});var qt=n(9734),_t=n.n(qt);function $t(...e){return[].concat(...e)}function Xt(e){return t=>(n=Ce,i)=>{const r=t(n.services[e],i,n);return n.services[e]!=r?w(n,"services",e,r):n}}function Yt(e){return t=>{const n=(n,...i)=>t(n.services[e],...i);return n.local=t,n}}const Qt=Xt("circuitEditorUiDrag"),en=Yt("circuitEditorUiDrag"),tn=Qt(((e,t)=>{if(!function(e){return e.type===Nt}(t))return e;const{dragPos:n,modifierKeys:i}=t.payload;return Object.assign(Object.assign({},e),{dragEnd:n,dragModifierKeys:i})}));var nn=n(3386),rn=n.n(nn),on=n(1966),cn=n.n(on);function sn(e,t="set"){return e.shiftKey&&e.ctrlMetaKey?"remove":e.shiftKey?"append":e.ctrlMetaKey?"toggle":t}function an(e,t,n){switch(n){case"set":return t;case"set-if-unselected":return t.every((t=>-1!==e.indexOf(t)))?e:t;case"append":return rn()(e,t);case"remove":return cn()(e,t);case"toggle":return cn()(e,t).concat(cn()(t,e))}return t}const ln="@select/region",dn=en((()=>50)),un=en((()=>5)),pn=(e,t)=>{const n=dn(e);return(0,g.R9)(t,n)},mn=(e,t)=>{const n=un(e);return(0,g.R9)(t,n)};var yn=n(2222),fn=n(1795);const gn=/(Mac|iOS|OS\ X)/.test((fn.os||"undefined").toString()),hn=gn?"command":"ctrl",In=Object.freeze({});function bn(e){const{ctrlKey:t,altKey:n,shiftKey:i,metaKey:r}=e;return{ctrlMetaKey:gn?r:t,altKey:n,shiftKey:i}}var vn=n(6604),En=n.n(vn);const kn=Xt("nodeGraph"),On=Yt("nodeGraph"),Nn=On((e=>e.nodesById)),Cn=On((0,yn.createSelector)(Nn.local,(e=>Object.keys(e)))),xn=On((0,yn.createSelector)(Nn.local,(e=>En()(e,(e=>e.nodeType))))),jn=On(((e,t)=>e.nodesById[t]||null)),wn=On(((e,t)=>{const n=[];for(const i of Object.keys(e.nodesById)){const{nodeType:r}=e.nodesById[i];r===t&&n.push(i)}return n})),Pn=On(((e,t)=>{const n=jn.local(e,t);return n?n.nodeType:null})),Bn=On((0,yn.createSelector)((e=>e.nodesById),(e=>En()(e,(e=>e.nodeName))))),Mn=On(((e,t)=>{var n;const i=jn.local(e,t);return i?null!==(n=i.nodeName)&&void 0!==n?n:t.substr(0,4):null})),Sn=On(((e,t)=>{const n=jn.local(e,t);return n?n.nodeName:null}));var Dn=n(4654),Ln=n.n(Dn),Tn=n(3311),Jn=n.n(Tn),Rn=n(669),zn=n.n(Rn);const Wn=Xt("circuits"),An=Yt("circuits"),Un=An((e=>e.nodeIdsByCircuitId)),Zn=An(((e,t)=>e.nodeIdsByCircuitId[t])),Hn=An(((e,t)=>{for(const n of Object.keys(e.nodeIdsByCircuitId))if(-1!==e.nodeIdsByCircuitId[n].indexOf(t))return n;return null})),Fn=Xt("nodeLayout"),Kn=Yt("nodeLayout"),Vn=Kn((e=>e.nodePositionsById)),Gn=Kn(((e,t)=>{var n;return null!==(n=e.nodePositionsById[t])&&void 0!==n?n:g.Ds})),qn=An((e=>Object.keys(e.circuitNamesByCircuitId))),_n=An((e=>e.circuitNamesByCircuitId)),$n=An(((e,t)=>e.circuitNamesByCircuitId[t]));function Xn(e){return"ic-"+e}function Yn(e){return e.startsWith("ic-")?e.substr(3):null}function Qn(e,t){return`M10,10 h80 v${50*Math.max(e,t,1)-20} h-80 z`}function ei(e,t){return{x:"input"===t?0:100,y:50*e+25}}const ti=[(0,yn.createSelector)(Un,xn,Vn,_n,((e,t,n,r)=>Object.keys(e).filter((e=>e!==m)).map((o=>{var c,s;const a=null!==(c=e[o])&&void 0!==c?c:[],l=null!==(s=r[o])&&void 0!==s?s:o.substr(0,5);let d=a.filter((e=>t[e].startsWith("pin-")));d=_t()(d,(e=>n[e].y),(e=>n[e].x));const u={},p=[],m=[];for(const e of d){const n=t[e];"pin-input"===n?(u[e]=Object.assign({direction:"input"},ei(p.length,"input")),p.push(e)):"pin-output"===n&&(u[e]=Object.assign({direction:"output"},ei(m.length,"output")),m.push(e))}const y={circuitId:o,inputPinIds:p,outputPinIds:m};return{type:Xn(o),category:"integrated-circuit",displayName:l,elementProduction:{type:"circuit",circuitId:o},visual:{hitRect:(0,g.NG)(zn()(Qn(p.length,m.length))),trayComponent:()=>i.createElement("g",{stroke:"black",strokeWidth:1},i.createElement("rect",{x:10,y:10,width:30,height:30,fill:"none"}),i.createElement("line",{x1:10,y1:15,x2:5,y2:15}),i.createElement("line",{x1:40,y1:15,x2:45,y2:15}),i.createElement("line",{x1:10,y1:35,x2:5,y2:35}),i.createElement("line",{x1:40,y1:35,x2:45,y2:35})),component:"integrated-circuit",componentProps:y},pins:u}})))),n(4313).Z,n(9175).Z,n(4646).Z,n(2140).Z,n(6467).Z,n(8476).Z,n(3980).Z,n(9696).Z,n(2201).Z,n(6015).Z,n(5058).Z,n(3158).Z,n(7529).Z,n(4987).Z];let ni=[];const ii=e=>{const t=Ln()(ti,(t=>function(e,t){let n;return n="function"==typeof e?e(t):e,re(n)}(t,e)));return t.every(((e,t)=>e===ni[t]))?ni:(ni=t,t)},ri=(0,yn.createSelector)(ii,(e=>{const t={};for(const n of e)t[n.type]=n;return t})),oi=(e,t)=>{var n;const i=ii(e);return null!==(n=Jn()(i,(e=>e.type===t)))&&void 0!==n?n:null},ci=(0,yn.createSelector)(ri,Vn,xn,((e,t,n)=>{var i;const r={},o=Object.keys(n);for(const c of o){const o={};r[c]=o;const s=null!==(i=t[c])&&void 0!==i?i:g.Ds,a=n[c];if(!a)continue;const l=e[a];if(!l)continue;const d=Object.keys(l.pins);for(const e of d){const t=l.pins[e],n=(0,g.ZO)(s,t);o[e]=n}}return r})),si=Xt("selection"),ai=Yt("selection"),li=ai((e=>e.selectedNodeIds)),di=ai(((e,t)=>-1!==e.selectedNodeIds.indexOf(t))),ui=((0,yn.createSelector)(Nn,li,((e,t)=>vt()(e,t))),ai((e=>e.selectedConnectionIds)),ai(((e,t)=>-1!==e.selectedConnectionIds.indexOf(t)))),pi=ai((e=>e.selectedJointIds)),mi=ai(((e,t)=>-1!==e.selectedJointIds.indexOf(t))),yi=en((e=>e.dragMode)),fi=en((e=>e.dragCircuitId)),gi=en((e=>e.dragStart)),hi=en((e=>e.dragEnd)),Ii=en((e=>{var t;return null!==(t=e.dragModifierKeys)&&void 0!==t?t:In})),bi=en((0,yn.createSelector)(yi.local,gi.local,hi.local,((e,t,n)=>"select"===e&&t&&n?(0,g.Qu)(t,n):null))),vi=(0,yn.createSelector)(yi,li,Ii,gi,hi,dn,un,((e,t,n,i,r,o,c)=>{if("move"!==e||!i||!r)return null;let s=c;t.length>0&&(s=o);const a=(0,g.sj)(r,i);return n.ctrlMetaKey||(a.x=Math.round(a.x/s)*s,a.y=Math.round(a.y/s)*s),a})),Ei=en((e=>{const t=un.local(e),{dragMode:n,dragEnd:i,dragModifierKeys:r}=e;if("new-joint"!==n||!i||!r)return null;const o=Object.assign({},i);return r.ctrlMetaKey||(o.x=Math.round(o.x/t)*t,o.y=Math.round(o.y/t)*t),o})),ki=(0,yn.createSelector)(yi,hi,Un,fi,ci,((e,t,n,i,r)=>{var o;if("wire"!==e||!t||!i)return null;const c=n[i];if(!c)return null;for(const e of c){const n=null!==(o=r[e])&&void 0!==o?o:g.Ds,i=Object.keys(n);for(const r of i){const i=n[r],o=(0,g.sj)(t,i);if((0,g.VE)(o)<=6)return{nodeId:e,pinId:r}}}return null})),Oi="@field/drag/start/joint",Ni="@select/wire-joints",Ci=(e,t="set")=>({type:Ni,payload:{jointIds:Array.isArray(e)?e:[e],mode:t}}),xi="@field/drag/start/new-joint",ji=Qt(((e,t)=>{if(!function(e){return e.type===xi}(t))return e;const{connectionId:n,addAfterJointId:i,modifierKeys:r,x:o,y:c}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"new-joint",dragStart:{x:o,y:c},dragNewJointConnectionId:n,dragNewJointAfterJointId:i,dragModifierKeys:r})})),wi="@field/drag/start/node",Pi="@select/nodes",Bi=(e,t="set")=>({type:Pi,payload:{nodeIds:Array.isArray(e)?e:[e],mode:t}}),Mi="@field/drag/start/select",Si=Qt(((e,t)=>{if(!function(e){return e.type===Mi}(t))return e;const{x:n,y:i,circuitId:r}=t.payload;return Object.assign(Object.assign({},e),{dragMode:"select",dragCircuitId:r,dragStart:{x:n,y:i}})})),Di="@field/drag/start/wire",Li=$t(tn,(function(e=Ce,t){if(!function(e){return e.type===rt}(t))return e;const{x:n,y:i,modifierKeys:r}=t.payload,{dragMode:o,dragStart:c,dragCircuitId:s,dragNewJointAfterJointId:a,dragNewJointConnectionId:l,dragWireSource:d}=e.services.circuitEditorUiDrag;switch(o){case"select":if(c&&s){const t=sn(r),o=(0,g.Qu)(c,{x:n,y:i});e=Pc(e,((e,t,n="set")=>({type:ln,payload:{region:e,circuitId:t,mode:n}}))(o,s,t))}break;case"move":if(c){let t=(0,g.sj)({x:n,y:i},c);const o=e.services.selection.selectedNodeIds.length>0;r.ctrlMetaKey||(t=o?pn(e,t):mn(e,t)),e=Pc(e,((e,t,n={})=>{var i;return{type:Ge,payload:{offsetX:e,offsetY:t,snapMode:null!==(i=n.snapMode)&&void 0!==i?i:"none"}}})(t.x,t.y))}break;case"new-joint":{const t=mn(e,{x:n,y:i});e=Pc(e,((e,t,n,i)=>({type:Qe,payload:{connectionId:e,jointId:(0,Me.Z)(),addAfterJointId:t,position:n}}))(l,a,t));break}case"wire":{const t=w(e,"services","circuitEditorUiDrag","dragEnd",{x:n,y:i}),r=ki(t);d&&r&&(e=Pc(e,_e(d,r)));break}}return w(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:null,dragCircuitId:null,dragModifierKeys:null,dragStart:null,dragEnd:null,dragNewNodeType:null,dragWireSource:null})))}),(function(e=Ce,t){if(!function(e){return e.type===Oi}(t))return e;const{jointId:n,x:i,y:r,modifierKeys:o}=t.payload;if(e=w(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:i,y:r}}))),!mi(e,n)){const t=sn(o);e=Pc(e,Ci(n,t))}return e}),ji,(function(e=Ce,t){if(!function(e){return e.type===wi}(t))return e;const{nodeId:n,x:i,y:r,modifierKeys:o}=t.payload;if(e=w(e,"services","circuitEditorUiDrag",(e=>Object.assign(Object.assign({},e),{dragMode:"move",dragStart:{x:i,y:r}}))),!di(e,n)){const t=sn(o);e=Pc(e,Bi(n,t))}return e}),Si,Qt(((e,t,n)=>{if(!function(e){return e.type===Di}(t))return e;const{dragStart:i,pin:r}=t.payload,o=function(e,t){const n=Un(t);for(const t of Object.keys(n))if(-1!==n[t].indexOf(e))return t;return null}(r.nodeId,n);return o?Object.assign(Object.assign({},e),{dragMode:"wire",dragCircuitId:o,dragStart:i,dragWireSource:r}):e})),Qt(((e,t)=>function(e){return e.type===xt}(t)?null==e.dragMode?e:Object.assign(Object.assign({},e),{dragEnd:null}):e))),Ti=Xt("circuitEditorUiViewport"),Ji=Yt("circuitEditorUiViewport"),Ri=$t(Ti(((e,t)=>{if(!Le(t))return e;const{circuitId:n,edit:i}=t.payload;return i?Object.assign(Object.assign({},e),{editingCircuitId:n}):e})),Ti(((e,t)=>{if(!function(e){return e.type===Pt}(t))return e;const{viewScale:n}=e,{delta:i}=t.payload;return Object.assign(Object.assign({},e),{viewScale:i>0?n*i*1.03:n/(1.03*-i)})}))),zi=Wn(((e,t)=>{if(!Le(t))return e;const n=t.payload.circuitId;let i=t.payload.circuitName;return i||(i="Circuit "+(Object.keys(e.circuitNamesByCircuitId).length+1)),Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:i}),nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[n]:[]})})})),Wi=Wn(((e,t,n)=>{if(!Je(t))return e;const{circuitId:i}=t.payload,r=Object.keys(e.circuitNamesByCircuitId).filter((e=>e!==i)),o=wn(n,Xn(i));let c=vt()(e.nodeIdsByCircuitId,r);return c=En()(c,(e=>cn()(e,o))),Object.assign(Object.assign({},e),{nodeIdsByCircuitId:c,circuitNamesByCircuitId:vt()(e.circuitNamesByCircuitId,r)})})),Ai=Wn(((e,t)=>{if(!function(e){return e.type===Re}(t))return e;const{circuitId:n,circuitName:i}=t.payload,r=i.trim();return""===r?e:Object.assign(Object.assign({},e),{circuitNamesByCircuitId:Object.assign(Object.assign({},e.circuitNamesByCircuitId),{[n]:r})})})),Ui=Wn(((e,t)=>{if(!Ae(t))return e;const{nodeId:n,circuitId:i}=t.payload,r=i;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:Object.assign(Object.assign({},e.nodeIdsByCircuitId),{[r]:[...e.nodeIdsByCircuitId[r],n]})})})),Zi=Wn(((e,t)=>{if(!Ze(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{nodeIdsByCircuitId:En()(e.nodeIdsByCircuitId,(e=>e.filter((e=>-1===n.indexOf(e)))))})})),Hi=$t(zi,Wi,Ai,Ui,Zi,Wn(((e,t)=>yt(t)?Object.assign(Object.assign({},e),{circuitNamesByCircuitId:{[m]:"Root"},nodeIdsByCircuitId:{[m]:[]}}):e)));var Fi=n(5161),Ki=n.n(Fi),Vi=n(998),Gi=n.n(Vi),qi=n(7287),_i=n.n(qi);const $i="@clipboard/copy";var Xi=n(2628),Yi=n.n(Xi),Qi=n(4908),er=n.n(Qi);const tr=On((e=>e.connectionsById)),nr=On((0,yn.createSelector)((e=>e.connectionsById),(e=>Object.keys(e)))),ir=On(((e,t)=>e.connectionsById[t])),rr=On((0,yn.createSelector)((e=>e.connectionsById),(e=>Yi()(e)))),or=On(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].inputPin.nodeId===t)))),cr=On(((e,t)=>Object.keys(e.connectionsById).filter((n=>e.connectionsById[n].outputPin.nodeId===t)))),sr=On(((e,t)=>{const n=or.local(e,t),i=cr.local(e,t);return er()([...n,...i])})),ar=(e,t)=>{const n=Pn(e,t);return n?oi(e,n):null},lr=(e,t)=>{const n=Pn(e,t);if("pin-input"!==n&&"pin-output"!==n)return[];const i=Hn(e,t);if(!i)return[];const r=Xn(i);return wn(e,r).map((e=>({nodeId:e,pinId:t})))},dr=Xt("clipboard");Yt("clipboard");const ur=$t(dr(((e,t,n)=>{if(!function(e){return e.type===$i}(t))return e;const{nodeIds:i}=t.payload;if(0===i.length)return e;const r=Vn(n),o=_i()(i,Ki()(i,(()=>(0,Me.Z)()))),c=r[i[0]],s=i.map((e=>{const t=jn(n,e),s=((e,t)=>{const n=rr(e),i=ar(e,t);if(!i)return{};let r=[];r=Object.keys(i.pins).filter((e=>"output"===i.pins[e].direction));const o=n.filter((e=>e.outputPin.nodeId===t)),c={};for(const e of r)c[e]=[];for(const e of o){const{outputPin:t,inputPin:n}=e;c[t.pinId].push(n)}return c})(n,e);return{id:o[e],nodeType:t.nodeType,offset:(0,g.sj)(r[e],c),outputs:En()(s,(e=>e.filter((e=>{return t=e.nodeId,-1!==Gi()(i,(e=>e===t));var t})).map((e=>({nodeId:o[e.nodeId],pinId:e.pinId})))))}}));return Object.assign(Object.assign({},e),{clipboardNodes:s,clipboardPasteOrigin:c})})),(function(e=Ce,t){if(!function(e){return e.type===it}(t))return e;const{targetCircuitId:n}=t.payload,{clipboardNodes:i,clipboardPasteOrigin:r}=e.services.clipboard,o=dn(e),c=(0,g.ZO)(r,{x:o,y:o}),s=_i()(i.map((e=>e.id)),Ki()(i,(()=>(0,Me.Z)())));for(const t of i){const{id:i,nodeType:r,offset:o}=t,a=(0,g.ZO)(c,o);e=Pc(e,We(r,n,a,{nodeId:s[i]}))}for(const t of i){const{id:n,outputs:i}=t,r=s[n];for(const t of Object.keys(i))for(const n of i[t]){const{nodeId:i,pinId:o}=n,c=s[i];e=Pc(e,_e({nodeId:r,pinId:t},{nodeId:c,pinId:o}))}}return e=w(e,"services","clipboard","clipboardPasteOrigin",c),Pc(e,Bi(Yi()(s)))})),pr=Xt("dialog"),mr=Yt("dialog"),yr=$t(pr(((e,t)=>function(e){return e.type===Tt}(t)?I:e)),pr(((e,t)=>function(e){return e.type===Rt}(t)?I:e)),pr(((e,t)=>{if(!function(e){return e.type===Lt}(t))return e;const{dialogType:n,data:i}=t.payload;return Object.assign(Object.assign({},e),{dialogType:n,data:i})})));function fr(e,t){return t.weight=e,t}function gr(e){var t;return(null!==(t=e.weight)&&void 0!==t?t:0)-1}var hr=n(5937),Ir=n.n(hr);function br(e,t,n){const i=cn()(Object.keys(e.nodesById),t),r=Ln()(t,(e=>lr(n,e)));return Object.assign(Object.assign({},e),{nodesById:vt()(e.nodesById,i),connectionsById:Ir()(e.connectionsById,(function({inputPin:e,outputPin:n}){return-1===t.indexOf(e.nodeId)&&-1===t.indexOf(n.nodeId)&&!r.some((t=>Ht(t,e)||Ht(t,n)))}))})}const vr=fr(gr(Wi),kn(((e,t,n)=>{if(!Je(t))return e;const{circuitId:i}=t.payload;return br(e,[...Zn(n,i),...wn(n,Xn(i))],n)}))),Er=fr(-10,kn(((e,t)=>{if(!Ae(t))return e;const{nodeId:n,nodeType:i,nodeName:r}=t.payload;return Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:{nodeType:i,nodeName:null!=r?r:null}})})}))),kr=fr(gr(Zi),kn(((e,t,n)=>{if(!Ze(t))return e;const{nodeIds:i}=t.payload;return br(e,i,n)}))),Or=kn(((e,t)=>{if(!function(e){return e.type===He}(t))return e;const{nodeId:n}=t.payload;if(!e.nodesById[n])return e;let i=t.payload.nodeName;return i||""!==i.trim()||(i=null),Object.assign(Object.assign({},e),{nodesById:Object.assign(Object.assign({},e.nodesById),{[n]:Object.assign(Object.assign({},e.nodesById[n]),{nodeName:i})})})})),Nr=$t(vr,Er,kn(((e,t)=>yt(t)?b:e)),kr,Or,kn(((e,t,n)=>{if(!$e(t))return e;const{connectionId:i,p1:r,p2:o}=t.payload,c=function(e,t,n,i){const r=e.nodesById[t.nodeId],o=e.nodesById[n.nodeId];if(!r||!o)return null;const c=oi(i,r.nodeType),s=oi(i,o.nodeType);if(!c||!s)return null;const a=c.pins[t.pinId],l=s.pins[n.pinId];if(!a||!l)return null;if(a.direction===l.direction)return null;return{outputPin:"output"===a.direction?t:n,inputPin:"input"===a.direction?t:n}}(e,r,o,n);if(!c)return e;const{inputPin:s}=c;return Jn()(e.connectionsById,(e=>Ht(e.inputPin,s)))?e:Object.assign(Object.assign({},e),{connectionsById:Object.assign(Object.assign({},e.connectionsById),{[i]:Object.assign({id:i},c)})})})),kn(((e,t)=>{if(!Ye(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.connectionsById).filter((e=>e!==n));return Object.assign(Object.assign({},e),{connectionsById:vt()(e.connectionsById,i)})})));function Cr(e,t,n){const i=t.reduce(((e,t)=>{const i=or(n,t),r=cr(n,t);return e.push(...i,...r),e}),[]),r=Ln()(t,(e=>lr(n,e))),o=tr(n),c=Object.keys(o).filter((e=>{const{inputPin:t,outputPin:n}=o[e];return r.some((e=>Ht(e,t)||Ht(e,n)))})),s=[...i,...c].reduce(((t,n)=>(t.push(...e.wireJointIdsByConnectionId[n]),t)),[]),a=cn()(Object.keys(e.wireJointIdsByConnectionId),i),l=cn()(Object.keys(e.wireJointPositionsByJointId),s),d=cn()(Object.keys(e.nodePositionsById),t);return Object.assign(Object.assign({},e),{nodePositionsById:vt()(e.nodePositionsById,d),wireJointIdsByConnectionId:vt()(e.wireJointIdsByConnectionId,a),wireJointPositionsByJointId:vt()(e.wireJointPositionsByJointId,l)})}const xr=fr(gr(vr),Fn(((e,t,n)=>{if(!Je(t))return e;const{circuitId:i}=t.payload;return e=Cr(e,Zn(n,i),n),Cr(e,wn(n,Xn(i)),n)}))),jr=Fn(((e,t)=>{if(!Ae(t))return e;const{nodeId:n,position:i=g.Ds}=t.payload;return w(e,"nodePositionsById",n,i)})),wr=fr(gr(kr),Fn(((e,t,n)=>{if(!Ze(t))return e;const{nodeIds:i}=t.payload;return Cr(e,i,n)}))),Pr="@node/move",Br=(e,t,n={})=>{var i,r;return{type:Pr,payload:{nodeIds:re(e),position:t,relative:null!==(i=n.relative)&&void 0!==i&&i,snapMode:null!==(r=n.snapMode)&&void 0!==r?r:"none"}}},Mr=Fn(((e,t,n)=>{if(!function(e){return e.type===Pr}(t))return e;const{nodeIds:i,position:r,relative:o,snapMode:c}=t.payload,s=En()(vt()(e.nodePositionsById,i),(e=>{let t={x:o?e.x+r.x:r.x,y:o?e.y+r.y:r.y};return"node"===c&&(t=pn(n,t)),t}));return Object.assign(Object.assign({},e),{nodePositionsById:Object.assign(Object.assign({},e.nodePositionsById),s)})})),Sr=$t(xr,jr,Fn(((e,t)=>yt(t)?v:e)),wr,Mr,Fn(((e,t)=>{if(!$e(t))return e;const{connectionId:n,joints:i}=t.payload;if(i.length>0){const t=i.map((()=>(0,Me.Z)()));e=w(e,"wireJointIdsByConnectionId",n,t),e=w(e,"wireJointPositionsByJointId",(e=>Object.assign(Object.assign({},e),_i()(t,i))))}else e=w(e,"wireJointIdsByConnectionId",n,[]);return e})),Fn(((e,t)=>{if(!Ye(t))return e;const{connectionId:n}=t.payload,i=Object.keys(e.wireJointIdsByConnectionId).filter((e=>e!=n)),r=cn()(Object.keys(e.wireJointPositionsByJointId),e.wireJointIdsByConnectionId[n]);return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:vt()(e.wireJointIdsByConnectionId,i),wireJointPositionsByJointId:vt()(e.wireJointPositionsByJointId,r)})})),Fn(((e,t)=>{if(!function(e){return e.type===Qe}(t))return e;const{connectionId:n,addAfterJointId:i,position:r,jointId:o}=t.payload;let c=e.wireJointIdsByConnectionId[n];const s=i?c.indexOf(i)+1:0;return c=[...c.slice(0,s),o,...c.slice(s)],Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:Object.assign(Object.assign({},e.wireJointIdsByConnectionId),{[n]:c}),wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),{[o]:r})})})),Fn(((e,t)=>{if(!function(e){return e.type===nt}(t))return e;const{jointId:n}=t.payload,i=Object.keys(e.wireJointPositionsByJointId).filter((e=>e!==n));return Object.assign(Object.assign({},e),{wireJointIdsByConnectionId:En()(e.wireJointIdsByConnectionId,(e=>e.filter((e=>e!==n)))),wireJointPositionsByJointId:vt()(e.wireJointPositionsByJointId,i)})})),Fn(((e,t,n)=>{if(!function(e){return e.type===et}(t))return e;const{jointIds:i,position:r,relative:o,snapMode:c}=t.payload,s=En()(vt()(e.wireJointPositionsByJointId,i),(e=>{let t={x:o?e.x+r.x:r.x,y:o?e.y+r.y:r.y};return"node"===c?t=pn(n,t):"joint"===c&&(t=mn(n,t)),t}));return Object.assign(Object.assign({},e),{wireJointPositionsByJointId:Object.assign(Object.assign({},e.wireJointPositionsByJointId),s)})}))),Dr=fr(50,((e=Ce,t)=>{return It(t)?(n=Mc(e),localStorage.setItem("autosave",JSON.stringify(n)),e):e;var n})),Lr=Xt("project"),Tr=Yt("project"),Jr=Lr(((e,t)=>It(t)?Object.assign(Object.assign({},e),{projectModified:!0}):e)),Rr=Lr(((e,t)=>yt(t)?(localStorage.removeItem("autosave"),Object.assign(Object.assign({},e),{projectName:"New Project",projectModified:!1})):e)),zr="@project/rename",Wr=Lr(((e,t)=>{if(!function(e){return e.type===zr}(t))return e;let{projectName:n}=t.payload;return n=n.trim(),""===n?e:Object.assign(Object.assign({},e),{projectName:n})})),Ar="@project/save",Ur=()=>({type:Ar}),Zr="@project/save:success",Hr=$t(Dr,(function(e=Ce,t){if(!function(e){return e.type===Be}(t))return e;const n=function(){const e=localStorage.getItem("autosave");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(!n)return e;try{e=w(e=Sc(e,n),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:"Previous Project",projectModified:!0})))}catch(e){}return e}),Jr,Rr,(function(e=Ce,t){if(!function(e){return e.type===ft}(t))return e;const{fileName:n,saveData:i}=t.payload;try{e=w(e=Sc(e,i),"services","project",(e=>Object.assign(Object.assign({},e),{projectName:n,projectModified:!1})))}catch(e){console.error("Failed to load save",e)}return e}),Wr,Lr(((e,t)=>function(e){return e.type===Zr}(t)?Object.assign(Object.assign({},e),{projectModified:!1}):e))),Fr=si(((e,t)=>{if(!Ze(t))return e;const{nodeIds:n}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:cn()(e.selectedNodeIds,n),selectedConnectionIds:[]})})),Kr=si(((e,t)=>yt(t)?k:e));var Vr=n(5564),Gr=n.n(Vr);const qr="@select/all",_r=e=>({type:qr,payload:{circuitId:e}}),$r={},Xr={},Yr=(Kn((e=>Object.keys(e.wireJointPositionsByJointId))),Kn((e=>e.wireJointIdsByConnectionId))),Qr=Kn(((e,t)=>e.wireJointIdsByConnectionId[t])),eo=Kn(((e,t)=>e.wireJointPositionsByJointId[t])),to=Kn((e=>e.wireJointPositionsByJointId)),no=si(((e,t,n)=>{if(!function(e){return e.type===qr}(t))return e;const{circuitId:i}=t.payload,r=Zn(n,i);let o=nr(n);const c=tr(n);o=o.filter((e=>{const{inputPin:t,outputPin:n}=c[e];return-1!==r.indexOf(t.nodeId)&&-1!==r.indexOf(n.nodeId)}));const s=Yr(n),a=Gr()(o.map((e=>s[e])));return Object.assign(Object.assign({},e),{selectedNodeIds:r,selectedConnectionIds:o,selectedJointIds:a})})),io="@select/clear",ro=si(((e,t)=>function(e){return e.type===io}(t)?Object.assign(Object.assign({},e),{selectedNodeIds:[],selectedConnectionIds:[],selectedJointIds:[]}):e)),oo=si(((e,t)=>{if(!function(e){return e.type===Ni}(t))return e;const{jointIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===i?[]:e.selectedNodeIds,selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:an(e.selectedJointIds,n,i)})})),co=si(((e,t)=>{if(!function(e){return e.type===Pi}(t))return e;const{nodeIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:an(e.selectedNodeIds,n,i),selectedConnectionIds:"set"===i?[]:e.selectedConnectionIds,selectedJointIds:"set"===i?[]:e.selectedJointIds})}));var so=n(2525),ao=n.n(so);const lo=(0,yn.createSelector)(Vn,ri,xn,((e,t,n)=>En()(e,((e,i)=>{const r=n[i];if(!r)return g.rG;const o=t[r];return o?(0,g.gQ)(o.visual.hitRect,e):g.rG})))),uo=si(((e,t,n)=>{if(!function(e){return e.type===ln}(t))return e;const{region:i,circuitId:r,mode:o}=t.payload,c=Zn(n,r),s=vt()(lo(n),c),a=[];ao()(s,((e,t)=>{(0,g.kK)(e,i)&&a.push(t)}));const l=to(n),d=((e,t)=>{const n=Zn(e,t),i=Ln()(n,(t=>sr(e,t))),r=Ln()(i,(t=>Qr(e,t)));return er()(r)})(n,r).filter((e=>{const t=l[e];return(0,g.PL)(t,i)}));return Object.assign(Object.assign({},e),{selectedNodeIds:an(e.selectedNodeIds,a,o),selectedConnectionIds:"set"===o?[]:e.selectedConnectionIds,selectedJointIds:an(e.selectedJointIds,d,o)})})),po="@select/wires",mo=si(((e,t)=>{if(!function(e){return e.type===po}(t))return e;const{connectionIds:n,mode:i}=t.payload;return Object.assign(Object.assign({},e),{selectedNodeIds:"set"===i?[]:e.selectedNodeIds,selectedConnectionIds:an(e.selectedConnectionIds,n,i),selectedJointIds:"set"===i?[]:e.selectedJointIds})})),yo="@selection/copy",fo=$t(Kr,Fr,no,ro,oo,co,uo,mo,(function(e=Ce,t){if(!function(e){return e.type===Fe}(t))return e;const{selectedNodeIds:n,selectedJointIds:i}=e.services.selection,r=Vn(e);for(const t of n){const n=r[t];if(!n)continue;const i=pn(e,n);(0,g.kg)(n,i)||(e=Pc(e,Br(t,i)))}const o=to(e);for(const t of i){const n=o[t];if(!n)continue;const i=mn(e,n);(0,g.kg)(n,i)||(e=Pc(e,tt(t,i)))}return e}),(function(e=Ce,t){if(!function(e){return e.type===yo}(t))return e;const n=li(e);return 0===n.length?e:Pc(e,(i=n,{type:$i,payload:{nodeIds:Array.isArray(i)?i:[i]}}));var i}),(function(e=Ce,t){if(!function(e){return e.type===Ke}(t))return e;const{selectedNodeIds:n,selectedConnectionIds:i,selectedJointIds:r}=e.services.selection;return n.length>0&&(e=Pc(e,{type:Ue,payload:{nodeIds:re(n)}})),e=i.reduce(((e,t)=>Pc(e,(e=>({type:Xe,payload:{connectionId:e}}))(t))),e),r.reduce(((e,t)=>Pc(e,(e=>({type:nt,payload:{jointId:e}}))(t))),e)}),(function(e=Ce,t){if(!function(e){return e.type===Ge}(t))return e;const{offsetX:n,offsetY:i,snapMode:r}=t.payload,o=li(e),c=pi(e),s={x:n,y:i};let a="none";"node"!==r&&"by-type"!==r||(a="node");let l="none";return l="by-type"===r?"joint":r,e=Pc(e,Br(o,s,{relative:!0,snapMode:a})),Pc(e,tt(c,s,{relative:!0,snapMode:l}))}),si(((e,t)=>{if(!Ye(t))return e;const{connectionId:n}=t.payload;return Object.assign(Object.assign({},e),{selectedConnectionIds:e.selectedConnectionIds.filter((e=>e!==n))})}))),go=Xt("simulator"),ho=Yt("simulator"),Io=go(((e,t)=>It(t)?O:e));function bo(e){return e.default}const vo={"input-momentary":bo(n(3667)),"input-toggle":bo(n(2318)),"logic-and":bo(n(7909)),"logic-buffer":bo(n(274)),"logic-nand":bo(n(4347)),"logic-nor":bo(n(8112)),"logic-not":bo(n(6559)),"logic-or":bo(n(2649)),"logic-xor":bo(n(8881)),"output-led":bo(n(6567)),"output-seg7":bo(n(4257)),"pin-high":bo(n(4420))};var Eo=n(1235);function ko(e,t){const n=Ln()(t,(e=>[e,"subCircuitIds"]));n.pop();const i=x()(e,n);if(!i)return null;const{simulatorNodeId:r}=i;return null!=r?r:null}var Oo=n(3857),No=n.n(Oo);const Co=Object.freeze({simulatorNodesById:{},simulatorNodeIdsByCircuitNodeId:{},inputElementPinsByCircuitPinId:{},outputElementPinsByCircuitPinId:{}});function xo(e,t){var n;const i={},r={},o={},c={},s=[],a=[],l={},d={},u=null!==(n=t.nodeIdsByCircuitId[e])&&void 0!==n?n:[];for(const e of u){const n=t.nodeTypesByNodeId[e];if(!n)continue;if("pin-input"===n){s.push(e),o[e]=[];continue}if("pin-output"===n){a.push(e);continue}const c=jo(e,t);No()(i,c.simulatorNodesById),No()(r,c.simulatorNodeIdsByCircuitNodeId),l[e]=c.inputElementPinsByCircuitPinId,d[e]=c.outputElementPinsByCircuitPinId}const p=t.connectionsById;for(const e of Object.keys(p)){const{inputPin:t,outputPin:n}=p[e];if(-1===u.indexOf(t.nodeId)||-1===u.indexOf(n.nodeId))continue;const r=x()(d,[n.nodeId,n.pinId]),m=x()(l,[t.nodeId,t.pinId]);if(-1!==s.indexOf(n.nodeId)&&m){o[n.nodeId].push(...m);continue}if(-1!==a.indexOf(t.nodeId)&&r){c[t.nodeId]=r;continue}if(!r||!m)continue;const y=i[r.simulatorNodeId];let f=y.outputsByPin[r.pinId];null==f&&(y.outputsByPin[r.pinId]=f=[]);for(const e of m)f.push({simulatorNodeId:e.simulatorNodeId,pinId:e.pinId}),i[e.simulatorNodeId].inputsByPin[e.pinId]={simulatorNodeId:r.simulatorNodeId,pinId:r.pinId}}return{simulatorNodesById:i,simulatorNodeIdsByCircuitNodeId:r,inputElementPinsByCircuitPinId:o,outputElementPinsByCircuitPinId:c}}function jo(e,t){const n=t.nodeTypesByNodeId[e];if(!n)return Co;const i=t.nodeDefsByType[n];if(!i||!i.elementProduction)return Co;const r="string"==typeof(o=i.elementProduction)?{type:"element",elementType:o}:o;var o;switch(r.type){case"element":return function(e,t,{nodeTypesByNodeId:n,nodeDefsByType:i}){const r=i[n[e]];if(!r)return Co;const o={},c={},s=(0,Me.Z)();o[s]={elementType:t.elementType,inputsByPin:{},outputsByPin:{}},c[e]={simulatorNodeId:s,subCircuitIds:{}};const a={},l={};for(const e of Object.keys(r.pins)){const{direction:t}=r.pins[e];"input"===t?a[e]=[{pinId:e,simulatorNodeId:s}]:"output"===t&&(l[e]={pinId:e,simulatorNodeId:s})}return{simulatorNodesById:o,simulatorNodeIdsByCircuitNodeId:c,inputElementPinsByCircuitPinId:a,outputElementPinsByCircuitPinId:l}}(e,r,t);case"circuit":return function(e,t,n){const i=xo(t.circuitId,n);return Object.assign(Object.assign({},i),{simulatorNodeIdsByCircuitNodeId:{[e]:{simulatorNodeId:null,subCircuitIds:i.simulatorNodeIdsByCircuitNodeId}}})}(e,r,t);default:throw new Error("Unsupported production type "+r.type)}}const wo=(0,yn.createSelector)(Un,xn,tr,ri,((e,t,n,i)=>xo(m,{nodeIdsByCircuitId:e,nodeTypesByNodeId:t,connectionsById:n,nodeDefsByType:i}))),Po=(e,t)=>{const{simulatorNodesById:n}=wo(e),i=n[t];return i?i.elementType:null},Bo=(e,t)=>{var n;const i=Po(e,t);return i&&null!==(n=vo[i])&&void 0!==n?n:null};var Mo=n(7513),So=n.n(Mo);const Do=Object.freeze([]),Lo=Object.freeze({});function To(e,t){const n=(e=>{const{simulatorNodesById:t}=wo(e);return Object.keys(t)})(t);return e=O,e=n.reduce(((e,n)=>function(e,t,n){const i=Bo(n,t);if(!i)return e;const r={};return i.outputPins.forEach((e=>{r[e]=!1})),w(e,"nodeOutputValuesByNodeId",t,r)}(e,n,t)),e),e=n.reduce(((e,n)=>zo(e,n,t)),e),Object.assign({},e,{initialized:!0})}function Jo(e,t,n){const i=e.tick+t;e=Object.assign({},e,{transitionWindows:e.transitionWindows.slice()});let r=t+1;for(;e.transitionWindows.length>0&&e.transitionWindows[0].tick<=i;){if(0==--r)throw new Error("Maximum ticks per sim evolution exceeded.  This is an indication that windows are being generated for past ticks.");const t=e.transitionWindows.shift();e=Ro(e,t,n)}return e.tick!=i&&(e=Object.assign({},e,{tick:i})),e}function Ro(e,t,n){if(0===t.transitionIds.length)return e;let i=Object.assign({},e,{tick:t.tick,nodeOutputValuesByNodeId:Object.assign({},e.nodeOutputValuesByNodeId)});const r=new Set;t.transitionIds.forEach((e=>{const{nodeId:t,valuesByOutputPin:o}=i.transitionsById[e];var c,s;(c=i.nodeOutputValuesByNodeId[t],s=o,Object.keys(s).some((e=>c[e]!==s[e])))&&(i.nodeOutputValuesByNodeId[t]=Object.assign({},i.nodeOutputValuesByNodeId[t],o),((e,t)=>{const{simulatorNodesById:n}=wo(e),i=n[t];return i?Ln()(Yi()(i.outputsByPin),(e=>e.map((e=>e.simulatorNodeId)))):Do})(n,t).forEach((e=>r.add(e))))})),i.transitionsById=vt()(i.transitionsById,cn()(Object.keys(i.transitionsById),t.transitionIds));for(const e of r)i=zo(i,e,n);return i}function zo(e,t,n){const i=Bo(n,t);if(!i||!i.evolve)return e;const r=function(e,t,n){const i={},r=((e,t)=>{const{simulatorNodesById:n}=wo(e),i=n[t];return i?i.inputsByPin:Lo})(n,t);return Object.keys(r).forEach((t=>{var n;const o=r[t];if(!o)return void(i[t]=!1);const{simulatorNodeId:c,pinId:s}=o;i[t]=(null===(n=e.nodeOutputValuesByNodeId[c])||void 0===n?void 0:n[s])||!1})),i}(e,t,n);return Wo(e,t,i.evolve(e.nodeStatesByNodeId[t],r,e.tick))}function Wo(e,t,n){const{state:i,transitions:r}=n;return i&&(e=w(e,"nodeStatesByNodeId",t,i)),r&&(e=re(r).reduce(((e,n)=>function(e,t,n){const{tickOffset:i,valuesByPin:r,transitionMerger:o="replace"}=n,c=e.tick+(i>0?i:1);return"replace"===o&&(e=function(e,t){return Object.keys(e.transitionsById).filter((n=>function(e){return e.nodeId===t}(e.transitionsById[n]))).reduce(((e,t)=>function(e,t){const n=e.transitionsById[t];if(!n)return e;const i=vt()(e.transitionsById,Object.keys(e.transitionsById).filter((e=>e!==t)));let r=e.transitionWindows;const o=So()(r,n.tick,((e,t)=>e.tick-t));if(o>=0){const e=r[o],{transitionIds:n}=e,i=e.transitionIds.indexOf(t);-1!==i&&(1===e.transitionIds.length?r=ce(r,o):(r=r.slice(),r[o]=Object.assign({},r[o],{transitionIds:ce(n,i)})))}return Object.assign({},e,{transitionsById:i,transitionWindows:r})}(e,t)),e)}(e,t)),function(e,t,n,i){const r=(0,Me.Z)(),o={nodeId:t,tick:n,valuesByOutputPin:i},c=e.transitionWindows.slice();let s=So()(c,n,((e,t)=>e.tick-t));if(s<0){s=-s-1;const e={tick:n,transitionIds:[]};c.splice(s,0,e)}const a=c[s].transitionIds.slice();a.push(r),c[s]=Object.assign({},c[s],{transitionIds:a});const l=Object.assign({},e.transitionsById,{[r]:o});return Object.assign({},e,{transitionsById:l,transitionWindows:c})}(e,t,c,r)}(e,t,n)),e)),e}const Ao=go(((e,t,n)=>{if(!(0,Eo.ke)(t))return e;const{circuitNodeIdPath:i}=t.payload,r=((e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=wo(e);return ko(n,t)})(n,i);if(!r)return e;const o=Po(n,r);if(!o)return e;const c=vo[o];if(!c||!c.interact)return e;const s=e.nodeStatesByNodeId[r];return Wo(e,r,c.interact(s))})),Uo="@sim/fastforward",Zo=go(((e,t,n)=>{if(!function(e){return e.type===Uo}(t))return e;const{tick:i,transitionWindows:r}=e;return 0===r.length?e:Jo(e,r[0].tick-i,n)})),Ho="@sim/start",Fo=()=>({type:Ho});function Ko(e){return e.type===Ho}const Vo=go(((e,t,n)=>Ko(t)?To(e,n):e)),Go="@sim/step",qo=()=>({type:Go});function _o(e){return e.type===Go}const $o="@sim/stop",Xo=()=>({type:$o});function Yo(e){return e.type===$o}const Qo=$t(Io,Ao,Zo,Vo,(function(e=Ce,t){if(!_o(t))return e;const{initialized:n}=e.services.simulator;n||(e=w(e,"services","simulator",(t=>To(t,e))));const{tick:i,transitionWindows:r}=e.services.simulator;if(0===r.length)return e;const o=r[0].tick;return Pc(e,wt(o-i))}),go(((e,t)=>Yo(t)?O:e)),go(((e,t,n)=>{if(!function(e){return e.type===jt}(t))return e;const{tickCount:i}=t.payload,r=performance.now();e=Jo(e,i,n);const o=performance.now()-r;return Object.assign(Object.assign({},e),{lastTickProcessingTimeMs:o})}))),ec=Xt("simulatorControl"),tc=Yt("simulatorControl"),nc=ec(((e,t)=>It(t)?Object.assign(Object.assign({},e),{mode:"edit"}):e)),ic="@sim/pause",rc=e=>({type:ic,payload:{mode:e}}),oc=tc((e=>"edit"!==e.mode)),cc=tc((e=>"run"===e.mode)),sc=tc((e=>"pause"===e.mode)),ac=tc((e=>e.ticksPerSecond)),lc=$t(nc,ec(((e,t)=>{if(!function(e){return e.type===ic}(t))return e;const{mode:n}=t.payload;if(!oc.local(e))return e;let i=e.mode;switch(n){case!0:i="pause";break;case!1:i="run";break;case"toggle":i="run"==i?"pause":"run"}return Object.assign(Object.assign({},e),{mode:i})})),ec(((e,t)=>Ko(t)?Object.assign(Object.assign({},e),{mode:"run"}):e)),ec(((e,t)=>_o(t)?Object.assign(Object.assign({},e),{mode:"pause"}):e)),ec(((e,t)=>Yo(t)?Object.assign(Object.assign({},N),{ticksPerSecond:e.ticksPerSecond}):e))),dc=Xt("uiLayout"),uc=Yt("uiLayout");function pc(e){let t=[];return e?(function(e,n){!function e(n,i){if(!1===((e,n)=>{const i=J(e);if(R(i)&&i.windowId===ge)return t=n,!1})(n,[]))return!1;const r=J(n);if(z(r)){if(!e(r.first,[...i,"first"]))return!1;if(!e(r.second,[...i,"second"]))return!1}return!0}(e,[])}(e),t):t}const mc=dc(((e,t)=>{if(!Je(t))return e;if(!e.layout)return e;const{circuitId:n}=t.payload,i=me(e.layout,(e=>{return"string"==typeof(t=e)||!R(t)||t.windowId!==ge||e.windowProps.circuitId!==n;var t}));return Object.assign(Object.assign({},e),{layout:i,activeCircuitEditorPath:pc(i)})})),yc="@layout/rearrange",fc=dc(((e,t)=>{if(!function(e){return e.type===yc}(t))return e;const{layout:n}=t.payload;return Object.assign(Object.assign({},e),{layout:n})})),gc="@view/activate",hc=dc(((e,t)=>{if(!function(e){return e.type===gc}(t))return e;let{tesselPath:n}=t.payload;return x()(e.layout,n)||(n=pc(e.layout)),Object.assign(Object.assign({},e),{activeCircuitEditorPath:n})})),Ic="@view/circuit",bc=(e,t=null,n={})=>({type:Ic,payload:Object.assign({circuitId:e,circuitNodeIdPath:t},n)}),vc=dc(((e,t,n)=>{if(!function(e){return e.type===Ic}(t))return e;const{circuitId:i,circuitNodeIdPath:r,newWindow:o,tesselPath:c}=t.payload;if(-1===qn(n).indexOf(i))return e;if(!e.layout)return e;const s=he(i,null!=r?r:[]);let a=e.layout,l=e.activeCircuitEditorPath;if(x()(a,l)||(l=pc(a)),c){if(!x()(a,c))return e;a=P(J(a),c,s),l=c}else o||0===l.length?l.length>0?a=P(J(a),l,(e=>({direction:"row",division:50,first:e,second:s}))):(a={direction:"row",division:{firstSize:200},first:a,second:s},l=["second"]):a=P(J(a),l,s);return Object.assign(Object.assign({},e),{layout:a,activeCircuitEditorPath:l})})),Ec="@view/reset",kc=()=>({type:Ec}),Oc=$t(mc,fc,hc,vc,dc(((e,t)=>function(e){return e.type===Ec}(t)?be:e))),Nc="@view/node-names",Cc=e=>({type:Nc,payload:{mode:e}}),xc=Xt("uiSettings"),jc=Yt("uiSettings"),wc=$t(xc(((e,t)=>{if(!function(e){return e.type===Nc}(t))return e;const{mode:n}=t.payload;return Object.assign(Object.assign({},e),{nodeNameMode:n})}))),Pc=function(e){const t=_t()(e,(e=>e.weight||0));return(e=Ce,n)=>t.reduce(((e,t)=>t(e,n)),e)}($t(Li,Ri,Hi,ur,yr,Nr,Sr,Hr,fo,Qo,lc,Oc,wc));class Bc extends Error{constructor(e){super(e),this.message=e,this.code="SAVE_FORMAT_ERROR"}}function Mc(e){const t=to(e);return{circuits:qn(e).map((t=>({circuitId:t,circuitName:$n(e,t)}))),nodes:Cn(e).map((t=>{const n=jn(e,t),i=Gn(e,t),r=Hn(e,t);return{nodeId:t,nodeType:n.nodeType,nodeName:n.nodeName,circuitId:null!=r?r:m,x:i.x,y:i.y}})),wires:nr(e).map((n=>{const i=ir(e,n),r=Qr(e,n);return{input:i.inputPin,output:i.outputPin,joints:r.map((e=>t[e]))}}))}}function Sc(e,t){var n,i,r;try{Gt.validateSync(t)}catch(e){throw new Bc(e.message)}e=Ce;try{e=(null!==(n=t.circuits)&&void 0!==n?n:[]).reduce(((e,{circuitId:t,circuitName:n})=>Pc(e,De({circuitId:t,circuitName:n}))),e),e=(null!==(i=t.nodes)&&void 0!==i?i:[]).reduce(((e,t)=>{var n;return Pc(e,We(t.nodeType,t.circuitId,{x:t.x,y:t.y},{nodeId:t.nodeId,nodeName:null!==(n=t.nodeName)&&void 0!==n?n:void 0}))}),e),e=(null!==(r=t.wires)&&void 0!==r?r:[]).reduce(((e,t)=>Pc(e,_e(t.output,t.input,{joints:t.joints}))),e)}catch(e){throw console.error("Failed to rehydrate SaveData:",e),new Bc("Failed to load project.")}return e}function*Dc(){yield(0,Mt.ib)(Wt,Lc)}function*Lc(){const e=yield(0,Mt.Ys)();try{const t=Mc(e),n=JSON.stringify(t),i=(0,Dt.Wt)(n),r=St.lW.from(i).toString("base64"),o=encodeURIComponent(r),c=Pe+d.createHref({pathname:"/import",search:"data="+o});yield(0,Mt.RE)(zt,"export-project-link",{projectLink:c})}catch(e){console.error("Failed to export project as link",e)}}const Tc="@project/import-link";function*Jc(){yield(0,Mt.ib)(Tc,Rc)}function*Rc(e){const{data:t}=e.payload;try{const e=decodeURIComponent(t),n=St.lW.from(e,"base64"),i=(0,Dt.rr)(n,{to:"string"}),r=JSON.parse(i);yield(0,Mt.gz)(gt("Linked Project",r)),d.push("/")}catch(e){console.error("Failed to import save from link",e)}}var zc=n(4171),Wc=n.n(zc);const Ac="@project/load",Uc=()=>({type:Ac});function*Zc(){yield(0,Mt.ib)(Ac,Hc)}function*Hc(){try{const[e]=yield(0,Mt.RE)(Wc(),{accept:"application/json"}),t=yield(0,Mt.RE)(e.text.bind(e)),n=JSON.parse(t);let i=e.name;i=i?i.substr(0,i.lastIndexOf(".json")):"Unnamed Project",yield(0,Mt.gz)(gt(i,n))}catch(e){console.warn("Failed to load project:",e)}}var Fc=n(3162);const Kc=Tr((e=>e.projectName)),Vc=Tr((e=>e.projectModified));function*Gc(){yield(0,Mt.ib)(Ar,qc)}function*qc(){const e=yield(0,Mt.Ys)();try{window.showSaveFilePicker?yield(0,Mt.RE)(_c,e):yield(0,Mt.RE)($c,e),yield(0,Mt.gz)({type:Zr})}catch(e){console.warn("Failed to save project",e)}}function*_c(e){const t=yield(0,Mt.Ys)(Kc),n=yield(0,Mt.RE)(window.showSaveFilePicker,{suggestedName:t,types:[{description:"Discrelog Project Files",accept:{"application/json":[".json"]}}]});if(!n)return;let i=n.name;i||(i=n.getFile().name),i&&(i=i.substr(0,i.lastIndexOf(".json")),yield(0,Mt.gz)((e=>({type:zr,payload:{projectName:e}}))(i)));const r=Mc(e),o=yield(0,Mt.RE)(n.createWritable.bind(n));yield(0,Mt.RE)(o.write.bind(o),JSON.stringify(r,null,2)),yield(0,Mt.RE)(o.close.bind(o))}function*$c(e){const t=yield(0,Mt.Ys)(Kc),n=Mc(e),i=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});(0,Fc.saveAs)(i,t+".json")}function*Xc(){yield(0,Mt.rM)(Dc),yield(0,Mt.rM)(Jc),yield(0,Mt.rM)(Zc),yield(0,Mt.rM)(Gc)}function*Yc(){yield(0,Mt.A7)([Ho,ic,Go],Qc)}function*Qc(){for(;yield(0,Mt.Ys)(cc);){try{yield(0,Mt.gz)(wt(1))}catch(e){return console.error(e),void(yield(0,Mt.gz)(rc(!0)))}const e=yield(0,Mt.Ys)(ac),t=Math.max(Math.ceil(1e3/e),1);yield(0,Mt.gw)(t)}}function*es(){yield(0,Mt.rM)(Yc)}const ts=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionSanitizer:function(e){return e},stateSanitizer:function(e){return e},actionsBlacklist:Bt})||xe.qC,ns=(0,je.ZP)(),is=[!1,ns].filter(M),rs=(0,xe.MT)((function(e=Ce,t){return e=function(e=Ce,t){return function(e=Ce,t){if(!at(t))return e;const{undoStack:n,redoStack:i}=e.undo,r=Ot()(n);return r?Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),r),undo:Object.assign(Object.assign({},e.undo),{undoStack:n.slice(0,n.length-1),redoStack:[...i,Et(e)]})}):e}(e=function(e=Ce,t){if(!ut(t))return e;const{undoStack:n,redoStack:i}=e.undo,r=Ot()(i);return r?Object.assign(Object.assign({},e),{services:Object.assign(Object.assign({},e.services),r),undo:Object.assign(Object.assign({},e.undo),{undoStack:[...n,Et(e)],redoStack:i.slice(0,i.length-1)})}):e}(e=function(e=Ce,t){return!It(t)||at(t)||ut(t)?e:w(e,"undo",(t=>Object.assign(Object.assign({},t),{undoStack:[...t.undoStack.slice(0,25),Et(e)],redoStack:[]})))}(e,t),t),t)}(e,t),Pc(e,t)}),ts((0,xe.md)(...is)));function os(e){return(0,c.v9)(e)}ns.run((function*(){yield(0,Mt.rM)(Xc),yield(0,Mt.rM)(es)})),rs.dispatch({type:Be});const cs=uc((e=>e.layout));var ss=n(3274);const as=e=>i.createElement("button",Object.assign({className:"button--Ui3Hp",type:"button"},e),e.children),ls=({circuitId:e,circuitNodeIdPath:t})=>{const n=(0,c.I0)(),r=_(),o=os((e=>$n(e,m))),s=os((t=>$n(t,e))),a=i.useCallback((e=>{e.preventDefault(),n(bc(m,[],{tesselPath:r}))}),[n,r]);return i.createElement(as,{onClick:a},0===t.length?s:o)},ds=({circuitNodeIdPath:e})=>{const t=(0,c.I0)(),n=_(),r=Ot()(e),o=os((e=>Pn(e,r))),s=os((e=>Mn(e,r))),a=o?Yn(o):null,l=os((e=>a?$n(e,a):null)),d=i.useCallback((i=>{i.preventDefault(),a&&t(bc(a,e,{tesselPath:n}))}),[a,e,t,n]);return i.createElement(as,{onClick:d},s," [",l,"]")},us=({circuitId:e,circuitNodeIdPath:t})=>{const n=t.map(((e,n)=>{const r=t.slice(0,n+1);return i.createElement(i.Fragment,{key:e},i.createElement("span",null,">"),i.createElement(ds,{circuitNodeIdPath:r}))}));return i.createElement("div",{className:j("circuit-node-breadcrumb","circuit-node-breadcrumb--3Rx3N")},i.createElement(ls,{circuitId:e,circuitNodeIdPath:t}),n)},ps=Object.freeze({p1:{x:-100,y:-100},p2:{x:100,y:100}}),ms=(0,yn.createSelector)(lo,to,((e,t)=>[...Yi()(e),...Yi()(t).map((e=>({p1:e,p2:e})))].reduce(g.G0,ps))),ys=Ji((e=>e.viewScale)),fs=i.createContext((function(){}));function gs(){return i.useContext(fs)}const hs=fs.Provider;var Is=n(1935);function bs(){}const vs={registerPopoverChild:bs,unregisterPopoverChild:bs},Es=i.createContext(null),ks=({registerPopoverChild:e,unregisterPopoverChild:t,children:n})=>{const r=i.useContext(Es),o=null==r?void 0:r.registerPopoverChild,c=null==r?void 0:r.unregisterPopoverChild,s=i.useCallback((t=>{o&&o(t),e(t)}),[e,o]),a=i.useCallback((e=>{t(e)}),[t,c]),l=i.useMemo((()=>({registerPopoverChild:s,unregisterPopoverChild:a})),[s,a]);return i.createElement(Es.Provider,{value:l},n)},Os=({isOpen:e,anchorEl:t,placement:n="auto",onRequestClose:o,children:c})=>{const[s,a]=i.useState(null),{attributes:l,styles:d}=(0,Is.D)(e?t:null,s,{placement:n});!function(e){var t;const n=null!==(t=i.useContext(Es))&&void 0!==t?t:vs,r=i.useRef(n);i.useEffect((()=>{r.current=n})),i.useEffect((()=>{if(e)return r.current.registerPopoverChild(e),()=>r.current.unregisterPopoverChild(e)}),[e])}(s);const[u,p,m]=function(e=[]){const[t,n]=i.useState(e),r=i.useCallback((e=>{n([...t,e])}),[t]),o=i.useCallback((e=>{n(cn()(t,[e]))}),[t]);return[t,r,o,n]}();return function(e,t,n=!0){const r=i.useCallback((n=>{const i=re(e).filter(M);i.length&&i.every((e=>!e.contains(n.target)))&&t()}),[e,t]);i.useEffect((()=>{if(n)return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[r,n])}(i.useMemo((()=>[s,...u]),[u,s]),o),e?(0,r.createPortal)(i.createElement(ks,{registerPopoverChild:p,unregisterPopoverChild:m},i.createElement("div",Object.assign({ref:a,style:d.popper},l.popper),c)),document.body):null},Ns=({x:e,y:t,open:n,onRequestClose:r,children:o})=>{const c=i.useMemo((()=>({getBoundingClientRect:()=>({left:e,top:t,right:e,bottom:t,width:0,height:0,x:e,y:t})})),[e,t]);return i.createElement(hs,{value:r},i.createElement(Os,{isOpen:n,onRequestClose:r,anchorEl:c,placement:"bottom-start"},o))};function Cs(){const[e,t]=i.useState(null),n=i.useCallback((e=>{t({x:e.pageX,y:e.pageY})}),[]),r=i.useCallback((()=>{t(null)}),[]);return{openContextMenu:n,renderContextMenu:i.useCallback((t=>e?i.createElement(Ns,{open:!0,onRequestClose:r,x:e.x,y:e.y},t):null),[e,r])}}const xs="menu-item--2dcyN",js="menu-item--disabled--RJJTK",ws="menu-item-content--3s1DG",Ps="menu-item-text--1F41V",Bs="menu-item-secondary--2PJLF",Ms=({children:e})=>i.createElement("ul",{className:"menu--3E86w"},e),Ss=({disabled:e,onClick:t,secondary:n,children:r})=>{const o=gs(),c=i.useCallback((e=>{t&&t(e),o()}),[o,t]);return i.createElement("li",{className:j(xs,e&&js)},i.createElement("a",{className:ws,onClick:c},i.createElement("span",{className:Ps},r),n&&i.createElement("span",{className:Bs},n)))},Ds=()=>i.createElement("div",{className:"menu-divider--1QPGp"}),Ls=()=>{const e=(0,c.I0)(),t=i.useCallback((()=>{e({type:Fe})}),[e]),n=i.useCallback((()=>{e(Ve())}),[e]);return i.createElement(i.Fragment,null,i.createElement(Ss,{onClick:t},"Align Selection To Grid"),i.createElement(Ds,null),i.createElement(Ss,{onClick:n},"Delete Selected"))},Ts=()=>i.createElement(Ms,null,i.createElement(Ls,null)),Js="@node/new",Rs=e=>({type:Js,payload:{nodeType:e}});function zs(e){return e.type===Js}const Ws={current:null},As=i.createContext({svgRef:Ws,scalerRef:Ws}),Us=As.Provider,Zs=({svgRef:e,scalerRef:t,children:n})=>{const r=i.useMemo((()=>({svgRef:e,scalerRef:t})),[e,t]);return i.createElement(Us,{value:r},n)};function Hs(e,t,n){const i=t.getScreenCTM();if(!i)return n;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const o=r.matrixTransform(i.inverse());return{x:o.x,y:o.y}}function Fs(){const{svgRef:e,scalerRef:t}=i.useContext(As);return i.useCallback((n=>{if(!e.current||!t.current)return g.Ds;const i={x:n.pageX,y:n.pageY};return Hs(e.current,t.current,i)}),[e,t])}const Ks=i.createContext({circuitId:m,circuitNodePath:[]});function Vs(){return i.useContext(Ks)}const Gs=({circuitId:e,circuitNodePath:t,children:n})=>{const r=i.useMemo((()=>({circuitId:e,circuitNodePath:t})),[e,t]);return i.createElement(Ks.Provider,{value:r},n)},qs=Object.freeze({}),_s=i.memo((function({className:e,circuitNodeId:t,x:n=0,y:r=0,nodeType:o}){const c=os((e=>oi(e,o)));let s;if(c){const{component:e}=c.visual;s=i.createElement(e,{circuitNodeId:t,elementState:qs})}else s=i.createElement("rect",{x:n,y:r,width:50,height:50,fill:"red"});const a=0!=n||0!=r?`translate(${n}, ${r})`:void 0;return i.createElement("g",{className:j(e,"node-visual"),transform:a},s)})),$s=i.memo((function(){const e=(0,c.I0)(),{circuitId:t}=Vs(),n=os(dn),r=function(){const{svgRef:e,scalerRef:t}=i.useContext(As);return i.useCallback((n=>e.current&&t.current?Hs(e.current,t.current,n):n),[e,t])}(),[o,s]=i.useState(null),[a,l]=i.useState(null),[,d]=(0,ae.L)({accept:Js,collect:e=>{e.isOver()||(l(null),s(null))},hover:(e,t)=>{if(!zs(e))return l(null),void s(null);const n=t.getClientOffset();if(!n)return;const i=r({x:n.x,y:n.y});s(e.payload.nodeType),l(i)},drop:(i,o)=>{if(!zs(i))return;const c=o.getClientOffset();if(!c)return;const s=r({x:c.x,y:c.y});e(We(i.payload.nodeType,t,(0,g.R9)(s,n)))}},[t,r,n]),u=a&&(0,g.R9)(a,n);return i.createElement(i.Fragment,null,u&&o&&i.createElement("g",{opacity:.5},i.createElement(_s,{x:u.x,y:u.y,nodeType:o})),i.createElement("rect",{ref:d,width:"100%",height:"100%",fill:"transparent"}))})),Xs=(0,yn.createSelector)(li,Vn,((e,t)=>vt()(t,e))),Ys=(0,yn.createSelector)(li,xn,((e,t)=>vt()(t,e))),Qs=i.memo((function(){const e=os(Xs),t=os(Ys),n=os(vi);let r=null;return n&&(r=Yi()(En()(e,((e,r)=>i.createElement(_s,{key:r,nodeType:t[r],x:e.x+n.x,y:e.y+n.y}))))),i.createElement("g",{id:"drag-node-preview-layer",opacity:.3},r)}));const ea=e=>{var{x:t,y:n,interactable:r=!0,selected:o=!1}=e,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["x","y","interactable","selected"]);const[s,a]=i.useState(!1),l=i.useCallback((()=>{r&&a(!0)}),[r]),d=i.useCallback((()=>{a(!1)}),[]);return i.createElement("circle",Object.assign({className:j("wire-joint--16G5Q",o&&"selected--1wUHn"),cx:t,cy:n,r:r&&s||o?4:2,onMouseOver:l,onMouseOut:d},c))},ta=(0,yn.createSelector)(pi,to,((e,t)=>vt()(t,e))),na=i.memo((function(){const e=os(vi),t=os(ta),n=os(Ei);let r=null;e&&(r=Yi()(t).map(((t,n)=>i.createElement(ea,{key:n,interactable:!1,x:t.x+e.x,y:t.y+e.y,opacity:.5}))));let o=null;return n&&(o=i.createElement(ea,{interactable:!1,x:n.x,y:n.y,opacity:.5})),i.createElement("g",{id:"drag-joint-preview-layer",opacity:.3},r,o)}));function ia(e){const{dragThreshold:t=5,onClick:n,onDragStart:r,onDragMove:o,onDragEnd:c}=e,[s,a]=i.useState(!1),l=i.useRef(!1),d=i.useRef(!1),u=i.useRef(g.Ds),p=i.useCallback((e=>{l.current||(l.current=!0,a(!0),u.current={x:e.pageX,y:e.pageY})}),[]),m=i.useCallback((()=>{l.current=!1,a(!1),d.current=!1,u.current=g.Ds}),[]),y=i.useCallback((e=>{if(l.current)if(d.current){if(o){const t=(0,g.sj)({x:e.pageX,y:e.pageY},u.current);o(t,e)}}else{const n=u.current;(Math.abs(n.x-e.pageX)>=t||Math.abs(n.y-e.pageY)>=t)&&(d.current=!0,r&&r(e))}}),[t,o,r]),f=i.useCallback((e=>{if(l.current){if(d.current){if(c){const t=(0,g.sj)({x:e.pageX,y:e.pageY},u.current);c(t,e)}}else n&&n(e);m()}}),[m,n,c]);return i.useEffect((()=>{if(s)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",f)}}),[s,y,f]),{startTracking:p,cancelTracking:m}}const ra=i.memo((function(){const e=(0,c.I0)(),{circuitId:t}=Vs(),n=(0,c.v9)(bi),r=(0,c.v9)(ys);function o(e){return e*(1/r)}const s=Fs(),a=i.useCallback((t=>{if(0!==t.button)return;const n=bn(t);n.ctrlMetaKey||n.shiftKey||e({type:io})}),[e]),l=i.useCallback((n=>{const i=s(n);e(((e,t)=>({type:Mi,payload:Object.assign(Object.assign({},e),{circuitId:t})}))(i,t))}),[t,e,s]),d=i.useCallback(((t,n)=>{const i=s(n),r=bn(n);e(Ct(i,r))}),[e,s]),u=i.useCallback(((t,n)=>{const i=s(n),r=bn(n);e(ot(i,r))}),[e,s]),{startTracking:p}=ia({onClick:a,onDragStart:l,onDragMove:d,onDragEnd:u}),m=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),p(e))}),[p]);return i.createElement("g",{id:"drag-select-layer"},i.createElement("rect",{width:100*o(1)+"%",height:100*o(1)+"%",fill:"transparent",onMouseDown:m}),n&&i.createElement("g",{transform:`translate(${n.p1.x}, ${n.p1.y})`},i.createElement("rect",{width:n.p2.x-n.p1.x,height:n.p2.y-n.p1.y,strokeWidth:o(2),strokeDasharray:`${o(5)} ${o(3)}`,stroke:"skyblue",fill:"transparent"})))})),oa=i.memo((function(){const e=50*os(ys);return i.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null,i.createElement("pattern",{id:"grid",width:e,height:e,patternUnits:"userSpaceOnUse"},i.createElement("path",{d:`M ${e} 0 L 0 0 0 ${e}`,fill:"none",stroke:"gray",strokeWidth:.5}))),i.createElement("rect",{width:"100%",height:"100%",fill:"url(#grid)"}))})),ca="text-unselectable--2tvXe",sa=jc((e=>e.nodeNameMode)),aa=i.forwardRef((({className:e,autoFocus:t,defaultValue:n,value:r,onChange:o,onBeginEdit:c,onCommit:s,onCancel:a,onBlur:l,onKeyUp:d},u)=>{const[p,m]=i.useState(null),y=i.useCallback((e=>{null==p&&c&&c(),m(e.target.value),o&&o(e)}),[p,c,o]),f=i.useCallback((e=>{d&&d(e),e.defaultPrevented||null!=p&&("Escape"===e.key?(e.preventDefault(),a&&a()):"Enter"===e.key&&(e.preventDefault(),s&&s(p)))}),[d,p,a,s]),g=i.useCallback((e=>{l&&l(e),null!=p&&s&&s(p)}),[l,p,s]);return i.createElement("input",{ref:u,className:e,autoFocus:t,defaultValue:n,value:r,type:"text",onChange:y,onKeyUp:f,onBlur:g})})),la=({className:e,textClassname:t,inputClassname:n,label:r,defaultValue:o,isEditing:c,onRequestEdit:s,onCommit:a,onCancel:l})=>{const d=i.useRef(null),u=i.useCallback((e=>{s&&(e.defaultPrevented||(e.preventDefault(),s()))}),[s]),p=i.useCallback((e=>{"Escape"===e.key&&c&&l()}),[c,l]),m=i.useCallback((()=>{c&&l()}),[c,l]);return i.useEffect((()=>{c&&d.current&&d.current.select()}),[c]),c?i.createElement(aa,{ref:d,className:j(e,n),autoFocus:!0,defaultValue:o,onBlur:m,onKeyUp:p,onCommit:a,onCancel:l}):i.createElement("span",{className:j(e,t),onDoubleClick:u},null!=r?r:o)},da=e=>{const{onRequestEdit:t,onCommit:n}=e,r=gs(),o=i.useCallback((()=>{t&&t()}),[t]),c=i.useCallback((e=>{n(e),r()}),[n,r]);return i.createElement("li",{className:xs,onClick:o},i.createElement(la,Object.assign({},e,{onCommit:c})))},ua=({nodeId:e})=>{const t=(0,c.I0)(),{circuitNodePath:n}=Vs(),r=os((t=>Mn(t,e))),o=os((t=>Pn(t,e))),s=o?Yn(o):null,[a,l]=i.useState(!1),d=i.useCallback((()=>{l(!0)}),[]),u=i.useCallback((()=>{l(!1)}),[]),p=i.useCallback((n=>{l(!1),t(((e,t)=>({type:He,payload:{nodeId:e,nodeName:t}}))(e,n))}),[t,e]),m=i.useCallback((()=>{s&&t(bc(s,[...n,e],{newWindow:!0}))}),[n,t,s,e]);return i.createElement(Ms,null,i.createElement(da,{defaultValue:null!=r?r:"<unknown>",label:i.createElement("span",{style:{fontWeight:"bold"}},r),isEditing:a,onRequestEdit:d,onCommit:p,onCancel:u}),i.createElement(Ds,null),s&&i.createElement(i.Fragment,null,i.createElement(Ss,{onClick:m},"Open in New Window"),i.createElement(Ds,null)),i.createElement(Ls,null))},pa="node-interaction-toggle--1eXWD",ma={"integrated-circuit":({circuitNodeId:e,circuitNodePath:t,circuitId:n,inputPinIds:r,outputPinIds:o})=>{const s=(0,c.I0)(),a=os((e=>$n(e,n))),l=os(Bn),d=Qn(r.length,o.length),u=i.useCallback((i=>{e&&(i.defaultPrevented||(i.preventDefault(),s(bc(n,[...t||[],e]))))}),[e,s,n,t]),p=r.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:0,y1:n,x2:10,y2:n}),i.createElement("text",{className:ca,x:15,y:n,alignmentBaseline:"middle",fontSize:".7em"},l[e]))})),m=o.map(((e,t)=>{const n=50*t+25;return i.createElement("g",{key:e},i.createElement("line",{key:t,className:"node-select-highlight--stroke",stroke:"black",strokeWidth:2,x1:90,y1:n,x2:100,y2:n}),i.createElement("text",{className:ca,x:85,y:n,textAnchor:"end",alignmentBaseline:"middle",fontSize:".7em"},l[e]))}));return i.createElement("g",null,i.createElement("text",{className:j(ca,"node-select-highlight--fill"),textAnchor:"middle",x:50,y:0},a),i.createElement("path",{className:"node-select-highlight--stroke node-select-highlight--fill",stroke:"black",fill:"transparent",d,onDoubleClick:u}),p,m)},"interaction-momentary":({circuitNodeId:e,circuitNodePath:t})=>{const n=(0,c.I0)(),r=i.useMemo((()=>[...t||[],null!=e?e:"~~none"]),[t,e]),o=os((e=>((e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=wo(e),i=e.services.simulator.nodeOutputValuesByNodeId,r=ko(n,t);if(r)return i[r]})(e,r))),s=i.useCallback((t=>{e&&(t.defaultPrevented||(t.preventDefault(),n((0,Eo.zN)(r))))}),[r,e,n]);let a="darkgreen",l="lightgrey";return o&&o.OUT&&(a="lightgreen",l="black"),i.createElement("g",{onClick:s,className:pa},i.createElement("rect",{className:"node-select-highlight--stroke node-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("circle",{cx:25,cy:25,r:17,fill:a}),i.createElement("text",{className:ca,x:25,y:25,fontSize:".8em",fill:l,textAnchor:"middle",alignmentBaseline:"middle"},"Push"))},"interaction-toggle":({circuitNodeId:e,circuitNodePath:t,elementState:n})=>{const r=(0,c.I0)(),o=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),r((0,Eo.zN)([...t||[],e]))))}),[e,r,t]);let s="darkgreen",a="lightgrey",l="darkred";if(n){const{toggleState:e}=n;e?(s="lightgreen",a="black"):l="red"}return i.createElement("g",{onClick:o,className:pa},i.createElement("rect",{className:"node-select-highlight--stroke node-select-highlight--fill",x:5,y:5,width:40,height:40,stroke:"black",fill:"#AFAFAF",strokeWidth:1}),i.createElement("rect",{x:10,y:10,width:30,height:15,strokeWidth:0,fill:s}),i.createElement("text",{className:ca,x:25,y:19,fontSize:".8em",fill:a,textAnchor:"middle",alignmentBaseline:"middle"},"On"),i.createElement("rect",{x:10,y:25,width:30,height:15,strokeWidth:0,fill:l}),i.createElement("text",{className:ca,x:25,y:34,fontSize:".8em",fill:"lightgrey",textAnchor:"middle",alignmentBaseline:"middle"},"Off"))}},ya=({componentName:e})=>i.createElement("g",null,i.createElement("rect",{width:50,height:50,fill:"red"}),i.createElement("text",{x:25,y:25,alignmentBaseline:"middle"},e));function fa(e,t,n,r){const{component:o,componentProps:c}=r,s=Object.assign({circuitNodeId:e,circuitNodePath:t,elementState:n},c);let a;return"string"==typeof o?(a=ma[o],a||(a=()=>i.createElement(ya,{componentName:o}))):a=o,i.createElement(a,Object.assign({},s))}const ga=i.memo((function({nodeId:e}){const t=(0,c.I0)(),{circuitNodePath:n}=Vs(),r=os(oc),{openContextMenu:o,renderContextMenu:s}=Cs(),a=os((t=>ar(t,e))),{x:l,y:d}=os((t=>Gn(t,e))),u=os((t=>((e,t)=>{const{simulatorNodeIdsByCircuitNodeId:n}=wo(e),i=e.services.simulator.nodeStatesByNodeId,r=ko(n,t);if(r)return i[r]})(t,[...n,e]))),p=os((t=>di(t,e))),m=Fs(),y=i.useCallback((n=>{if(r)return;if(n.defaultPrevented)return;if(0!==n.button)return;n.preventDefault();const i=sn(bn(n));t(Bi(e,i))}),[t,r,e]),f=i.useCallback((n=>{if(n.defaultPrevented)return;n.preventDefault();const i=sn(bn(n),"set-if-unselected");t(Bi(e,i)),o(n)}),[t,e,o]),h=i.useCallback((n=>{const i=m(n),r=bn(n);t(((e,t,n)=>({type:wi,payload:Object.assign(Object.assign({},t),{nodeId:e,modifierKeys:n})}))(e,i,r))}),[m,t,e]),I=i.useCallback(((e,n)=>{const i=m(n),r=bn(n);t(Ct(i,r))}),[t,m]),b=i.useCallback(((e,n)=>{const i=m(n),r=bn(n);t(ot(i,r))}),[t,m]),{startTracking:v}=ia({onClick:y,onDragStart:h,onDragMove:I,onDragEnd:b}),E=i.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),v(e)))}),[v]);if(!a)return null;let k,O;if(a){const{hitRect:t}=a.visual;k=fa(e,n,u,a.visual),O=t}else k=i.createElement("rect",{x:l,y:d,width:50,height:50,fill:p?"goldenrod":"red"}),O={p1:g.Ds,p2:{x:50,y:50}};const N=0!=l||0!=d?`translate(${l}, ${d})`:void 0;return i.createElement("g",{transform:N},i.createElement("g",{className:j("circuit-field-node",p&&"node-selected"),onMouseDown:E,onContextMenu:f},k),i.createElement(ha,{nodeId:e,hitRect:O}),s(i.createElement(ua,{nodeId:e})))})),ha=i.memo((function({nodeId:e,hitRect:t}){const n=os(ys),r=os((t=>((e,t)=>{switch(e.services.uiSettings.nodeNameMode){case"all":default:return Mn(e,t);case"named-only":return Sn(e,t);case"none":return null}})(t,e))),o=Math.max(.7,n);let c=15;return o>1?c-=2*o:c+=1/o*7,r?i.createElement("text",{fontSize:1.2/o+"em",className:ca,textAnchor:"middle",x:t.p1.x+(t.p2.x-t.p1.x)/2,y:t.p2.y+c},r):null})),Ia=ga,ba=i.memo((function(){const{circuitId:e}=Vs(),t=os((t=>Zn(t,e))).map((e=>i.createElement(Ia,{key:e,nodeId:e})));return i.createElement("g",{id:"nodes-layer"},t)}));var va=n(6486);const Ea=(0,yn.createSelector)(((e,t)=>Zn(e,t)),(e=>e.services.nodeGraph.connectionsById),((e,t)=>Object.keys(t).filter((n=>{const{inputPin:i,outputPin:r}=t[n];return!!(0,va.includes)(e,i.nodeId)&&!!(0,va.includes)(e,r.nodeId)}))));var ka=n(5879);const Oa=n.n(ka)()(((e,t,n)=>e.services.nodeGraph.connectionsById[n]),((e,t)=>t),(e=>wo(e).simulatorNodeIdsByCircuitNodeId),(e=>e.services.simulator.nodeOutputValuesByNodeId),((e,t,n,i)=>{var r;if(!e)return!1;const{outputPin:{nodeId:o,pinId:c}}=e,s=ko(n,[...t,o]);return s&&(null===(r=i[s])||void 0===r?void 0:r[c])||!1}))(((e,t,n)=>t.join(".")+"::"+n)),Na=i.memo((function({connectionId:e,startJointId:t,endJointId:n}){const r=(0,c.I0)(),o=Fs(),s=os((n=>null==t?((e,t)=>{const{outputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],r=ar(e,n);if(!r)return g.Ds;const o=Gn(e,n),c=$r[t];if(c&&c.inputNodeDef===r&&c.inputNodePosition.x===o.x&&c.inputNodePosition.y===o.y)return c.outputPosition;let s=g.Ds;r&&r.pins[i]&&(s=r.pins[i]);const a=(0,g.ZO)(o,s);return $r[t]={inputNodeDef:r,inputNodePosition:o,outputPosition:a},a})(n,e):eo(n,t))),a=os((t=>null==n?((e,t)=>{const{inputPin:{nodeId:n,pinId:i}}=e.services.nodeGraph.connectionsById[t],r=ar(e,n);if(!r)return g.Ds;const o=Gn(e,n),c=Xr[t];if(c&&c.inputNodeDef===r&&c.inputNodePosition.x===o.x&&c.inputNodePosition.y===o.y)return c.outputPosition;let s=g.Ds;r&&r.pins[i]&&(s=r.pins[i]);const a=(0,g.ZO)(o,s);return Xr[t]={inputNodeDef:r,inputNodePosition:o,outputPosition:a},a})(t,e):eo(t,n))),[l,d]=i.useState(null),u=i.useCallback((e=>{const t=o(e);d(t)}),[o]),p=i.useCallback((()=>{d(null)}),[]),m=i.useCallback((n=>{const i=o(n),c=bn(n);r(((e,t,n,i)=>({type:xi,payload:Object.assign(Object.assign({},n),{connectionId:e,addAfterJointId:t,modifierKeys:i})}))(e,t,i,c))}),[o,r,e,t]),y=i.useCallback(((e,t)=>{const n=o(t),i=bn(t);r(Ct(n,i))}),[r,o]),f=i.useCallback(((e,t)=>{const n=o(t),i=bn(t);r(ot(n,i))}),[r,o]),h=i.useCallback((t=>{const n=sn(bn(t));r(((e,t="set")=>({type:po,payload:{connectionIds:Array.isArray(e)?e:[e],mode:t}}))(e,n))}),[e,r]),{startTracking:I}=ia({onClick:h,onDragStart:m,onDragMove:y,onDragEnd:f}),b=i.useCallback((e=>{e.preventDefault(),I(e)}),[I]);let v;if(l){const e=(0,g.Fv)((0,g.sj)(a,s)),t=(0,g.sj)(l,s),n=(0,g.Ih)(t,e);v=(0,g.ZO)(s,(0,g.bA)(e,n))}return i.createElement("g",{onMouseMove:u,onMouseLeave:p},i.createElement("line",{x1:s.x,y1:s.y,x2:a.x,y2:a.y,strokeWidth:2}),v&&i.createElement("circle",{cx:v.x,cy:v.y,r:3,stroke:"none",fill:"red",onMouseDown:b}))})),Ca=i.memo((function({jointId:e}){const t=Fs(),n=(0,c.I0)(),r=os((t=>mi(t,e))),o=os((t=>eo(t,e))),s=i.useCallback((i=>{const r=t(i),o=bn(i);n(((e,t,n)=>({type:Oi,payload:Object.assign(Object.assign({},t),{jointId:e,modifierKeys:n})}))(e,r,o))}),[n,t,e]),a=i.useCallback(((e,i)=>{const r=t(i),o=bn(i);n(Ct(r,o))}),[n,t]),l=i.useCallback(((e,i)=>{const r=t(i),o=bn(i);n(ot(r,o))}),[n,t]),d=i.useCallback((t=>{const i=sn(bn(t));n(Ci(e,i))}),[n,e]),{startTracking:u}=ia({onClick:d,onDragStart:s,onDragMove:a,onDragEnd:l}),p=i.useCallback((e=>{e.preventDefault(),u(e)}),[u]);return i.createElement(ea,{selected:r,x:o.x,y:o.y,onMouseDown:p})})),xa=i.memo((function({connectionId:e}){const{circuitNodePath:t}=Vs(),n=os((t=>Qr(t,e))),r=os((n=>Oa(n,t,e))),o=os((t=>ui(t,e))),c=[...n,null].map(((t,r)=>{const o=r>0?n[r-1]:null;return i.createElement(Na,{key:r,connectionId:e,startJointId:o,endJointId:t})})),s=n.map((e=>i.createElement(Ca,{key:e,jointId:e})));return i.createElement("g",{className:j("wire--2ESXn",r&&"powered--317-6",o&&"selected--2WM72")},c,s)})),ja=i.memo((function(){const{circuitId:e}=Vs(),t=os((t=>Ea(t,e))).map((e=>i.createElement(xa,{key:e,connectionId:e})));return i.createElement("g",{id:"wires-layer"},t)}));var wa=n(784);const Pa="is-drag-target--2mBxU",Ba=i.memo((function({nodeId:e,pinId:t}){const n=Fs(),r=(0,c.I0)(),o=os((n=>((e,t,n)=>{var i;const r=ci(e)[t];return r&&null!==(i=r[n])&&void 0!==i?i:g.Ds})(n,e,t))),s=os((n=>((e,t,n)=>{const i=ar(e,t);if(!i)return null;const r=i.pins[n];return r?r.direction:null})(n,e,t))),a=os(ki),l=i.useCallback((i=>{const o=n(i);r({type:Di,payload:{dragStart:o,pin:{nodeId:e,pinId:t}}})}),[r,n,e,t]),d=i.useCallback(((e,t)=>{const i=n(t),o=bn(t);r(Ct(i,o))}),[r,n]),u=i.useCallback(((e,t)=>{const i=n(t),o=bn(t);r(ot(i,o))}),[r,n]),{startTracking:p}=ia({onDragStart:l,onDragMove:d,onDragEnd:u}),m=i.useCallback((e=>{0===e.button&&(e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),p(e)))}),[p]);if(!o)return null;const y=null!=a&&a.nodeId===e&&a.pinId===t,{x:f,y:h}=o;let I;return I="input"===s?i.createElement("path",{d:(0,wa.x)(f,h,4,-45,225),strokeWidth:2,className:j("node-pin-input--2AbG5",y&&Pa)}):i.createElement("circle",{className:j("node-pin-output--2MDEG",y&&Pa),cx:f,cy:h,r:3}),i.createElement("g",null,I,i.createElement("circle",{stroke:"none",fill:"transparent",cx:f,cy:h,r:3,onMouseDown:m}))})),Ma=i.memo((function({nodeId:e}){var t;const n=os((t=>ar(t,e))),r=null!==(t=null==n?void 0:n.pins)&&void 0!==t?t:{},o=Object.keys(r).map((t=>i.createElement(Ba,{key:t,nodeId:e,pinId:t})));return i.createElement(i.Fragment,null,o)})),Sa=i.memo((function(){const{circuitId:e}=Vs(),t=os((t=>Zn(t,e))).map((e=>i.createElement(Ma,{key:e,nodeId:e})));return i.createElement("g",{id:"node-pins-layer"},t)})),Da=i.memo((function(){const e=os(yi),t=os(gi),n=os(hi);return"wire"==e&&t&&n?i.createElement("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"black",strokeWidth:1}):null})),La=({width:e,height:t,onContextMenu:n})=>{const r=(0,c.I0)(),o=(0,c.v9)(ys),s=i.useRef(null),a=i.useRef(null),l=i.useCallback((()=>{var e;null===(e=s.current)||void 0===e||e.focus()}),[]),d=i.useCallback((()=>{r({type:xt})}),[r]),u=i.useCallback((e=>{e.defaultPrevented||(e.preventDefault(),n(e))}),[n]),[{isDragging:p},m]=(0,ae.L)({accept:Js,collect:e=>({isDragging:e.isOver()})});return i.createElement("svg",{tabIndex:-1,ref:e=>{s.current=e,m(e)},width:e,height:t,onMouseDown:l,onMouseLeave:d,onContextMenu:u,className:"circuit-field-svg--1lQh_"},i.createElement(oa,null),i.createElement("g",{ref:a,"transform-origin":"0 0",transform:`scale(${o})`},i.createElement(Zs,{svgRef:s,scalerRef:a},i.createElement(ra,null),i.createElement(ba,null),i.createElement(ja,null),i.createElement(Sa,null),i.createElement(Da,null),i.createElement(Qs,null),i.createElement(na,null),p&&i.createElement($s,null))))},Ta=({className:e,circuitId:t,circuitNodePath:n})=>{const r=(0,c.I0)(),o=i.useRef(null),s=os(oc),{openContextMenu:a,renderContextMenu:l}=Cs(),{width:d,height:u}=se(o),p=os(ms),{width:m,height:y}=(0,g.nF)(p),f=os(ys),h=Math.max(d,m*f),I=Math.max(u,y*f),b=i.useCallback((e=>{var t;e.defaultPrevented||e.ctrlKey&&(r((t=e.deltaY>0?-1:1,{type:Pt,payload:{delta:t}})),e.preventDefault(),e.stopPropagation())}),[r]);var v,E,k,O;return v=o,E="wheel",k=b,O={passive:!1},i.useEffect((()=>{if(!v.current)return;const e=v.current;return e.addEventListener(E,k,O),()=>{e.removeEventListener(E,k,O)}}),[E,k,v,O]),i.createElement(Gs,{circuitId:t,circuitNodePath:n},i.createElement("div",{className:j("circuit-field","circuit-field--3PQBN",s&&"simulator-active",e)},i.createElement("div",{className:"circuit-field-scrollarea--vyu82"},i.createElement("div",{ref:o,style:{width:"100%",height:"100%"}},i.createElement(La,{width:h,height:I,onContextMenu:a}))),l(i.createElement(Ts,null))))};var Ja=n(1474);const Ra="icon--3Vly6",za=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:j(Ra,e.className)}),i.createElement("path",{d:"M4,4 L12,12 M4,12 L12,4"})),Wa=({title:e,className:t,children:n})=>{const r=_(),{closeWindow:o}=Q(),c=i.useCallback((()=>{o(r)}),[o,r]),[,s]=(0,Ja.c)({item:de(r)});return i.createElement(pe,{className:K["tessel-window"]},i.createElement("div",{ref:s,className:K["tessel-window-titlebar"]},i.createElement("div",{className:K["tessel-window-title"]},e),i.createElement("div",{className:K["tessel-window-controls"]},i.createElement(za,{className:K["tessel-window-controls-close"],onClick:c}))),i.createElement("div",{className:j(K["tessel-window-content"],t)},n))},Aa="keymap:CircuitEditor/SimStep",Ua="keymap:CircuitEditor/SimFastForward",Za="keymap:CircuitEditor/SelectAll",Ha="keymap:CircuitEditor/Copy",Fa="keymap:CircuitEditor/Paste",Ka="keymap:CircuitEditor/Delete",Va="keymap:CircuitEditor/Undo",Ga="keymap:CircuitEditor/Redo",qa={[Aa]:"space",[Ua]:"shift+space",[Za]:hn+"+a",[Ha]:hn+"+c",[Fa]:hn+"+v",[Ka]:["backspace","del"],[Va]:hn+"+z",[Ga]:[hn+"+y",hn+"+shift+z"]};const _a=e=>{var{children:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["children"]);return i.createElement("div",Object.assign({},n,{className:S}),t)},$a=({value:e,label:t,isSelected:n,onItemSelected:r})=>{const o=i.useCallback((t=>{t.defaultPrevented||(t.preventDefault(),r(e))}),[r,e]);return i.createElement("li",{className:j("selection-list-item","selection-list-item--errDr",n&&"selection-list-item--selected--3MkqB"),onClick:o},i.createElement("div",{className:j("selection-list-item-content--321YU",ca)},t))},Xa=({className:e,items:t,onItemSelected:n})=>i.createElement("ul",{className:j("selection-list","selection-list--3yujH",e)},t.map((e=>i.createElement($a,Object.assign({key:e.value},e,{onItemSelected:n}))))),Ya=({circuitId:e})=>{const t=(0,c.I0)(),n=os((t=>$n(t,e))),[r,o]=i.useState(!1),{openContextMenu:s,renderContextMenu:a}=Cs(),l=i.useCallback((()=>{e!==m&&o(!0)}),[e]),d=i.useCallback((()=>{o(!1)}),[]),u=i.useCallback((n=>{t(((e,t)=>({type:Re,payload:{circuitId:e,circuitName:t}}))(e,n)),o(!1)}),[e,t]),p=i.useCallback((n=>{n.preventDefault(),t(bc(e,null,{newWindow:!0}))}),[e,t]),y=i.useCallback((n=>{n.preventDefault(),t((e=>({type:Te,payload:{circuitId:e}}))(e))}),[t,e]),f=i.useCallback((e=>{e.preventDefault(),e.stopPropagation(),s(e)}),[s]);return i.createElement("div",{style:{width:"100%"},onContextMenu:f,onDoubleClick:l},i.createElement(la,{defaultValue:n,isEditing:r,onRequestEdit:l,onCommit:u,onCancel:d}),a(i.createElement(Ms,null,e!==m&&i.createElement(i.Fragment,null,i.createElement(Ss,{onClick:l},"Rename Circuit"),i.createElement(Ds,null)),i.createElement(Ss,{onClick:p},"Open in New Window"),e!==m&&i.createElement(i.Fragment,null,i.createElement(Ds,null),i.createElement(Ss,{onClick:y},"Delete Circuit")))))},Qa=()=>{const e=(0,c.I0)(),t=i.useCallback((()=>{e(De())}),[e]);return i.createElement(Ms,null,i.createElement(Ss,{onClick:t},"New Circuit"))},el=({isOpen:e,anchorEl:t,placement:n="auto",children:o})=>{const[c,s]=i.useState(null),[a,l]=i.useState(null),{attributes:d,styles:u}=(0,Is.D)(e?t:null,c,{placement:n,modifiers:[{name:"arrow",options:{element:a}},{name:"offset",options:{offset:[0,8]}}]});return e?(0,r.createPortal)(i.createElement("div",Object.assign({ref:s,className:"tooltip--2yxRI",style:u.popper,role:"tooltip"},d.popper),o,i.createElement("div",Object.assign({ref:l,"data-popper-arrow":!0,className:"tooltip-arrow--2mJMo",style:u.arrow},d.arrow))),document.body):null},tl={"input-output":"I/O","integrated-circuit":"Integrated Circuits",logic:"Logic"},nl=({category:e})=>{const t=os(ii).filter((t=>t.category===e)).filter((t=>t.category===e)).map((e=>i.createElement(il,{key:e.type,nodeType:e.type})));return i.createElement(i.Fragment,null,i.createElement("li",{className:"node-tray-category---Phmh"},tl[e]),t)},il=({nodeType:e})=>{const[t,n]=i.useState(null),r=os((t=>oi(t,e))),[o,c]=i.useState(!1),s=i.useCallback((e=>{e.preventDefault(),c(!0)}),[]),a=i.useCallback((e=>{e.target===t&&c(!1)}),[t]),[,l]=(0,Ja.c)({item:Rs(e)});let d,u=e,p="0 0 50 50";if(r){const{trayComponent:e,hitRect:t}=r.visual;if(e){const t=e;d=i.createElement(t,null)}else d=fa(void 0,[],void 0,r.visual),p=`${t.p1.x} ${t.p1.y} ${t.p2.x} ${t.p2.y}`;u=r.displayName}else d=i.createElement(rl,null);return i.createElement("li",{ref:e=>{n(e),l(e)},className:"node-tray-item--2_AyH",onClick:s,onMouseOut:a},i.createElement(el,{placement:"top",isOpen:o,anchorEl:t},"Click and drag to create a new circuit element."),i.createElement("span",{className:"node-tray-item-preview--2QFhF"},i.createElement("svg",{width:30,height:30,viewBox:p},d)),i.createElement("span",{className:ca},u))},rl=()=>i.createElement("rect",{fill:"red",x1:0,y1:0,x2:50,y2:50}),ol={"node-tray":()=>{const e=os(ii),t=er()(e.map((e=>e.category)));return i.createElement(Wa,{title:"Elements",className:"node-tray--1uIvj"},i.createElement("ul",{className:"node-tray-elements--KiJGM"},t.map((e=>i.createElement(nl,{key:e,category:e})))))},"circuit-field":({circuitId:e,circuitNodeIdPath:t})=>{var n;const r=(0,c.I0)(),o=_(),s=null!==(n=os((t=>$n(t,e))))&&void 0!==n?n:"<Circuit Missing>",a=i.useMemo((()=>{function t(e){return t=>{if(t){if(t.defaultPrevented)return;t.preventDefault()}r(e)}}var n;return{[Aa]:t(wt(1)),[Ua]:t({type:Uo}),[Za]:t(_r(e)),[Ha]:t({type:yo}),[Fa]:t((n=e,{type:it,payload:{targetCircuitId:n}})),[Ka]:t(Ve()),[Va]:t(st()),[Ga]:t(dt())}}),[r,e]),l=i.useCallback((()=>{r((e=>({type:gc,payload:{tesselPath:e}}))(o))}),[r,o]);return e&&t?i.createElement(Wa,{title:s+" [Circuit]"},i.createElement(ss.HotKeys,{keyMap:qa,handlers:a,component:_a},i.createElement("div",{onFocus:l,className:j("circuit-field-view",S,D["flex-column"])},i.createElement(us,{circuitId:e,circuitNodeIdPath:t}),i.createElement(Ta,{className:j(S,D["flexitem-shrink"]),circuitId:e,circuitNodePath:t})))):i.createElement("div",null,"Misconfigured circuit field window. Window must have a circuit id and circuit node id path.")},"circuits-list":()=>{const e=(0,c.I0)(),t=os(_n),{openContextMenu:n,renderContextMenu:r}=Cs(),o=i.useCallback((t=>{e(bc(t))}),[e]),s=i.useCallback((e=>{e.preventDefault(),n(e)}),[n]),a=i.useMemo((()=>Object.keys(t).map((e=>({value:e,label:i.createElement(Ya,{circuitId:e})})))),[t]);return i.createElement(Wa,{title:"Circuits",className:j("circuitstree--1eZ0Q")},i.createElement("div",{className:S,onContextMenu:s},i.createElement(Xa,{className:S,items:a,onItemSelected:o})),r(i.createElement(Qa,null)))}};function cl(e){const t=ol[e.windowId];return t?i.createElement(t,Object.assign({},e.windowProps)):null}const sl=()=>{const e=(0,c.I0)(),t=os(cs),n=i.useCallback((t=>{e((e=>({type:yc,payload:{layout:e}}))(t))}),[e]);return i.createElement(fe,{className:j("circuit-editor",S),rootItem:t,onLayoutChange:n,renderWindow:cl})},al=({location:e})=>{const t=(0,c.I0)(),[n,r]=i.useState(!1);return i.useEffect((()=>{let n;try{n=new URLSearchParams(e.search)}catch(e){return void r(!0)}const i=n.get("data");i?t((e=>({type:Tc,payload:{data:e}}))(i)):r(!0)}),[]),n?i.createElement("div",null,"Failed to import project"):i.createElement("div",null,"Importing Project...")},ll=()=>i.createElement(s.rs,null,i.createElement(s.AW,{exact:!0,path:"/",component:sl}),i.createElement(s.AW,{exact:!0,path:"/import",component:al})),dl=({content:e,placement:t,children:n})=>{const r=i.useRef(null),[o,c]=i.useState(!1),s=i.useCallback((()=>{c(!0)}),[]),a=i.useCallback((()=>{c(!1)}),[]);return i.createElement(hs,{value:a},i.createElement("div",{ref:r,onClick:s},n),i.createElement(Os,{anchorEl:r.current,isOpen:o,placement:t,onRequestClose:a},o&&e))};function ul(e,...t){const n=(0,c.I0)();return i.useCallback(((...i)=>{const r=e(...t,...i);r&&n(r)}),[n,e,...t])}function pl(e,...t){const n=(0,c.I0)();return i.useCallback((i=>{if(i.defaultPrevented)return;i.preventDefault();const r=e(...t);r&&n(r)}),[n,e,...t])}const ml=()=>{const e=ul(mt),t=ul(Ur),n=ul(Uc),r=ul(At);return i.createElement(Ms,null,i.createElement(Ss,{onClick:e},"New"),i.createElement(Ds,null),i.createElement(Ss,{onClick:n},"Load"),i.createElement(Ss,{onClick:t},"Save"),i.createElement(Ds,null),i.createElement(Ss,{onClick:r},"Export Link"))},yl=e=>e.undo.undoStack.length>0,fl=e=>e.undo.redoStack.length>0,gl=()=>{const e=os(yl),t=ul(st),n=os(fl),r=ul(dt);return i.createElement(Ms,null,i.createElement(Ss,{disabled:!e,secondary:hn+"+z",onClick:t},"Undo"),i.createElement(Ss,{disabled:!n,secondary:hn+"+shift+z",onClick:r},"Redo"))},hl=({className:e,value:t,onChange:n,children:r})=>i.createElement("label",{className:e},i.createElement("span",{className:"checkbox-span--1EWGs"},i.createElement("input",{type:"checkbox",checked:t,onChange:n})),r),Il=({disabled:e,secondary:t,value:n,onChange:r,children:o})=>i.createElement("li",{className:j(xs,e&&js)},i.createElement(hl,{className:ws,value:n,onChange:r},i.createElement("span",{className:Ps},o),t&&i.createElement("span",{className:Bs},t))),bl=({disabled:e,secondary:t,content:n,children:r})=>i.createElement("li",{className:j(xs,e&&js)},i.createElement(dl,{placement:"right-start",content:n},i.createElement("a",{className:ws},i.createElement("span",{className:Ps},r),t&&i.createElement("span",{className:Bs},t),i.createElement("svg",{className:"menu-item-icon--JTlha",width:12,height:12},i.createElement("path",{d:"M0,0 l6,6 l-6,6 z",fill:"black",strokeWidth:0}))))),vl=()=>{const e=os(sa),t=ul(Cc,"all"),n=ul(Cc,"named-only"),r=ul(Cc,"none");return i.createElement(Ms,null,i.createElement(Il,{value:"all"===e,onChange:t},"Always visible"),i.createElement(Il,{value:"named-only"===e,onChange:n},"Named Items Only"),i.createElement(Il,{value:"none"===e,onChange:r},"Hidden"))},El=()=>{const e=ul(kc);return i.createElement(Ms,null,i.createElement(bl,{content:i.createElement(vl,null)},"Element Names"),i.createElement(Ds,null),i.createElement(Ss,{onClick:e},"Reset View"))},kl=ho((e=>e.lastTickProcessingTimeMs)),Ol=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:j(Ra,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z"})),Nl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:j(Ra,e.className)}),i.createElement("path",{d:"M1,1 L15,1 L15,15 L1,15 z"})),Cl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:j(Ra,e.className)}),i.createElement("path",{d:"M2.5,1 L6.5,1 L6.5,15 L2.5,15 z M9.5,1 L13.5,1 L13.5,15 L9.5,15 z"})),xl=e=>i.createElement("svg",Object.assign({width:16,height:16},e,{className:j(Ra,e.className)}),i.createElement("path",{d:"M3,0 L13,8 L3,16 z M11,1 l2,0 l0,14 l-2,0 z"})),jl="button--1Syge",wl=()=>{const e=os(oc),t=os(sc),n=os(kl),r=pl(Fo),o=pl(Xo),c=pl(rc,"toggle"),s=pl(qo),a=i.useCallback((e=>{e.preventDefault()}),[]);return i.createElement("span",null,e&&i.createElement("span",{className:"simrate--1LNMp"},n.toFixed(2)," ms"),e?i.createElement(Nl,{id:"simctrl-stop",className:j(jl,"button-stop--264bH"),onClick:o,onMouseDown:a}):i.createElement(Ol,{id:"simctrl-run",className:j(jl,"button-play--3gVDD"),onClick:r,onMouseDown:a}),i.createElement(xl,{id:"simctrl-step",className:j(jl,"button-step--WUfNJ"),onClick:s,onMouseDown:a}),i.createElement(Cl,{id:"simctrl-pause",className:j(jl,"button-pause--YWEL8",!e&&"button--disabled--2BVJb",t&&"selected--QetqX"),onClick:c,onMouseDown:a}))},Pl=({className:e})=>{const t=os(Kc),n=os(Vc);return i.createElement("div",{className:j("titlebar--3-TCE",e)},i.createElement("span",{className:"titlebar-heading--3RAl1"},"Discrelog"),i.createElement("div",{className:"titlebar-divider--Wl_27"}),i.createElement(dl,{content:i.createElement(ml,null),placement:"bottom-start"},i.createElement(as,null,"File")),i.createElement(dl,{content:i.createElement(gl,null),placement:"bottom-start"},i.createElement(as,null,"Edit")),i.createElement(dl,{content:i.createElement(El,null),placement:"bottom-start"},i.createElement(as,null,"View")),i.createElement("div",{className:"titlebar-projectname--1vIUJ"},t,n&&"*"),i.createElement("div",{className:"titlebar-controls--1R_l6"},i.createElement(wl,null)))},Bl=mr((e=>e.dialogType)),Ml=mr((e=>e.data));var Sl=n(227),Dl=n(1074);const Ll=({className:e,isOpen:t,onRequestClose:n,children:o})=>t?(0,r.createPortal)(i.createElement("div",{className:j("modal","modal--25LBN")},i.createElement(Sl.Y,{onClickOutside:n,onEscapeKey:n},i.createElement("div",{className:j("modal-content--1H0T_",e)},i.createElement(Dl.Z,{className:S},o)))),document.body):null,Tl=({isOpen:e,acceptText:t,cancelText:n,onAccept:r,onCancel:o,footer:c,children:s})=>i.createElement(Ll,{className:"dialog--1eQi6",isOpen:e,onRequestClose:o},i.createElement("div",null,s),i.createElement("div",{className:"dialog-footer--2hYdr"},c,o&&i.createElement(as,{onClick:o},null!=n?n:"Cancel"),r&&i.createElement(as,{onClick:r},null!=t?t:"Accept"))),Jl=()=>{const e=ul(Jt),t=os(Ml),n=null==t?void 0:t.projectLink,r=i.useCallback((()=>{n&&navigator.clipboard.writeText(n).catch((()=>{}))}),[n]);if(!n)return null;const o=i.createElement(as,{onClick:r},"Copy to Clipboard");return i.createElement(Tl,{isOpen:!0,cancelText:"Close",onCancel:e,footer:o},i.createElement("div",{className:"export-link-dialog-link-container--Zas2L"},i.createElement("code",{className:"export-link-dialog-link--7r7uE"},n)))},Rl=()=>{switch(os(Bl)){default:return null;case"export-project-link":return i.createElement(Jl,null)}},zl=document.getElementById("root");r.render(i.createElement(a.W,{backend:l.PD},i.createElement(s.F0,{history:d},i.createElement(c.zt,{store:rs},i.createElement((()=>i.createElement("div",{className:j(S,D["flex-column"])},i.createElement(Pl,{className:D["flexitem-fix"]}),i.createElement("div",{className:j(S,D["flexitem-shrink"])},i.createElement(ll,null)),i.createElement(Rl,null))),null)))),zl)},4313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-momentary",category:"input-output",displayName:"Momentary Switch",elementProduction:"input-momentary",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-momentary"},pins:{OUT:{direction:"output",x:45,y:25}}}},9175:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={type:"interaction-toggle",category:"input-output",displayName:"Toggle Switch",elementProduction:"input-toggle",visual:{hitRect:{p1:{x:5,y:5},p2:{x:45,y:45}},component:"interaction-toggle"},pins:{OUT:{direction:"output",x:45,y:25}}}},4646:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30z",a={type:"logic-and",category:"logic",displayName:"AND",elementProduction:"logic-and",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M31 15H5M32 35H5"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M30 5V45H50.47619c11.267908 0 20-9.000045 20-20s-8.732091-20-20-20H30zm2.857143 2.857143H50.47619c9.760663 0 16.666667 7.639955 16.666667 17.142857 0 9.502902-7.382195 17.142857-17.142857 17.142857H32.857143V7.857143z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2140:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z",a={type:"logic-buffer",category:"logic",displayName:"Buffer",elementProduction:"logic-buffer",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 72,25 L 95.085706,25"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"black",strokeWidth:"2",d:"M 29.043478,25 L 5.0434781,25"}),i.createElement("path",{className:"node-select-highlight--fill",stroke:"none",fill:"black",d:"M 28.96875,2.59375 L 28.96875,5 L 28.96875,45 L 28.96875,47.40625 L 31.125,46.34375 L 72.15625,26.34375 L 75,25 L 72.15625,23.65625 L 31.125,3.65625 L 28.96875,2.59375 z M 31.96875,7.40625 L 68.09375,25 L 31.96875,42.59375 L 31.96875,7.40625 z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},6467:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-nand",category:"logic",displayName:"NAND",elementProduction:"logic-nand",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",{transform:"translate(-10,0)"},i.createElement("path",{d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z",stroke:"none",fill:"transparent"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 88.11111,25 C 101.62222,25 105,25 105,25"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 41,15 L 15,15"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 42,35 L 15,35"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M 40,5 L 40,6.4285714 L 40,43.571429 L 40,45 L 41.428571,45 L 60.47619,45 C 71.744098,45 80.47619,35.999955 80.47619,25 C 80.47619,14.000045 71.744099,5.0000002 60.47619,5 C 60.47619,5 60.47619,5 41.428571,5 L 40,5 z M 42.857143,7.8571429 C 50.834264,7.8571429 55.918368,7.8571429 58.095238,7.8571429 C 59.285714,7.8571429 59.880952,7.8571429 60.178571,7.8571429 C 60.327381,7.8571429 60.409227,7.8571429 60.446429,7.8571429 C 60.465029,7.8571429 60.471543,7.8571429 60.47619,7.8571429 C 70.236853,7.857143 77.142857,15.497098 77.142857,25 C 77.142857,34.502902 69.760662,42.142857 60,42.142857 L 42.857143,42.142857 L 42.857143,7.8571429 z"}),i.createElement("path",{className:"node-select-highlight--stroke",strokeWidth:"2",stroke:"black",fill:"none",d:"M 79,25 A 4,4 0 1 1 71,25 A 4,4 0 1 1 79,25 z",transform:"translate(9,0)"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},8476:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-nor",category:"logic",displayName:"NOR",elementProduction:"logic-nor",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25h16M31 15H5M32 35H5"}),i.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},3980:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(7294);const r={type:"logic-not",category:"logic",displayName:"NOT",elementProduction:"logic-not",visual:(0,n(5471).l)({p1:{x:24,y:5},p2:{x:80,y:45}},i.createElement("g",null,i.createElement("path",{fill:"transparent",stroke:"none",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M79.15691 25H95M29.043478 25h-24"}),i.createElement("path",{className:"node-select-highlight--fill",d:"M28.96875 2.59375v44.8125l2.15625-1.0625 41.03125-20v-2.6875l-41.03125-20-2.15625-1.0625zm3 4.8125L68.09375 25l-36.125 17.59375V7.40625z"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"3",d:"M79 25a4 4 0 1 1-8 0 4 4 0 1 1 8 0z"}))),pins:{IN:{direction:"input",x:0,y:25},OUT:{direction:"output",x:100,y:25}}}},9696:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375z",a={type:"logic-or",category:"logic",displayName:"OR",elementProduction:"logic-or",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M31 15H5M32 35H5"}),i.createElement("path",{className:"node-select-highlight--fill",fillRule:"evenodd",d:"M24.09375 5l2 2.4375S31.75 14.437549 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.408076.000001 7.689699.024514 13.625-2.40625s12.536536-7.343266 17.6875-16.875L71.25 25l1.3125-.71875C62.259387 5.21559 46.006574 5 41.25 5H24.09375zm5.875 3H41.25c4.684173 0 18.28685-.130207 27.96875 17C64.451964 33.429075 58.697469 37.68391 53.5 39.8125 48.139339 42.007924 43.658075 42.000001 41.25 42H30c1.873588-3.108434 4.75-9.04935 4.75-17 0-7.973354-2.908531-13.900185-4.78125-17z"}))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},2201:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375z",a={type:"logic-xor",category:"logic",displayName:"XOR",elementProduction:"logic-xor",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",fill:"none",stroke:"#000",strokeWidth:"2",d:"M70 25h25M30.38572 15H5M31.3621 35H5"}),i.createElement("g",{fillRule:"evenodd",className:"node-select-highlight--fill"},i.createElement("path",{d:"M24.25 42C22.65263 44.6444 22 45 22 45h-3.65625l2-2.4375S26 35.56245 26 25 20.34375 7.4375 20.34375 7.4375l-2-2.4375H22c.78125.9375 1.42188 1.65625 2.21875 3C26.09147 11.09981 29 17.02665 29 25c0 7.95065-2.8967 13.87942-4.75 17z"}),i.createElement("path",{d:"M24.09375 5l2 2.4375S31.75 14.43755 31.75 25s-5.65625 17.5625-5.65625 17.5625l-2 2.4375H41.25c2.40808 0 7.6897.02451 13.625-2.40625s12.53654-7.34327 17.6875-16.875L71.25 25l1.3125-.71875C62.25939 5.21559 46.00657 5 41.25 5H24.09375zm5.875 3H41.25c4.68417 0 18.28685-.1302 27.96875 17C64.45196 33.42907 58.69747 37.68391 53.5 39.8125 48.13934 42.00792 43.65808 42 41.25 42H30c1.87359-3.10843 4.75-9.04935 4.75-17 0-7.97335-2.90853-13.90019-4.78125-17z"})))),pins:{A:{direction:"input",x:0,y:14.5},B:{direction:"input",x:0,y:35},OUT:{direction:"output",x:100,y:25}}}},6015:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i=`M ${25-20}, 25\n    a 20,20 0 1,0 40,0\n    a 20,20 0 1,0 -40,0`;const r={type:"output-led",category:"input-output",displayName:"Indicator Light",elementProduction:"output-led",visual:(0,n(957).J)(i,{path:i,stroke:"black",strokeWidth:3,fill:e=>e.value?"lightgreen":"darkgreen"}),pins:{IN:{direction:"input",x:0,y:25}}}},5058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(957);const r=[15,0];function o(e,t){const n=t[0];let i=`M${3*n[0]+r[0]},${3*n[1]+r[1]}`;for(const e of t.slice(1)){const[t,n]=e;i+=`L${3*t+r[0]},${3*n+r[1]}`}return i+="z",{path:i,fill:t=>t[e]?"red":"gray",strokeWidth:0}}const c={type:"output-seg7",category:"input-output",displayName:"7-Segment Display",elementProduction:"output-seg7",visual:(0,i.J)("M15,0 V63 H45 V0 z",[o("A",[[1,1],[2,0],[8,0],[9,1],[8,2],[2,2]]),o("B",[[9,1],[10,2],[10,8],[9,9],[8,8],[8,2]]),o("C",[[9,9],[10,10],[10,16],[9,17],[8,16],[8,10]]),o("D",[[9,17],[8,18],[2,18],[1,17],[2,16],[8,16]]),o("E",[[1,17],[0,16],[0,10],[1,9],[2,10],[2,16]]),o("F",[[1,9],[0,8],[0,2],[1,1],[2,2],[2,8]]),o("G",[[1,9],[2,8],[8,8],[9,9],[8,10],[2,10]])]),pins:{A:{direction:"input",x:0,y:5},B:{direction:"input",x:0,y:15},C:{direction:"input",x:0,y:25},D:{direction:"input",x:0,y:35},E:{direction:"input",x:0,y:45},F:{direction:"input",x:0,y:55},G:{direction:"input",x:0,y:65}}}},3158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-high",category:"input-output",elementProduction:"pin-high",displayName:"High Pin",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h5",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M25,20 v10 M20,25 h10",fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:40,y:25}}}},7529:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),r=n(669),o=n.n(r),c=n(8370),s=n(784);const a="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",l={type:"pin-input",category:"input-output",displayName:"Input Pin",visual:(0,n(5471).l)((0,c.NG)(o()(a)),i.createElement("g",null,i.createElement("path",{d:a,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M35,25 h5",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:(0,s.x)(25,25,3,-45,225),fill:"none",stroke:"black",strokeWidth:2}))),pins:{OUT:{direction:"output",x:40,y:25}}}},4987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7294),r=n(669),o=n.n(r),c=n(8370);const s="M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0",a={type:"pin-output",category:"input-output",displayName:"Output Pin",visual:(0,n(5471).l)((0,c.NG)(o()(s)),i.createElement("g",null,i.createElement("path",{d:s,fill:"transparent",stroke:"none"}),i.createElement("path",{className:"node-select-highlight--stroke",d:"M15,25 a 10,10 0 1,0 20 0 a 10,10 0 1,0 -20,0 M15,25 h-5",stroke:"black",strokeWidth:2,fill:"none"}),i.createElement("circle",{className:"node-select-highlight--fill",cx:25,cy:25,r:3,fill:"black",stroke:"none"}))),pins:{IN:{direction:"input",x:10,y:25}}}},957:(e,t,n)=>{"use strict";n.d(t,{J:()=>u});var i=n(7294),r=n(9242),o=n(669),c=n.n(o),s=n(8370),a=n(1235);const l=({circuitNodeId:e,circuitNodePath:t,shapePath:n,hitPath:o,elementState:c})=>{const s=(0,r.I0)(),l=i.useCallback((n=>{e&&(n.defaultPrevented||(n.preventDefault(),s((0,a.zN)([...t||[],e]))))}),[e,s,t]),d=p(n,c).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"node-select-highlight--stroke node-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("g",{onClick:l},i.createElement("path",{d:o,fill:"transparent",stroke:"none"}),d)},d=({shapePath:e,hitRect:t})=>{const n=p(e,{}).map(((e,t)=>i.createElement("path",{key:t,d:e.path,className:"node-select-highlight--stroke node-select-highlight--fill",fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})));return i.createElement("svg",{width:50,height:50,viewBox:`${t.p1.x-5} ${t.p1.y-5} ${t.p2.x-t.p1.x+10} ${t.p2.y-t.p1.y+10}`},n)};function u(e,t){const n=(0,s.NG)(c()(e));return{trayComponent:()=>i.createElement(d,{shapePath:t,hitRect:n}),component:n=>i.createElement(l,Object.assign({shapePath:t,hitPath:e},n)),hitRect:n}}function p(e,t){return(Array.isArray(e)?e:[e]).map((e=>{if("string"==typeof e)return{path:e,fill:"black",stroke:"black",strokeWidth:2};const n="function"==typeof e.fill?e.fill(t||{}):e.fill,i="function"==typeof e.stroke?e.stroke(t||{}):e.stroke,r="function"==typeof e.strokeWidth?e.strokeWidth(t||{}):e.strokeWidth;return{path:e.path,fill:n,stroke:i,strokeWidth:r}}))}},5471:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var i=n(7294);function r(e,t){return{hitRect:e,trayComponent:()=>i.createElement("svg",{width:50,height:50,viewBox:`${e.p1.x-5} ${e.p1.y-5} ${e.p2.x-e.p1.x+10} ${e.p2.y-e.p1.y+10}`},t),component:()=>t}}},784:(e,t,n)=>{"use strict";function i(e,t,n,i,o){const c=r(e,t,n,o),s=r(e,t,n,i),a=o-i<=180?"0":"1";return["M",c.x,c.y,"A",n,n,0,a,0,s.x,s.y].join(" ")}function r(e,t,n,i){const r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}n.d(t,{x:()=>i})}},0,[[7355,1,956,874,90,14,80,744,845,105,699,730]]]);
//# sourceMappingURL=client.9089215bb63baa5370b2.bundle.js.map